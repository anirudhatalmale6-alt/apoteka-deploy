function pw(a,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const h in o)if(h!=="default"&&!(h in a)){const m=Object.getOwnPropertyDescriptor(o,h);m&&Object.defineProperty(a,h,m.get?m:{enumerable:!0,get:()=>o[h]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))o(h);new MutationObserver(h=>{for(const m of h)if(m.type==="childList")for(const E of m.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&o(E)}).observe(document,{childList:!0,subtree:!0});function n(h){const m={};return h.integrity&&(m.integrity=h.integrity),h.referrerPolicy&&(m.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?m.credentials="include":h.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(h){if(h.ep)return;h.ep=!0;const m=n(h);fetch(h.href,m)}})();var Dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yw(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var N1={exports:{}},kc={};var S2;function _w(){if(S2)return kc;S2=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,h,m){var E=null;if(m!==void 0&&(E=""+m),h.key!==void 0&&(E=""+h.key),"key"in h){m={};for(var v in h)v!=="key"&&(m[v]=h[v])}else m=h;return h=m.ref,{$$typeof:a,type:o,key:E,ref:h!==void 0?h:null,props:m}}return kc.Fragment=e,kc.jsx=n,kc.jsxs=n,kc}var b2;function Ew(){return b2||(b2=1,N1.exports=_w()),N1.exports}var H=Ew(),O1={exports:{}},dt={};var I2;function xw(){if(I2)return dt;I2=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),E=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),G=Symbol.iterator;function te(q){return q===null||typeof q!="object"?null:(q=G&&q[G]||q["@@iterator"],typeof q=="function"?q:null)}var Ee={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},me=Object.assign,ye={};function De(q,$,Ce){this.props=q,this.context=$,this.refs=ye,this.updater=Ce||Ee}De.prototype.isReactComponent={},De.prototype.setState=function(q,$){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,$,"setState")},De.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function Le(){}Le.prototype=De.prototype;function pe(q,$,Ce){this.props=q,this.context=$,this.refs=ye,this.updater=Ce||Ee}var Ue=pe.prototype=new Le;Ue.constructor=pe,me(Ue,De.prototype),Ue.isPureReactComponent=!0;var nt=Array.isArray;function Ve(){}var V={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function B(q,$,Ce){var Be=Ce.ref;return{$$typeof:a,type:q,key:$,ref:Be!==void 0?Be:null,props:Ce}}function Z(q,$){return B(q.type,$,q.props)}function W(q){return typeof q=="object"&&q!==null&&q.$$typeof===a}function X(q){var $={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(Ce){return $[Ce]})}var P=/\/+/g;function Ae(q,$){return typeof q=="object"&&q!==null&&q.key!=null?X(""+q.key):$.toString(36)}function ee(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(Ve,Ve):(q.status="pending",q.then(function($){q.status==="pending"&&(q.status="fulfilled",q.value=$)},function($){q.status==="pending"&&(q.status="rejected",q.reason=$)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function ie(q,$,Ce,Be,et){var ke=typeof q;(ke==="undefined"||ke==="boolean")&&(q=null);var At=!1;if(q===null)At=!0;else switch(ke){case"bigint":case"string":case"number":At=!0;break;case"object":switch(q.$$typeof){case a:case e:At=!0;break;case D:return At=q._init,ie(At(q._payload),$,Ce,Be,et)}}if(At)return et=et(q),At=Be===""?"."+Ae(q,0):Be,nt(et)?(Ce="",At!=null&&(Ce=At.replace(P,"$&/")+"/"),ie(et,$,Ce,"",function(fr){return fr})):et!=null&&(W(et)&&(et=Z(et,Ce+(et.key==null||q&&q.key===et.key?"":(""+et.key).replace(P,"$&/")+"/")+At)),$.push(et)),1;At=0;var wt=Be===""?".":Be+":";if(nt(q))for(var Zt=0;Zt<q.length;Zt++)Be=q[Zt],ke=wt+Ae(Be,Zt),At+=ie(Be,$,Ce,ke,et);else if(Zt=te(q),typeof Zt=="function")for(q=Zt.call(q),Zt=0;!(Be=q.next()).done;)Be=Be.value,ke=wt+Ae(Be,Zt++),At+=ie(Be,$,Ce,ke,et);else if(ke==="object"){if(typeof q.then=="function")return ie(ee(q),$,Ce,Be,et);throw $=String(q),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return At}function ae(q,$,Ce){if(q==null)return q;var Be=[],et=0;return ie(q,Be,"","",function(ke){return $.call(Ce,ke,et++)}),Be}function Re(q){if(q._status===-1){var $=q._result;$=$(),$.then(function(Ce){(q._status===0||q._status===-1)&&(q._status=1,q._result=Ce)},function(Ce){(q._status===0||q._status===-1)&&(q._status=2,q._result=Ce)}),q._status===-1&&(q._status=0,q._result=$)}if(q._status===1)return q._result.default;throw q._result}var Fe=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Ie={map:ae,forEach:function(q,$,Ce){ae(q,function(){$.apply(this,arguments)},Ce)},count:function(q){var $=0;return ae(q,function(){$++}),$},toArray:function(q){return ae(q,function($){return $})||[]},only:function(q){if(!W(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return dt.Activity=M,dt.Children=Ie,dt.Component=De,dt.Fragment=n,dt.Profiler=h,dt.PureComponent=pe,dt.StrictMode=o,dt.Suspense=C,dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,dt.__COMPILER_RUNTIME={__proto__:null,c:function(q){return V.H.useMemoCache(q)}},dt.cache=function(q){return function(){return q.apply(null,arguments)}},dt.cacheSignal=function(){return null},dt.cloneElement=function(q,$,Ce){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var Be=me({},q.props),et=q.key;if($!=null)for(ke in $.key!==void 0&&(et=""+$.key),$)!F.call($,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&$.ref===void 0||(Be[ke]=$[ke]);var ke=arguments.length-2;if(ke===1)Be.children=Ce;else if(1<ke){for(var At=Array(ke),wt=0;wt<ke;wt++)At[wt]=arguments[wt+2];Be.children=At}return B(q.type,et,Be)},dt.createContext=function(q){return q={$$typeof:E,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:m,_context:q},q},dt.createElement=function(q,$,Ce){var Be,et={},ke=null;if($!=null)for(Be in $.key!==void 0&&(ke=""+$.key),$)F.call($,Be)&&Be!=="key"&&Be!=="__self"&&Be!=="__source"&&(et[Be]=$[Be]);var At=arguments.length-2;if(At===1)et.children=Ce;else if(1<At){for(var wt=Array(At),Zt=0;Zt<At;Zt++)wt[Zt]=arguments[Zt+2];et.children=wt}if(q&&q.defaultProps)for(Be in At=q.defaultProps,At)et[Be]===void 0&&(et[Be]=At[Be]);return B(q,ke,et)},dt.createRef=function(){return{current:null}},dt.forwardRef=function(q){return{$$typeof:v,render:q}},dt.isValidElement=W,dt.lazy=function(q){return{$$typeof:D,_payload:{_status:-1,_result:q},_init:Re}},dt.memo=function(q,$){return{$$typeof:w,type:q,compare:$===void 0?null:$}},dt.startTransition=function(q){var $=V.T,Ce={};V.T=Ce;try{var Be=q(),et=V.S;et!==null&&et(Ce,Be),typeof Be=="object"&&Be!==null&&typeof Be.then=="function"&&Be.then(Ve,Fe)}catch(ke){Fe(ke)}finally{$!==null&&Ce.types!==null&&($.types=Ce.types),V.T=$}},dt.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},dt.use=function(q){return V.H.use(q)},dt.useActionState=function(q,$,Ce){return V.H.useActionState(q,$,Ce)},dt.useCallback=function(q,$){return V.H.useCallback(q,$)},dt.useContext=function(q){return V.H.useContext(q)},dt.useDebugValue=function(){},dt.useDeferredValue=function(q,$){return V.H.useDeferredValue(q,$)},dt.useEffect=function(q,$){return V.H.useEffect(q,$)},dt.useEffectEvent=function(q){return V.H.useEffectEvent(q)},dt.useId=function(){return V.H.useId()},dt.useImperativeHandle=function(q,$,Ce){return V.H.useImperativeHandle(q,$,Ce)},dt.useInsertionEffect=function(q,$){return V.H.useInsertionEffect(q,$)},dt.useLayoutEffect=function(q,$){return V.H.useLayoutEffect(q,$)},dt.useMemo=function(q,$){return V.H.useMemo(q,$)},dt.useOptimistic=function(q,$){return V.H.useOptimistic(q,$)},dt.useReducer=function(q,$,Ce){return V.H.useReducer(q,$,Ce)},dt.useRef=function(q){return V.H.useRef(q)},dt.useState=function(q){return V.H.useState(q)},dt.useSyncExternalStore=function(q,$,Ce){return V.H.useSyncExternalStore(q,$,Ce)},dt.useTransition=function(){return V.H.useTransition()},dt.version="19.2.3",dt}var R2;function S0(){return R2||(R2=1,O1.exports=xw()),O1.exports}var We=S0(),D1={exports:{}},Bc={},M1={exports:{}},L1={};var N2;function Aw(){return N2||(N2=1,(function(a){function e(ie,ae){var Re=ie.length;ie.push(ae);e:for(;0<Re;){var Fe=Re-1>>>1,Ie=ie[Fe];if(0<h(Ie,ae))ie[Fe]=ae,ie[Re]=Ie,Re=Fe;else break e}}function n(ie){return ie.length===0?null:ie[0]}function o(ie){if(ie.length===0)return null;var ae=ie[0],Re=ie.pop();if(Re!==ae){ie[0]=Re;e:for(var Fe=0,Ie=ie.length,q=Ie>>>1;Fe<q;){var $=2*(Fe+1)-1,Ce=ie[$],Be=$+1,et=ie[Be];if(0>h(Ce,Re))Be<Ie&&0>h(et,Ce)?(ie[Fe]=et,ie[Be]=Re,Fe=Be):(ie[Fe]=Ce,ie[$]=Re,Fe=$);else if(Be<Ie&&0>h(et,Re))ie[Fe]=et,ie[Be]=Re,Fe=Be;else break e}}return ae}function h(ie,ae){var Re=ie.sortIndex-ae.sortIndex;return Re!==0?Re:ie.id-ae.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;a.unstable_now=function(){return m.now()}}else{var E=Date,v=E.now();a.unstable_now=function(){return E.now()-v}}var C=[],w=[],D=1,M=null,G=3,te=!1,Ee=!1,me=!1,ye=!1,De=typeof setTimeout=="function"?setTimeout:null,Le=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;function Ue(ie){for(var ae=n(w);ae!==null;){if(ae.callback===null)o(w);else if(ae.startTime<=ie)o(w),ae.sortIndex=ae.expirationTime,e(C,ae);else break;ae=n(w)}}function nt(ie){if(me=!1,Ue(ie),!Ee)if(n(C)!==null)Ee=!0,Ve||(Ve=!0,X());else{var ae=n(w);ae!==null&&ee(nt,ae.startTime-ie)}}var Ve=!1,V=-1,F=5,B=-1;function Z(){return ye?!0:!(a.unstable_now()-B<F)}function W(){if(ye=!1,Ve){var ie=a.unstable_now();B=ie;var ae=!0;try{e:{Ee=!1,me&&(me=!1,Le(V),V=-1),te=!0;var Re=G;try{t:{for(Ue(ie),M=n(C);M!==null&&!(M.expirationTime>ie&&Z());){var Fe=M.callback;if(typeof Fe=="function"){M.callback=null,G=M.priorityLevel;var Ie=Fe(M.expirationTime<=ie);if(ie=a.unstable_now(),typeof Ie=="function"){M.callback=Ie,Ue(ie),ae=!0;break t}M===n(C)&&o(C),Ue(ie)}else o(C);M=n(C)}if(M!==null)ae=!0;else{var q=n(w);q!==null&&ee(nt,q.startTime-ie),ae=!1}}break e}finally{M=null,G=Re,te=!1}ae=void 0}}finally{ae?X():Ve=!1}}}var X;if(typeof pe=="function")X=function(){pe(W)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,Ae=P.port2;P.port1.onmessage=W,X=function(){Ae.postMessage(null)}}else X=function(){De(W,0)};function ee(ie,ae){V=De(function(){ie(a.unstable_now())},ae)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(ie){ie.callback=null},a.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<ie?Math.floor(1e3/ie):5},a.unstable_getCurrentPriorityLevel=function(){return G},a.unstable_next=function(ie){switch(G){case 1:case 2:case 3:var ae=3;break;default:ae=G}var Re=G;G=ae;try{return ie()}finally{G=Re}},a.unstable_requestPaint=function(){ye=!0},a.unstable_runWithPriority=function(ie,ae){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var Re=G;G=ie;try{return ae()}finally{G=Re}},a.unstable_scheduleCallback=function(ie,ae,Re){var Fe=a.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?Fe+Re:Fe):Re=Fe,ie){case 1:var Ie=-1;break;case 2:Ie=250;break;case 5:Ie=1073741823;break;case 4:Ie=1e4;break;default:Ie=5e3}return Ie=Re+Ie,ie={id:D++,callback:ae,priorityLevel:ie,startTime:Re,expirationTime:Ie,sortIndex:-1},Re>Fe?(ie.sortIndex=Re,e(w,ie),n(C)===null&&ie===n(w)&&(me?(Le(V),V=-1):me=!0,ee(nt,Re-Fe))):(ie.sortIndex=Ie,e(C,ie),Ee||te||(Ee=!0,Ve||(Ve=!0,X()))),ie},a.unstable_shouldYield=Z,a.unstable_wrapCallback=function(ie){var ae=G;return function(){var Re=G;G=ae;try{return ie.apply(this,arguments)}finally{G=Re}}}})(L1)),L1}var O2;function ww(){return O2||(O2=1,M1.exports=Aw()),M1.exports}var P1={exports:{}},Vi={};var D2;function Tw(){if(D2)return Vi;D2=1;var a=S0();function e(C){var w="https://react.dev/errors/"+C;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var D=2;D<arguments.length;D++)w+="&args[]="+encodeURIComponent(arguments[D])}return"Minified React error #"+C+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},h=Symbol.for("react.portal");function m(C,w,D){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:M==null?null:""+M,children:C,containerInfo:w,implementation:D}}var E=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(C,w){if(C==="font")return"";if(typeof w=="string")return w==="use-credentials"?w:""}return Vi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Vi.createPortal=function(C,w){var D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)throw Error(e(299));return m(C,w,null,D)},Vi.flushSync=function(C){var w=E.T,D=o.p;try{if(E.T=null,o.p=2,C)return C()}finally{E.T=w,o.p=D,o.d.f()}},Vi.preconnect=function(C,w){typeof C=="string"&&(w?(w=w.crossOrigin,w=typeof w=="string"?w==="use-credentials"?w:"":void 0):w=null,o.d.C(C,w))},Vi.prefetchDNS=function(C){typeof C=="string"&&o.d.D(C)},Vi.preinit=function(C,w){if(typeof C=="string"&&w&&typeof w.as=="string"){var D=w.as,M=v(D,w.crossOrigin),G=typeof w.integrity=="string"?w.integrity:void 0,te=typeof w.fetchPriority=="string"?w.fetchPriority:void 0;D==="style"?o.d.S(C,typeof w.precedence=="string"?w.precedence:void 0,{crossOrigin:M,integrity:G,fetchPriority:te}):D==="script"&&o.d.X(C,{crossOrigin:M,integrity:G,fetchPriority:te,nonce:typeof w.nonce=="string"?w.nonce:void 0})}},Vi.preinitModule=function(C,w){if(typeof C=="string")if(typeof w=="object"&&w!==null){if(w.as==null||w.as==="script"){var D=v(w.as,w.crossOrigin);o.d.M(C,{crossOrigin:D,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0})}}else w==null&&o.d.M(C)},Vi.preload=function(C,w){if(typeof C=="string"&&typeof w=="object"&&w!==null&&typeof w.as=="string"){var D=w.as,M=v(D,w.crossOrigin);o.d.L(C,D,{crossOrigin:M,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0,type:typeof w.type=="string"?w.type:void 0,fetchPriority:typeof w.fetchPriority=="string"?w.fetchPriority:void 0,referrerPolicy:typeof w.referrerPolicy=="string"?w.referrerPolicy:void 0,imageSrcSet:typeof w.imageSrcSet=="string"?w.imageSrcSet:void 0,imageSizes:typeof w.imageSizes=="string"?w.imageSizes:void 0,media:typeof w.media=="string"?w.media:void 0})}},Vi.preloadModule=function(C,w){if(typeof C=="string")if(w){var D=v(w.as,w.crossOrigin);o.d.m(C,{as:typeof w.as=="string"&&w.as!=="script"?w.as:void 0,crossOrigin:D,integrity:typeof w.integrity=="string"?w.integrity:void 0})}else o.d.m(C)},Vi.requestFormReset=function(C){o.d.r(C)},Vi.unstable_batchedUpdates=function(C,w){return C(w)},Vi.useFormState=function(C,w,D){return E.H.useFormState(C,w,D)},Vi.useFormStatus=function(){return E.H.useHostTransitionStatus()},Vi.version="19.2.3",Vi}var M2;function vw(){if(M2)return P1.exports;M2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),P1.exports=Tw(),P1.exports}var L2;function Cw(){if(L2)return Bc;L2=1;var a=ww(),e=S0(),n=vw();function o(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var r=t,c=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(c=r.return),t=r.return;while(t)}return r.tag===3?c:null}function E(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function v(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function C(t){if(m(t)!==t)throw Error(o(188))}function w(t){var r=t.alternate;if(!r){if(r=m(t),r===null)throw Error(o(188));return r!==t?null:t}for(var c=t,d=r;;){var _=c.return;if(_===null)break;var A=_.alternate;if(A===null){if(d=_.return,d!==null){c=d;continue}break}if(_.child===A.child){for(A=_.child;A;){if(A===c)return C(_),t;if(A===d)return C(_),r;A=A.sibling}throw Error(o(188))}if(c.return!==d.return)c=_,d=A;else{for(var I=!1,k=_.child;k;){if(k===c){I=!0,c=_,d=A;break}if(k===d){I=!0,d=_,c=A;break}k=k.sibling}if(!I){for(k=A.child;k;){if(k===c){I=!0,c=A,d=_;break}if(k===d){I=!0,d=A,c=_;break}k=k.sibling}if(!I)throw Error(o(189))}}if(c.alternate!==d)throw Error(o(190))}if(c.tag!==3)throw Error(o(188));return c.stateNode.current===c?t:r}function D(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=D(t),r!==null)return r;t=t.sibling}return null}var M=Object.assign,G=Symbol.for("react.element"),te=Symbol.for("react.transitional.element"),Ee=Symbol.for("react.portal"),me=Symbol.for("react.fragment"),ye=Symbol.for("react.strict_mode"),De=Symbol.for("react.profiler"),Le=Symbol.for("react.consumer"),pe=Symbol.for("react.context"),Ue=Symbol.for("react.forward_ref"),nt=Symbol.for("react.suspense"),Ve=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function X(t){return t===null||typeof t!="object"?null:(t=W&&t[W]||t["@@iterator"],typeof t=="function"?t:null)}var P=Symbol.for("react.client.reference");function Ae(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===P?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case me:return"Fragment";case De:return"Profiler";case ye:return"StrictMode";case nt:return"Suspense";case Ve:return"SuspenseList";case B:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Ee:return"Portal";case pe:return t.displayName||"Context";case Le:return(t._context.displayName||"Context")+".Consumer";case Ue:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return r=t.displayName||null,r!==null?r:Ae(t.type)||"Memo";case F:r=t._payload,t=t._init;try{return Ae(t(r))}catch{}}return null}var ee=Array.isArray,ie=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Re={pending:!1,data:null,method:null,action:null},Fe=[],Ie=-1;function q(t){return{current:t}}function $(t){0>Ie||(t.current=Fe[Ie],Fe[Ie]=null,Ie--)}function Ce(t,r){Ie++,Fe[Ie]=t.current,t.current=r}var Be=q(null),et=q(null),ke=q(null),At=q(null);function wt(t,r){switch(Ce(ke,r),Ce(et,t),Ce(Be,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Kp(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Kp(r),t=Qp(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$(Be),Ce(Be,t)}function Zt(){$(Be),$(et),$(ke)}function fr(t){t.memoizedState!==null&&Ce(At,t);var r=Be.current,c=Qp(r,t.type);r!==c&&(Ce(et,t),Ce(Be,c))}function zn(t){et.current===t&&($(Be),$(et)),At.current===t&&($(At),Dc._currentValue=Re)}var Jr,Tt;function fi(t){if(Jr===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);Jr=r&&r[1]||"",Tt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jr+t+Tt}var Oi=!1;function dr(t,r){if(!t||Oi)return"";Oi=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(ge){var ue=ge}Reflect.construct(t,[],Te)}else{try{Te.call()}catch(ge){ue=ge}t.call(Te.prototype)}}else{try{throw Error()}catch(ge){ue=ge}(Te=t())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(ge){if(ge&&ue&&typeof ge.stack=="string")return[ge.stack,ue.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=d.DetermineComponentFrameRoot(),I=A[0],k=A[1];if(I&&k){var Y=I.split(`
`),ce=k.split(`
`);for(_=d=0;d<Y.length&&!Y[d].includes("DetermineComponentFrameRoot");)d++;for(;_<ce.length&&!ce[_].includes("DetermineComponentFrameRoot");)_++;if(d===Y.length||_===ce.length)for(d=Y.length-1,_=ce.length-1;1<=d&&0<=_&&Y[d]!==ce[_];)_--;for(;1<=d&&0<=_;d--,_--)if(Y[d]!==ce[_]){if(d!==1||_!==1)do if(d--,_--,0>_||Y[d]!==ce[_]){var _e=`
`+Y[d].replace(" at new "," at ");return t.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",t.displayName)),_e}while(1<=d&&0<=_);break}}}finally{Oi=!1,Error.prepareStackTrace=c}return(c=t?t.displayName||t.name:"")?fi(c):""}function Nn(t,r){switch(t.tag){case 26:case 27:case 5:return fi(t.type);case 16:return fi("Lazy");case 13:return t.child!==r&&r!==null?fi("Suspense Fallback"):fi("Suspense");case 19:return fi("SuspenseList");case 0:case 15:return dr(t.type,!1);case 11:return dr(t.type.render,!1);case 1:return dr(t.type,!0);case 31:return fi("Activity");default:return""}}function Gt(t){try{var r="",c=null;do r+=Nn(t,c),c=t,t=t.return;while(t);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var tt=Object.prototype.hasOwnProperty,wn=a.unstable_scheduleCallback,He=a.unstable_cancelCallback,ma=a.unstable_shouldYield,po=a.unstable_requestPaint,pn=a.unstable_now,$r=a.unstable_getCurrentPriorityLevel,di=a.unstable_ImmediatePriority,pa=a.unstable_UserBlockingPriority,gi=a.unstable_NormalPriority,ni=a.unstable_LowPriority,yo=a.unstable_IdlePriority,Ns=a.log,tl=a.unstable_setDisableYieldValue,qt=null,Ne=null;function Xt(t){if(typeof Ns=="function"&&tl(t),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(qt,t)}catch{}}var at=Math.clz32?Math.clz32:ya,cn=Math.log,Dr=Math.LN2;function ya(t){return t>>>=0,t===0?32:31-(cn(t)/Dr|0)|0}var gr=256,xt=262144,sn=4194304;function mr(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function pr(t,r,c){var d=t.pendingLanes;if(d===0)return 0;var _=0,A=t.suspendedLanes,I=t.pingedLanes;t=t.warmLanes;var k=d&134217727;return k!==0?(d=k&~A,d!==0?_=mr(d):(I&=k,I!==0?_=mr(I):c||(c=k&~t,c!==0&&(_=mr(c))))):(k=d&~A,k!==0?_=mr(k):I!==0?_=mr(I):c||(c=d&~t,c!==0&&(_=mr(c)))),_===0?0:r!==0&&r!==_&&(r&A)===0&&(A=_&-_,c=r&-r,A>=c||A===32&&(c&4194048)!==0)?r:_}function On(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function _o(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hn(){var t=sn;return sn<<=1,(sn&62914560)===0&&(sn=4194304),t}function mi(t){for(var r=[],c=0;31>c;c++)r.push(t);return r}function Mr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function $i(t,r,c,d,_,A){var I=t.pendingLanes;t.pendingLanes=c,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=c,t.entangledLanes&=c,t.errorRecoveryDisabledLanes&=c,t.shellSuspendCounter=0;var k=t.entanglements,Y=t.expirationTimes,ce=t.hiddenUpdates;for(c=I&~c;0<c;){var _e=31-at(c),Te=1<<_e;k[_e]=0,Y[_e]=-1;var ue=ce[_e];if(ue!==null)for(ce[_e]=null,_e=0;_e<ue.length;_e++){var ge=ue[_e];ge!==null&&(ge.lane&=-536870913)}c&=~Te}d!==0&&Os(t,d,0),A!==0&&_===0&&t.tag!==0&&(t.suspendedLanes|=A&~(I&~r))}function Os(t,r,c){t.pendingLanes|=r,t.suspendedLanes&=~r;var d=31-at(r);t.entangledLanes|=r,t.entanglements[d]=t.entanglements[d]|1073741824|c&261930}function yr(t,r){var c=t.entangledLanes|=r;for(t=t.entanglements;c;){var d=31-at(c),_=1<<d;_&r|t[d]&r&&(t[d]|=r),c&=~_}}function Ds(t,r){var c=r&-r;return c=(c&42)!==0?1:kn(c),(c&(t.suspendedLanes|r))!==0?0:c}function kn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function pi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function yi(){var t=ae.p;return t!==0?t:(t=window.event,t===void 0?32:E2(t.type))}function je(t,r){var c=ae.p;try{return ae.p=t,r()}finally{ae.p=c}}var oi=Math.random().toString(36).slice(2),Tn="__reactFiber$"+oi,zt="__reactProps$"+oi,_i="__reactContainer$"+oi,es="__reactEvents$"+oi,_a="__reactListeners$"+oi,Hi="__reactHandles$"+oi,nl="__reactResources$"+oi,Lr="__reactMarker$"+oi;function Ei(t){delete t[Tn],delete t[zt],delete t[es],delete t[_a],delete t[Hi]}function dn(t){var r=t[Tn];if(r)return r;for(var c=t.parentNode;c;){if(r=c[_i]||c[Tn]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(t=i2(t);t!==null;){if(c=t[Tn])return c;t=i2(t)}return r}t=c,c=t.parentNode}return null}function St(t){if(t=t[Tn]||t[_i]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Di(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(o(33))}function ii(t){var r=t[nl];return r||(r=t[nl]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function vn(t){t[Lr]=!0}var ve=new Set,Eo={};function Ht(t,r){xi(t,r),xi(t+"Capture",r)}function xi(t,r){for(Eo[t]=r,t=0;t<r.length;t++)ve.add(r[t])}var xo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ot={},bt={};function _t(t){return tt.call(bt,t)?!0:tt.call(Ot,t)?!1:xo.test(t)?bt[t]=!0:(Ot[t]=!0,!1)}function hs(t,r,c){if(_t(r))if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+c)}}function Ai(t,r,c){if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+c)}}function Cn(t,r,c,d){if(d===null)t.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(c);return}t.setAttributeNS(r,c,""+d)}}function vt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wi(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ao(t,r,c){var d=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var _=d.get,A=d.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return _.call(this)},set:function(I){c=""+I,A.call(this,I)}}),Object.defineProperty(t,r,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(I){c=""+I},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function rt(t){if(!t._valueTracker){var r=wi(t)?"checked":"value";t._valueTracker=Ao(t,r,""+t[r])}}function Mi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var c=r.getValue(),d="";return t&&(d=wi(t)?t.checked?"true":"false":t.value),t=d,t!==c?(r.setValue(t),!0):!1}function Pr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var er=/[\n"\\]/g;function pt(t){return t.replace(er,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Dn(t,r,c,d,_,A,I,k){t.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?t.type=I:t.removeAttribute("type"),r!=null?I==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+vt(r)):t.value!==""+vt(r)&&(t.value=""+vt(r)):I!=="submit"&&I!=="reset"||t.removeAttribute("value"),r!=null?j(t,I,vt(r)):c!=null?j(t,I,vt(c)):d!=null&&t.removeAttribute("value"),_==null&&A!=null&&(t.defaultChecked=!!A),_!=null&&(t.checked=_&&typeof _!="function"&&typeof _!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?t.name=""+vt(k):t.removeAttribute("name")}function oe(t,r,c,d,_,A,I,k){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(t.type=A),r!=null||c!=null){if(!(A!=="submit"&&A!=="reset"||r!=null)){rt(t);return}c=c!=null?""+vt(c):"",r=r!=null?""+vt(r):c,k||r===t.value||(t.value=r),t.defaultValue=r}d=d??_,d=typeof d!="function"&&typeof d!="symbol"&&!!d,t.checked=k?t.checked:!!d,t.defaultChecked=!!d,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(t.name=I),rt(t)}function j(t,r,c){r==="number"&&Pr(t.ownerDocument)===t||t.defaultValue===""+c||(t.defaultValue=""+c)}function Xe(t,r,c,d){if(t=t.options,r){r={};for(var _=0;_<c.length;_++)r["$"+c[_]]=!0;for(c=0;c<t.length;c++)_=r.hasOwnProperty("$"+t[c].value),t[c].selected!==_&&(t[c].selected=_),_&&d&&(t[c].defaultSelected=!0)}else{for(c=""+vt(c),r=null,_=0;_<t.length;_++){if(t[_].value===c){t[_].selected=!0,d&&(t[_].defaultSelected=!0);return}r!==null||t[_].disabled||(r=t[_])}r!==null&&(r.selected=!0)}}function Mn(t,r,c){if(r!=null&&(r=""+vt(r),r!==t.value&&(t.value=r),c==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=c!=null?""+vt(c):""}function Gn(t,r,c,d){if(r==null){if(d!=null){if(c!=null)throw Error(o(92));if(ee(d)){if(1<d.length)throw Error(o(93));d=d[0]}c=d}c==null&&(c=""),r=c}c=vt(r),t.defaultValue=c,d=t.textContent,d===c&&d!==""&&d!==null&&(t.value=d),rt(t)}function Li(t,r){if(r){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=r;return}}t.textContent=r}var Ea=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function li(t,r,c){var d=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":d?t.setProperty(r,c):typeof c!="number"||c===0||Ea.has(r)?r==="float"?t.cssFloat=c:t[r]=(""+c).trim():t[r]=c+"px"}function Qe(t,r,c){if(r!=null&&typeof r!="object")throw Error(o(62));if(t=t.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?t.setProperty(d,""):d==="float"?t.cssFloat="":t[d]="");for(var _ in r)d=r[_],r.hasOwnProperty(_)&&c[_]!==d&&li(t,_,d)}else for(var A in r)r.hasOwnProperty(A)&&li(t,A,r[A])}function Jt(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ds(t){return fs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Pi(){}var Ms=null;function tr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var un=null,ki=null;function Bi(t){var r=St(t);if(r&&(t=r.stateNode)){var c=t[zt]||null;e:switch(t=r.stateNode,r.type){case"input":if(Dn(t,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+pt(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var d=c[r];if(d!==t&&d.form===t.form){var _=d[zt]||null;if(!_)throw Error(o(90));Dn(d,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(r=0;r<c.length;r++)d=c[r],d.form===t.form&&Mi(d)}break e;case"textarea":Mn(t,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&Xe(t,!!c.multiple,r,!1)}}}var Ze=!1;function gs(t,r,c){if(Ze)return t(r,c);Ze=!0;try{var d=t(r);return d}finally{if(Ze=!1,(un!==null||ki!==null)&&(uh(),un&&(r=un,t=ki,ki=un=null,Bi(r),t)))for(r=0;r<t.length;r++)Bi(t[r])}}function it(t,r){var c=t.stateNode;if(c===null)return null;var d=c[zt]||null;if(d===null)return null;c=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(t=t.type,d=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!d;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(o(231,r,typeof c));return c}var $t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ls=!1;if($t)try{var Yt={};Object.defineProperty(Yt,"passive",{get:function(){Ls=!0}}),window.addEventListener("test",Yt,Yt),window.removeEventListener("test",Yt,Yt)}catch{Ls=!1}var _r=null,Er=null,Ps=null;function ts(){if(Ps)return Ps;var t,r=Er,c=r.length,d,_="value"in _r?_r.value:_r.textContent,A=_.length;for(t=0;t<c&&r[t]===_[t];t++);var I=c-t;for(d=1;d<=I&&r[c-d]===_[A-d];d++);return Ps=_.slice(t,1<d?1-d:void 0)}function xr(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Gi(){return!0}function nr(){return!1}function Ln(t){function r(c,d,_,A,I){this._reactName=c,this._targetInst=_,this.type=d,this.nativeEvent=A,this.target=I,this.currentTarget=null;for(var k in t)t.hasOwnProperty(k)&&(c=t[k],this[k]=c?c(A):A[k]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Gi:nr,this.isPropagationStopped=nr,this}return M(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),r}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yn=Ln(qi),ns=M({},qi,{view:0,detail:0}),xa=Ln(ns),is,Aa,kr,wa=M({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==kr&&(kr&&t.type==="mousemove"?(is=t.screenX-kr.screenX,Aa=t.screenY-kr.screenY):Aa=is=0,kr=t),is)},movementY:function(t){return"movementY"in t?t.movementY:Aa}}),Ft=Ln(wa),ms=M({},wa,{dataTransfer:0}),ks=Ln(ms),Ar=M({},ns,{relatedTarget:0}),Bs=Ln(Ar),he=M({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),ft=Ln(he),Sn=M({},qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vs=Ln(Sn),To=M({},qi,{data:0}),Br=Ln(To),il={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ta={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bn(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ta[t])?!!r[t]:!1}function Vr(){return bn}var Ct=M({},ns,{key:function(t){if(t.key){var r=il[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=xr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?rl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vr,charCode:function(t){return t.type==="keypress"?xr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Us=Ln(Ct),Ur=M({},wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),It=Ln(Ur),p=M({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vr}),S=Ln(p),R=M({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),U=Ln(R),re=M({},wa,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),de=Ln(re),Pe=M({},qi,{newState:0,oldState:0}),ct=Ln(Pe),In=[9,13,27,32],Vt=$t&&"CompositionEvent"in window,hn=null;$t&&"documentMode"in document&&(hn=document.documentMode);var Xi=$t&&"TextEvent"in window&&!hn,Fr=$t&&(!Vt||hn&&8<hn&&11>=hn),ci=" ",Yi=!1;function Fs(t,r){switch(t){case"keyup":return In.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var va=!1;function ps(t,r){switch(t){case"compositionend":return jr(r);case"keypress":return r.which!==32?null:(Yi=!0,ci);case"textInput":return t=r.data,t===ci&&Yi?null:t;default:return null}}function sl(t,r){if(va)return t==="compositionend"||!Vt&&Fs(t,r)?(t=ts(),Ps=Er=_r=null,va=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Fr&&r.locale!=="ko"?null:r.data;default:return null}}var ir={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nc(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!ir[t.type]:r==="textarea"}function wr(t,r,c,d){un?ki?ki.push(d):ki=[d]:un=d,r=yh(r,"onChange"),0<r.length&&(c=new yn("onChange","change",null,c,d),t.push({event:c,listeners:r}))}var vo=null,js=null;function Hf(t){Hp(t,0)}function Co(t){var r=Di(t);if(Mi(r))return t}function Tr(t,r){if(t==="change")return r}var Iu=!1;if($t){var So;if($t){var zs="oninput"in document;if(!zs){var Dt=document.createElement("div");Dt.setAttribute("oninput","return;"),zs=typeof Dt.oninput=="function"}So=zs}else So=!1;Iu=So&&(!document.documentMode||9<document.documentMode)}function bo(){vo&&(vo.detachEvent("onpropertychange",N),js=vo=null)}function N(t){if(t.propertyName==="value"&&Co(js)){var r=[];wr(r,js,t,tr(t)),gs(Hf,r)}}function i(t,r,c){t==="focusin"?(bo(),vo=r,js=c,vo.attachEvent("onpropertychange",N)):t==="focusout"&&bo()}function s(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Co(js)}function l(t,r){if(t==="click")return Co(r)}function u(t,r){if(t==="input"||t==="change")return Co(r)}function f(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var g=typeof Object.is=="function"?Object.is:f;function y(t,r){if(g(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var c=Object.keys(t),d=Object.keys(r);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var _=c[d];if(!tt.call(r,_)||!g(t[_],r[_]))return!1}return!0}function x(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function T(t,r){var c=x(t);t=0;for(var d;c;){if(c.nodeType===3){if(d=t+c.textContent.length,t<=r&&d>=r)return{node:c,offset:r-t};t=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=x(c)}}function b(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?b(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function O(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Pr(t.document);r instanceof t.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)t=r.contentWindow;else break;r=Pr(t.document)}return r}function L(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var z=$t&&"documentMode"in document&&11>=document.documentMode,K=null,Q=null,se=null,fe=!1;function Me(t,r,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;fe||K==null||K!==Pr(d)||(d=K,"selectionStart"in d&&L(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),se&&y(se,d)||(se=d,d=yh(Q,"onSelect"),0<d.length&&(r=new yn("onSelect","select",null,r,c),t.push({event:r,listeners:d}),r.target=K)))}function Oe(t,r){var c={};return c[t.toLowerCase()]=r.toLowerCase(),c["Webkit"+t]="webkit"+r,c["Moz"+t]="moz"+r,c}var be={animationend:Oe("Animation","AnimationEnd"),animationiteration:Oe("Animation","AnimationIteration"),animationstart:Oe("Animation","AnimationStart"),transitionrun:Oe("Transition","TransitionRun"),transitionstart:Oe("Transition","TransitionStart"),transitioncancel:Oe("Transition","TransitionCancel"),transitionend:Oe("Transition","TransitionEnd")},Et={},ut={};$t&&(ut=document.createElement("div").style,"AnimationEvent"in window||(delete be.animationend.animation,delete be.animationiteration.animation,delete be.animationstart.animation),"TransitionEvent"in window||delete be.transitionend.transition);function Bn(t){if(Et[t])return Et[t];if(!be[t])return t;var r=be[t],c;for(c in r)if(r.hasOwnProperty(c)&&c in ut)return Et[t]=r[c];return t}var rr=Bn("animationend"),Ti=Bn("animationiteration"),en=Bn("animationstart"),ri=Bn("transitionrun"),Wi=Bn("transitionstart"),Ca=Bn("transitioncancel"),Hs=Bn("transitionend"),Ru=new Map,ic="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ic.push("scrollEnd");function rs(t,r){Ru.set(t,r),Ht(r,[t])}var Nu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},zr=[],al=0,Gf=0;function Ou(){for(var t=al,r=Gf=al=0;r<t;){var c=zr[r];zr[r++]=null;var d=zr[r];zr[r++]=null;var _=zr[r];zr[r++]=null;var A=zr[r];if(zr[r++]=null,d!==null&&_!==null){var I=d.pending;I===null?_.next=_:(_.next=I.next,I.next=_),d.pending=_}A!==0&&vg(c,_,A)}}function Du(t,r,c,d){zr[al++]=t,zr[al++]=r,zr[al++]=c,zr[al++]=d,Gf|=d,t.lanes|=d,t=t.alternate,t!==null&&(t.lanes|=d)}function qf(t,r,c,d){return Du(t,r,c,d),Mu(t)}function Io(t,r){return Du(t,null,null,r),Mu(t)}function vg(t,r,c){t.lanes|=c;var d=t.alternate;d!==null&&(d.lanes|=c);for(var _=!1,A=t.return;A!==null;)A.childLanes|=c,d=A.alternate,d!==null&&(d.childLanes|=c),A.tag===22&&(t=A.stateNode,t===null||t._visibility&1||(_=!0)),t=A,A=A.return;return t.tag===3?(A=t.stateNode,_&&r!==null&&(_=31-at(c),t=A.hiddenUpdates,d=t[_],d===null?t[_]=[r]:d.push(r),r.lane=c|536870912),A):null}function Mu(t){if(50<Cc)throw Cc=0,e1=null,Error(o(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var ol={};function $x(t,r,c,d){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vr(t,r,c,d){return new $x(t,r,c,d)}function Xf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Gs(t,r){var c=t.alternate;return c===null?(c=vr(t.tag,r,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=r,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&65011712,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,r=t.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c.refCleanup=t.refCleanup,c}function Cg(t,r){t.flags&=65011714;var c=t.alternate;return c===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=c.childLanes,t.lanes=c.lanes,t.child=c.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=c.memoizedProps,t.memoizedState=c.memoizedState,t.updateQueue=c.updateQueue,t.type=c.type,r=c.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Lu(t,r,c,d,_,A){var I=0;if(d=t,typeof t=="function")Xf(t)&&(I=1);else if(typeof t=="string")I=rw(t,c,Be.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case B:return t=vr(31,c,r,_),t.elementType=B,t.lanes=A,t;case me:return Ro(c.children,_,A,r);case ye:I=8,_|=24;break;case De:return t=vr(12,c,r,_|2),t.elementType=De,t.lanes=A,t;case nt:return t=vr(13,c,r,_),t.elementType=nt,t.lanes=A,t;case Ve:return t=vr(19,c,r,_),t.elementType=Ve,t.lanes=A,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pe:I=10;break e;case Le:I=9;break e;case Ue:I=11;break e;case V:I=14;break e;case F:I=16,d=null;break e}I=29,c=Error(o(130,t===null?"null":typeof t,"")),d=null}return r=vr(I,c,r,_),r.elementType=t,r.type=d,r.lanes=A,r}function Ro(t,r,c,d){return t=vr(7,t,d,r),t.lanes=c,t}function Yf(t,r,c){return t=vr(6,t,null,r),t.lanes=c,t}function Sg(t){var r=vr(18,null,null,0);return r.stateNode=t,r}function Wf(t,r,c){return r=vr(4,t.children!==null?t.children:[],t.key,r),r.lanes=c,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var bg=new WeakMap;function Hr(t,r){if(typeof t=="object"&&t!==null){var c=bg.get(t);return c!==void 0?c:(r={value:t,source:r,stack:Gt(r)},bg.set(t,r),r)}return{value:t,source:r,stack:Gt(r)}}var ll=[],cl=0,Pu=null,rc=0,Gr=[],qr=0,Sa=null,ys=1,_s="";function qs(t,r){ll[cl++]=rc,ll[cl++]=Pu,Pu=t,rc=r}function Ig(t,r,c){Gr[qr++]=ys,Gr[qr++]=_s,Gr[qr++]=Sa,Sa=t;var d=ys;t=_s;var _=32-at(d)-1;d&=~(1<<_),c+=1;var A=32-at(r)+_;if(30<A){var I=_-_%5;A=(d&(1<<I)-1).toString(32),d>>=I,_-=I,ys=1<<32-at(r)+_|c<<_|d,_s=A+t}else ys=1<<A|c<<_|d,_s=t}function Kf(t){t.return!==null&&(qs(t,1),Ig(t,1,0))}function Qf(t){for(;t===Pu;)Pu=ll[--cl],ll[cl]=null,rc=ll[--cl],ll[cl]=null;for(;t===Sa;)Sa=Gr[--qr],Gr[qr]=null,_s=Gr[--qr],Gr[qr]=null,ys=Gr[--qr],Gr[qr]=null}function Rg(t,r){Gr[qr++]=ys,Gr[qr++]=_s,Gr[qr++]=Sa,ys=r.id,_s=r.overflow,Sa=t}var vi=null,_n=null,Ut=!1,ba=null,Xr=!1,Zf=Error(o(519));function Ia(t){var r=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw sc(Hr(r,t)),Zf}function Ng(t){var r=t.stateNode,c=t.type,d=t.memoizedProps;switch(r[Tn]=t,r[zt]=d,c){case"dialog":Nt("cancel",r),Nt("close",r);break;case"iframe":case"object":case"embed":Nt("load",r);break;case"video":case"audio":for(c=0;c<bc.length;c++)Nt(bc[c],r);break;case"source":Nt("error",r);break;case"img":case"image":case"link":Nt("error",r),Nt("load",r);break;case"details":Nt("toggle",r);break;case"input":Nt("invalid",r),oe(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Nt("invalid",r);break;case"textarea":Nt("invalid",r),Gn(r,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||d.suppressHydrationWarning===!0||Yp(r.textContent,c)?(d.popover!=null&&(Nt("beforetoggle",r),Nt("toggle",r)),d.onScroll!=null&&Nt("scroll",r),d.onScrollEnd!=null&&Nt("scrollend",r),d.onClick!=null&&(r.onclick=Pi),r=!0):r=!1,r||Ia(t,!0)}function Og(t){for(vi=t.return;vi;)switch(vi.tag){case 5:case 31:case 13:Xr=!1;return;case 27:case 3:Xr=!0;return;default:vi=vi.return}}function ul(t){if(t!==vi)return!1;if(!Ut)return Og(t),Ut=!0,!1;var r=t.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=t.type,c=!(c!=="form"&&c!=="button")||m1(t.type,t.memoizedProps)),c=!c),c&&_n&&Ia(t),Og(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));_n=n2(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));_n=n2(t)}else r===27?(r=_n,za(t.type)?(t=x1,x1=null,_n=t):_n=r):_n=vi?Wr(t.stateNode.nextSibling):null;return!0}function No(){_n=vi=null,Ut=!1}function Jf(){var t=ba;return t!==null&&(lr===null?lr=t:lr.push.apply(lr,t),ba=null),t}function sc(t){ba===null?ba=[t]:ba.push(t)}var $f=q(null),Oo=null,Xs=null;function Ra(t,r,c){Ce($f,r._currentValue),r._currentValue=c}function Ys(t){t._currentValue=$f.current,$($f)}function ed(t,r,c){for(;t!==null;){var d=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),t===c)break;t=t.return}}function td(t,r,c,d){var _=t.child;for(_!==null&&(_.return=t);_!==null;){var A=_.dependencies;if(A!==null){var I=_.child;A=A.firstContext;e:for(;A!==null;){var k=A;A=_;for(var Y=0;Y<r.length;Y++)if(k.context===r[Y]){A.lanes|=c,k=A.alternate,k!==null&&(k.lanes|=c),ed(A.return,c,t),d||(I=null);break e}A=k.next}}else if(_.tag===18){if(I=_.return,I===null)throw Error(o(341));I.lanes|=c,A=I.alternate,A!==null&&(A.lanes|=c),ed(I,c,t),I=null}else I=_.child;if(I!==null)I.return=_;else for(I=_;I!==null;){if(I===t){I=null;break}if(_=I.sibling,_!==null){_.return=I.return,I=_;break}I=I.return}_=I}}function hl(t,r,c,d){t=null;for(var _=r,A=!1;_!==null;){if(!A){if((_.flags&524288)!==0)A=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var I=_.alternate;if(I===null)throw Error(o(387));if(I=I.memoizedProps,I!==null){var k=_.type;g(_.pendingProps.value,I.value)||(t!==null?t.push(k):t=[k])}}else if(_===At.current){if(I=_.alternate,I===null)throw Error(o(387));I.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(t!==null?t.push(Dc):t=[Dc])}_=_.return}t!==null&&td(r,t,c,d),r.flags|=262144}function ku(t){for(t=t.firstContext;t!==null;){if(!g(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Do(t){Oo=t,Xs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ci(t){return Dg(Oo,t)}function Bu(t,r){return Oo===null&&Do(t),Dg(t,r)}function Dg(t,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},Xs===null){if(t===null)throw Error(o(308));Xs=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Xs=Xs.next=r;return c}var eA=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(c,d){t.push(d)}};this.abort=function(){r.aborted=!0,t.forEach(function(c){return c()})}},tA=a.unstable_scheduleCallback,nA=a.unstable_NormalPriority,Kn={$$typeof:pe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nd(){return{controller:new eA,data:new Map,refCount:0}}function ac(t){t.refCount--,t.refCount===0&&tA(nA,function(){t.controller.abort()})}var oc=null,id=0,fl=0,dl=null;function iA(t,r){if(oc===null){var c=oc=[];id=0,fl=a1(),dl={status:"pending",value:void 0,then:function(d){c.push(d)}}}return id++,r.then(Mg,Mg),r}function Mg(){if(--id===0&&oc!==null){dl!==null&&(dl.status="fulfilled");var t=oc;oc=null,fl=0,dl=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function rA(t,r){var c=[],d={status:"pending",value:null,reason:null,then:function(_){c.push(_)}};return t.then(function(){d.status="fulfilled",d.value=r;for(var _=0;_<c.length;_++)(0,c[_])(r)},function(_){for(d.status="rejected",d.reason=_,_=0;_<c.length;_++)(0,c[_])(void 0)}),d}var Lg=ie.S;ie.S=function(t,r){yp=pn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&iA(t,r),Lg!==null&&Lg(t,r)};var Mo=q(null);function rd(){var t=Mo.current;return t!==null?t:fn.pooledCache}function Vu(t,r){r===null?Ce(Mo,Mo.current):Ce(Mo,r.pool)}function Pg(){var t=rd();return t===null?null:{parent:Kn._currentValue,pool:t}}var gl=Error(o(460)),sd=Error(o(474)),Uu=Error(o(542)),Fu={then:function(){}};function kg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Bg(t,r,c){switch(c=t[c],c===void 0?t.push(r):c!==r&&(r.then(Pi,Pi),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Ug(t),t;default:if(typeof r.status=="string")r.then(Pi,Pi);else{if(t=fn,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=r,t.status="pending",t.then(function(d){if(r.status==="pending"){var _=r;_.status="fulfilled",_.value=d}},function(d){if(r.status==="pending"){var _=r;_.status="rejected",_.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Ug(t),t}throw Po=r,gl}}function Lo(t){try{var r=t._init;return r(t._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Po=c,gl):c}}var Po=null;function Vg(){if(Po===null)throw Error(o(459));var t=Po;return Po=null,t}function Ug(t){if(t===gl||t===Uu)throw Error(o(483))}var ml=null,lc=0;function ju(t){var r=lc;return lc+=1,ml===null&&(ml=[]),Bg(ml,t,r)}function cc(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function zu(t,r){throw r.$$typeof===G?Error(o(525)):(t=Object.prototype.toString.call(r),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Fg(t){function r(ne,J){if(t){var le=ne.deletions;le===null?(ne.deletions=[J],ne.flags|=16):le.push(J)}}function c(ne,J){if(!t)return null;for(;J!==null;)r(ne,J),J=J.sibling;return null}function d(ne){for(var J=new Map;ne!==null;)ne.key!==null?J.set(ne.key,ne):J.set(ne.index,ne),ne=ne.sibling;return J}function _(ne,J){return ne=Gs(ne,J),ne.index=0,ne.sibling=null,ne}function A(ne,J,le){return ne.index=le,t?(le=ne.alternate,le!==null?(le=le.index,le<J?(ne.flags|=67108866,J):le):(ne.flags|=67108866,J)):(ne.flags|=1048576,J)}function I(ne){return t&&ne.alternate===null&&(ne.flags|=67108866),ne}function k(ne,J,le,xe){return J===null||J.tag!==6?(J=Yf(le,ne.mode,xe),J.return=ne,J):(J=_(J,le),J.return=ne,J)}function Y(ne,J,le,xe){var Je=le.type;return Je===me?_e(ne,J,le.props.children,xe,le.key):J!==null&&(J.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===F&&Lo(Je)===J.type)?(J=_(J,le.props),cc(J,le),J.return=ne,J):(J=Lu(le.type,le.key,le.props,null,ne.mode,xe),cc(J,le),J.return=ne,J)}function ce(ne,J,le,xe){return J===null||J.tag!==4||J.stateNode.containerInfo!==le.containerInfo||J.stateNode.implementation!==le.implementation?(J=Wf(le,ne.mode,xe),J.return=ne,J):(J=_(J,le.children||[]),J.return=ne,J)}function _e(ne,J,le,xe,Je){return J===null||J.tag!==7?(J=Ro(le,ne.mode,xe,Je),J.return=ne,J):(J=_(J,le),J.return=ne,J)}function Te(ne,J,le){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=Yf(""+J,ne.mode,le),J.return=ne,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case te:return le=Lu(J.type,J.key,J.props,null,ne.mode,le),cc(le,J),le.return=ne,le;case Ee:return J=Wf(J,ne.mode,le),J.return=ne,J;case F:return J=Lo(J),Te(ne,J,le)}if(ee(J)||X(J))return J=Ro(J,ne.mode,le,null),J.return=ne,J;if(typeof J.then=="function")return Te(ne,ju(J),le);if(J.$$typeof===pe)return Te(ne,Bu(ne,J),le);zu(ne,J)}return null}function ue(ne,J,le,xe){var Je=J!==null?J.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Je!==null?null:k(ne,J,""+le,xe);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case te:return le.key===Je?Y(ne,J,le,xe):null;case Ee:return le.key===Je?ce(ne,J,le,xe):null;case F:return le=Lo(le),ue(ne,J,le,xe)}if(ee(le)||X(le))return Je!==null?null:_e(ne,J,le,xe,null);if(typeof le.then=="function")return ue(ne,J,ju(le),xe);if(le.$$typeof===pe)return ue(ne,J,Bu(ne,le),xe);zu(ne,le)}return null}function ge(ne,J,le,xe,Je){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return ne=ne.get(le)||null,k(J,ne,""+xe,Je);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case te:return ne=ne.get(xe.key===null?le:xe.key)||null,Y(J,ne,xe,Je);case Ee:return ne=ne.get(xe.key===null?le:xe.key)||null,ce(J,ne,xe,Je);case F:return xe=Lo(xe),ge(ne,J,le,xe,Je)}if(ee(xe)||X(xe))return ne=ne.get(le)||null,_e(J,ne,xe,Je,null);if(typeof xe.then=="function")return ge(ne,J,le,ju(xe),Je);if(xe.$$typeof===pe)return ge(ne,J,le,Bu(J,xe),Je);zu(J,xe)}return null}function Ye(ne,J,le,xe){for(var Je=null,Wt=null,Ke=J,yt=J=0,Lt=null;Ke!==null&&yt<le.length;yt++){Ke.index>yt?(Lt=Ke,Ke=null):Lt=Ke.sibling;var Kt=ue(ne,Ke,le[yt],xe);if(Kt===null){Ke===null&&(Ke=Lt);break}t&&Ke&&Kt.alternate===null&&r(ne,Ke),J=A(Kt,J,yt),Wt===null?Je=Kt:Wt.sibling=Kt,Wt=Kt,Ke=Lt}if(yt===le.length)return c(ne,Ke),Ut&&qs(ne,yt),Je;if(Ke===null){for(;yt<le.length;yt++)Ke=Te(ne,le[yt],xe),Ke!==null&&(J=A(Ke,J,yt),Wt===null?Je=Ke:Wt.sibling=Ke,Wt=Ke);return Ut&&qs(ne,yt),Je}for(Ke=d(Ke);yt<le.length;yt++)Lt=ge(Ke,ne,yt,le[yt],xe),Lt!==null&&(t&&Lt.alternate!==null&&Ke.delete(Lt.key===null?yt:Lt.key),J=A(Lt,J,yt),Wt===null?Je=Lt:Wt.sibling=Lt,Wt=Lt);return t&&Ke.forEach(function(Ya){return r(ne,Ya)}),Ut&&qs(ne,yt),Je}function st(ne,J,le,xe){if(le==null)throw Error(o(151));for(var Je=null,Wt=null,Ke=J,yt=J=0,Lt=null,Kt=le.next();Ke!==null&&!Kt.done;yt++,Kt=le.next()){Ke.index>yt?(Lt=Ke,Ke=null):Lt=Ke.sibling;var Ya=ue(ne,Ke,Kt.value,xe);if(Ya===null){Ke===null&&(Ke=Lt);break}t&&Ke&&Ya.alternate===null&&r(ne,Ke),J=A(Ya,J,yt),Wt===null?Je=Ya:Wt.sibling=Ya,Wt=Ya,Ke=Lt}if(Kt.done)return c(ne,Ke),Ut&&qs(ne,yt),Je;if(Ke===null){for(;!Kt.done;yt++,Kt=le.next())Kt=Te(ne,Kt.value,xe),Kt!==null&&(J=A(Kt,J,yt),Wt===null?Je=Kt:Wt.sibling=Kt,Wt=Kt);return Ut&&qs(ne,yt),Je}for(Ke=d(Ke);!Kt.done;yt++,Kt=le.next())Kt=ge(Ke,ne,yt,Kt.value,xe),Kt!==null&&(t&&Kt.alternate!==null&&Ke.delete(Kt.key===null?yt:Kt.key),J=A(Kt,J,yt),Wt===null?Je=Kt:Wt.sibling=Kt,Wt=Kt);return t&&Ke.forEach(function(mw){return r(ne,mw)}),Ut&&qs(ne,yt),Je}function ln(ne,J,le,xe){if(typeof le=="object"&&le!==null&&le.type===me&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case te:e:{for(var Je=le.key;J!==null;){if(J.key===Je){if(Je=le.type,Je===me){if(J.tag===7){c(ne,J.sibling),xe=_(J,le.props.children),xe.return=ne,ne=xe;break e}}else if(J.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===F&&Lo(Je)===J.type){c(ne,J.sibling),xe=_(J,le.props),cc(xe,le),xe.return=ne,ne=xe;break e}c(ne,J);break}else r(ne,J);J=J.sibling}le.type===me?(xe=Ro(le.props.children,ne.mode,xe,le.key),xe.return=ne,ne=xe):(xe=Lu(le.type,le.key,le.props,null,ne.mode,xe),cc(xe,le),xe.return=ne,ne=xe)}return I(ne);case Ee:e:{for(Je=le.key;J!==null;){if(J.key===Je)if(J.tag===4&&J.stateNode.containerInfo===le.containerInfo&&J.stateNode.implementation===le.implementation){c(ne,J.sibling),xe=_(J,le.children||[]),xe.return=ne,ne=xe;break e}else{c(ne,J);break}else r(ne,J);J=J.sibling}xe=Wf(le,ne.mode,xe),xe.return=ne,ne=xe}return I(ne);case F:return le=Lo(le),ln(ne,J,le,xe)}if(ee(le))return Ye(ne,J,le,xe);if(X(le)){if(Je=X(le),typeof Je!="function")throw Error(o(150));return le=Je.call(le),st(ne,J,le,xe)}if(typeof le.then=="function")return ln(ne,J,ju(le),xe);if(le.$$typeof===pe)return ln(ne,J,Bu(ne,le),xe);zu(ne,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,J!==null&&J.tag===6?(c(ne,J.sibling),xe=_(J,le),xe.return=ne,ne=xe):(c(ne,J),xe=Yf(le,ne.mode,xe),xe.return=ne,ne=xe),I(ne)):c(ne,J)}return function(ne,J,le,xe){try{lc=0;var Je=ln(ne,J,le,xe);return ml=null,Je}catch(Ke){if(Ke===gl||Ke===Uu)throw Ke;var Wt=vr(29,Ke,null,ne.mode);return Wt.lanes=xe,Wt.return=ne,Wt}}}var ko=Fg(!0),jg=Fg(!1),Na=!1;function ad(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function od(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Oa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Da(t,r,c){var d=t.updateQueue;if(d===null)return null;if(d=d.shared,(Qt&2)!==0){var _=d.pending;return _===null?r.next=r:(r.next=_.next,_.next=r),d.pending=r,r=Mu(t),vg(t,null,c),r}return Du(t,d,r,c),Mu(t)}function uc(t,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var d=r.lanes;d&=t.pendingLanes,c|=d,r.lanes=c,yr(t,c)}}function ld(t,r){var c=t.updateQueue,d=t.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var _=null,A=null;if(c=c.firstBaseUpdate,c!==null){do{var I={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};A===null?_=A=I:A=A.next=I,c=c.next}while(c!==null);A===null?_=A=r:A=A.next=r}else _=A=r;c={baseState:d.baseState,firstBaseUpdate:_,lastBaseUpdate:A,shared:d.shared,callbacks:d.callbacks},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=r:t.next=r,c.lastBaseUpdate=r}var cd=!1;function hc(){if(cd){var t=dl;if(t!==null)throw t}}function fc(t,r,c,d){cd=!1;var _=t.updateQueue;Na=!1;var A=_.firstBaseUpdate,I=_.lastBaseUpdate,k=_.shared.pending;if(k!==null){_.shared.pending=null;var Y=k,ce=Y.next;Y.next=null,I===null?A=ce:I.next=ce,I=Y;var _e=t.alternate;_e!==null&&(_e=_e.updateQueue,k=_e.lastBaseUpdate,k!==I&&(k===null?_e.firstBaseUpdate=ce:k.next=ce,_e.lastBaseUpdate=Y))}if(A!==null){var Te=_.baseState;I=0,_e=ce=Y=null,k=A;do{var ue=k.lane&-536870913,ge=ue!==k.lane;if(ge?(Mt&ue)===ue:(d&ue)===ue){ue!==0&&ue===fl&&(cd=!0),_e!==null&&(_e=_e.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Ye=t,st=k;ue=r;var ln=c;switch(st.tag){case 1:if(Ye=st.payload,typeof Ye=="function"){Te=Ye.call(ln,Te,ue);break e}Te=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=st.payload,ue=typeof Ye=="function"?Ye.call(ln,Te,ue):Ye,ue==null)break e;Te=M({},Te,ue);break e;case 2:Na=!0}}ue=k.callback,ue!==null&&(t.flags|=64,ge&&(t.flags|=8192),ge=_.callbacks,ge===null?_.callbacks=[ue]:ge.push(ue))}else ge={lane:ue,tag:k.tag,payload:k.payload,callback:k.callback,next:null},_e===null?(ce=_e=ge,Y=Te):_e=_e.next=ge,I|=ue;if(k=k.next,k===null){if(k=_.shared.pending,k===null)break;ge=k,k=ge.next,ge.next=null,_.lastBaseUpdate=ge,_.shared.pending=null}}while(!0);_e===null&&(Y=Te),_.baseState=Y,_.firstBaseUpdate=ce,_.lastBaseUpdate=_e,A===null&&(_.shared.lanes=0),Ba|=I,t.lanes=I,t.memoizedState=Te}}function zg(t,r){if(typeof t!="function")throw Error(o(191,t));t.call(r)}function Hg(t,r){var c=t.callbacks;if(c!==null)for(t.callbacks=null,t=0;t<c.length;t++)zg(c[t],r)}var pl=q(null),Hu=q(0);function Gg(t,r){t=na,Ce(Hu,t),Ce(pl,r),na=t|r.baseLanes}function ud(){Ce(Hu,na),Ce(pl,pl.current)}function hd(){na=Hu.current,$(pl),$(Hu)}var Cr=q(null),Yr=null;function Ma(t){var r=t.alternate;Ce(qn,qn.current&1),Ce(Cr,t),Yr===null&&(r===null||pl.current!==null||r.memoizedState!==null)&&(Yr=t)}function fd(t){Ce(qn,qn.current),Ce(Cr,t),Yr===null&&(Yr=t)}function qg(t){t.tag===22?(Ce(qn,qn.current),Ce(Cr,t),Yr===null&&(Yr=t)):La()}function La(){Ce(qn,qn.current),Ce(Cr,Cr.current)}function Sr(t){$(Cr),Yr===t&&(Yr=null),$(qn)}var qn=q(0);function Gu(t){for(var r=t;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||_1(c)||E1(c)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ws=0,mt=null,an=null,Qn=null,qu=!1,yl=!1,Bo=!1,Xu=0,dc=0,_l=null,sA=0;function Vn(){throw Error(o(321))}function dd(t,r){if(r===null)return!1;for(var c=0;c<r.length&&c<t.length;c++)if(!g(t[c],r[c]))return!1;return!0}function gd(t,r,c,d,_,A){return Ws=A,mt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ie.H=t===null||t.memoizedState===null?Im:Rd,Bo=!1,A=c(d,_),Bo=!1,yl&&(A=Yg(r,c,d,_)),Xg(t),A}function Xg(t){ie.H=pc;var r=an!==null&&an.next!==null;if(Ws=0,Qn=an=mt=null,qu=!1,dc=0,_l=null,r)throw Error(o(300));t===null||Zn||(t=t.dependencies,t!==null&&ku(t)&&(Zn=!0))}function Yg(t,r,c,d){mt=t;var _=0;do{if(yl&&(_l=null),dc=0,yl=!1,25<=_)throw Error(o(301));if(_+=1,Qn=an=null,t.updateQueue!=null){var A=t.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}ie.H=Rm,A=r(c,d)}while(yl);return A}function aA(){var t=ie.H,r=t.useState()[0];return r=typeof r.then=="function"?gc(r):r,t=t.useState()[0],(an!==null?an.memoizedState:null)!==t&&(mt.flags|=1024),r}function md(){var t=Xu!==0;return Xu=0,t}function pd(t,r,c){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~c}function yd(t){if(qu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}qu=!1}Ws=0,Qn=an=mt=null,yl=!1,dc=Xu=0,_l=null}function Ki(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qn===null?mt.memoizedState=Qn=t:Qn=Qn.next=t,Qn}function Xn(){if(an===null){var t=mt.alternate;t=t!==null?t.memoizedState:null}else t=an.next;var r=Qn===null?mt.memoizedState:Qn.next;if(r!==null)Qn=r,an=t;else{if(t===null)throw mt.alternate===null?Error(o(467)):Error(o(310));an=t,t={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},Qn===null?mt.memoizedState=Qn=t:Qn=Qn.next=t}return Qn}function Yu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gc(t){var r=dc;return dc+=1,_l===null&&(_l=[]),t=Bg(_l,t,r),r=mt,(Qn===null?r.memoizedState:Qn.next)===null&&(r=r.alternate,ie.H=r===null||r.memoizedState===null?Im:Rd),t}function Wu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gc(t);if(t.$$typeof===pe)return Ci(t)}throw Error(o(438,String(t)))}function _d(t){var r=null,c=mt.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var d=mt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(_){return _.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=Yu(),mt.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(t),d=0;d<t;d++)c[d]=Z;return r.index++,c}function Ks(t,r){return typeof r=="function"?r(t):r}function Ku(t){var r=Xn();return Ed(r,an,t)}function Ed(t,r,c){var d=t.queue;if(d===null)throw Error(o(311));d.lastRenderedReducer=c;var _=t.baseQueue,A=d.pending;if(A!==null){if(_!==null){var I=_.next;_.next=A.next,A.next=I}r.baseQueue=_=A,d.pending=null}if(A=t.baseState,_===null)t.memoizedState=A;else{r=_.next;var k=I=null,Y=null,ce=r,_e=!1;do{var Te=ce.lane&-536870913;if(Te!==ce.lane?(Mt&Te)===Te:(Ws&Te)===Te){var ue=ce.revertLane;if(ue===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),Te===fl&&(_e=!0);else if((Ws&ue)===ue){ce=ce.next,ue===fl&&(_e=!0);continue}else Te={lane:0,revertLane:ce.revertLane,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},Y===null?(k=Y=Te,I=A):Y=Y.next=Te,mt.lanes|=ue,Ba|=ue;Te=ce.action,Bo&&c(A,Te),A=ce.hasEagerState?ce.eagerState:c(A,Te)}else ue={lane:Te,revertLane:ce.revertLane,gesture:ce.gesture,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},Y===null?(k=Y=ue,I=A):Y=Y.next=ue,mt.lanes|=Te,Ba|=Te;ce=ce.next}while(ce!==null&&ce!==r);if(Y===null?I=A:Y.next=k,!g(A,t.memoizedState)&&(Zn=!0,_e&&(c=dl,c!==null)))throw c;t.memoizedState=A,t.baseState=I,t.baseQueue=Y,d.lastRenderedState=A}return _===null&&(d.lanes=0),[t.memoizedState,d.dispatch]}function xd(t){var r=Xn(),c=r.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=t;var d=c.dispatch,_=c.pending,A=r.memoizedState;if(_!==null){c.pending=null;var I=_=_.next;do A=t(A,I.action),I=I.next;while(I!==_);g(A,r.memoizedState)||(Zn=!0),r.memoizedState=A,r.baseQueue===null&&(r.baseState=A),c.lastRenderedState=A}return[A,d]}function Wg(t,r,c){var d=mt,_=Xn(),A=Ut;if(A){if(c===void 0)throw Error(o(407));c=c()}else c=r();var I=!g((an||_).memoizedState,c);if(I&&(_.memoizedState=c,Zn=!0),_=_.queue,Td(Zg.bind(null,d,_,t),[t]),_.getSnapshot!==r||I||Qn!==null&&Qn.memoizedState.tag&1){if(d.flags|=2048,El(9,{destroy:void 0},Qg.bind(null,d,_,c,r),null),fn===null)throw Error(o(349));A||(Ws&127)!==0||Kg(d,r,c)}return c}function Kg(t,r,c){t.flags|=16384,t={getSnapshot:r,value:c},r=mt.updateQueue,r===null?(r=Yu(),mt.updateQueue=r,r.stores=[t]):(c=r.stores,c===null?r.stores=[t]:c.push(t))}function Qg(t,r,c,d){r.value=c,r.getSnapshot=d,Jg(r)&&$g(t)}function Zg(t,r,c){return c(function(){Jg(r)&&$g(t)})}function Jg(t){var r=t.getSnapshot;t=t.value;try{var c=r();return!g(t,c)}catch{return!0}}function $g(t){var r=Io(t,2);r!==null&&cr(r,t,2)}function Ad(t){var r=Ki();if(typeof t=="function"){var c=t;if(t=c(),Bo){Xt(!0);try{c()}finally{Xt(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:t},r}function em(t,r,c,d){return t.baseState=c,Ed(t,an,typeof d=="function"?d:Ks)}function oA(t,r,c,d,_){if(Ju(t))throw Error(o(485));if(t=r.action,t!==null){var A={payload:_,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){A.listeners.push(I)}};ie.T!==null?c(!0):A.isTransition=!1,d(A),c=r.pending,c===null?(A.next=r.pending=A,tm(r,A)):(A.next=c.next,r.pending=c.next=A)}}function tm(t,r){var c=r.action,d=r.payload,_=t.state;if(r.isTransition){var A=ie.T,I={};ie.T=I;try{var k=c(_,d),Y=ie.S;Y!==null&&Y(I,k),nm(t,r,k)}catch(ce){wd(t,r,ce)}finally{A!==null&&I.types!==null&&(A.types=I.types),ie.T=A}}else try{A=c(_,d),nm(t,r,A)}catch(ce){wd(t,r,ce)}}function nm(t,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){im(t,r,d)},function(d){return wd(t,r,d)}):im(t,r,c)}function im(t,r,c){r.status="fulfilled",r.value=c,rm(r),t.state=c,r=t.pending,r!==null&&(c=r.next,c===r?t.pending=null:(c=c.next,r.next=c,tm(t,c)))}function wd(t,r,c){var d=t.pending;if(t.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=c,rm(r),r=r.next;while(r!==d)}t.action=null}function rm(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function sm(t,r){return r}function am(t,r){if(Ut){var c=fn.formState;if(c!==null){e:{var d=mt;if(Ut){if(_n){t:{for(var _=_n,A=Xr;_.nodeType!==8;){if(!A){_=null;break t}if(_=Wr(_.nextSibling),_===null){_=null;break t}}A=_.data,_=A==="F!"||A==="F"?_:null}if(_){_n=Wr(_.nextSibling),d=_.data==="F!";break e}}Ia(d)}d=!1}d&&(r=c[0])}}return c=Ki(),c.memoizedState=c.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sm,lastRenderedState:r},c.queue=d,c=Cm.bind(null,mt,d),d.dispatch=c,d=Ad(!1),A=Id.bind(null,mt,!1,d.queue),d=Ki(),_={state:r,dispatch:null,action:t,pending:null},d.queue=_,c=oA.bind(null,mt,_,A,c),_.dispatch=c,d.memoizedState=t,[r,c,!1]}function om(t){var r=Xn();return lm(r,an,t)}function lm(t,r,c){if(r=Ed(t,r,sm)[0],t=Ku(Ks)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=gc(r)}catch(I){throw I===gl?Uu:I}else d=r;r=Xn();var _=r.queue,A=_.dispatch;return c!==r.memoizedState&&(mt.flags|=2048,El(9,{destroy:void 0},lA.bind(null,_,c),null)),[d,A,t]}function lA(t,r){t.action=r}function cm(t){var r=Xn(),c=an;if(c!==null)return lm(r,c,t);Xn(),r=r.memoizedState,c=Xn();var d=c.queue.dispatch;return c.memoizedState=t,[r,d,!1]}function El(t,r,c,d){return t={tag:t,create:c,deps:d,inst:r,next:null},r=mt.updateQueue,r===null&&(r=Yu(),mt.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=t.next=t:(d=c.next,c.next=t,t.next=d,r.lastEffect=t),t}function um(){return Xn().memoizedState}function Qu(t,r,c,d){var _=Ki();mt.flags|=t,_.memoizedState=El(1|r,{destroy:void 0},c,d===void 0?null:d)}function Zu(t,r,c,d){var _=Xn();d=d===void 0?null:d;var A=_.memoizedState.inst;an!==null&&d!==null&&dd(d,an.memoizedState.deps)?_.memoizedState=El(r,A,c,d):(mt.flags|=t,_.memoizedState=El(1|r,A,c,d))}function hm(t,r){Qu(8390656,8,t,r)}function Td(t,r){Zu(2048,8,t,r)}function cA(t){mt.flags|=4;var r=mt.updateQueue;if(r===null)r=Yu(),mt.updateQueue=r,r.events=[t];else{var c=r.events;c===null?r.events=[t]:c.push(t)}}function fm(t){var r=Xn().memoizedState;return cA({ref:r,nextImpl:t}),function(){if((Qt&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}function dm(t,r){return Zu(4,2,t,r)}function gm(t,r){return Zu(4,4,t,r)}function mm(t,r){if(typeof r=="function"){t=t();var c=r(t);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function pm(t,r,c){c=c!=null?c.concat([t]):null,Zu(4,4,mm.bind(null,r,t),c)}function vd(){}function ym(t,r){var c=Xn();r=r===void 0?null:r;var d=c.memoizedState;return r!==null&&dd(r,d[1])?d[0]:(c.memoizedState=[t,r],t)}function _m(t,r){var c=Xn();r=r===void 0?null:r;var d=c.memoizedState;if(r!==null&&dd(r,d[1]))return d[0];if(d=t(),Bo){Xt(!0);try{t()}finally{Xt(!1)}}return c.memoizedState=[d,r],d}function Cd(t,r,c){return c===void 0||(Ws&1073741824)!==0&&(Mt&261930)===0?t.memoizedState=r:(t.memoizedState=c,t=Ep(),mt.lanes|=t,Ba|=t,c)}function Em(t,r,c,d){return g(c,r)?c:pl.current!==null?(t=Cd(t,c,d),g(t,r)||(Zn=!0),t):(Ws&42)===0||(Ws&1073741824)!==0&&(Mt&261930)===0?(Zn=!0,t.memoizedState=c):(t=Ep(),mt.lanes|=t,Ba|=t,r)}function xm(t,r,c,d,_){var A=ae.p;ae.p=A!==0&&8>A?A:8;var I=ie.T,k={};ie.T=k,Id(t,!1,r,c);try{var Y=_(),ce=ie.S;if(ce!==null&&ce(k,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var _e=rA(Y,d);mc(t,r,_e,Rr(t))}else mc(t,r,d,Rr(t))}catch(Te){mc(t,r,{then:function(){},status:"rejected",reason:Te},Rr())}finally{ae.p=A,I!==null&&k.types!==null&&(I.types=k.types),ie.T=I}}function uA(){}function Sd(t,r,c,d){if(t.tag!==5)throw Error(o(476));var _=Am(t).queue;xm(t,_,r,Re,c===null?uA:function(){return wm(t),c(d)})}function Am(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Re,baseState:Re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:Re},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:c},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function wm(t){var r=Am(t);r.next===null&&(r=t.alternate.memoizedState),mc(t,r.next.queue,{},Rr())}function bd(){return Ci(Dc)}function Tm(){return Xn().memoizedState}function vm(){return Xn().memoizedState}function hA(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var c=Rr();t=Oa(c);var d=Da(r,t,c);d!==null&&(cr(d,r,c),uc(d,r,c)),r={cache:nd()},t.payload=r;return}r=r.return}}function fA(t,r,c){var d=Rr();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ju(t)?Sm(r,c):(c=qf(t,r,c,d),c!==null&&(cr(c,t,d),bm(c,r,d)))}function Cm(t,r,c){var d=Rr();mc(t,r,c,d)}function mc(t,r,c,d){var _={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ju(t))Sm(r,_);else{var A=t.alternate;if(t.lanes===0&&(A===null||A.lanes===0)&&(A=r.lastRenderedReducer,A!==null))try{var I=r.lastRenderedState,k=A(I,c);if(_.hasEagerState=!0,_.eagerState=k,g(k,I))return Du(t,r,_,0),fn===null&&Ou(),!1}catch{}if(c=qf(t,r,_,d),c!==null)return cr(c,t,d),bm(c,r,d),!0}return!1}function Id(t,r,c,d){if(d={lane:2,revertLane:a1(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Ju(t)){if(r)throw Error(o(479))}else r=qf(t,c,d,2),r!==null&&cr(r,t,2)}function Ju(t){var r=t.alternate;return t===mt||r!==null&&r===mt}function Sm(t,r){yl=qu=!0;var c=t.pending;c===null?r.next=r:(r.next=c.next,c.next=r),t.pending=r}function bm(t,r,c){if((c&4194048)!==0){var d=r.lanes;d&=t.pendingLanes,c|=d,r.lanes=c,yr(t,c)}}var pc={readContext:Ci,use:Wu,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useLayoutEffect:Vn,useInsertionEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useSyncExternalStore:Vn,useId:Vn,useHostTransitionStatus:Vn,useFormState:Vn,useActionState:Vn,useOptimistic:Vn,useMemoCache:Vn,useCacheRefresh:Vn};pc.useEffectEvent=Vn;var Im={readContext:Ci,use:Wu,useCallback:function(t,r){return Ki().memoizedState=[t,r===void 0?null:r],t},useContext:Ci,useEffect:hm,useImperativeHandle:function(t,r,c){c=c!=null?c.concat([t]):null,Qu(4194308,4,mm.bind(null,r,t),c)},useLayoutEffect:function(t,r){return Qu(4194308,4,t,r)},useInsertionEffect:function(t,r){Qu(4,2,t,r)},useMemo:function(t,r){var c=Ki();r=r===void 0?null:r;var d=t();if(Bo){Xt(!0);try{t()}finally{Xt(!1)}}return c.memoizedState=[d,r],d},useReducer:function(t,r,c){var d=Ki();if(c!==void 0){var _=c(r);if(Bo){Xt(!0);try{c(r)}finally{Xt(!1)}}}else _=r;return d.memoizedState=d.baseState=_,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:_},d.queue=t,t=t.dispatch=fA.bind(null,mt,t),[d.memoizedState,t]},useRef:function(t){var r=Ki();return t={current:t},r.memoizedState=t},useState:function(t){t=Ad(t);var r=t.queue,c=Cm.bind(null,mt,r);return r.dispatch=c,[t.memoizedState,c]},useDebugValue:vd,useDeferredValue:function(t,r){var c=Ki();return Cd(c,t,r)},useTransition:function(){var t=Ad(!1);return t=xm.bind(null,mt,t.queue,!0,!1),Ki().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,c){var d=mt,_=Ki();if(Ut){if(c===void 0)throw Error(o(407));c=c()}else{if(c=r(),fn===null)throw Error(o(349));(Mt&127)!==0||Kg(d,r,c)}_.memoizedState=c;var A={value:c,getSnapshot:r};return _.queue=A,hm(Zg.bind(null,d,A,t),[t]),d.flags|=2048,El(9,{destroy:void 0},Qg.bind(null,d,A,c,r),null),c},useId:function(){var t=Ki(),r=fn.identifierPrefix;if(Ut){var c=_s,d=ys;c=(d&~(1<<32-at(d)-1)).toString(32)+c,r="_"+r+"R_"+c,c=Xu++,0<c&&(r+="H"+c.toString(32)),r+="_"}else c=sA++,r="_"+r+"r_"+c.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:bd,useFormState:am,useActionState:am,useOptimistic:function(t){var r=Ki();r.memoizedState=r.baseState=t;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Id.bind(null,mt,!0,c),c.dispatch=r,[t,r]},useMemoCache:_d,useCacheRefresh:function(){return Ki().memoizedState=hA.bind(null,mt)},useEffectEvent:function(t){var r=Ki(),c={impl:t};return r.memoizedState=c,function(){if((Qt&2)!==0)throw Error(o(440));return c.impl.apply(void 0,arguments)}}},Rd={readContext:Ci,use:Wu,useCallback:ym,useContext:Ci,useEffect:Td,useImperativeHandle:pm,useInsertionEffect:dm,useLayoutEffect:gm,useMemo:_m,useReducer:Ku,useRef:um,useState:function(){return Ku(Ks)},useDebugValue:vd,useDeferredValue:function(t,r){var c=Xn();return Em(c,an.memoizedState,t,r)},useTransition:function(){var t=Ku(Ks)[0],r=Xn().memoizedState;return[typeof t=="boolean"?t:gc(t),r]},useSyncExternalStore:Wg,useId:Tm,useHostTransitionStatus:bd,useFormState:om,useActionState:om,useOptimistic:function(t,r){var c=Xn();return em(c,an,t,r)},useMemoCache:_d,useCacheRefresh:vm};Rd.useEffectEvent=fm;var Rm={readContext:Ci,use:Wu,useCallback:ym,useContext:Ci,useEffect:Td,useImperativeHandle:pm,useInsertionEffect:dm,useLayoutEffect:gm,useMemo:_m,useReducer:xd,useRef:um,useState:function(){return xd(Ks)},useDebugValue:vd,useDeferredValue:function(t,r){var c=Xn();return an===null?Cd(c,t,r):Em(c,an.memoizedState,t,r)},useTransition:function(){var t=xd(Ks)[0],r=Xn().memoizedState;return[typeof t=="boolean"?t:gc(t),r]},useSyncExternalStore:Wg,useId:Tm,useHostTransitionStatus:bd,useFormState:cm,useActionState:cm,useOptimistic:function(t,r){var c=Xn();return an!==null?em(c,an,t,r):(c.baseState=t,[t,c.queue.dispatch])},useMemoCache:_d,useCacheRefresh:vm};Rm.useEffectEvent=fm;function Nd(t,r,c,d){r=t.memoizedState,c=c(d,r),c=c==null?r:M({},r,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var Od={enqueueSetState:function(t,r,c){t=t._reactInternals;var d=Rr(),_=Oa(d);_.payload=r,c!=null&&(_.callback=c),r=Da(t,_,d),r!==null&&(cr(r,t,d),uc(r,t,d))},enqueueReplaceState:function(t,r,c){t=t._reactInternals;var d=Rr(),_=Oa(d);_.tag=1,_.payload=r,c!=null&&(_.callback=c),r=Da(t,_,d),r!==null&&(cr(r,t,d),uc(r,t,d))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var c=Rr(),d=Oa(c);d.tag=2,r!=null&&(d.callback=r),r=Da(t,d,c),r!==null&&(cr(r,t,c),uc(r,t,c))}};function Nm(t,r,c,d,_,A,I){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(d,A,I):r.prototype&&r.prototype.isPureReactComponent?!y(c,d)||!y(_,A):!0}function Om(t,r,c,d){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,d),r.state!==t&&Od.enqueueReplaceState(r,r.state,null)}function Vo(t,r){var c=r;if("ref"in r){c={};for(var d in r)d!=="ref"&&(c[d]=r[d])}if(t=t.defaultProps){c===r&&(c=M({},c));for(var _ in t)c[_]===void 0&&(c[_]=t[_])}return c}function Dm(t){Nu(t)}function Mm(t){console.error(t)}function Lm(t){Nu(t)}function $u(t,r){try{var c=t.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function Pm(t,r,c){try{var d=t.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Dd(t,r,c){return c=Oa(c),c.tag=3,c.payload={element:null},c.callback=function(){$u(t,r)},c}function km(t){return t=Oa(t),t.tag=3,t}function Bm(t,r,c,d){var _=c.type.getDerivedStateFromError;if(typeof _=="function"){var A=d.value;t.payload=function(){return _(A)},t.callback=function(){Pm(r,c,d)}}var I=c.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(t.callback=function(){Pm(r,c,d),typeof _!="function"&&(Va===null?Va=new Set([this]):Va.add(this));var k=d.stack;this.componentDidCatch(d.value,{componentStack:k!==null?k:""})})}function dA(t,r,c,d,_){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=c.alternate,r!==null&&hl(r,c,_,!0),c=Cr.current,c!==null){switch(c.tag){case 31:case 13:return Yr===null?hh():c.alternate===null&&Un===0&&(Un=3),c.flags&=-257,c.flags|=65536,c.lanes=_,d===Fu?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([d]):r.add(d),i1(t,d,_)),!1;case 22:return c.flags|=65536,d===Fu?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([d]):c.add(d)),i1(t,d,_)),!1}throw Error(o(435,c.tag))}return i1(t,d,_),hh(),!1}if(Ut)return r=Cr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=_,d!==Zf&&(t=Error(o(422),{cause:d}),sc(Hr(t,c)))):(d!==Zf&&(r=Error(o(423),{cause:d}),sc(Hr(r,c))),t=t.current.alternate,t.flags|=65536,_&=-_,t.lanes|=_,d=Hr(d,c),_=Dd(t.stateNode,d,_),ld(t,_),Un!==4&&(Un=2)),!1;var A=Error(o(520),{cause:d});if(A=Hr(A,c),vc===null?vc=[A]:vc.push(A),Un!==4&&(Un=2),r===null)return!0;d=Hr(d,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,t=_&-_,c.lanes|=t,t=Dd(c.stateNode,d,t),ld(c,t),!1;case 1:if(r=c.type,A=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Va===null||!Va.has(A))))return c.flags|=65536,_&=-_,c.lanes|=_,_=km(_),Bm(_,t,c,d),ld(c,_),!1}c=c.return}while(c!==null);return!1}var Md=Error(o(461)),Zn=!1;function Si(t,r,c,d){r.child=t===null?jg(r,null,c,d):ko(r,t.child,c,d)}function Vm(t,r,c,d,_){c=c.render;var A=r.ref;if("ref"in d){var I={};for(var k in d)k!=="ref"&&(I[k]=d[k])}else I=d;return Do(r),d=gd(t,r,c,I,A,_),k=md(),t!==null&&!Zn?(pd(t,r,_),Qs(t,r,_)):(Ut&&k&&Kf(r),r.flags|=1,Si(t,r,d,_),r.child)}function Um(t,r,c,d,_){if(t===null){var A=c.type;return typeof A=="function"&&!Xf(A)&&A.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=A,Fm(t,r,A,d,_)):(t=Lu(c.type,null,d,r,r.mode,_),t.ref=r.ref,t.return=r,r.child=t)}if(A=t.child,!jd(t,_)){var I=A.memoizedProps;if(c=c.compare,c=c!==null?c:y,c(I,d)&&t.ref===r.ref)return Qs(t,r,_)}return r.flags|=1,t=Gs(A,d),t.ref=r.ref,t.return=r,r.child=t}function Fm(t,r,c,d,_){if(t!==null){var A=t.memoizedProps;if(y(A,d)&&t.ref===r.ref)if(Zn=!1,r.pendingProps=d=A,jd(t,_))(t.flags&131072)!==0&&(Zn=!0);else return r.lanes=t.lanes,Qs(t,r,_)}return Ld(t,r,c,d,_)}function jm(t,r,c,d){var _=d.children,A=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(A=A!==null?A.baseLanes|c:c,t!==null){for(d=r.child=t.child,_=0;d!==null;)_=_|d.lanes|d.childLanes,d=d.sibling;d=_&~A}else d=0,r.child=null;return zm(t,r,A,c,d)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Vu(r,A!==null?A.cachePool:null),A!==null?Gg(r,A):ud(),qg(r);else return d=r.lanes=536870912,zm(t,r,A!==null?A.baseLanes|c:c,c,d)}else A!==null?(Vu(r,A.cachePool),Gg(r,A),La(),r.memoizedState=null):(t!==null&&Vu(r,null),ud(),La());return Si(t,r,_,c),r.child}function yc(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function zm(t,r,c,d,_){var A=rd();return A=A===null?null:{parent:Kn._currentValue,pool:A},r.memoizedState={baseLanes:c,cachePool:A},t!==null&&Vu(r,null),ud(),qg(r),t!==null&&hl(t,r,d,!0),r.childLanes=_,null}function eh(t,r){return r=nh({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Hm(t,r,c){return ko(r,t.child,null,c),t=eh(r,r.pendingProps),t.flags|=2,Sr(r),r.memoizedState=null,t}function gA(t,r,c){var d=r.pendingProps,_=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Ut){if(d.mode==="hidden")return t=eh(r,d),r.lanes=536870912,yc(null,t);if(fd(r),(t=_n)?(t=t2(t,Xr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Sa!==null?{id:ys,overflow:_s}:null,retryLane:536870912,hydrationErrors:null},c=Sg(t),c.return=r,r.child=c,vi=r,_n=null)):t=null,t===null)throw Ia(r);return r.lanes=536870912,null}return eh(r,d)}var A=t.memoizedState;if(A!==null){var I=A.dehydrated;if(fd(r),_)if(r.flags&256)r.flags&=-257,r=Hm(t,r,c);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(o(558));else if(Zn||hl(t,r,c,!1),_=(c&t.childLanes)!==0,Zn||_){if(d=fn,d!==null&&(I=Ds(d,c),I!==0&&I!==A.retryLane))throw A.retryLane=I,Io(t,I),cr(d,t,I),Md;hh(),r=Hm(t,r,c)}else t=A.treeContext,_n=Wr(I.nextSibling),vi=r,Ut=!0,ba=null,Xr=!1,t!==null&&Rg(r,t),r=eh(r,d),r.flags|=4096;return r}return t=Gs(t.child,{mode:d.mode,children:d.children}),t.ref=r.ref,r.child=t,t.return=r,t}function th(t,r){var c=r.ref;if(c===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(o(284));(t===null||t.ref!==c)&&(r.flags|=4194816)}}function Ld(t,r,c,d,_){return Do(r),c=gd(t,r,c,d,void 0,_),d=md(),t!==null&&!Zn?(pd(t,r,_),Qs(t,r,_)):(Ut&&d&&Kf(r),r.flags|=1,Si(t,r,c,_),r.child)}function Gm(t,r,c,d,_,A){return Do(r),r.updateQueue=null,c=Yg(r,d,c,_),Xg(t),d=md(),t!==null&&!Zn?(pd(t,r,A),Qs(t,r,A)):(Ut&&d&&Kf(r),r.flags|=1,Si(t,r,c,A),r.child)}function qm(t,r,c,d,_){if(Do(r),r.stateNode===null){var A=ol,I=c.contextType;typeof I=="object"&&I!==null&&(A=Ci(I)),A=new c(d,A),r.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Od,r.stateNode=A,A._reactInternals=r,A=r.stateNode,A.props=d,A.state=r.memoizedState,A.refs={},ad(r),I=c.contextType,A.context=typeof I=="object"&&I!==null?Ci(I):ol,A.state=r.memoizedState,I=c.getDerivedStateFromProps,typeof I=="function"&&(Nd(r,c,I,d),A.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(I=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),I!==A.state&&Od.enqueueReplaceState(A,A.state,null),fc(r,d,A,_),hc(),A.state=r.memoizedState),typeof A.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(t===null){A=r.stateNode;var k=r.memoizedProps,Y=Vo(c,k);A.props=Y;var ce=A.context,_e=c.contextType;I=ol,typeof _e=="object"&&_e!==null&&(I=Ci(_e));var Te=c.getDerivedStateFromProps;_e=typeof Te=="function"||typeof A.getSnapshotBeforeUpdate=="function",k=r.pendingProps!==k,_e||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(k||ce!==I)&&Om(r,A,d,I),Na=!1;var ue=r.memoizedState;A.state=ue,fc(r,d,A,_),hc(),ce=r.memoizedState,k||ue!==ce||Na?(typeof Te=="function"&&(Nd(r,c,Te,d),ce=r.memoizedState),(Y=Na||Nm(r,c,Y,d,ue,ce,I))?(_e||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(r.flags|=4194308)):(typeof A.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=ce),A.props=d,A.state=ce,A.context=I,d=Y):(typeof A.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{A=r.stateNode,od(t,r),I=r.memoizedProps,_e=Vo(c,I),A.props=_e,Te=r.pendingProps,ue=A.context,ce=c.contextType,Y=ol,typeof ce=="object"&&ce!==null&&(Y=Ci(ce)),k=c.getDerivedStateFromProps,(ce=typeof k=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(I!==Te||ue!==Y)&&Om(r,A,d,Y),Na=!1,ue=r.memoizedState,A.state=ue,fc(r,d,A,_),hc();var ge=r.memoizedState;I!==Te||ue!==ge||Na||t!==null&&t.dependencies!==null&&ku(t.dependencies)?(typeof k=="function"&&(Nd(r,c,k,d),ge=r.memoizedState),(_e=Na||Nm(r,c,_e,d,ue,ge,Y)||t!==null&&t.dependencies!==null&&ku(t.dependencies))?(ce||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(d,ge,Y),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(d,ge,Y)),typeof A.componentDidUpdate=="function"&&(r.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof A.componentDidUpdate!="function"||I===t.memoizedProps&&ue===t.memoizedState||(r.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||I===t.memoizedProps&&ue===t.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=ge),A.props=d,A.state=ge,A.context=Y,d=_e):(typeof A.componentDidUpdate!="function"||I===t.memoizedProps&&ue===t.memoizedState||(r.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||I===t.memoizedProps&&ue===t.memoizedState||(r.flags|=1024),d=!1)}return A=d,th(t,r),d=(r.flags&128)!==0,A||d?(A=r.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:A.render(),r.flags|=1,t!==null&&d?(r.child=ko(r,t.child,null,_),r.child=ko(r,null,c,_)):Si(t,r,c,_),r.memoizedState=A.state,t=r.child):t=Qs(t,r,_),t}function Xm(t,r,c,d){return No(),r.flags|=256,Si(t,r,c,d),r.child}var Pd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kd(t){return{baseLanes:t,cachePool:Pg()}}function Bd(t,r,c){return t=t!==null?t.childLanes&~c:0,r&&(t|=Ir),t}function Ym(t,r,c){var d=r.pendingProps,_=!1,A=(r.flags&128)!==0,I;if((I=A)||(I=t!==null&&t.memoizedState===null?!1:(qn.current&2)!==0),I&&(_=!0,r.flags&=-129),I=(r.flags&32)!==0,r.flags&=-33,t===null){if(Ut){if(_?Ma(r):La(),(t=_n)?(t=t2(t,Xr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:Sa!==null?{id:ys,overflow:_s}:null,retryLane:536870912,hydrationErrors:null},c=Sg(t),c.return=r,r.child=c,vi=r,_n=null)):t=null,t===null)throw Ia(r);return E1(t)?r.lanes=32:r.lanes=536870912,null}var k=d.children;return d=d.fallback,_?(La(),_=r.mode,k=nh({mode:"hidden",children:k},_),d=Ro(d,_,c,null),k.return=r,d.return=r,k.sibling=d,r.child=k,d=r.child,d.memoizedState=kd(c),d.childLanes=Bd(t,I,c),r.memoizedState=Pd,yc(null,d)):(Ma(r),Vd(r,k))}var Y=t.memoizedState;if(Y!==null&&(k=Y.dehydrated,k!==null)){if(A)r.flags&256?(Ma(r),r.flags&=-257,r=Ud(t,r,c)):r.memoizedState!==null?(La(),r.child=t.child,r.flags|=128,r=null):(La(),k=d.fallback,_=r.mode,d=nh({mode:"visible",children:d.children},_),k=Ro(k,_,c,null),k.flags|=2,d.return=r,k.return=r,d.sibling=k,r.child=d,ko(r,t.child,null,c),d=r.child,d.memoizedState=kd(c),d.childLanes=Bd(t,I,c),r.memoizedState=Pd,r=yc(null,d));else if(Ma(r),E1(k)){if(I=k.nextSibling&&k.nextSibling.dataset,I)var ce=I.dgst;I=ce,d=Error(o(419)),d.stack="",d.digest=I,sc({value:d,source:null,stack:null}),r=Ud(t,r,c)}else if(Zn||hl(t,r,c,!1),I=(c&t.childLanes)!==0,Zn||I){if(I=fn,I!==null&&(d=Ds(I,c),d!==0&&d!==Y.retryLane))throw Y.retryLane=d,Io(t,d),cr(I,t,d),Md;_1(k)||hh(),r=Ud(t,r,c)}else _1(k)?(r.flags|=192,r.child=t.child,r=null):(t=Y.treeContext,_n=Wr(k.nextSibling),vi=r,Ut=!0,ba=null,Xr=!1,t!==null&&Rg(r,t),r=Vd(r,d.children),r.flags|=4096);return r}return _?(La(),k=d.fallback,_=r.mode,Y=t.child,ce=Y.sibling,d=Gs(Y,{mode:"hidden",children:d.children}),d.subtreeFlags=Y.subtreeFlags&65011712,ce!==null?k=Gs(ce,k):(k=Ro(k,_,c,null),k.flags|=2),k.return=r,d.return=r,d.sibling=k,r.child=d,yc(null,d),d=r.child,k=t.child.memoizedState,k===null?k=kd(c):(_=k.cachePool,_!==null?(Y=Kn._currentValue,_=_.parent!==Y?{parent:Y,pool:Y}:_):_=Pg(),k={baseLanes:k.baseLanes|c,cachePool:_}),d.memoizedState=k,d.childLanes=Bd(t,I,c),r.memoizedState=Pd,yc(t.child,d)):(Ma(r),c=t.child,t=c.sibling,c=Gs(c,{mode:"visible",children:d.children}),c.return=r,c.sibling=null,t!==null&&(I=r.deletions,I===null?(r.deletions=[t],r.flags|=16):I.push(t)),r.child=c,r.memoizedState=null,c)}function Vd(t,r){return r=nh({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function nh(t,r){return t=vr(22,t,null,r),t.lanes=0,t}function Ud(t,r,c){return ko(r,t.child,null,c),t=Vd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Wm(t,r,c){t.lanes|=r;var d=t.alternate;d!==null&&(d.lanes|=r),ed(t.return,r,c)}function Fd(t,r,c,d,_,A){var I=t.memoizedState;I===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:_,treeForkCount:A}:(I.isBackwards=r,I.rendering=null,I.renderingStartTime=0,I.last=d,I.tail=c,I.tailMode=_,I.treeForkCount=A)}function Km(t,r,c){var d=r.pendingProps,_=d.revealOrder,A=d.tail;d=d.children;var I=qn.current,k=(I&2)!==0;if(k?(I=I&1|2,r.flags|=128):I&=1,Ce(qn,I),Si(t,r,d,c),d=Ut?rc:0,!k&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wm(t,c,r);else if(t.tag===19)Wm(t,c,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(_){case"forwards":for(c=r.child,_=null;c!==null;)t=c.alternate,t!==null&&Gu(t)===null&&(_=c),c=c.sibling;c=_,c===null?(_=r.child,r.child=null):(_=c.sibling,c.sibling=null),Fd(r,!1,_,c,A,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,_=r.child,r.child=null;_!==null;){if(t=_.alternate,t!==null&&Gu(t)===null){r.child=_;break}t=_.sibling,_.sibling=c,c=_,_=t}Fd(r,!0,c,null,A,d);break;case"together":Fd(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function Qs(t,r,c){if(t!==null&&(r.dependencies=t.dependencies),Ba|=r.lanes,(c&r.childLanes)===0)if(t!==null){if(hl(t,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(o(153));if(r.child!==null){for(t=r.child,c=Gs(t,t.pendingProps),r.child=c,c.return=r;t.sibling!==null;)t=t.sibling,c=c.sibling=Gs(t,t.pendingProps),c.return=r;c.sibling=null}return r.child}function jd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&ku(t)))}function mA(t,r,c){switch(r.tag){case 3:wt(r,r.stateNode.containerInfo),Ra(r,Kn,t.memoizedState.cache),No();break;case 27:case 5:fr(r);break;case 4:wt(r,r.stateNode.containerInfo);break;case 10:Ra(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,fd(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(Ma(r),r.flags|=128,null):(c&r.child.childLanes)!==0?Ym(t,r,c):(Ma(r),t=Qs(t,r,c),t!==null?t.sibling:null);Ma(r);break;case 19:var _=(t.flags&128)!==0;if(d=(c&r.childLanes)!==0,d||(hl(t,r,c,!1),d=(c&r.childLanes)!==0),_){if(d)return Km(t,r,c);r.flags|=128}if(_=r.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Ce(qn,qn.current),d)break;return null;case 22:return r.lanes=0,jm(t,r,c,r.pendingProps);case 24:Ra(r,Kn,t.memoizedState.cache)}return Qs(t,r,c)}function Qm(t,r,c){if(t!==null)if(t.memoizedProps!==r.pendingProps)Zn=!0;else{if(!jd(t,c)&&(r.flags&128)===0)return Zn=!1,mA(t,r,c);Zn=(t.flags&131072)!==0}else Zn=!1,Ut&&(r.flags&1048576)!==0&&Ig(r,rc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(t=Lo(r.elementType),r.type=t,typeof t=="function")Xf(t)?(d=Vo(t,d),r.tag=1,r=qm(null,r,t,d,c)):(r.tag=0,r=Ld(null,r,t,d,c));else{if(t!=null){var _=t.$$typeof;if(_===Ue){r.tag=11,r=Vm(null,r,t,d,c);break e}else if(_===V){r.tag=14,r=Um(null,r,t,d,c);break e}}throw r=Ae(t)||t,Error(o(306,r,""))}}return r;case 0:return Ld(t,r,r.type,r.pendingProps,c);case 1:return d=r.type,_=Vo(d,r.pendingProps),qm(t,r,d,_,c);case 3:e:{if(wt(r,r.stateNode.containerInfo),t===null)throw Error(o(387));d=r.pendingProps;var A=r.memoizedState;_=A.element,od(t,r),fc(r,d,null,c);var I=r.memoizedState;if(d=I.cache,Ra(r,Kn,d),d!==A.cache&&td(r,[Kn],c,!0),hc(),d=I.element,A.isDehydrated)if(A={element:d,isDehydrated:!1,cache:I.cache},r.updateQueue.baseState=A,r.memoizedState=A,r.flags&256){r=Xm(t,r,d,c);break e}else if(d!==_){_=Hr(Error(o(424)),r),sc(_),r=Xm(t,r,d,c);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,_n=Wr(t.firstChild),vi=r,Ut=!0,ba=null,Xr=!0,c=jg(r,null,d,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(No(),d===_){r=Qs(t,r,c);break e}Si(t,r,d,c)}r=r.child}return r;case 26:return th(t,r),t===null?(c=o2(r.type,null,r.pendingProps,null))?r.memoizedState=c:Ut||(c=r.type,t=r.pendingProps,d=_h(ke.current).createElement(c),d[Tn]=r,d[zt]=t,bi(d,c,t),vn(d),r.stateNode=d):r.memoizedState=o2(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return fr(r),t===null&&Ut&&(d=r.stateNode=r2(r.type,r.pendingProps,ke.current),vi=r,Xr=!0,_=_n,za(r.type)?(x1=_,_n=Wr(d.firstChild)):_n=_),Si(t,r,r.pendingProps.children,c),th(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Ut&&((_=d=_n)&&(d=qA(d,r.type,r.pendingProps,Xr),d!==null?(r.stateNode=d,vi=r,_n=Wr(d.firstChild),Xr=!1,_=!0):_=!1),_||Ia(r)),fr(r),_=r.type,A=r.pendingProps,I=t!==null?t.memoizedProps:null,d=A.children,m1(_,A)?d=null:I!==null&&m1(_,I)&&(r.flags|=32),r.memoizedState!==null&&(_=gd(t,r,aA,null,null,c),Dc._currentValue=_),th(t,r),Si(t,r,d,c),r.child;case 6:return t===null&&Ut&&((t=c=_n)&&(c=XA(c,r.pendingProps,Xr),c!==null?(r.stateNode=c,vi=r,_n=null,t=!0):t=!1),t||Ia(r)),null;case 13:return Ym(t,r,c);case 4:return wt(r,r.stateNode.containerInfo),d=r.pendingProps,t===null?r.child=ko(r,null,d,c):Si(t,r,d,c),r.child;case 11:return Vm(t,r,r.type,r.pendingProps,c);case 7:return Si(t,r,r.pendingProps,c),r.child;case 8:return Si(t,r,r.pendingProps.children,c),r.child;case 12:return Si(t,r,r.pendingProps.children,c),r.child;case 10:return d=r.pendingProps,Ra(r,r.type,d.value),Si(t,r,d.children,c),r.child;case 9:return _=r.type._context,d=r.pendingProps.children,Do(r),_=Ci(_),d=d(_),r.flags|=1,Si(t,r,d,c),r.child;case 14:return Um(t,r,r.type,r.pendingProps,c);case 15:return Fm(t,r,r.type,r.pendingProps,c);case 19:return Km(t,r,c);case 31:return gA(t,r,c);case 22:return jm(t,r,c,r.pendingProps);case 24:return Do(r),d=Ci(Kn),t===null?(_=rd(),_===null&&(_=fn,A=nd(),_.pooledCache=A,A.refCount++,A!==null&&(_.pooledCacheLanes|=c),_=A),r.memoizedState={parent:d,cache:_},ad(r),Ra(r,Kn,_)):((t.lanes&c)!==0&&(od(t,r),fc(r,null,null,c),hc()),_=t.memoizedState,A=r.memoizedState,_.parent!==d?(_={parent:d,cache:d},r.memoizedState=_,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=_),Ra(r,Kn,d)):(d=A.cache,Ra(r,Kn,d),d!==_.cache&&td(r,[Kn],c,!0))),Si(t,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(o(156,r.tag))}function Zs(t){t.flags|=4}function zd(t,r,c,d,_){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(_&335544128)===_)if(t.stateNode.complete)t.flags|=8192;else if(Tp())t.flags|=8192;else throw Po=Fu,sd}else t.flags&=-16777217}function Zm(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!f2(r))if(Tp())t.flags|=8192;else throw Po=Fu,sd}function ih(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Hn():536870912,t.lanes|=r,Tl|=r)}function _c(t,r){if(!Ut)switch(t.tailMode){case"hidden":r=t.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:d.sibling=null}}function En(t){var r=t.alternate!==null&&t.alternate.child===t.child,c=0,d=0;if(r)for(var _=t.child;_!==null;)c|=_.lanes|_.childLanes,d|=_.subtreeFlags&65011712,d|=_.flags&65011712,_.return=t,_=_.sibling;else for(_=t.child;_!==null;)c|=_.lanes|_.childLanes,d|=_.subtreeFlags,d|=_.flags,_.return=t,_=_.sibling;return t.subtreeFlags|=d,t.childLanes=c,r}function pA(t,r,c){var d=r.pendingProps;switch(Qf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return En(r),null;case 1:return En(r),null;case 3:return c=r.stateNode,d=null,t!==null&&(d=t.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),Ys(Kn),Zt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(ul(r)?Zs(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Jf())),En(r),null;case 26:var _=r.type,A=r.memoizedState;return t===null?(Zs(r),A!==null?(En(r),Zm(r,A)):(En(r),zd(r,_,null,d,c))):A?A!==t.memoizedState?(Zs(r),En(r),Zm(r,A)):(En(r),r.flags&=-16777217):(t=t.memoizedProps,t!==d&&Zs(r),En(r),zd(r,_,t,d,c)),null;case 27:if(zn(r),c=ke.current,_=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==d&&Zs(r);else{if(!d){if(r.stateNode===null)throw Error(o(166));return En(r),null}t=Be.current,ul(r)?Ng(r):(t=r2(_,d,c),r.stateNode=t,Zs(r))}return En(r),null;case 5:if(zn(r),_=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==d&&Zs(r);else{if(!d){if(r.stateNode===null)throw Error(o(166));return En(r),null}if(A=Be.current,ul(r))Ng(r);else{var I=_h(ke.current);switch(A){case 1:A=I.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:A=I.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":A=I.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":A=I.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":A=I.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof d.is=="string"?I.createElement("select",{is:d.is}):I.createElement("select"),d.multiple?A.multiple=!0:d.size&&(A.size=d.size);break;default:A=typeof d.is=="string"?I.createElement(_,{is:d.is}):I.createElement(_)}}A[Tn]=r,A[zt]=d;e:for(I=r.child;I!==null;){if(I.tag===5||I.tag===6)A.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===r)break e;for(;I.sibling===null;){if(I.return===null||I.return===r)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}r.stateNode=A;e:switch(bi(A,_,d),_){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Zs(r)}}return En(r),zd(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,c),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==d&&Zs(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(o(166));if(t=ke.current,ul(r)){if(t=r.stateNode,c=r.memoizedProps,d=null,_=vi,_!==null)switch(_.tag){case 27:case 5:d=_.memoizedProps}t[Tn]=r,t=!!(t.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Yp(t.nodeValue,c)),t||Ia(r,!0)}else t=_h(t).createTextNode(d),t[Tn]=r,r.stateNode=t}return En(r),null;case 31:if(c=r.memoizedState,t===null||t.memoizedState!==null){if(d=ul(r),c!==null){if(t===null){if(!d)throw Error(o(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[Tn]=r}else No(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;En(r),t=!1}else c=Jf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),t=!0;if(!t)return r.flags&256?(Sr(r),r):(Sr(r),null);if((r.flags&128)!==0)throw Error(o(558))}return En(r),null;case 13:if(d=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_=ul(r),d!==null&&d.dehydrated!==null){if(t===null){if(!_)throw Error(o(318));if(_=r.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(o(317));_[Tn]=r}else No(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;En(r),_=!1}else _=Jf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=_),_=!0;if(!_)return r.flags&256?(Sr(r),r):(Sr(r),null)}return Sr(r),(r.flags&128)!==0?(r.lanes=c,r):(c=d!==null,t=t!==null&&t.memoizedState!==null,c&&(d=r.child,_=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(_=d.alternate.memoizedState.cachePool.pool),A=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(A=d.memoizedState.cachePool.pool),A!==_&&(d.flags|=2048)),c!==t&&c&&(r.child.flags|=8192),ih(r,r.updateQueue),En(r),null);case 4:return Zt(),t===null&&u1(r.stateNode.containerInfo),En(r),null;case 10:return Ys(r.type),En(r),null;case 19:if($(qn),d=r.memoizedState,d===null)return En(r),null;if(_=(r.flags&128)!==0,A=d.rendering,A===null)if(_)_c(d,!1);else{if(Un!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(A=Gu(t),A!==null){for(r.flags|=128,_c(d,!1),t=A.updateQueue,r.updateQueue=t,ih(r,t),r.subtreeFlags=0,t=c,c=r.child;c!==null;)Cg(c,t),c=c.sibling;return Ce(qn,qn.current&1|2),Ut&&qs(r,d.treeForkCount),r.child}t=t.sibling}d.tail!==null&&pn()>lh&&(r.flags|=128,_=!0,_c(d,!1),r.lanes=4194304)}else{if(!_)if(t=Gu(A),t!==null){if(r.flags|=128,_=!0,t=t.updateQueue,r.updateQueue=t,ih(r,t),_c(d,!0),d.tail===null&&d.tailMode==="hidden"&&!A.alternate&&!Ut)return En(r),null}else 2*pn()-d.renderingStartTime>lh&&c!==536870912&&(r.flags|=128,_=!0,_c(d,!1),r.lanes=4194304);d.isBackwards?(A.sibling=r.child,r.child=A):(t=d.last,t!==null?t.sibling=A:r.child=A,d.last=A)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=pn(),t.sibling=null,c=qn.current,Ce(qn,_?c&1|2:c&1),Ut&&qs(r,d.treeForkCount),t):(En(r),null);case 22:case 23:return Sr(r),hd(),d=r.memoizedState!==null,t!==null?t.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(c&536870912)!==0&&(r.flags&128)===0&&(En(r),r.subtreeFlags&6&&(r.flags|=8192)):En(r),c=r.updateQueue,c!==null&&ih(r,c.retryQueue),c=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==c&&(r.flags|=2048),t!==null&&$(Mo),null;case 24:return c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Ys(Kn),En(r),null;case 25:return null;case 30:return null}throw Error(o(156,r.tag))}function yA(t,r){switch(Qf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ys(Kn),Zt(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return zn(r),null;case 31:if(r.memoizedState!==null){if(Sr(r),r.alternate===null)throw Error(o(340));No()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Sr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(o(340));No()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return $(qn),null;case 4:return Zt(),null;case 10:return Ys(r.type),null;case 22:case 23:return Sr(r),hd(),t!==null&&$(Mo),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return Ys(Kn),null;case 25:return null;default:return null}}function Jm(t,r){switch(Qf(r),r.tag){case 3:Ys(Kn),Zt();break;case 26:case 27:case 5:zn(r);break;case 4:Zt();break;case 31:r.memoizedState!==null&&Sr(r);break;case 13:Sr(r);break;case 19:$(qn);break;case 10:Ys(r.type);break;case 22:case 23:Sr(r),hd(),t!==null&&$(Mo);break;case 24:Ys(Kn)}}function Ec(t,r){try{var c=r.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var _=d.next;c=_;do{if((c.tag&t)===t){d=void 0;var A=c.create,I=c.inst;d=A(),I.destroy=d}c=c.next}while(c!==_)}}catch(k){rn(r,r.return,k)}}function Pa(t,r,c){try{var d=r.updateQueue,_=d!==null?d.lastEffect:null;if(_!==null){var A=_.next;d=A;do{if((d.tag&t)===t){var I=d.inst,k=I.destroy;if(k!==void 0){I.destroy=void 0,_=r;var Y=c,ce=k;try{ce()}catch(_e){rn(_,Y,_e)}}}d=d.next}while(d!==A)}}catch(_e){rn(r,r.return,_e)}}function $m(t){var r=t.updateQueue;if(r!==null){var c=t.stateNode;try{Hg(r,c)}catch(d){rn(t,t.return,d)}}}function ep(t,r,c){c.props=Vo(t.type,t.memoizedProps),c.state=t.memoizedState;try{c.componentWillUnmount()}catch(d){rn(t,r,d)}}function xc(t,r){try{var c=t.ref;if(c!==null){switch(t.tag){case 26:case 27:case 5:var d=t.stateNode;break;case 30:d=t.stateNode;break;default:d=t.stateNode}typeof c=="function"?t.refCleanup=c(d):c.current=d}}catch(_){rn(t,r,_)}}function Es(t,r){var c=t.ref,d=t.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(_){rn(t,r,_)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(_){rn(t,r,_)}else c.current=null}function tp(t){var r=t.type,c=t.memoizedProps,d=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(_){rn(t,t.return,_)}}function Hd(t,r,c){try{var d=t.stateNode;UA(d,t.type,c,r),d[zt]=r}catch(_){rn(t,t.return,_)}}function np(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&za(t.type)||t.tag===4}function Gd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||np(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&za(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qd(t,r,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(t,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(t),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=Pi));else if(d!==4&&(d===27&&za(t.type)&&(c=t.stateNode,r=null),t=t.child,t!==null))for(qd(t,r,c),t=t.sibling;t!==null;)qd(t,r,c),t=t.sibling}function rh(t,r,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,r?c.insertBefore(t,r):c.appendChild(t);else if(d!==4&&(d===27&&za(t.type)&&(c=t.stateNode),t=t.child,t!==null))for(rh(t,r,c),t=t.sibling;t!==null;)rh(t,r,c),t=t.sibling}function ip(t){var r=t.stateNode,c=t.memoizedProps;try{for(var d=t.type,_=r.attributes;_.length;)r.removeAttributeNode(_[0]);bi(r,d,c),r[Tn]=t,r[zt]=c}catch(A){rn(t,t.return,A)}}var Js=!1,Jn=!1,Xd=!1,rp=typeof WeakSet=="function"?WeakSet:Set,ui=null;function _A(t,r){if(t=t.containerInfo,d1=Ch,t=O(t),L(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var _=d.anchorOffset,A=d.focusNode;d=d.focusOffset;try{c.nodeType,A.nodeType}catch{c=null;break e}var I=0,k=-1,Y=-1,ce=0,_e=0,Te=t,ue=null;t:for(;;){for(var ge;Te!==c||_!==0&&Te.nodeType!==3||(k=I+_),Te!==A||d!==0&&Te.nodeType!==3||(Y=I+d),Te.nodeType===3&&(I+=Te.nodeValue.length),(ge=Te.firstChild)!==null;)ue=Te,Te=ge;for(;;){if(Te===t)break t;if(ue===c&&++ce===_&&(k=I),ue===A&&++_e===d&&(Y=I),(ge=Te.nextSibling)!==null)break;Te=ue,ue=Te.parentNode}Te=ge}c=k===-1||Y===-1?null:{start:k,end:Y}}else c=null}c=c||{start:0,end:0}}else c=null;for(g1={focusedElem:t,selectionRange:c},Ch=!1,ui=r;ui!==null;)if(r=ui,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,ui=t;else for(;ui!==null;){switch(r=ui,A=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(c=0;c<t.length;c++)_=t[c],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&A!==null){t=void 0,c=r,_=A.memoizedProps,A=A.memoizedState,d=c.stateNode;try{var Ye=Vo(c.type,_);t=d.getSnapshotBeforeUpdate(Ye,A),d.__reactInternalSnapshotBeforeUpdate=t}catch(st){rn(c,c.return,st)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,c=t.nodeType,c===9)y1(t);else if(c===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":y1(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=r.sibling,t!==null){t.return=r.return,ui=t;break}ui=r.return}}function sp(t,r,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:ea(t,c),d&4&&Ec(5,c);break;case 1:if(ea(t,c),d&4)if(t=c.stateNode,r===null)try{t.componentDidMount()}catch(I){rn(c,c.return,I)}else{var _=Vo(c.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(_,r,t.__reactInternalSnapshotBeforeUpdate)}catch(I){rn(c,c.return,I)}}d&64&&$m(c),d&512&&xc(c,c.return);break;case 3:if(ea(t,c),d&64&&(t=c.updateQueue,t!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{Hg(t,r)}catch(I){rn(c,c.return,I)}}break;case 27:r===null&&d&4&&ip(c);case 26:case 5:ea(t,c),r===null&&d&4&&tp(c),d&512&&xc(c,c.return);break;case 12:ea(t,c);break;case 31:ea(t,c),d&4&&lp(t,c);break;case 13:ea(t,c),d&4&&cp(t,c),d&64&&(t=c.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(c=bA.bind(null,c),YA(t,c))));break;case 22:if(d=c.memoizedState!==null||Js,!d){r=r!==null&&r.memoizedState!==null||Jn,_=Js;var A=Jn;Js=d,(Jn=r)&&!A?ta(t,c,(c.subtreeFlags&8772)!==0):ea(t,c),Js=_,Jn=A}break;case 30:break;default:ea(t,c)}}function ap(t){var r=t.alternate;r!==null&&(t.alternate=null,ap(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ei(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Rn=null,sr=!1;function $s(t,r,c){for(c=c.child;c!==null;)op(t,r,c),c=c.sibling}function op(t,r,c){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(qt,c)}catch{}switch(c.tag){case 26:Jn||Es(c,r),$s(t,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Jn||Es(c,r);var d=Rn,_=sr;za(c.type)&&(Rn=c.stateNode,sr=!1),$s(t,r,c),Rc(c.stateNode),Rn=d,sr=_;break;case 5:Jn||Es(c,r);case 6:if(d=Rn,_=sr,Rn=null,$s(t,r,c),Rn=d,sr=_,Rn!==null)if(sr)try{(Rn.nodeType===9?Rn.body:Rn.nodeName==="HTML"?Rn.ownerDocument.body:Rn).removeChild(c.stateNode)}catch(A){rn(c,r,A)}else try{Rn.removeChild(c.stateNode)}catch(A){rn(c,r,A)}break;case 18:Rn!==null&&(sr?(t=Rn,$p(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,c.stateNode),Ol(t)):$p(Rn,c.stateNode));break;case 4:d=Rn,_=sr,Rn=c.stateNode.containerInfo,sr=!0,$s(t,r,c),Rn=d,sr=_;break;case 0:case 11:case 14:case 15:Pa(2,c,r),Jn||Pa(4,c,r),$s(t,r,c);break;case 1:Jn||(Es(c,r),d=c.stateNode,typeof d.componentWillUnmount=="function"&&ep(c,r,d)),$s(t,r,c);break;case 21:$s(t,r,c);break;case 22:Jn=(d=Jn)||c.memoizedState!==null,$s(t,r,c),Jn=d;break;default:$s(t,r,c)}}function lp(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ol(t)}catch(c){rn(r,r.return,c)}}}function cp(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ol(t)}catch(c){rn(r,r.return,c)}}function EA(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new rp),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new rp),r;default:throw Error(o(435,t.tag))}}function sh(t,r){var c=EA(t);r.forEach(function(d){if(!c.has(d)){c.add(d);var _=IA.bind(null,t,d);d.then(_,_)}})}function ar(t,r){var c=r.deletions;if(c!==null)for(var d=0;d<c.length;d++){var _=c[d],A=t,I=r,k=I;e:for(;k!==null;){switch(k.tag){case 27:if(za(k.type)){Rn=k.stateNode,sr=!1;break e}break;case 5:Rn=k.stateNode,sr=!1;break e;case 3:case 4:Rn=k.stateNode.containerInfo,sr=!0;break e}k=k.return}if(Rn===null)throw Error(o(160));op(A,I,_),Rn=null,sr=!1,A=_.alternate,A!==null&&(A.return=null),_.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)up(r,t),r=r.sibling}var ss=null;function up(t,r){var c=t.alternate,d=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ar(r,t),or(t),d&4&&(Pa(3,t,t.return),Ec(3,t),Pa(5,t,t.return));break;case 1:ar(r,t),or(t),d&512&&(Jn||c===null||Es(c,c.return)),d&64&&Js&&(t=t.updateQueue,t!==null&&(d=t.callbacks,d!==null&&(c=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var _=ss;if(ar(r,t),or(t),d&512&&(Jn||c===null||Es(c,c.return)),d&4){var A=c!==null?c.memoizedState:null;if(d=t.memoizedState,c===null)if(d===null)if(t.stateNode===null){e:{d=t.type,c=t.memoizedProps,_=_.ownerDocument||_;t:switch(d){case"title":A=_.getElementsByTagName("title")[0],(!A||A[Lr]||A[Tn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=_.createElement(d),_.head.insertBefore(A,_.querySelector("head > title"))),bi(A,d,c),A[Tn]=t,vn(A),d=A;break e;case"link":var I=u2("link","href",_).get(d+(c.href||""));if(I){for(var k=0;k<I.length;k++)if(A=I[k],A.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&A.getAttribute("rel")===(c.rel==null?null:c.rel)&&A.getAttribute("title")===(c.title==null?null:c.title)&&A.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){I.splice(k,1);break t}}A=_.createElement(d),bi(A,d,c),_.head.appendChild(A);break;case"meta":if(I=u2("meta","content",_).get(d+(c.content||""))){for(k=0;k<I.length;k++)if(A=I[k],A.getAttribute("content")===(c.content==null?null:""+c.content)&&A.getAttribute("name")===(c.name==null?null:c.name)&&A.getAttribute("property")===(c.property==null?null:c.property)&&A.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&A.getAttribute("charset")===(c.charSet==null?null:c.charSet)){I.splice(k,1);break t}}A=_.createElement(d),bi(A,d,c),_.head.appendChild(A);break;default:throw Error(o(468,d))}A[Tn]=t,vn(A),d=A}t.stateNode=d}else h2(_,t.type,t.stateNode);else t.stateNode=c2(_,d,t.memoizedProps);else A!==d?(A===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):A.count--,d===null?h2(_,t.type,t.stateNode):c2(_,d,t.memoizedProps)):d===null&&t.stateNode!==null&&Hd(t,t.memoizedProps,c.memoizedProps)}break;case 27:ar(r,t),or(t),d&512&&(Jn||c===null||Es(c,c.return)),c!==null&&d&4&&Hd(t,t.memoizedProps,c.memoizedProps);break;case 5:if(ar(r,t),or(t),d&512&&(Jn||c===null||Es(c,c.return)),t.flags&32){_=t.stateNode;try{Li(_,"")}catch(Ye){rn(t,t.return,Ye)}}d&4&&t.stateNode!=null&&(_=t.memoizedProps,Hd(t,_,c!==null?c.memoizedProps:_)),d&1024&&(Xd=!0);break;case 6:if(ar(r,t),or(t),d&4){if(t.stateNode===null)throw Error(o(162));d=t.memoizedProps,c=t.stateNode;try{c.nodeValue=d}catch(Ye){rn(t,t.return,Ye)}}break;case 3:if(Ah=null,_=ss,ss=Eh(r.containerInfo),ar(r,t),ss=_,or(t),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Ol(r.containerInfo)}catch(Ye){rn(t,t.return,Ye)}Xd&&(Xd=!1,hp(t));break;case 4:d=ss,ss=Eh(t.stateNode.containerInfo),ar(r,t),or(t),ss=d;break;case 12:ar(r,t),or(t);break;case 31:ar(r,t),or(t),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,sh(t,d)));break;case 13:ar(r,t),or(t),t.child.flags&8192&&t.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(oh=pn()),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,sh(t,d)));break;case 22:_=t.memoizedState!==null;var Y=c!==null&&c.memoizedState!==null,ce=Js,_e=Jn;if(Js=ce||_,Jn=_e||Y,ar(r,t),Jn=_e,Js=ce,or(t),d&8192)e:for(r=t.stateNode,r._visibility=_?r._visibility&-2:r._visibility|1,_&&(c===null||Y||Js||Jn||Uo(t)),c=null,r=t;;){if(r.tag===5||r.tag===26){if(c===null){Y=c=r;try{if(A=Y.stateNode,_)I=A.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{k=Y.stateNode;var Te=Y.memoizedProps.style,ue=Te!=null&&Te.hasOwnProperty("display")?Te.display:null;k.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(Ye){rn(Y,Y.return,Ye)}}}else if(r.tag===6){if(c===null){Y=r;try{Y.stateNode.nodeValue=_?"":Y.memoizedProps}catch(Ye){rn(Y,Y.return,Ye)}}}else if(r.tag===18){if(c===null){Y=r;try{var ge=Y.stateNode;_?e2(ge,!0):e2(Y.stateNode,!1)}catch(Ye){rn(Y,Y.return,Ye)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=t.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,sh(t,c))));break;case 19:ar(r,t),or(t),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,sh(t,d)));break;case 30:break;case 21:break;default:ar(r,t),or(t)}}function or(t){var r=t.flags;if(r&2){try{for(var c,d=t.return;d!==null;){if(np(d)){c=d;break}d=d.return}if(c==null)throw Error(o(160));switch(c.tag){case 27:var _=c.stateNode,A=Gd(t);rh(t,A,_);break;case 5:var I=c.stateNode;c.flags&32&&(Li(I,""),c.flags&=-33);var k=Gd(t);rh(t,k,I);break;case 3:case 4:var Y=c.stateNode.containerInfo,ce=Gd(t);qd(t,ce,Y);break;default:throw Error(o(161))}}catch(_e){rn(t,t.return,_e)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function hp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;hp(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function ea(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)sp(t,r.alternate,r),r=r.sibling}function Uo(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Pa(4,r,r.return),Uo(r);break;case 1:Es(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&ep(r,r.return,c),Uo(r);break;case 27:Rc(r.stateNode);case 26:case 5:Es(r,r.return),Uo(r);break;case 22:r.memoizedState===null&&Uo(r);break;case 30:Uo(r);break;default:Uo(r)}t=t.sibling}}function ta(t,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,_=t,A=r,I=A.flags;switch(A.tag){case 0:case 11:case 15:ta(_,A,c),Ec(4,A);break;case 1:if(ta(_,A,c),d=A,_=d.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(ce){rn(d,d.return,ce)}if(d=A,_=d.updateQueue,_!==null){var k=d.stateNode;try{var Y=_.shared.hiddenCallbacks;if(Y!==null)for(_.shared.hiddenCallbacks=null,_=0;_<Y.length;_++)zg(Y[_],k)}catch(ce){rn(d,d.return,ce)}}c&&I&64&&$m(A),xc(A,A.return);break;case 27:ip(A);case 26:case 5:ta(_,A,c),c&&d===null&&I&4&&tp(A),xc(A,A.return);break;case 12:ta(_,A,c);break;case 31:ta(_,A,c),c&&I&4&&lp(_,A);break;case 13:ta(_,A,c),c&&I&4&&cp(_,A);break;case 22:A.memoizedState===null&&ta(_,A,c),xc(A,A.return);break;case 30:break;default:ta(_,A,c)}r=r.sibling}}function Yd(t,r){var c=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==c&&(t!=null&&t.refCount++,c!=null&&ac(c))}function Wd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ac(t))}function as(t,r,c,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)fp(t,r,c,d),r=r.sibling}function fp(t,r,c,d){var _=r.flags;switch(r.tag){case 0:case 11:case 15:as(t,r,c,d),_&2048&&Ec(9,r);break;case 1:as(t,r,c,d);break;case 3:as(t,r,c,d),_&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ac(t)));break;case 12:if(_&2048){as(t,r,c,d),t=r.stateNode;try{var A=r.memoizedProps,I=A.id,k=A.onPostCommit;typeof k=="function"&&k(I,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(Y){rn(r,r.return,Y)}}else as(t,r,c,d);break;case 31:as(t,r,c,d);break;case 13:as(t,r,c,d);break;case 23:break;case 22:A=r.stateNode,I=r.alternate,r.memoizedState!==null?A._visibility&2?as(t,r,c,d):Ac(t,r):A._visibility&2?as(t,r,c,d):(A._visibility|=2,xl(t,r,c,d,(r.subtreeFlags&10256)!==0||!1)),_&2048&&Yd(I,r);break;case 24:as(t,r,c,d),_&2048&&Wd(r.alternate,r);break;default:as(t,r,c,d)}}function xl(t,r,c,d,_){for(_=_&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var A=t,I=r,k=c,Y=d,ce=I.flags;switch(I.tag){case 0:case 11:case 15:xl(A,I,k,Y,_),Ec(8,I);break;case 23:break;case 22:var _e=I.stateNode;I.memoizedState!==null?_e._visibility&2?xl(A,I,k,Y,_):Ac(A,I):(_e._visibility|=2,xl(A,I,k,Y,_)),_&&ce&2048&&Yd(I.alternate,I);break;case 24:xl(A,I,k,Y,_),_&&ce&2048&&Wd(I.alternate,I);break;default:xl(A,I,k,Y,_)}r=r.sibling}}function Ac(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=t,d=r,_=d.flags;switch(d.tag){case 22:Ac(c,d),_&2048&&Yd(d.alternate,d);break;case 24:Ac(c,d),_&2048&&Wd(d.alternate,d);break;default:Ac(c,d)}r=r.sibling}}var wc=8192;function Al(t,r,c){if(t.subtreeFlags&wc)for(t=t.child;t!==null;)dp(t,r,c),t=t.sibling}function dp(t,r,c){switch(t.tag){case 26:Al(t,r,c),t.flags&wc&&t.memoizedState!==null&&sw(c,ss,t.memoizedState,t.memoizedProps);break;case 5:Al(t,r,c);break;case 3:case 4:var d=ss;ss=Eh(t.stateNode.containerInfo),Al(t,r,c),ss=d;break;case 22:t.memoizedState===null&&(d=t.alternate,d!==null&&d.memoizedState!==null?(d=wc,wc=16777216,Al(t,r,c),wc=d):Al(t,r,c));break;default:Al(t,r,c)}}function gp(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Tc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];ui=d,pp(d,t)}gp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)mp(t),t=t.sibling}function mp(t){switch(t.tag){case 0:case 11:case 15:Tc(t),t.flags&2048&&Pa(9,t,t.return);break;case 3:Tc(t);break;case 12:Tc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,ah(t)):Tc(t);break;default:Tc(t)}}function ah(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];ui=d,pp(d,t)}gp(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Pa(8,r,r.return),ah(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,ah(r));break;default:ah(r)}t=t.sibling}}function pp(t,r){for(;ui!==null;){var c=ui;switch(c.tag){case 0:case 11:case 15:Pa(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ac(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,ui=d;else e:for(c=t;ui!==null;){d=ui;var _=d.sibling,A=d.return;if(ap(d),d===c){ui=null;break e}if(_!==null){_.return=A,ui=_;break e}ui=A}}}var xA={getCacheForType:function(t){var r=Ci(Kn),c=r.data.get(t);return c===void 0&&(c=t(),r.data.set(t,c)),c},cacheSignal:function(){return Ci(Kn).controller.signal}},AA=typeof WeakMap=="function"?WeakMap:Map,Qt=0,fn=null,Rt=null,Mt=0,nn=0,br=null,ka=!1,wl=!1,Kd=!1,na=0,Un=0,Ba=0,Fo=0,Qd=0,Ir=0,Tl=0,vc=null,lr=null,Zd=!1,oh=0,yp=0,lh=1/0,ch=null,Va=null,si=0,Ua=null,vl=null,ia=0,Jd=0,$d=null,_p=null,Cc=0,e1=null;function Rr(){return(Qt&2)!==0&&Mt!==0?Mt&-Mt:ie.T!==null?a1():yi()}function Ep(){if(Ir===0)if((Mt&536870912)===0||Ut){var t=xt;xt<<=1,(xt&3932160)===0&&(xt=262144),Ir=t}else Ir=536870912;return t=Cr.current,t!==null&&(t.flags|=32),Ir}function cr(t,r,c){(t===fn&&(nn===2||nn===9)||t.cancelPendingCommit!==null)&&(Cl(t,0),Fa(t,Mt,Ir,!1)),Mr(t,c),((Qt&2)===0||t!==fn)&&(t===fn&&((Qt&2)===0&&(Fo|=c),Un===4&&Fa(t,Mt,Ir,!1)),xs(t))}function xp(t,r,c){if((Qt&6)!==0)throw Error(o(327));var d=!c&&(r&127)===0&&(r&t.expiredLanes)===0||On(t,r),_=d?vA(t,r):n1(t,r,!0),A=d;do{if(_===0){wl&&!d&&Fa(t,r,0,!1);break}else{if(c=t.current.alternate,A&&!wA(c)){_=n1(t,r,!1),A=!1;continue}if(_===2){if(A=r,t.errorRecoveryDisabledLanes&A)var I=0;else I=t.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){r=I;e:{var k=t;_=vc;var Y=k.current.memoizedState.isDehydrated;if(Y&&(Cl(k,I).flags|=256),I=n1(k,I,!1),I!==2){if(Kd&&!Y){k.errorRecoveryDisabledLanes|=A,Fo|=A,_=4;break e}A=lr,lr=_,A!==null&&(lr===null?lr=A:lr.push.apply(lr,A))}_=I}if(A=!1,_!==2)continue}}if(_===1){Cl(t,0),Fa(t,r,0,!0);break}e:{switch(d=t,A=_,A){case 0:case 1:throw Error(o(345));case 4:if((r&4194048)!==r)break;case 6:Fa(d,r,Ir,!ka);break e;case 2:lr=null;break;case 3:case 5:break;default:throw Error(o(329))}if((r&62914560)===r&&(_=oh+300-pn(),10<_)){if(Fa(d,r,Ir,!ka),pr(d,0,!0)!==0)break e;ia=r,d.timeoutHandle=Zp(Ap.bind(null,d,c,lr,ch,Zd,r,Ir,Fo,Tl,ka,A,"Throttled",-0,0),_);break e}Ap(d,c,lr,ch,Zd,r,Ir,Fo,Tl,ka,A,null,-0,0)}}break}while(!0);xs(t)}function Ap(t,r,c,d,_,A,I,k,Y,ce,_e,Te,ue,ge){if(t.timeoutHandle=-1,Te=r.subtreeFlags,Te&8192||(Te&16785408)===16785408){Te={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pi},dp(r,A,Te);var Ye=(A&62914560)===A?oh-pn():(A&4194048)===A?yp-pn():0;if(Ye=aw(Te,Ye),Ye!==null){ia=A,t.cancelPendingCommit=Ye(Rp.bind(null,t,r,A,c,d,_,I,k,Y,_e,Te,null,ue,ge)),Fa(t,A,I,!ce);return}}Rp(t,r,A,c,d,_,I,k,Y)}function wA(t){for(var r=t;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var _=c[d],A=_.getSnapshot;_=_.value;try{if(!g(A(),_))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Fa(t,r,c,d){r&=~Qd,r&=~Fo,t.suspendedLanes|=r,t.pingedLanes&=~r,d&&(t.warmLanes|=r),d=t.expirationTimes;for(var _=r;0<_;){var A=31-at(_),I=1<<A;d[A]=-1,_&=~I}c!==0&&Os(t,c,r)}function uh(){return(Qt&6)===0?(Sc(0),!1):!0}function t1(){if(Rt!==null){if(nn===0)var t=Rt.return;else t=Rt,Xs=Oo=null,yd(t),ml=null,lc=0,t=Rt;for(;t!==null;)Jm(t.alternate,t),t=t.return;Rt=null}}function Cl(t,r){var c=t.timeoutHandle;c!==-1&&(t.timeoutHandle=-1,zA(c)),c=t.cancelPendingCommit,c!==null&&(t.cancelPendingCommit=null,c()),ia=0,t1(),fn=t,Rt=c=Gs(t.current,null),Mt=r,nn=0,br=null,ka=!1,wl=On(t,r),Kd=!1,Tl=Ir=Qd=Fo=Ba=Un=0,lr=vc=null,Zd=!1,(r&8)!==0&&(r|=r&32);var d=t.entangledLanes;if(d!==0)for(t=t.entanglements,d&=r;0<d;){var _=31-at(d),A=1<<_;r|=t[_],d&=~A}return na=r,Ou(),c}function wp(t,r){mt=null,ie.H=pc,r===gl||r===Uu?(r=Vg(),nn=3):r===sd?(r=Vg(),nn=4):nn=r===Md?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,br=r,Rt===null&&(Un=1,$u(t,Hr(r,t.current)))}function Tp(){var t=Cr.current;return t===null?!0:(Mt&4194048)===Mt?Yr===null:(Mt&62914560)===Mt||(Mt&536870912)!==0?t===Yr:!1}function vp(){var t=ie.H;return ie.H=pc,t===null?pc:t}function Cp(){var t=ie.A;return ie.A=xA,t}function hh(){Un=4,ka||(Mt&4194048)!==Mt&&Cr.current!==null||(wl=!0),(Ba&134217727)===0&&(Fo&134217727)===0||fn===null||Fa(fn,Mt,Ir,!1)}function n1(t,r,c){var d=Qt;Qt|=2;var _=vp(),A=Cp();(fn!==t||Mt!==r)&&(ch=null,Cl(t,r)),r=!1;var I=Un;e:do try{if(nn!==0&&Rt!==null){var k=Rt,Y=br;switch(nn){case 8:t1(),I=6;break e;case 3:case 2:case 9:case 6:Cr.current===null&&(r=!0);var ce=nn;if(nn=0,br=null,Sl(t,k,Y,ce),c&&wl){I=0;break e}break;default:ce=nn,nn=0,br=null,Sl(t,k,Y,ce)}}TA(),I=Un;break}catch(_e){wp(t,_e)}while(!0);return r&&t.shellSuspendCounter++,Xs=Oo=null,Qt=d,ie.H=_,ie.A=A,Rt===null&&(fn=null,Mt=0,Ou()),I}function TA(){for(;Rt!==null;)Sp(Rt)}function vA(t,r){var c=Qt;Qt|=2;var d=vp(),_=Cp();fn!==t||Mt!==r?(ch=null,lh=pn()+500,Cl(t,r)):wl=On(t,r);e:do try{if(nn!==0&&Rt!==null){r=Rt;var A=br;t:switch(nn){case 1:nn=0,br=null,Sl(t,r,A,1);break;case 2:case 9:if(kg(A)){nn=0,br=null,bp(r);break}r=function(){nn!==2&&nn!==9||fn!==t||(nn=7),xs(t)},A.then(r,r);break e;case 3:nn=7;break e;case 4:nn=5;break e;case 7:kg(A)?(nn=0,br=null,bp(r)):(nn=0,br=null,Sl(t,r,A,7));break;case 5:var I=null;switch(Rt.tag){case 26:I=Rt.memoizedState;case 5:case 27:var k=Rt;if(I?f2(I):k.stateNode.complete){nn=0,br=null;var Y=k.sibling;if(Y!==null)Rt=Y;else{var ce=k.return;ce!==null?(Rt=ce,fh(ce)):Rt=null}break t}}nn=0,br=null,Sl(t,r,A,5);break;case 6:nn=0,br=null,Sl(t,r,A,6);break;case 8:t1(),Un=6;break e;default:throw Error(o(462))}}CA();break}catch(_e){wp(t,_e)}while(!0);return Xs=Oo=null,ie.H=d,ie.A=_,Qt=c,Rt!==null?0:(fn=null,Mt=0,Ou(),Un)}function CA(){for(;Rt!==null&&!ma();)Sp(Rt)}function Sp(t){var r=Qm(t.alternate,t,na);t.memoizedProps=t.pendingProps,r===null?fh(t):Rt=r}function bp(t){var r=t,c=r.alternate;switch(r.tag){case 15:case 0:r=Gm(c,r,r.pendingProps,r.type,void 0,Mt);break;case 11:r=Gm(c,r,r.pendingProps,r.type.render,r.ref,Mt);break;case 5:yd(r);default:Jm(c,r),r=Rt=Cg(r,na),r=Qm(c,r,na)}t.memoizedProps=t.pendingProps,r===null?fh(t):Rt=r}function Sl(t,r,c,d){Xs=Oo=null,yd(r),ml=null,lc=0;var _=r.return;try{if(dA(t,_,r,c,Mt)){Un=1,$u(t,Hr(c,t.current)),Rt=null;return}}catch(A){if(_!==null)throw Rt=_,A;Un=1,$u(t,Hr(c,t.current)),Rt=null;return}r.flags&32768?(Ut||d===1?t=!0:wl||(Mt&536870912)!==0?t=!1:(ka=t=!0,(d===2||d===9||d===3||d===6)&&(d=Cr.current,d!==null&&d.tag===13&&(d.flags|=16384))),Ip(r,t)):fh(r)}function fh(t){var r=t;do{if((r.flags&32768)!==0){Ip(r,ka);return}t=r.return;var c=pA(r.alternate,r,na);if(c!==null){Rt=c;return}if(r=r.sibling,r!==null){Rt=r;return}Rt=r=t}while(r!==null);Un===0&&(Un=5)}function Ip(t,r){do{var c=yA(t.alternate,t);if(c!==null){c.flags&=32767,Rt=c;return}if(c=t.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(t=t.sibling,t!==null)){Rt=t;return}Rt=t=c}while(t!==null);Un=6,Rt=null}function Rp(t,r,c,d,_,A,I,k,Y){t.cancelPendingCommit=null;do dh();while(si!==0);if((Qt&6)!==0)throw Error(o(327));if(r!==null){if(r===t.current)throw Error(o(177));if(A=r.lanes|r.childLanes,A|=Gf,$i(t,c,A,I,k,Y),t===fn&&(Rt=fn=null,Mt=0),vl=r,Ua=t,ia=c,Jd=A,$d=_,_p=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,RA(gi,function(){return Lp(),null})):(t.callbackNode=null,t.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=ie.T,ie.T=null,_=ae.p,ae.p=2,I=Qt,Qt|=4;try{_A(t,r,c)}finally{Qt=I,ae.p=_,ie.T=d}}si=1,Np(),Op(),Dp()}}function Np(){if(si===1){si=0;var t=Ua,r=vl,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=ie.T,ie.T=null;var d=ae.p;ae.p=2;var _=Qt;Qt|=4;try{up(r,t);var A=g1,I=O(t.containerInfo),k=A.focusedElem,Y=A.selectionRange;if(I!==k&&k&&k.ownerDocument&&b(k.ownerDocument.documentElement,k)){if(Y!==null&&L(k)){var ce=Y.start,_e=Y.end;if(_e===void 0&&(_e=ce),"selectionStart"in k)k.selectionStart=ce,k.selectionEnd=Math.min(_e,k.value.length);else{var Te=k.ownerDocument||document,ue=Te&&Te.defaultView||window;if(ue.getSelection){var ge=ue.getSelection(),Ye=k.textContent.length,st=Math.min(Y.start,Ye),ln=Y.end===void 0?st:Math.min(Y.end,Ye);!ge.extend&&st>ln&&(I=ln,ln=st,st=I);var ne=T(k,st),J=T(k,ln);if(ne&&J&&(ge.rangeCount!==1||ge.anchorNode!==ne.node||ge.anchorOffset!==ne.offset||ge.focusNode!==J.node||ge.focusOffset!==J.offset)){var le=Te.createRange();le.setStart(ne.node,ne.offset),ge.removeAllRanges(),st>ln?(ge.addRange(le),ge.extend(J.node,J.offset)):(le.setEnd(J.node,J.offset),ge.addRange(le))}}}}for(Te=[],ge=k;ge=ge.parentNode;)ge.nodeType===1&&Te.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<Te.length;k++){var xe=Te[k];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}Ch=!!d1,g1=d1=null}finally{Qt=_,ae.p=d,ie.T=c}}t.current=r,si=2}}function Op(){if(si===2){si=0;var t=Ua,r=vl,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=ie.T,ie.T=null;var d=ae.p;ae.p=2;var _=Qt;Qt|=4;try{sp(t,r.alternate,r)}finally{Qt=_,ae.p=d,ie.T=c}}si=3}}function Dp(){if(si===4||si===3){si=0,po();var t=Ua,r=vl,c=ia,d=_p;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?si=5:(si=0,vl=Ua=null,Mp(t,t.pendingLanes));var _=t.pendingLanes;if(_===0&&(Va=null),pi(c),r=r.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(qt,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=ie.T,_=ae.p,ae.p=2,ie.T=null;try{for(var A=t.onRecoverableError,I=0;I<d.length;I++){var k=d[I];A(k.value,{componentStack:k.stack})}}finally{ie.T=r,ae.p=_}}(ia&3)!==0&&dh(),xs(t),_=t.pendingLanes,(c&261930)!==0&&(_&42)!==0?t===e1?Cc++:(Cc=0,e1=t):Cc=0,Sc(0)}}function Mp(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,ac(r)))}function dh(){return Np(),Op(),Dp(),Lp()}function Lp(){if(si!==5)return!1;var t=Ua,r=Jd;Jd=0;var c=pi(ia),d=ie.T,_=ae.p;try{ae.p=32>c?32:c,ie.T=null,c=$d,$d=null;var A=Ua,I=ia;if(si=0,vl=Ua=null,ia=0,(Qt&6)!==0)throw Error(o(331));var k=Qt;if(Qt|=4,mp(A.current),fp(A,A.current,I,c),Qt=k,Sc(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(qt,A)}catch{}return!0}finally{ae.p=_,ie.T=d,Mp(t,r)}}function Pp(t,r,c){r=Hr(c,r),r=Dd(t.stateNode,r,2),t=Da(t,r,2),t!==null&&(Mr(t,2),xs(t))}function rn(t,r,c){if(t.tag===3)Pp(t,t,c);else for(;r!==null;){if(r.tag===3){Pp(r,t,c);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Va===null||!Va.has(d))){t=Hr(c,t),c=km(2),d=Da(r,c,2),d!==null&&(Bm(c,d,r,t),Mr(d,2),xs(d));break}}r=r.return}}function i1(t,r,c){var d=t.pingCache;if(d===null){d=t.pingCache=new AA;var _=new Set;d.set(r,_)}else _=d.get(r),_===void 0&&(_=new Set,d.set(r,_));_.has(c)||(Kd=!0,_.add(c),t=SA.bind(null,t,r,c),r.then(t,t))}function SA(t,r,c){var d=t.pingCache;d!==null&&d.delete(r),t.pingedLanes|=t.suspendedLanes&c,t.warmLanes&=~c,fn===t&&(Mt&c)===c&&(Un===4||Un===3&&(Mt&62914560)===Mt&&300>pn()-oh?(Qt&2)===0&&Cl(t,0):Qd|=c,Tl===Mt&&(Tl=0)),xs(t)}function kp(t,r){r===0&&(r=Hn()),t=Io(t,r),t!==null&&(Mr(t,r),xs(t))}function bA(t){var r=t.memoizedState,c=0;r!==null&&(c=r.retryLane),kp(t,c)}function IA(t,r){var c=0;switch(t.tag){case 31:case 13:var d=t.stateNode,_=t.memoizedState;_!==null&&(c=_.retryLane);break;case 19:d=t.stateNode;break;case 22:d=t.stateNode._retryCache;break;default:throw Error(o(314))}d!==null&&d.delete(r),kp(t,c)}function RA(t,r){return wn(t,r)}var gh=null,bl=null,r1=!1,mh=!1,s1=!1,ja=0;function xs(t){t!==bl&&t.next===null&&(bl===null?gh=bl=t:bl=bl.next=t),mh=!0,r1||(r1=!0,OA())}function Sc(t,r){if(!s1&&mh){s1=!0;do for(var c=!1,d=gh;d!==null;){if(t!==0){var _=d.pendingLanes;if(_===0)var A=0;else{var I=d.suspendedLanes,k=d.pingedLanes;A=(1<<31-at(42|t)+1)-1,A&=_&~(I&~k),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(c=!0,Fp(d,A))}else A=Mt,A=pr(d,d===fn?A:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(A&3)===0||On(d,A)||(c=!0,Fp(d,A));d=d.next}while(c);s1=!1}}function NA(){Bp()}function Bp(){mh=r1=!1;var t=0;ja!==0&&jA()&&(t=ja);for(var r=pn(),c=null,d=gh;d!==null;){var _=d.next,A=Vp(d,r);A===0?(d.next=null,c===null?gh=_:c.next=_,_===null&&(bl=c)):(c=d,(t!==0||(A&3)!==0)&&(mh=!0)),d=_}si!==0&&si!==5||Sc(t),ja!==0&&(ja=0)}function Vp(t,r){for(var c=t.suspendedLanes,d=t.pingedLanes,_=t.expirationTimes,A=t.pendingLanes&-62914561;0<A;){var I=31-at(A),k=1<<I,Y=_[I];Y===-1?((k&c)===0||(k&d)!==0)&&(_[I]=_o(k,r)):Y<=r&&(t.expiredLanes|=k),A&=~k}if(r=fn,c=Mt,c=pr(t,t===r?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),d=t.callbackNode,c===0||t===r&&(nn===2||nn===9)||t.cancelPendingCommit!==null)return d!==null&&d!==null&&He(d),t.callbackNode=null,t.callbackPriority=0;if((c&3)===0||On(t,c)){if(r=c&-c,r===t.callbackPriority)return r;switch(d!==null&&He(d),pi(c)){case 2:case 8:c=pa;break;case 32:c=gi;break;case 268435456:c=yo;break;default:c=gi}return d=Up.bind(null,t),c=wn(c,d),t.callbackPriority=r,t.callbackNode=c,r}return d!==null&&d!==null&&He(d),t.callbackPriority=2,t.callbackNode=null,2}function Up(t,r){if(si!==0&&si!==5)return t.callbackNode=null,t.callbackPriority=0,null;var c=t.callbackNode;if(dh()&&t.callbackNode!==c)return null;var d=Mt;return d=pr(t,t===fn?d:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),d===0?null:(xp(t,d,r),Vp(t,pn()),t.callbackNode!=null&&t.callbackNode===c?Up.bind(null,t):null)}function Fp(t,r){if(dh())return null;xp(t,r,!0)}function OA(){HA(function(){(Qt&6)!==0?wn(di,NA):Bp()})}function a1(){if(ja===0){var t=fl;t===0&&(t=gr,gr<<=1,(gr&261888)===0&&(gr=256)),ja=t}return ja}function jp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ds(""+t)}function zp(t,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,t.id&&c.setAttribute("form",t.id),r.parentNode.insertBefore(c,r),t=new FormData(t),c.parentNode.removeChild(c),t}function DA(t,r,c,d,_){if(r==="submit"&&c&&c.stateNode===_){var A=jp((_[zt]||null).action),I=d.submitter;I&&(r=(r=I[zt]||null)?jp(r.formAction):I.getAttribute("formAction"),r!==null&&(A=r,I=null));var k=new yn("action","action",null,d,_);t.push({event:k,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ja!==0){var Y=I?zp(_,I):new FormData(_);Sd(c,{pending:!0,data:Y,method:_.method,action:A},null,Y)}}else typeof A=="function"&&(k.preventDefault(),Y=I?zp(_,I):new FormData(_),Sd(c,{pending:!0,data:Y,method:_.method,action:A},A,Y))},currentTarget:_}]})}}for(var o1=0;o1<ic.length;o1++){var l1=ic[o1],MA=l1.toLowerCase(),LA=l1[0].toUpperCase()+l1.slice(1);rs(MA,"on"+LA)}rs(rr,"onAnimationEnd"),rs(Ti,"onAnimationIteration"),rs(en,"onAnimationStart"),rs("dblclick","onDoubleClick"),rs("focusin","onFocus"),rs("focusout","onBlur"),rs(ri,"onTransitionRun"),rs(Wi,"onTransitionStart"),rs(Ca,"onTransitionCancel"),rs(Hs,"onTransitionEnd"),xi("onMouseEnter",["mouseout","mouseover"]),xi("onMouseLeave",["mouseout","mouseover"]),xi("onPointerEnter",["pointerout","pointerover"]),xi("onPointerLeave",["pointerout","pointerover"]),Ht("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ht("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ht("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ht("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ht("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ht("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bc));function Hp(t,r){r=(r&4)!==0;for(var c=0;c<t.length;c++){var d=t[c],_=d.event;d=d.listeners;e:{var A=void 0;if(r)for(var I=d.length-1;0<=I;I--){var k=d[I],Y=k.instance,ce=k.currentTarget;if(k=k.listener,Y!==A&&_.isPropagationStopped())break e;A=k,_.currentTarget=ce;try{A(_)}catch(_e){Nu(_e)}_.currentTarget=null,A=Y}else for(I=0;I<d.length;I++){if(k=d[I],Y=k.instance,ce=k.currentTarget,k=k.listener,Y!==A&&_.isPropagationStopped())break e;A=k,_.currentTarget=ce;try{A(_)}catch(_e){Nu(_e)}_.currentTarget=null,A=Y}}}}function Nt(t,r){var c=r[es];c===void 0&&(c=r[es]=new Set);var d=t+"__bubble";c.has(d)||(Gp(r,t,2,!1),c.add(d))}function c1(t,r,c){var d=0;r&&(d|=4),Gp(c,t,d,r)}var ph="_reactListening"+Math.random().toString(36).slice(2);function u1(t){if(!t[ph]){t[ph]=!0,ve.forEach(function(c){c!=="selectionchange"&&(PA.has(c)||c1(c,!1,t),c1(c,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[ph]||(r[ph]=!0,c1("selectionchange",!1,r))}}function Gp(t,r,c,d){switch(E2(r)){case 2:var _=cw;break;case 8:_=uw;break;default:_=C1}c=_.bind(null,r,c,t),_=void 0,!Ls||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(_=!0),d?_!==void 0?t.addEventListener(r,c,{capture:!0,passive:_}):t.addEventListener(r,c,!0):_!==void 0?t.addEventListener(r,c,{passive:_}):t.addEventListener(r,c,!1)}function h1(t,r,c,d,_){var A=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var I=d.tag;if(I===3||I===4){var k=d.stateNode.containerInfo;if(k===_)break;if(I===4)for(I=d.return;I!==null;){var Y=I.tag;if((Y===3||Y===4)&&I.stateNode.containerInfo===_)return;I=I.return}for(;k!==null;){if(I=dn(k),I===null)return;if(Y=I.tag,Y===5||Y===6||Y===26||Y===27){d=A=I;continue e}k=k.parentNode}}d=d.return}gs(function(){var ce=A,_e=tr(c),Te=[];e:{var ue=Ru.get(t);if(ue!==void 0){var ge=yn,Ye=t;switch(t){case"keypress":if(xr(c)===0)break e;case"keydown":case"keyup":ge=Us;break;case"focusin":Ye="focus",ge=Bs;break;case"focusout":Ye="blur",ge=Bs;break;case"beforeblur":case"afterblur":ge=Bs;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Ft;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=ks;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=S;break;case rr:case Ti:case en:ge=ft;break;case Hs:ge=U;break;case"scroll":case"scrollend":ge=xa;break;case"wheel":ge=de;break;case"copy":case"cut":case"paste":ge=Vs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=It;break;case"toggle":case"beforetoggle":ge=ct}var st=(r&4)!==0,ln=!st&&(t==="scroll"||t==="scrollend"),ne=st?ue!==null?ue+"Capture":null:ue;st=[];for(var J=ce,le;J!==null;){var xe=J;if(le=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||le===null||ne===null||(xe=it(J,ne),xe!=null&&st.push(Ic(J,xe,le))),ln)break;J=J.return}0<st.length&&(ue=new ge(ue,Ye,null,c,_e),Te.push({event:ue,listeners:st}))}}if((r&7)===0){e:{if(ue=t==="mouseover"||t==="pointerover",ge=t==="mouseout"||t==="pointerout",ue&&c!==Ms&&(Ye=c.relatedTarget||c.fromElement)&&(dn(Ye)||Ye[_i]))break e;if((ge||ue)&&(ue=_e.window===_e?_e:(ue=_e.ownerDocument)?ue.defaultView||ue.parentWindow:window,ge?(Ye=c.relatedTarget||c.toElement,ge=ce,Ye=Ye?dn(Ye):null,Ye!==null&&(ln=m(Ye),st=Ye.tag,Ye!==ln||st!==5&&st!==27&&st!==6)&&(Ye=null)):(ge=null,Ye=ce),ge!==Ye)){if(st=Ft,xe="onMouseLeave",ne="onMouseEnter",J="mouse",(t==="pointerout"||t==="pointerover")&&(st=It,xe="onPointerLeave",ne="onPointerEnter",J="pointer"),ln=ge==null?ue:Di(ge),le=Ye==null?ue:Di(Ye),ue=new st(xe,J+"leave",ge,c,_e),ue.target=ln,ue.relatedTarget=le,xe=null,dn(_e)===ce&&(st=new st(ne,J+"enter",Ye,c,_e),st.target=le,st.relatedTarget=ln,xe=st),ln=xe,ge&&Ye)t:{for(st=kA,ne=ge,J=Ye,le=0,xe=ne;xe;xe=st(xe))le++;xe=0;for(var Je=J;Je;Je=st(Je))xe++;for(;0<le-xe;)ne=st(ne),le--;for(;0<xe-le;)J=st(J),xe--;for(;le--;){if(ne===J||J!==null&&ne===J.alternate){st=ne;break t}ne=st(ne),J=st(J)}st=null}else st=null;ge!==null&&qp(Te,ue,ge,st,!1),Ye!==null&&ln!==null&&qp(Te,ln,Ye,st,!0)}}e:{if(ue=ce?Di(ce):window,ge=ue.nodeName&&ue.nodeName.toLowerCase(),ge==="select"||ge==="input"&&ue.type==="file")var Wt=Tr;else if(nc(ue))if(Iu)Wt=u;else{Wt=s;var Ke=i}else ge=ue.nodeName,!ge||ge.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?ce&&Jt(ce.elementType)&&(Wt=Tr):Wt=l;if(Wt&&(Wt=Wt(t,ce))){wr(Te,Wt,c,_e);break e}Ke&&Ke(t,ue,ce),t==="focusout"&&ce&&ue.type==="number"&&ce.memoizedProps.value!=null&&j(ue,"number",ue.value)}switch(Ke=ce?Di(ce):window,t){case"focusin":(nc(Ke)||Ke.contentEditable==="true")&&(K=Ke,Q=ce,se=null);break;case"focusout":se=Q=K=null;break;case"mousedown":fe=!0;break;case"contextmenu":case"mouseup":case"dragend":fe=!1,Me(Te,c,_e);break;case"selectionchange":if(z)break;case"keydown":case"keyup":Me(Te,c,_e)}var yt;if(Vt)e:{switch(t){case"compositionstart":var Lt="onCompositionStart";break e;case"compositionend":Lt="onCompositionEnd";break e;case"compositionupdate":Lt="onCompositionUpdate";break e}Lt=void 0}else va?Fs(t,c)&&(Lt="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(Lt="onCompositionStart");Lt&&(Fr&&c.locale!=="ko"&&(va||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&va&&(yt=ts()):(_r=_e,Er="value"in _r?_r.value:_r.textContent,va=!0)),Ke=yh(ce,Lt),0<Ke.length&&(Lt=new Br(Lt,t,null,c,_e),Te.push({event:Lt,listeners:Ke}),yt?Lt.data=yt:(yt=jr(c),yt!==null&&(Lt.data=yt)))),(yt=Xi?ps(t,c):sl(t,c))&&(Lt=yh(ce,"onBeforeInput"),0<Lt.length&&(Ke=new Br("onBeforeInput","beforeinput",null,c,_e),Te.push({event:Ke,listeners:Lt}),Ke.data=yt)),DA(Te,t,ce,c,_e)}Hp(Te,r)})}function Ic(t,r,c){return{instance:t,listener:r,currentTarget:c}}function yh(t,r){for(var c=r+"Capture",d=[];t!==null;){var _=t,A=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||A===null||(_=it(t,c),_!=null&&d.unshift(Ic(t,_,A)),_=it(t,r),_!=null&&d.push(Ic(t,_,A))),t.tag===3)return d;t=t.return}return[]}function kA(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function qp(t,r,c,d,_){for(var A=r._reactName,I=[];c!==null&&c!==d;){var k=c,Y=k.alternate,ce=k.stateNode;if(k=k.tag,Y!==null&&Y===d)break;k!==5&&k!==26&&k!==27||ce===null||(Y=ce,_?(ce=it(c,A),ce!=null&&I.unshift(Ic(c,ce,Y))):_||(ce=it(c,A),ce!=null&&I.push(Ic(c,ce,Y)))),c=c.return}I.length!==0&&t.push({event:r,listeners:I})}var BA=/\r\n?/g,VA=/\u0000|\uFFFD/g;function Xp(t){return(typeof t=="string"?t:""+t).replace(BA,`
`).replace(VA,"")}function Yp(t,r){return r=Xp(r),Xp(t)===r}function on(t,r,c,d,_,A){switch(c){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||Li(t,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&Li(t,""+d);break;case"className":Ai(t,"class",d);break;case"tabIndex":Ai(t,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Ai(t,c,d);break;case"style":Qe(t,d,A);break;case"data":if(r!=="object"){Ai(t,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||c!=="href")){t.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){t.removeAttribute(c);break}d=ds(""+d),t.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){t.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(c==="formAction"?(r!=="input"&&on(t,r,"name",_.name,_,null),on(t,r,"formEncType",_.formEncType,_,null),on(t,r,"formMethod",_.formMethod,_,null),on(t,r,"formTarget",_.formTarget,_,null)):(on(t,r,"encType",_.encType,_,null),on(t,r,"method",_.method,_,null),on(t,r,"target",_.target,_,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){t.removeAttribute(c);break}d=ds(""+d),t.setAttribute(c,d);break;case"onClick":d!=null&&(t.onclick=Pi);break;case"onScroll":d!=null&&Nt("scroll",t);break;case"onScrollEnd":d!=null&&Nt("scrollend",t);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(c=d.__html,c!=null){if(_.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"multiple":t.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":t.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){t.removeAttribute("xlink:href");break}c=ds(""+d),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,""+d):t.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,""):t.removeAttribute(c);break;case"capture":case"download":d===!0?t.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,d):t.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?t.setAttribute(c,d):t.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?t.removeAttribute(c):t.setAttribute(c,d);break;case"popover":Nt("beforetoggle",t),Nt("toggle",t),hs(t,"popover",d);break;case"xlinkActuate":Cn(t,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Cn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Cn(t,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Cn(t,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Cn(t,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Cn(t,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Cn(t,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Cn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Cn(t,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":hs(t,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=wo.get(c)||c,hs(t,c,d))}}function f1(t,r,c,d,_,A){switch(c){case"style":Qe(t,d,A);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(c=d.__html,c!=null){if(_.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"children":typeof d=="string"?Li(t,d):(typeof d=="number"||typeof d=="bigint")&&Li(t,""+d);break;case"onScroll":d!=null&&Nt("scroll",t);break;case"onScrollEnd":d!=null&&Nt("scrollend",t);break;case"onClick":d!=null&&(t.onclick=Pi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Eo.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(_=c.endsWith("Capture"),r=c.slice(2,_?c.length-7:void 0),A=t[zt]||null,A=A!=null?A[c]:null,typeof A=="function"&&t.removeEventListener(r,A,_),typeof d=="function")){typeof A!="function"&&A!==null&&(c in t?t[c]=null:t.hasAttribute(c)&&t.removeAttribute(c)),t.addEventListener(r,d,_);break e}c in t?t[c]=d:d===!0?t.setAttribute(c,""):hs(t,c,d)}}}function bi(t,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",t),Nt("load",t);var d=!1,_=!1,A;for(A in c)if(c.hasOwnProperty(A)){var I=c[A];if(I!=null)switch(A){case"src":d=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:on(t,r,A,I,c,null)}}_&&on(t,r,"srcSet",c.srcSet,c,null),d&&on(t,r,"src",c.src,c,null);return;case"input":Nt("invalid",t);var k=A=I=_=null,Y=null,ce=null;for(d in c)if(c.hasOwnProperty(d)){var _e=c[d];if(_e!=null)switch(d){case"name":_=_e;break;case"type":I=_e;break;case"checked":Y=_e;break;case"defaultChecked":ce=_e;break;case"value":A=_e;break;case"defaultValue":k=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(o(137,r));break;default:on(t,r,d,_e,c,null)}}oe(t,A,k,Y,ce,I,_,!1);return;case"select":Nt("invalid",t),d=I=A=null;for(_ in c)if(c.hasOwnProperty(_)&&(k=c[_],k!=null))switch(_){case"value":A=k;break;case"defaultValue":I=k;break;case"multiple":d=k;default:on(t,r,_,k,c,null)}r=A,c=I,t.multiple=!!d,r!=null?Xe(t,!!d,r,!1):c!=null&&Xe(t,!!d,c,!0);return;case"textarea":Nt("invalid",t),A=_=d=null;for(I in c)if(c.hasOwnProperty(I)&&(k=c[I],k!=null))switch(I){case"value":d=k;break;case"defaultValue":_=k;break;case"children":A=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(o(91));break;default:on(t,r,I,k,c,null)}Gn(t,d,_,A);return;case"option":for(Y in c)c.hasOwnProperty(Y)&&(d=c[Y],d!=null)&&(Y==="selected"?t.selected=d&&typeof d!="function"&&typeof d!="symbol":on(t,r,Y,d,c,null));return;case"dialog":Nt("beforetoggle",t),Nt("toggle",t),Nt("cancel",t),Nt("close",t);break;case"iframe":case"object":Nt("load",t);break;case"video":case"audio":for(d=0;d<bc.length;d++)Nt(bc[d],t);break;case"image":Nt("error",t),Nt("load",t);break;case"details":Nt("toggle",t);break;case"embed":case"source":case"link":Nt("error",t),Nt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ce in c)if(c.hasOwnProperty(ce)&&(d=c[ce],d!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:on(t,r,ce,d,c,null)}return;default:if(Jt(r)){for(_e in c)c.hasOwnProperty(_e)&&(d=c[_e],d!==void 0&&f1(t,r,_e,d,c,void 0));return}}for(k in c)c.hasOwnProperty(k)&&(d=c[k],d!=null&&on(t,r,k,d,c,null))}function UA(t,r,c,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,A=null,I=null,k=null,Y=null,ce=null,_e=null;for(ge in c){var Te=c[ge];if(c.hasOwnProperty(ge)&&Te!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":Y=Te;default:d.hasOwnProperty(ge)||on(t,r,ge,null,d,Te)}}for(var ue in d){var ge=d[ue];if(Te=c[ue],d.hasOwnProperty(ue)&&(ge!=null||Te!=null))switch(ue){case"type":A=ge;break;case"name":_=ge;break;case"checked":ce=ge;break;case"defaultChecked":_e=ge;break;case"value":I=ge;break;case"defaultValue":k=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(o(137,r));break;default:ge!==Te&&on(t,r,ue,ge,d,Te)}}Dn(t,I,k,Y,ce,_e,A,_);return;case"select":ge=I=k=ue=null;for(A in c)if(Y=c[A],c.hasOwnProperty(A)&&Y!=null)switch(A){case"value":break;case"multiple":ge=Y;default:d.hasOwnProperty(A)||on(t,r,A,null,d,Y)}for(_ in d)if(A=d[_],Y=c[_],d.hasOwnProperty(_)&&(A!=null||Y!=null))switch(_){case"value":ue=A;break;case"defaultValue":k=A;break;case"multiple":I=A;default:A!==Y&&on(t,r,_,A,d,Y)}r=k,c=I,d=ge,ue!=null?Xe(t,!!c,ue,!1):!!d!=!!c&&(r!=null?Xe(t,!!c,r,!0):Xe(t,!!c,c?[]:"",!1));return;case"textarea":ge=ue=null;for(k in c)if(_=c[k],c.hasOwnProperty(k)&&_!=null&&!d.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:on(t,r,k,null,d,_)}for(I in d)if(_=d[I],A=c[I],d.hasOwnProperty(I)&&(_!=null||A!=null))switch(I){case"value":ue=_;break;case"defaultValue":ge=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(o(91));break;default:_!==A&&on(t,r,I,_,d,A)}Mn(t,ue,ge);return;case"option":for(var Ye in c)ue=c[Ye],c.hasOwnProperty(Ye)&&ue!=null&&!d.hasOwnProperty(Ye)&&(Ye==="selected"?t.selected=!1:on(t,r,Ye,null,d,ue));for(Y in d)ue=d[Y],ge=c[Y],d.hasOwnProperty(Y)&&ue!==ge&&(ue!=null||ge!=null)&&(Y==="selected"?t.selected=ue&&typeof ue!="function"&&typeof ue!="symbol":on(t,r,Y,ue,d,ge));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in c)ue=c[st],c.hasOwnProperty(st)&&ue!=null&&!d.hasOwnProperty(st)&&on(t,r,st,null,d,ue);for(ce in d)if(ue=d[ce],ge=c[ce],d.hasOwnProperty(ce)&&ue!==ge&&(ue!=null||ge!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(o(137,r));break;default:on(t,r,ce,ue,d,ge)}return;default:if(Jt(r)){for(var ln in c)ue=c[ln],c.hasOwnProperty(ln)&&ue!==void 0&&!d.hasOwnProperty(ln)&&f1(t,r,ln,void 0,d,ue);for(_e in d)ue=d[_e],ge=c[_e],!d.hasOwnProperty(_e)||ue===ge||ue===void 0&&ge===void 0||f1(t,r,_e,ue,d,ge);return}}for(var ne in c)ue=c[ne],c.hasOwnProperty(ne)&&ue!=null&&!d.hasOwnProperty(ne)&&on(t,r,ne,null,d,ue);for(Te in d)ue=d[Te],ge=c[Te],!d.hasOwnProperty(Te)||ue===ge||ue==null&&ge==null||on(t,r,Te,ue,d,ge)}function Wp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function FA(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var _=c[d],A=_.transferSize,I=_.initiatorType,k=_.duration;if(A&&k&&Wp(I)){for(I=0,k=_.responseEnd,d+=1;d<c.length;d++){var Y=c[d],ce=Y.startTime;if(ce>k)break;var _e=Y.transferSize,Te=Y.initiatorType;_e&&Wp(Te)&&(Y=Y.responseEnd,I+=_e*(Y<k?1:(k-ce)/(Y-ce)))}if(--d,r+=8*(A+I)/(_.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var d1=null,g1=null;function _h(t){return t.nodeType===9?t:t.ownerDocument}function Kp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qp(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function m1(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var p1=null;function jA(){var t=window.event;return t&&t.type==="popstate"?t===p1?!1:(p1=t,!0):(p1=null,!1)}var Zp=typeof setTimeout=="function"?setTimeout:void 0,zA=typeof clearTimeout=="function"?clearTimeout:void 0,Jp=typeof Promise=="function"?Promise:void 0,HA=typeof queueMicrotask=="function"?queueMicrotask:typeof Jp<"u"?function(t){return Jp.resolve(null).then(t).catch(GA)}:Zp;function GA(t){setTimeout(function(){throw t})}function za(t){return t==="head"}function $p(t,r){var c=r,d=0;do{var _=c.nextSibling;if(t.removeChild(c),_&&_.nodeType===8)if(c=_.data,c==="/$"||c==="/&"){if(d===0){t.removeChild(_),Ol(r);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Rc(t.ownerDocument.documentElement);else if(c==="head"){c=t.ownerDocument.head,Rc(c);for(var A=c.firstChild;A;){var I=A.nextSibling,k=A.nodeName;A[Lr]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&A.rel.toLowerCase()==="stylesheet"||c.removeChild(A),A=I}}else c==="body"&&Rc(t.ownerDocument.body);c=_}while(c);Ol(r)}function e2(t,r){var c=t;t=0;do{var d=c.nextSibling;if(c.nodeType===1?r?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(r?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(t===0)break;t--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||t++;c=d}while(c)}function y1(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":y1(c),Ei(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}t.removeChild(c)}}function qA(t,r,c,d){for(;t.nodeType===1;){var _=c;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(d){if(!t[Lr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(A=t.getAttribute("rel"),A==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(A!==_.rel||t.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||t.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||t.getAttribute("title")!==(_.title==null?null:_.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(A=t.getAttribute("src"),(A!==(_.src==null?null:_.src)||t.getAttribute("type")!==(_.type==null?null:_.type)||t.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&A&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var A=_.name==null?null:""+_.name;if(_.type==="hidden"&&t.getAttribute("name")===A)return t}else return t;if(t=Wr(t.nextSibling),t===null)break}return null}function XA(t,r,c){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!c||(t=Wr(t.nextSibling),t===null))return null;return t}function t2(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Wr(t.nextSibling),t===null))return null;return t}function _1(t){return t.data==="$?"||t.data==="$~"}function E1(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function YA(t,r){var c=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||c.readyState!=="loading")r();else{var d=function(){r(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),t._reactRetry=d}}function Wr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var x1=null;function n2(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"||c==="/&"){if(r===0)return Wr(t.nextSibling);r--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||r++}t=t.nextSibling}return null}function i2(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(r===0)return t;r--}else c!=="/$"&&c!=="/&"||r++}t=t.previousSibling}return null}function r2(t,r,c){switch(r=_h(c),t){case"html":if(t=r.documentElement,!t)throw Error(o(452));return t;case"head":if(t=r.head,!t)throw Error(o(453));return t;case"body":if(t=r.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Rc(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ei(t)}var Kr=new Map,s2=new Set;function Eh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ra=ae.d;ae.d={f:WA,r:KA,D:QA,C:ZA,L:JA,m:$A,X:tw,S:ew,M:nw};function WA(){var t=ra.f(),r=uh();return t||r}function KA(t){var r=St(t);r!==null&&r.tag===5&&r.type==="form"?wm(r):ra.r(t)}var Il=typeof document>"u"?null:document;function a2(t,r,c){var d=Il;if(d&&typeof r=="string"&&r){var _=pt(r);_='link[rel="'+t+'"][href="'+_+'"]',typeof c=="string"&&(_+='[crossorigin="'+c+'"]'),s2.has(_)||(s2.add(_),t={rel:t,crossOrigin:c,href:r},d.querySelector(_)===null&&(r=d.createElement("link"),bi(r,"link",t),vn(r),d.head.appendChild(r)))}}function QA(t){ra.D(t),a2("dns-prefetch",t,null)}function ZA(t,r){ra.C(t,r),a2("preconnect",t,r)}function JA(t,r,c){ra.L(t,r,c);var d=Il;if(d&&t&&r){var _='link[rel="preload"][as="'+pt(r)+'"]';r==="image"&&c&&c.imageSrcSet?(_+='[imagesrcset="'+pt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(_+='[imagesizes="'+pt(c.imageSizes)+'"]')):_+='[href="'+pt(t)+'"]';var A=_;switch(r){case"style":A=Rl(t);break;case"script":A=Nl(t)}Kr.has(A)||(t=M({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:t,as:r},c),Kr.set(A,t),d.querySelector(_)!==null||r==="style"&&d.querySelector(Nc(A))||r==="script"&&d.querySelector(Oc(A))||(r=d.createElement("link"),bi(r,"link",t),vn(r),d.head.appendChild(r)))}}function $A(t,r){ra.m(t,r);var c=Il;if(c&&t){var d=r&&typeof r.as=="string"?r.as:"script",_='link[rel="modulepreload"][as="'+pt(d)+'"][href="'+pt(t)+'"]',A=_;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Nl(t)}if(!Kr.has(A)&&(t=M({rel:"modulepreload",href:t},r),Kr.set(A,t),c.querySelector(_)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Oc(A)))return}d=c.createElement("link"),bi(d,"link",t),vn(d),c.head.appendChild(d)}}}function ew(t,r,c){ra.S(t,r,c);var d=Il;if(d&&t){var _=ii(d).hoistableStyles,A=Rl(t);r=r||"default";var I=_.get(A);if(!I){var k={loading:0,preload:null};if(I=d.querySelector(Nc(A)))k.loading=5;else{t=M({rel:"stylesheet",href:t,"data-precedence":r},c),(c=Kr.get(A))&&A1(t,c);var Y=I=d.createElement("link");vn(Y),bi(Y,"link",t),Y._p=new Promise(function(ce,_e){Y.onload=ce,Y.onerror=_e}),Y.addEventListener("load",function(){k.loading|=1}),Y.addEventListener("error",function(){k.loading|=2}),k.loading|=4,xh(I,r,d)}I={type:"stylesheet",instance:I,count:1,state:k},_.set(A,I)}}}function tw(t,r){ra.X(t,r);var c=Il;if(c&&t){var d=ii(c).hoistableScripts,_=Nl(t),A=d.get(_);A||(A=c.querySelector(Oc(_)),A||(t=M({src:t,async:!0},r),(r=Kr.get(_))&&w1(t,r),A=c.createElement("script"),vn(A),bi(A,"link",t),c.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},d.set(_,A))}}function nw(t,r){ra.M(t,r);var c=Il;if(c&&t){var d=ii(c).hoistableScripts,_=Nl(t),A=d.get(_);A||(A=c.querySelector(Oc(_)),A||(t=M({src:t,async:!0,type:"module"},r),(r=Kr.get(_))&&w1(t,r),A=c.createElement("script"),vn(A),bi(A,"link",t),c.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},d.set(_,A))}}function o2(t,r,c,d){var _=(_=ke.current)?Eh(_):null;if(!_)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=Rl(c.href),c=ii(_).hoistableStyles,d=c.get(r),d||(d={type:"style",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){t=Rl(c.href);var A=ii(_).hoistableStyles,I=A.get(t);if(I||(_=_.ownerDocument||_,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(t,I),(A=_.querySelector(Nc(t)))&&!A._p&&(I.instance=A,I.state.loading=5),Kr.has(t)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Kr.set(t,c),A||iw(_,t,c,I.state))),r&&d===null)throw Error(o(528,""));return I}if(r&&d!==null)throw Error(o(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Nl(c),c=ii(_).hoistableScripts,d=c.get(r),d||(d={type:"script",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Rl(t){return'href="'+pt(t)+'"'}function Nc(t){return'link[rel="stylesheet"]['+t+"]"}function l2(t){return M({},t,{"data-precedence":t.precedence,precedence:null})}function iw(t,r,c,d){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=t.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),bi(r,"link",c),vn(r),t.head.appendChild(r))}function Nl(t){return'[src="'+pt(t)+'"]'}function Oc(t){return"script[async]"+t}function c2(t,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var d=t.querySelector('style[data-href~="'+pt(c.href)+'"]');if(d)return r.instance=d,vn(d),d;var _=M({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(t.ownerDocument||t).createElement("style"),vn(d),bi(d,"style",_),xh(d,c.precedence,t),r.instance=d;case"stylesheet":_=Rl(c.href);var A=t.querySelector(Nc(_));if(A)return r.state.loading|=4,r.instance=A,vn(A),A;d=l2(c),(_=Kr.get(_))&&A1(d,_),A=(t.ownerDocument||t).createElement("link"),vn(A);var I=A;return I._p=new Promise(function(k,Y){I.onload=k,I.onerror=Y}),bi(A,"link",d),r.state.loading|=4,xh(A,c.precedence,t),r.instance=A;case"script":return A=Nl(c.src),(_=t.querySelector(Oc(A)))?(r.instance=_,vn(_),_):(d=c,(_=Kr.get(A))&&(d=M({},c),w1(d,_)),t=t.ownerDocument||t,_=t.createElement("script"),vn(_),bi(_,"link",d),t.head.appendChild(_),r.instance=_);case"void":return null;default:throw Error(o(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,xh(d,c.precedence,t));return r.instance}function xh(t,r,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=d.length?d[d.length-1]:null,A=_,I=0;I<d.length;I++){var k=d[I];if(k.dataset.precedence===r)A=k;else if(A!==_)break}A?A.parentNode.insertBefore(t,A.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(t,r.firstChild))}function A1(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function w1(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Ah=null;function u2(t,r,c){if(Ah===null){var d=new Map,_=Ah=new Map;_.set(c,d)}else _=Ah,d=_.get(c),d||(d=new Map,_.set(c,d));if(d.has(t))return d;for(d.set(t,null),c=c.getElementsByTagName(t),_=0;_<c.length;_++){var A=c[_];if(!(A[Lr]||A[Tn]||t==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var I=A.getAttribute(r)||"";I=t+I;var k=d.get(I);k?k.push(A):d.set(I,[A])}}return d}function h2(t,r,c){t=t.ownerDocument||t,t.head.insertBefore(c,r==="title"?t.querySelector("head > title"):null)}function rw(t,r,c){if(c===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function f2(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function sw(t,r,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var _=Rl(d.href),A=r.querySelector(Nc(_));if(A){r=A._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=wh.bind(t),r.then(t,t)),c.state.loading|=4,c.instance=A,vn(A);return}A=r.ownerDocument||r,d=l2(d),(_=Kr.get(_))&&A1(d,_),A=A.createElement("link"),vn(A);var I=A;I._p=new Promise(function(k,Y){I.onload=k,I.onerror=Y}),bi(A,"link",d),c.instance=A}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(c,r),(r=c.state.preload)&&(c.state.loading&3)===0&&(t.count++,c=wh.bind(t),r.addEventListener("load",c),r.addEventListener("error",c))}}var T1=0;function aw(t,r){return t.stylesheets&&t.count===0&&vh(t,t.stylesheets),0<t.count||0<t.imgCount?function(c){var d=setTimeout(function(){if(t.stylesheets&&vh(t,t.stylesheets),t.unsuspend){var A=t.unsuspend;t.unsuspend=null,A()}},6e4+r);0<t.imgBytes&&T1===0&&(T1=62500*FA());var _=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&vh(t,t.stylesheets),t.unsuspend)){var A=t.unsuspend;t.unsuspend=null,A()}},(t.imgBytes>T1?50:800)+r);return t.unsuspend=c,function(){t.unsuspend=null,clearTimeout(d),clearTimeout(_)}}:null}function wh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Th=null;function vh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Th=new Map,r.forEach(ow,t),Th=null,wh.call(t))}function ow(t,r){if(!(r.state.loading&4)){var c=Th.get(t);if(c)var d=c.get(null);else{c=new Map,Th.set(t,c);for(var _=t.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<_.length;A++){var I=_[A];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(c.set(I.dataset.precedence,I),d=I)}d&&c.set(null,d)}_=r.instance,I=_.getAttribute("data-precedence"),A=c.get(I)||d,A===d&&c.set(null,_),c.set(I,_),this.count++,d=wh.bind(this),_.addEventListener("load",d),_.addEventListener("error",d),A?A.parentNode.insertBefore(_,A.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(_,t.firstChild)),r.state.loading|=4}}var Dc={$$typeof:pe,Provider:null,Consumer:null,_currentValue:Re,_currentValue2:Re,_threadCount:0};function lw(t,r,c,d,_,A,I,k,Y){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mi(0),this.hiddenUpdates=mi(null),this.identifierPrefix=d,this.onUncaughtError=_,this.onCaughtError=A,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function d2(t,r,c,d,_,A,I,k,Y,ce,_e,Te){return t=new lw(t,r,c,I,Y,ce,_e,Te,k),r=1,A===!0&&(r|=24),A=vr(3,null,null,r),t.current=A,A.stateNode=t,r=nd(),r.refCount++,t.pooledCache=r,r.refCount++,A.memoizedState={element:d,isDehydrated:c,cache:r},ad(A),t}function g2(t){return t?(t=ol,t):ol}function m2(t,r,c,d,_,A){_=g2(_),d.context===null?d.context=_:d.pendingContext=_,d=Oa(r),d.payload={element:c},A=A===void 0?null:A,A!==null&&(d.callback=A),c=Da(t,d,r),c!==null&&(cr(c,t,r),uc(c,t,r))}function p2(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<r?c:r}}function v1(t,r){p2(t,r),(t=t.alternate)&&p2(t,r)}function y2(t){if(t.tag===13||t.tag===31){var r=Io(t,67108864);r!==null&&cr(r,t,67108864),v1(t,67108864)}}function _2(t){if(t.tag===13||t.tag===31){var r=Rr();r=kn(r);var c=Io(t,r);c!==null&&cr(c,t,r),v1(t,r)}}var Ch=!0;function cw(t,r,c,d){var _=ie.T;ie.T=null;var A=ae.p;try{ae.p=2,C1(t,r,c,d)}finally{ae.p=A,ie.T=_}}function uw(t,r,c,d){var _=ie.T;ie.T=null;var A=ae.p;try{ae.p=8,C1(t,r,c,d)}finally{ae.p=A,ie.T=_}}function C1(t,r,c,d){if(Ch){var _=S1(d);if(_===null)h1(t,r,d,Sh,c),x2(t,d);else if(fw(_,t,r,c,d))d.stopPropagation();else if(x2(t,d),r&4&&-1<hw.indexOf(t)){for(;_!==null;){var A=St(_);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var I=mr(A.pendingLanes);if(I!==0){var k=A;for(k.pendingLanes|=2,k.entangledLanes|=2;I;){var Y=1<<31-at(I);k.entanglements[1]|=Y,I&=~Y}xs(A),(Qt&6)===0&&(lh=pn()+500,Sc(0))}}break;case 31:case 13:k=Io(A,2),k!==null&&cr(k,A,2),uh(),v1(A,2)}if(A=S1(d),A===null&&h1(t,r,d,Sh,c),A===_)break;_=A}_!==null&&d.stopPropagation()}else h1(t,r,d,null,c)}}function S1(t){return t=tr(t),b1(t)}var Sh=null;function b1(t){if(Sh=null,t=dn(t),t!==null){var r=m(t);if(r===null)t=null;else{var c=r.tag;if(c===13){if(t=E(r),t!==null)return t;t=null}else if(c===31){if(t=v(r),t!==null)return t;t=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Sh=t,null}function E2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($r()){case di:return 2;case pa:return 8;case gi:case ni:return 32;case yo:return 268435456;default:return 32}default:return 32}}var I1=!1,Ha=null,Ga=null,qa=null,Mc=new Map,Lc=new Map,Xa=[],hw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function x2(t,r){switch(t){case"focusin":case"focusout":Ha=null;break;case"dragenter":case"dragleave":Ga=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":Mc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lc.delete(r.pointerId)}}function Pc(t,r,c,d,_,A){return t===null||t.nativeEvent!==A?(t={blockedOn:r,domEventName:c,eventSystemFlags:d,nativeEvent:A,targetContainers:[_]},r!==null&&(r=St(r),r!==null&&y2(r)),t):(t.eventSystemFlags|=d,r=t.targetContainers,_!==null&&r.indexOf(_)===-1&&r.push(_),t)}function fw(t,r,c,d,_){switch(r){case"focusin":return Ha=Pc(Ha,t,r,c,d,_),!0;case"dragenter":return Ga=Pc(Ga,t,r,c,d,_),!0;case"mouseover":return qa=Pc(qa,t,r,c,d,_),!0;case"pointerover":var A=_.pointerId;return Mc.set(A,Pc(Mc.get(A)||null,t,r,c,d,_)),!0;case"gotpointercapture":return A=_.pointerId,Lc.set(A,Pc(Lc.get(A)||null,t,r,c,d,_)),!0}return!1}function A2(t){var r=dn(t.target);if(r!==null){var c=m(r);if(c!==null){if(r=c.tag,r===13){if(r=E(c),r!==null){t.blockedOn=r,je(t.priority,function(){_2(c)});return}}else if(r===31){if(r=v(c),r!==null){t.blockedOn=r,je(t.priority,function(){_2(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var c=S1(t.nativeEvent);if(c===null){c=t.nativeEvent;var d=new c.constructor(c.type,c);Ms=d,c.target.dispatchEvent(d),Ms=null}else return r=St(c),r!==null&&y2(r),t.blockedOn=c,!1;r.shift()}return!0}function w2(t,r,c){bh(t)&&c.delete(r)}function dw(){I1=!1,Ha!==null&&bh(Ha)&&(Ha=null),Ga!==null&&bh(Ga)&&(Ga=null),qa!==null&&bh(qa)&&(qa=null),Mc.forEach(w2),Lc.forEach(w2)}function Ih(t,r){t.blockedOn===r&&(t.blockedOn=null,I1||(I1=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,dw)))}var Rh=null;function T2(t){Rh!==t&&(Rh=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Rh===t&&(Rh=null);for(var r=0;r<t.length;r+=3){var c=t[r],d=t[r+1],_=t[r+2];if(typeof d!="function"){if(b1(d||c)===null)continue;break}var A=St(c);A!==null&&(t.splice(r,3),r-=3,Sd(A,{pending:!0,data:_,method:c.method,action:d},d,_))}}))}function Ol(t){function r(Y){return Ih(Y,t)}Ha!==null&&Ih(Ha,t),Ga!==null&&Ih(Ga,t),qa!==null&&Ih(qa,t),Mc.forEach(r),Lc.forEach(r);for(var c=0;c<Xa.length;c++){var d=Xa[c];d.blockedOn===t&&(d.blockedOn=null)}for(;0<Xa.length&&(c=Xa[0],c.blockedOn===null);)A2(c),c.blockedOn===null&&Xa.shift();if(c=(t.ownerDocument||t).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var _=c[d],A=c[d+1],I=_[zt]||null;if(typeof A=="function")I||T2(c);else if(I){var k=null;if(A&&A.hasAttribute("formAction")){if(_=A,I=A[zt]||null)k=I.formAction;else if(b1(_)!==null)continue}else k=I.action;typeof k=="function"?c[d+1]=k:(c.splice(d,3),d-=3),T2(c)}}}function v2(){function t(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(I){return _=I})},focusReset:"manual",scroll:"manual"})}function r(){_!==null&&(_(),_=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,_=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),_!==null&&(_(),_=null)}}}function R1(t){this._internalRoot=t}Nh.prototype.render=R1.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(o(409));var c=r.current,d=Rr();m2(c,d,t,r,null,null)},Nh.prototype.unmount=R1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;m2(t.current,2,null,t,null,null),uh(),r[_i]=null}};function Nh(t){this._internalRoot=t}Nh.prototype.unstable_scheduleHydration=function(t){if(t){var r=yi();t={blockedOn:null,target:t,priority:r};for(var c=0;c<Xa.length&&r!==0&&r<Xa[c].priority;c++);Xa.splice(c,0,t),c===0&&A2(t)}};var C2=e.version;if(C2!=="19.2.3")throw Error(o(527,C2,"19.2.3"));ae.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=w(r),t=t!==null?D(t):null,t=t===null?null:t.stateNode,t};var gw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{qt=Oh.inject(gw),Ne=Oh}catch{}}return Bc.createRoot=function(t,r){if(!h(t))throw Error(o(299));var c=!1,d="",_=Dm,A=Mm,I=Lm;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(_=r.onUncaughtError),r.onCaughtError!==void 0&&(A=r.onCaughtError),r.onRecoverableError!==void 0&&(I=r.onRecoverableError)),r=d2(t,1,!1,null,null,c,d,null,_,A,I,v2),t[_i]=r.current,u1(t),new R1(r)},Bc.hydrateRoot=function(t,r,c){if(!h(t))throw Error(o(299));var d=!1,_="",A=Dm,I=Mm,k=Lm,Y=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onUncaughtError!==void 0&&(A=c.onUncaughtError),c.onCaughtError!==void 0&&(I=c.onCaughtError),c.onRecoverableError!==void 0&&(k=c.onRecoverableError),c.formState!==void 0&&(Y=c.formState)),r=d2(t,1,!0,r,c??null,d,_,Y,A,I,k,v2),r.context=g2(null),c=r.current,d=Rr(),d=kn(d),_=Oa(d),_.callback=null,Da(c,_,d),c=d,r.current.lanes=c,Mr(r,c),xs(r),t[_i]=r.current,u1(t),new Nh(r)},Bc.version="19.2.3",Bc}var P2;function Sw(){if(P2)return D1.exports;P2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),D1.exports=Cw(),D1.exports}var bw=Sw();const Iw=()=>{};var k2={};const v_=function(a){const e=[];let n=0;for(let o=0;o<a.length;o++){let h=a.charCodeAt(o);h<128?e[n++]=h:h<2048?(e[n++]=h>>6|192,e[n++]=h&63|128):(h&64512)===55296&&o+1<a.length&&(a.charCodeAt(o+1)&64512)===56320?(h=65536+((h&1023)<<10)+(a.charCodeAt(++o)&1023),e[n++]=h>>18|240,e[n++]=h>>12&63|128,e[n++]=h>>6&63|128,e[n++]=h&63|128):(e[n++]=h>>12|224,e[n++]=h>>6&63|128,e[n++]=h&63|128)}return e},Rw=function(a){const e=[];let n=0,o=0;for(;n<a.length;){const h=a[n++];if(h<128)e[o++]=String.fromCharCode(h);else if(h>191&&h<224){const m=a[n++];e[o++]=String.fromCharCode((h&31)<<6|m&63)}else if(h>239&&h<365){const m=a[n++],E=a[n++],v=a[n++],C=((h&7)<<18|(m&63)<<12|(E&63)<<6|v&63)-65536;e[o++]=String.fromCharCode(55296+(C>>10)),e[o++]=String.fromCharCode(56320+(C&1023))}else{const m=a[n++],E=a[n++];e[o++]=String.fromCharCode((h&15)<<12|(m&63)<<6|E&63)}}return e.join("")},C_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let h=0;h<a.length;h+=3){const m=a[h],E=h+1<a.length,v=E?a[h+1]:0,C=h+2<a.length,w=C?a[h+2]:0,D=m>>2,M=(m&3)<<4|v>>4;let G=(v&15)<<2|w>>6,te=w&63;C||(te=64,E||(G=64)),o.push(n[D],n[M],n[G],n[te])}return o.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(v_(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):Rw(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let h=0;h<a.length;){const m=n[a.charAt(h++)],v=h<a.length?n[a.charAt(h)]:0;++h;const w=h<a.length?n[a.charAt(h)]:64;++h;const M=h<a.length?n[a.charAt(h)]:64;if(++h,m==null||v==null||w==null||M==null)throw new Nw;const G=m<<2|v>>4;if(o.push(G),w!==64){const te=v<<4&240|w>>2;if(o.push(te),M!==64){const Ee=w<<6&192|M;o.push(Ee)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class Nw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ow=function(a){const e=v_(a);return C_.encodeByteArray(e,!0)},Zh=function(a){return Ow(a).replace(/\./g,"")},S_=function(a){try{return C_.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Dw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Mw=()=>Dw().__FIREBASE_DEFAULTS__,Lw=()=>{if(typeof process>"u"||typeof k2>"u")return;const a=k2.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},Pw=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&S_(a[1]);return e&&JSON.parse(e)},wf=()=>{try{return Iw()||Mw()||Lw()||Pw()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},b_=a=>wf()?.emulatorHosts?.[a],kw=a=>{const e=b_(a);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},I_=()=>wf()?.config,R_=a=>wf()?.[`_${a}`];class Bw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}function Kl(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function N_(a){return(await fetch(a,{credentials:"include"})).ok}function Vw(a,e){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",h=a.iat||0,m=a.sub||a.user_id;if(!m)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const E={iss:`https://securetoken.google.com/${o}`,aud:o,iat:h,exp:h+3600,auth_time:h,sub:m,user_id:m,firebase:{sign_in_provider:"custom",identities:{}},...a};return[Zh(JSON.stringify(n)),Zh(JSON.stringify(E)),""].join(".")}const Yc={};function Uw(){const a={prod:[],emulator:[]};for(const e of Object.keys(Yc))Yc[e]?a.emulator.push(e):a.prod.push(e);return a}function Fw(a){let e=document.getElementById(a),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",a),n=!0),{created:n,element:e}}let B2=!1;function O_(a,e){if(typeof window>"u"||typeof document>"u"||!Kl(window.location.host)||Yc[a]===e||Yc[a]||B2)return;Yc[a]=e;function n(G){return`__firebase__banner__${G}`}const o="__firebase__banner",m=Uw().prod.length>0;function E(){const G=document.getElementById(o);G&&G.remove()}function v(G){G.style.display="flex",G.style.background="#7faaf0",G.style.position="fixed",G.style.bottom="5px",G.style.left="5px",G.style.padding=".5em",G.style.borderRadius="5px",G.style.alignItems="center"}function C(G,te){G.setAttribute("width","24"),G.setAttribute("id",te),G.setAttribute("height","24"),G.setAttribute("viewBox","0 0 24 24"),G.setAttribute("fill","none"),G.style.marginLeft="-6px"}function w(){const G=document.createElement("span");return G.style.cursor="pointer",G.style.marginLeft="16px",G.style.fontSize="24px",G.innerHTML=" &times;",G.onclick=()=>{B2=!0,E()},G}function D(G,te){G.setAttribute("id",te),G.innerText="Learn more",G.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",G.setAttribute("target","__blank"),G.style.paddingLeft="5px",G.style.textDecoration="underline"}function M(){const G=Fw(o),te=n("text"),Ee=document.getElementById(te)||document.createElement("span"),me=n("learnmore"),ye=document.getElementById(me)||document.createElement("a"),De=n("preprendIcon"),Le=document.getElementById(De)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(G.created){const pe=G.element;v(pe),D(ye,me);const Ue=w();C(Le,De),pe.append(Le,Ee,ye,Ue),document.body.appendChild(pe)}m?(Ee.innerText="Preview backend disconnected.",Le.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Le.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Ee.innerText="Preview backend running in this workspace."),Ee.setAttribute("id",te)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",M):M()}function zi(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(zi())}function zw(){const a=wf()?.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Hw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Gw(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function qw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Xw(){const a=zi();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function Yw(){return!zw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ww(){try{return typeof indexedDB=="object"}catch{return!1}}function Kw(){return new Promise((a,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",h=self.indexedDB.open(o);h.onsuccess=()=>{h.result.close(),n||self.indexedDB.deleteDatabase(o),a(!0)},h.onupgradeneeded=()=>{n=!1},h.onerror=()=>{e(h.error?.message||"")}}catch(n){e(n)}})}const Qw="FirebaseError";class ga extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=Qw,Object.setPrototypeOf(this,ga.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cu.prototype.create)}}class cu{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},h=`${this.service}/${e}`,m=this.errors[e],E=m?Zw(m,o):"Error",v=`${this.serviceName}: ${E} (${h}).`;return new ga(h,v,o)}}function Zw(a,e){return a.replace(Jw,(n,o)=>{const h=e[o];return h!=null?String(h):`<${o}?>`})}const Jw=/\{\$([^}]+)}/g;function $w(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function qo(a,e){if(a===e)return!0;const n=Object.keys(a),o=Object.keys(e);for(const h of n){if(!o.includes(h))return!1;const m=a[h],E=e[h];if(V2(m)&&V2(E)){if(!qo(m,E))return!1}else if(m!==E)return!1}for(const h of o)if(!n.includes(h))return!1;return!0}function V2(a){return a!==null&&typeof a=="object"}function uu(a){const e=[];for(const[n,o]of Object.entries(a))Array.isArray(o)?o.forEach(h=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(h))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function Fc(a){const e={};return a.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[h,m]=o.split("=");e[decodeURIComponent(h)]=decodeURIComponent(m)}}),e}function jc(a){const e=a.indexOf("?");if(!e)return"";const n=a.indexOf("#",e);return a.substring(e,n>0?n:void 0)}function eT(a,e){const n=new tT(a,e);return n.subscribe.bind(n)}class tT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,o){let h;if(e===void 0&&n===void 0&&o===void 0)throw new Error("Missing Observer.");nT(e,["next","error","complete"])?h=e:h={next:e,error:n,complete:o},h.next===void 0&&(h.next=k1),h.error===void 0&&(h.error=k1),h.complete===void 0&&(h.complete=k1);const m=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?h.error(this.finalError):h.complete()}catch{}}),this.observers.push(h),m}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nT(a,e){if(typeof a!="object"||a===null)return!1;for(const n of e)if(n in a&&typeof a[n]=="function")return!0;return!1}function k1(){}function Wn(a){return a&&a._delegate?a._delegate:a}class Xo{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const jo="[DEFAULT]";class iT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new Bw;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const h=this.getOrInitializeService({instanceIdentifier:n});h&&o.resolve(h)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),o=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(h){if(o)return null;throw h}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sT(e))try{this.getOrInitializeService({instanceIdentifier:jo})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(n);try{const m=this.getOrInitializeService({instanceIdentifier:h});o.resolve(m)}catch{}}}}clearInstance(e=jo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jo){return this.instances.has(e)}getOptions(e=jo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const h=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[m,E]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(m);o===v&&E.resolve(h)}return h}onInit(e,n){const o=this.normalizeInstanceIdentifier(n),h=this.onInitCallbacks.get(o)??new Set;h.add(e),this.onInitCallbacks.set(o,h);const m=this.instances.get(o);return m&&e(m,o),()=>{h.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const h of o)try{h(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:rT(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=jo){return this.component?this.component.multipleInstances?e:jo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rT(a){return a===jo?void 0:a}function sT(a){return a.instantiationMode==="EAGER"}class aT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new iT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Pt;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(Pt||(Pt={}));const oT={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},lT=Pt.INFO,cT={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},uT=(a,e,...n)=>{if(e<a.logLevel)return;const o=new Date().toISOString(),h=cT[e];if(h)console[h](`[${o}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class b0{constructor(e){this.name=e,this._logLevel=lT,this._logHandler=uT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...e),this._logHandler(this,Pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...e),this._logHandler(this,Pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...e),this._logHandler(this,Pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...e),this._logHandler(this,Pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...e),this._logHandler(this,Pt.ERROR,...e)}}const hT=(a,e)=>e.some(n=>a instanceof n);let U2,F2;function fT(){return U2||(U2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dT(){return F2||(F2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D_=new WeakMap,Z1=new WeakMap,M_=new WeakMap,B1=new WeakMap,I0=new WeakMap;function gT(a){const e=new Promise((n,o)=>{const h=()=>{a.removeEventListener("success",m),a.removeEventListener("error",E)},m=()=>{n(eo(a.result)),h()},E=()=>{o(a.error),h()};a.addEventListener("success",m),a.addEventListener("error",E)});return e.then(n=>{n instanceof IDBCursor&&D_.set(n,a)}).catch(()=>{}),I0.set(e,a),e}function mT(a){if(Z1.has(a))return;const e=new Promise((n,o)=>{const h=()=>{a.removeEventListener("complete",m),a.removeEventListener("error",E),a.removeEventListener("abort",E)},m=()=>{n(),h()},E=()=>{o(a.error||new DOMException("AbortError","AbortError")),h()};a.addEventListener("complete",m),a.addEventListener("error",E),a.addEventListener("abort",E)});Z1.set(a,e)}let J1={get(a,e,n){if(a instanceof IDBTransaction){if(e==="done")return Z1.get(a);if(e==="objectStoreNames")return a.objectStoreNames||M_.get(a);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return eo(a[e])},set(a,e,n){return a[e]=n,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function pT(a){J1=a(J1)}function yT(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=a.call(V1(this),e,...n);return M_.set(o,e.sort?e.sort():[e]),eo(o)}:dT().includes(a)?function(...e){return a.apply(V1(this),e),eo(D_.get(this))}:function(...e){return eo(a.apply(V1(this),e))}}function _T(a){return typeof a=="function"?yT(a):(a instanceof IDBTransaction&&mT(a),hT(a,fT())?new Proxy(a,J1):a)}function eo(a){if(a instanceof IDBRequest)return gT(a);if(B1.has(a))return B1.get(a);const e=_T(a);return e!==a&&(B1.set(a,e),I0.set(e,a)),e}const V1=a=>I0.get(a);function ET(a,e,{blocked:n,upgrade:o,blocking:h,terminated:m}={}){const E=indexedDB.open(a,e),v=eo(E);return o&&E.addEventListener("upgradeneeded",C=>{o(eo(E.result),C.oldVersion,C.newVersion,eo(E.transaction),C)}),n&&E.addEventListener("blocked",C=>n(C.oldVersion,C.newVersion,C)),v.then(C=>{m&&C.addEventListener("close",()=>m()),h&&C.addEventListener("versionchange",w=>h(w.oldVersion,w.newVersion,w))}).catch(()=>{}),v}const xT=["get","getKey","getAll","getAllKeys","count"],AT=["put","add","delete","clear"],U1=new Map;function j2(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(U1.get(e))return U1.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,h=AT.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(h||xT.includes(n)))return;const m=async function(E,...v){const C=this.transaction(E,h?"readwrite":"readonly");let w=C.store;return o&&(w=w.index(v.shift())),(await Promise.all([w[n](...v),h&&C.done]))[0]};return U1.set(e,m),m}pT(a=>({...a,get:(e,n,o)=>j2(e,n)||a.get(e,n,o),has:(e,n)=>!!j2(e,n)||a.has(e,n)}));class wT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TT(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function TT(a){return a.getComponent()?.type==="VERSION"}const $1="@firebase/app",z2="0.14.6";const ua=new b0("@firebase/app"),vT="@firebase/app-compat",CT="@firebase/analytics-compat",ST="@firebase/analytics",bT="@firebase/app-check-compat",IT="@firebase/app-check",RT="@firebase/auth",NT="@firebase/auth-compat",OT="@firebase/database",DT="@firebase/data-connect",MT="@firebase/database-compat",LT="@firebase/functions",PT="@firebase/functions-compat",kT="@firebase/installations",BT="@firebase/installations-compat",VT="@firebase/messaging",UT="@firebase/messaging-compat",FT="@firebase/performance",jT="@firebase/performance-compat",zT="@firebase/remote-config",HT="@firebase/remote-config-compat",GT="@firebase/storage",qT="@firebase/storage-compat",XT="@firebase/firestore",YT="@firebase/ai",WT="@firebase/firestore-compat",KT="firebase",QT="12.6.0";const e0="[DEFAULT]",ZT={[$1]:"fire-core",[vT]:"fire-core-compat",[ST]:"fire-analytics",[CT]:"fire-analytics-compat",[IT]:"fire-app-check",[bT]:"fire-app-check-compat",[RT]:"fire-auth",[NT]:"fire-auth-compat",[OT]:"fire-rtdb",[DT]:"fire-data-connect",[MT]:"fire-rtdb-compat",[LT]:"fire-fn",[PT]:"fire-fn-compat",[kT]:"fire-iid",[BT]:"fire-iid-compat",[VT]:"fire-fcm",[UT]:"fire-fcm-compat",[FT]:"fire-perf",[jT]:"fire-perf-compat",[zT]:"fire-rc",[HT]:"fire-rc-compat",[GT]:"fire-gcs",[qT]:"fire-gcs-compat",[XT]:"fire-fst",[WT]:"fire-fst-compat",[YT]:"fire-vertex","fire-js":"fire-js",[KT]:"fire-js-all"};const Jh=new Map,JT=new Map,t0=new Map;function H2(a,e){try{a.container.addComponent(e)}catch(n){ua.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,n)}}function zl(a){const e=a.name;if(t0.has(e))return ua.debug(`There were multiple attempts to register component ${e}.`),!1;t0.set(e,a);for(const n of Jh.values())H2(n,a);for(const n of JT.values())H2(n,a);return!0}function R0(a,e){const n=a.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),a.container.getProvider(e)}function Qr(a){return a==null?!1:a.settings!==void 0}const $T={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},to=new cu("app","Firebase",$T);class e3{constructor(e,n,o){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Xo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw to.create("app-deleted",{appName:this._name})}}const Ql=QT;function L_(a,e={}){let n=a;typeof e!="object"&&(e={name:e});const o={name:e0,automaticDataCollectionEnabled:!0,...e},h=o.name;if(typeof h!="string"||!h)throw to.create("bad-app-name",{appName:String(h)});if(n||(n=I_()),!n)throw to.create("no-options");const m=Jh.get(h);if(m){if(qo(n,m.options)&&qo(o,m.config))return m;throw to.create("duplicate-app",{appName:h})}const E=new aT(h);for(const C of t0.values())E.addComponent(C);const v=new e3(n,o,E);return Jh.set(h,v),v}function P_(a=e0){const e=Jh.get(a);if(!e&&a===e0&&I_())return L_();if(!e)throw to.create("no-app",{appName:a});return e}function no(a,e,n){let o=ZT[a]??a;n&&(o+=`-${n}`);const h=o.match(/\s|\//),m=e.match(/\s|\//);if(h||m){const E=[`Unable to register library "${o}" with version "${e}":`];h&&E.push(`library name "${o}" contains illegal characters (whitespace or "/")`),h&&m&&E.push("and"),m&&E.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ua.warn(E.join(" "));return}zl(new Xo(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const t3="firebase-heartbeat-database",n3=1,eu="firebase-heartbeat-store";let F1=null;function k_(){return F1||(F1=ET(t3,n3,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(eu)}catch(n){console.warn(n)}}}}).catch(a=>{throw to.create("idb-open",{originalErrorMessage:a.message})})),F1}async function i3(a){try{const n=(await k_()).transaction(eu),o=await n.objectStore(eu).get(B_(a));return await n.done,o}catch(e){if(e instanceof ga)ua.warn(e.message);else{const n=to.create("idb-get",{originalErrorMessage:e?.message});ua.warn(n.message)}}}async function G2(a,e){try{const o=(await k_()).transaction(eu,"readwrite");await o.objectStore(eu).put(e,B_(a)),await o.done}catch(n){if(n instanceof ga)ua.warn(n.message);else{const o=to.create("idb-set",{originalErrorMessage:n?.message});ua.warn(o.message)}}}function B_(a){return`${a.name}!${a.options.appId}`}const r3=1024,s3=30;class a3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new l3(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=q2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(h=>h.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:n}),this._heartbeatsCache.heartbeats.length>s3){const h=c3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ua.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=q2(),{heartbeatsToSend:n,unsentEntries:o}=o3(this._heartbeatsCache.heartbeats),h=Zh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(e){return ua.warn(e),""}}}function q2(){return new Date().toISOString().substring(0,10)}function o3(a,e=r3){const n=[];let o=a.slice();for(const h of a){const m=n.find(E=>E.agent===h.agent);if(m){if(m.dates.push(h.date),X2(n)>e){m.dates.pop();break}}else if(n.push({agent:h.agent,dates:[h.date]}),X2(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class l3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ww()?Kw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await i3(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return G2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return G2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function X2(a){return Zh(JSON.stringify({version:2,heartbeats:a})).length}function c3(a){if(a.length===0)return-1;let e=0,n=a[0].date;for(let o=1;o<a.length;o++)a[o].date<n&&(n=a[o].date,e=o);return e}function u3(a){zl(new Xo("platform-logger",e=>new wT(e),"PRIVATE")),zl(new Xo("heartbeat",e=>new a3(e),"PRIVATE")),no($1,z2,a),no($1,z2,"esm2020"),no("fire-js","")}u3("");function V_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h3=V_,U_=new cu("auth","Firebase",V_());const $h=new b0("@firebase/auth");function f3(a,...e){$h.logLevel<=Pt.WARN&&$h.warn(`Auth (${Ql}): ${a}`,...e)}function jh(a,...e){$h.logLevel<=Pt.ERROR&&$h.error(`Auth (${Ql}): ${a}`,...e)}function cs(a,...e){throw N0(a,...e)}function ws(a,...e){return N0(a,...e)}function F_(a,e,n){const o={...h3(),[e]:n};return new cu("auth","Firebase",o).create(e,{appName:a.name})}function la(a){return F_(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function N0(a,...e){if(typeof a!="string"){const n=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=a.name),a._errorFactory.create(n,...o)}return U_.create(a,...e)}function ot(a,e,...n){if(!a)throw N0(e,...n)}function aa(a){const e="INTERNAL ASSERTION FAILED: "+a;throw jh(e),new Error(e)}function ha(a,e){a||aa(e)}function n0(){return typeof self<"u"&&self.location?.href||""}function d3(){return Y2()==="http:"||Y2()==="https:"}function Y2(){return typeof self<"u"&&self.location?.protocol||null}function g3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(d3()||Gw()||"connection"in navigator)?navigator.onLine:!0}function m3(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}class hu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ha(n>e,"Short delay should be less than long delay!"),this.isMobile=jw()||qw()}get(){return g3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function O0(a,e){ha(a.emulator,"Emulator should always be set here");const{url:n}=a.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class j_{static initialize(e,n,o){this.fetchImpl=e,n&&(this.headersImpl=n),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;aa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;aa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;aa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const p3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const y3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_3=new hu(3e4,6e4);function ho(a,e){return a.tenantId&&!e.tenantId?{...e,tenantId:a.tenantId}:e}async function fo(a,e,n,o,h={}){return z_(a,h,async()=>{let m={},E={};o&&(e==="GET"?E=o:m={body:JSON.stringify(o)});const v=uu({key:a.config.apiKey,...E}).slice(1),C=await a._getAdditionalHeaders();C["Content-Type"]="application/json",a.languageCode&&(C["X-Firebase-Locale"]=a.languageCode);const w={method:e,headers:C,...m};return Hw()||(w.referrerPolicy="no-referrer"),a.emulatorConfig&&Kl(a.emulatorConfig.host)&&(w.credentials="include"),j_.fetch()(await H_(a,a.config.apiHost,n,v),w)})}async function z_(a,e,n){a._canInitEmulator=!1;const o={...p3,...e};try{const h=new x3(a),m=await Promise.race([n(),h.promise]);h.clearNetworkTimeout();const E=await m.json();if("needConfirmation"in E)throw Mh(a,"account-exists-with-different-credential",E);if(m.ok&&!("errorMessage"in E))return E;{const v=m.ok?E.errorMessage:E.error.message,[C,w]=v.split(" : ");if(C==="FEDERATED_USER_ID_ALREADY_LINKED")throw Mh(a,"credential-already-in-use",E);if(C==="EMAIL_EXISTS")throw Mh(a,"email-already-in-use",E);if(C==="USER_DISABLED")throw Mh(a,"user-disabled",E);const D=o[C]||C.toLowerCase().replace(/[_\s]+/g,"-");if(w)throw F_(a,D,w);cs(a,D)}}catch(h){if(h instanceof ga)throw h;cs(a,"network-request-failed",{message:String(h)})}}async function fu(a,e,n,o,h={}){const m=await fo(a,e,n,o,h);return"mfaPendingCredential"in m&&cs(a,"multi-factor-auth-required",{_serverResponse:m}),m}async function H_(a,e,n,o){const h=`${e}${n}?${o}`,m=a,E=m.config.emulator?O0(a.config,h):`${a.config.apiScheme}://${h}`;return y3.includes(n)&&(await m._persistenceManagerAvailable,m._getPersistenceType()==="COOKIE")?m._getPersistence()._getFinalTarget(E).toString():E}function E3(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class x3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,o)=>{this.timer=setTimeout(()=>o(ws(this.auth,"network-request-failed")),_3.get())})}}function Mh(a,e,n){const o={appName:a.name};n.email&&(o.email=n.email),n.phoneNumber&&(o.phoneNumber=n.phoneNumber);const h=ws(a,e,o);return h.customData._tokenResponse=n,h}function W2(a){return a!==void 0&&a.enterprise!==void 0}class A3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return E3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function w3(a,e){return fo(a,"GET","/v2/recaptchaConfig",ho(a,e))}async function T3(a,e){return fo(a,"POST","/v1/accounts:delete",e)}async function ef(a,e){return fo(a,"POST","/v1/accounts:lookup",e)}function Wc(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function v3(a,e=!1){const n=Wn(a),o=await n.getIdToken(e),h=D0(o);ot(h&&h.exp&&h.auth_time&&h.iat,n.auth,"internal-error");const m=typeof h.firebase=="object"?h.firebase:void 0,E=m?.sign_in_provider;return{claims:h,token:o,authTime:Wc(j1(h.auth_time)),issuedAtTime:Wc(j1(h.iat)),expirationTime:Wc(j1(h.exp)),signInProvider:E||null,signInSecondFactor:m?.sign_in_second_factor||null}}function j1(a){return Number(a)*1e3}function D0(a){const[e,n,o]=a.split(".");if(e===void 0||n===void 0||o===void 0)return jh("JWT malformed, contained fewer than 3 sections"),null;try{const h=S_(n);return h?JSON.parse(h):(jh("Failed to decode base64 JWT payload"),null)}catch(h){return jh("Caught error parsing JWT payload as JSON",h?.toString()),null}}function K2(a){const e=D0(a);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function tu(a,e,n=!1){if(n)return e;try{return await e}catch(o){throw o instanceof ga&&C3(o)&&a.auth.currentUser===a&&await a.auth.signOut(),o}}function C3({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}class S3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class i0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wc(this.lastLoginAt),this.creationTime=Wc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function tf(a){const e=a.auth,n=await a.getIdToken(),o=await tu(a,ef(e,{idToken:n}));ot(o?.users.length,e,"internal-error");const h=o.users[0];a._notifyReloadListener(h);const m=h.providerUserInfo?.length?G_(h.providerUserInfo):[],E=I3(a.providerData,m),v=a.isAnonymous,C=!(a.email&&h.passwordHash)&&!E?.length,w=v?C:!1,D={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:E,metadata:new i0(h.createdAt,h.lastLoginAt),isAnonymous:w};Object.assign(a,D)}async function b3(a){const e=Wn(a);await tf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function I3(a,e){return[...a.filter(o=>!e.some(h=>h.providerId===o.providerId)),...e]}function G_(a){return a.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function R3(a,e){const n=await z_(a,{},async()=>{const o=uu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:h,apiKey:m}=a.config,E=await H_(a,h,"/v1/token",`key=${m}`),v=await a._getAdditionalHeaders();v["Content-Type"]="application/x-www-form-urlencoded";const C={method:"POST",headers:v,body:o};return a.emulatorConfig&&Kl(a.emulatorConfig.host)&&(C.credentials="include"),j_.fetch()(E,C)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function N3(a,e){return fo(a,"POST","/v2/accounts:revokeToken",ho(a,e))}class Vl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ot(e.length!==0,"internal-error");const n=K2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:o,refreshToken:h,expiresIn:m}=await R3(e,n);this.updateTokensAndExpiration(o,h,Number(m))}updateTokensAndExpiration(e,n,o){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,n){const{refreshToken:o,accessToken:h,expirationTime:m}=n,E=new Vl;return o&&(ot(typeof o=="string","internal-error",{appName:e}),E.refreshToken=o),h&&(ot(typeof h=="string","internal-error",{appName:e}),E.accessToken=h),m&&(ot(typeof m=="number","internal-error",{appName:e}),E.expirationTime=m),E}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vl,this.toJSON())}_performRefresh(){return aa("not implemented")}}function Wa(a,e){ot(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class ls{constructor({uid:e,auth:n,stsTokenManager:o,...h}){this.providerId="firebase",this.proactiveRefresh=new S3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=h.displayName||null,this.email=h.email||null,this.emailVerified=h.emailVerified||!1,this.phoneNumber=h.phoneNumber||null,this.photoURL=h.photoURL||null,this.isAnonymous=h.isAnonymous||!1,this.tenantId=h.tenantId||null,this.providerData=h.providerData?[...h.providerData]:[],this.metadata=new i0(h.createdAt||void 0,h.lastLoginAt||void 0)}async getIdToken(e){const n=await tu(this,this.stsTokenManager.getToken(this.auth,e));return ot(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return v3(this,e)}reload(){return b3(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ls({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),n&&await tf(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qr(this.auth.app))return Promise.reject(la(this.auth));const e=await this.getIdToken();return await tu(this,T3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const o=n.displayName??void 0,h=n.email??void 0,m=n.phoneNumber??void 0,E=n.photoURL??void 0,v=n.tenantId??void 0,C=n._redirectEventId??void 0,w=n.createdAt??void 0,D=n.lastLoginAt??void 0,{uid:M,emailVerified:G,isAnonymous:te,providerData:Ee,stsTokenManager:me}=n;ot(M&&me,e,"internal-error");const ye=Vl.fromJSON(this.name,me);ot(typeof M=="string",e,"internal-error"),Wa(o,e.name),Wa(h,e.name),ot(typeof G=="boolean",e,"internal-error"),ot(typeof te=="boolean",e,"internal-error"),Wa(m,e.name),Wa(E,e.name),Wa(v,e.name),Wa(C,e.name),Wa(w,e.name),Wa(D,e.name);const De=new ls({uid:M,auth:e,email:h,emailVerified:G,displayName:o,isAnonymous:te,photoURL:E,phoneNumber:m,tenantId:v,stsTokenManager:ye,createdAt:w,lastLoginAt:D});return Ee&&Array.isArray(Ee)&&(De.providerData=Ee.map(Le=>({...Le}))),C&&(De._redirectEventId=C),De}static async _fromIdTokenResponse(e,n,o=!1){const h=new Vl;h.updateFromServerResponse(n);const m=new ls({uid:n.localId,auth:e,stsTokenManager:h,isAnonymous:o});return await tf(m),m}static async _fromGetAccountInfoResponse(e,n,o){const h=n.users[0];ot(h.localId!==void 0,"internal-error");const m=h.providerUserInfo!==void 0?G_(h.providerUserInfo):[],E=!(h.email&&h.passwordHash)&&!m?.length,v=new Vl;v.updateFromIdToken(o);const C=new ls({uid:h.localId,auth:e,stsTokenManager:v,isAnonymous:E}),w={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:m,metadata:new i0(h.createdAt,h.lastLoginAt),isAnonymous:!(h.email&&h.passwordHash)&&!m?.length};return Object.assign(C,w),C}}const Q2=new Map;function oa(a){ha(a instanceof Function,"Expected a class definition");let e=Q2.get(a);return e?(ha(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,Q2.set(a,e),e)}class q_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}q_.type="NONE";const Z2=q_;function zh(a,e,n){return`firebase:${a}:${e}:${n}`}class Ul{constructor(e,n,o){this.persistence=e,this.auth=n,this.userKey=o;const{config:h,name:m}=this.auth;this.fullUserKey=zh(this.userKey,h.apiKey,m),this.fullPersistenceKey=zh("persistence",h.apiKey,m),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ef(this.auth,{idToken:e}).catch(()=>{});return n?ls._fromGetAccountInfoResponse(this.auth,n,e):null}return ls._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,o="authUser"){if(!n.length)return new Ul(oa(Z2),e,o);const h=(await Promise.all(n.map(async w=>{if(await w._isAvailable())return w}))).filter(w=>w);let m=h[0]||oa(Z2);const E=zh(o,e.config.apiKey,e.name);let v=null;for(const w of n)try{const D=await w._get(E);if(D){let M;if(typeof D=="string"){const G=await ef(e,{idToken:D}).catch(()=>{});if(!G)break;M=await ls._fromGetAccountInfoResponse(e,G,D)}else M=ls._fromJSON(e,D);w!==m&&(v=M),m=w;break}}catch{}const C=h.filter(w=>w._shouldAllowMigration);return!m._shouldAllowMigration||!C.length?new Ul(m,e,o):(m=C[0],v&&await m._set(E,v.toJSON()),await Promise.all(n.map(async w=>{if(w!==m)try{await w._remove(E)}catch{}})),new Ul(m,e,o))}}function J2(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(K_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(X_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Z_(e))return"Blackberry";if(J_(e))return"Webos";if(Y_(e))return"Safari";if((e.includes("chrome/")||W_(e))&&!e.includes("edge/"))return"Chrome";if(Q_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=a.match(n);if(o?.length===2)return o[1]}return"Other"}function X_(a=zi()){return/firefox\//i.test(a)}function Y_(a=zi()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function W_(a=zi()){return/crios\//i.test(a)}function K_(a=zi()){return/iemobile/i.test(a)}function Q_(a=zi()){return/android/i.test(a)}function Z_(a=zi()){return/blackberry/i.test(a)}function J_(a=zi()){return/webos/i.test(a)}function M0(a=zi()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function O3(a=zi()){return M0(a)&&!!window.navigator?.standalone}function D3(){return Xw()&&document.documentMode===10}function $_(a=zi()){return M0(a)||Q_(a)||J_(a)||Z_(a)||/windows phone/i.test(a)||K_(a)}function eE(a,e=[]){let n;switch(a){case"Browser":n=J2(zi());break;case"Worker":n=`${J2(zi())}-${a}`;break;default:n=a}const o=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ql}/${o}`}class M3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const o=m=>new Promise((E,v)=>{try{const C=e(m);E(C)}catch(C){v(C)}});o.onAbort=n,this.queue.push(o);const h=this.queue.length-1;return()=>{this.queue[h]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const o of this.queue)await o(e),o.onAbort&&n.push(o.onAbort)}catch(o){n.reverse();for(const h of n)try{h()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o?.message})}}}async function L3(a,e={}){return fo(a,"GET","/v2/passwordPolicy",ho(a,e))}const P3=6;class k3{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??P3,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const o=this.customStrengthOptions.minPasswordLength,h=this.customStrengthOptions.maxPasswordLength;o&&(n.meetsMinPasswordLength=e.length>=o),h&&(n.meetsMaxPasswordLength=e.length<=h)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let o;for(let h=0;h<e.length;h++)o=e.charAt(h),this.updatePasswordCharacterOptionsStatuses(n,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,n,o,h,m){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=h)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=m))}}class B3{constructor(e,n,o,h){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=o,this.config=h,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $2(this),this.idTokenSubscription=new $2(this),this.beforeStateQueue=new M3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=U_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=h.sdkClientVersion,this._persistenceManagerAvailable=new Promise(m=>this._resolvePersistenceManagerAvailable=m)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=oa(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ul.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ef(this,{idToken:e}),o=await ls._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(o)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Qr(this.app)){const m=this.app.settings.authIdToken;return m?new Promise(E=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(m).then(E,E))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let o=n,h=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const m=this.redirectUser?._redirectEventId,E=o?._redirectEventId,v=await this.tryRedirectSignIn(e);(!m||m===E)&&v?.user&&(o=v.user,h=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(h)try{await this.beforeStateQueue.runMiddleware(o)}catch(m){o=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(m))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=m3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qr(this.app))return Promise.reject(la(this));const n=e?Wn(e):null;return n&&ot(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qr(this.app)?Promise.reject(la(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qr(this.app)?Promise.reject(la(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await L3(this),n=new k3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new cu("auth","Firebase",e())}onAuthStateChanged(e,n,o){return this.registerStateListener(this.authStateSubscription,e,n,o)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,o){return this.registerStateListener(this.idTokenSubscription,e,n,o)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(o.tenantId=this.tenantId),await N3(this,o)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const o=await this.getOrInitRedirectPersistenceManager(n);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&oa(e)||this._popupRedirectResolver;ot(n,this,"argument-error"),this.redirectPersistenceManager=await Ul.create(this,[oa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,o,h){if(this._deleted)return()=>{};const m=typeof n=="function"?n:n.next.bind(n);let E=!1;const v=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(v,this,"internal-error"),v.then(()=>{E||m(this.currentUser)}),typeof n=="function"){const C=e.addObserver(n,o,h);return()=>{E=!0,C()}}else{const C=e.addObserver(n);return()=>{E=!0,C()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const o=await this._getAppCheckToken();return o&&(e["X-Firebase-AppCheck"]=o),e}async _getAppCheckToken(){if(Qr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&f3(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Zo(a){return Wn(a)}class $2{constructor(e){this.auth=e,this.observer=null,this.addObserver=eT(n=>this.observer=n)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Tf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function V3(a){Tf=a}function tE(a){return Tf.loadJS(a)}function U3(){return Tf.recaptchaEnterpriseScript}function F3(){return Tf.gapiScript}function j3(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class z3{constructor(){this.enterprise=new H3}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class H3{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const G3="recaptcha-enterprise",nE="NO_RECAPTCHA";class q3{constructor(e){this.type=G3,this.auth=Zo(e)}async verify(e="verify",n=!1){async function o(m){if(!n){if(m.tenantId==null&&m._agentRecaptchaConfig!=null)return m._agentRecaptchaConfig.siteKey;if(m.tenantId!=null&&m._tenantRecaptchaConfigs[m.tenantId]!==void 0)return m._tenantRecaptchaConfigs[m.tenantId].siteKey}return new Promise(async(E,v)=>{w3(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(C=>{if(C.recaptchaKey===void 0)v(new Error("recaptcha Enterprise site key undefined"));else{const w=new A3(C);return m.tenantId==null?m._agentRecaptchaConfig=w:m._tenantRecaptchaConfigs[m.tenantId]=w,E(w.siteKey)}}).catch(C=>{v(C)})})}function h(m,E,v){const C=window.grecaptcha;W2(C)?C.enterprise.ready(()=>{C.enterprise.execute(m,{action:e}).then(w=>{E(w)}).catch(()=>{E(nE)})}):v(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new z3().execute("siteKey",{action:"verify"}):new Promise((m,E)=>{o(this.auth).then(v=>{if(!n&&W2(window.grecaptcha))h(v,m,E);else{if(typeof window>"u"){E(new Error("RecaptchaVerifier is only supported in browser"));return}let C=U3();C.length!==0&&(C+=v),tE(C).then(()=>{h(v,m,E)}).catch(w=>{E(w)})}}).catch(v=>{E(v)})})}}async function ey(a,e,n,o=!1,h=!1){const m=new q3(a);let E;if(h)E=nE;else try{E=await m.verify(n)}catch{E=await m.verify(n,!0)}const v={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in v){const C=v.phoneEnrollmentInfo.phoneNumber,w=v.phoneEnrollmentInfo.recaptchaToken;Object.assign(v,{phoneEnrollmentInfo:{phoneNumber:C,recaptchaToken:w,captchaResponse:E,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in v){const C=v.phoneSignInInfo.recaptchaToken;Object.assign(v,{phoneSignInInfo:{recaptchaToken:C,captchaResponse:E,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return v}return o?Object.assign(v,{captchaResp:E}):Object.assign(v,{captchaResponse:E}),Object.assign(v,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(v,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),v}async function r0(a,e,n,o,h){if(a._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const m=await ey(a,e,n,n==="getOobCode");return o(a,m)}else return o(a,e).catch(async m=>{if(m.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const E=await ey(a,e,n,n==="getOobCode");return o(a,E)}else return Promise.reject(m)})}function X3(a,e){const n=R0(a,"auth");if(n.isInitialized()){const h=n.getImmediate(),m=n.getOptions();if(qo(m,e??{}))return h;cs(h,"already-initialized")}return n.initialize({options:e})}function Y3(a,e){const n=e?.persistence||[],o=(Array.isArray(n)?n:[n]).map(oa);e?.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(o,e?.popupRedirectResolver)}function W3(a,e,n){const o=Zo(a);ot(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const h=!1,m=iE(e),{host:E,port:v}=K3(e),C=v===null?"":`:${v}`,w={url:`${m}//${E}${C}/`},D=Object.freeze({host:E,port:v,protocol:m.replace(":",""),options:Object.freeze({disableWarnings:h})});if(!o._canInitEmulator){ot(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),ot(qo(w,o.config.emulator)&&qo(D,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=w,o.emulatorConfig=D,o.settings.appVerificationDisabledForTesting=!0,Kl(E)?(N_(`${m}//${E}${C}`),O_("Auth",!0)):Q3()}function iE(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function K3(a){const e=iE(a),n=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!n)return{host:"",port:null};const o=n[2].split("@").pop()||"",h=/^(\[[^\]]+\])(:|$)/.exec(o);if(h){const m=h[1];return{host:m,port:ty(o.substr(m.length+1))}}else{const[m,E]=o.split(":");return{host:m,port:ty(E)}}}function ty(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function Q3(){function a(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}class L0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return aa("not implemented")}_getIdTokenResponse(e){return aa("not implemented")}_linkToIdToken(e,n){return aa("not implemented")}_getReauthenticationResolver(e){return aa("not implemented")}}async function Z3(a,e){return fo(a,"POST","/v1/accounts:signUp",e)}async function J3(a,e){return fu(a,"POST","/v1/accounts:signInWithPassword",ho(a,e))}async function $3(a,e){return fu(a,"POST","/v1/accounts:signInWithEmailLink",ho(a,e))}async function ev(a,e){return fu(a,"POST","/v1/accounts:signInWithEmailLink",ho(a,e))}class nu extends L0{constructor(e,n,o,h=null){super("password",o),this._email=e,this._password=n,this._tenantId=h}static _fromEmailAndPassword(e,n){return new nu(e,n,"password")}static _fromEmailAndCode(e,n,o=null){return new nu(e,n,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r0(e,n,"signInWithPassword",J3);case"emailLink":return $3(e,{email:this._email,oobCode:this._password});default:cs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const o={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return r0(e,o,"signUpPassword",Z3);case"emailLink":return ev(e,{idToken:n,email:this._email,oobCode:this._password});default:cs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Fl(a,e){return fu(a,"POST","/v1/accounts:signInWithIdp",ho(a,e))}const tv="http://localhost";class Yo extends L0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):cs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:h,...m}=n;if(!o||!h)return null;const E=new Yo(o,h);return E.idToken=m.idToken||void 0,E.accessToken=m.accessToken||void 0,E.secret=m.secret,E.nonce=m.nonce,E.pendingToken=m.pendingToken||null,E}_getIdTokenResponse(e){const n=this.buildRequest();return Fl(e,n)}_linkToIdToken(e,n){const o=this.buildRequest();return o.idToken=n,Fl(e,o)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fl(e,n)}buildRequest(){const e={requestUri:tv,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=uu(n)}return e}}function nv(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iv(a){const e=Fc(jc(a)).link,n=e?Fc(jc(e)).deep_link_id:null,o=Fc(jc(a)).deep_link_id;return(o?Fc(jc(o)).link:null)||o||n||e||a}class P0{constructor(e){const n=Fc(jc(e)),o=n.apiKey??null,h=n.oobCode??null,m=nv(n.mode??null);ot(o&&h&&m,"argument-error"),this.apiKey=o,this.operation=m,this.code=h,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=iv(e);try{return new P0(n)}catch{return null}}}class Zl{constructor(){this.providerId=Zl.PROVIDER_ID}static credential(e,n){return nu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const o=P0.parseLink(n);return ot(o,"argument-error"),nu._fromEmailAndCode(e,o.code,o.tenantId)}}Zl.PROVIDER_ID="password";Zl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class rE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class du extends rE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ka extends du{constructor(){super("facebook.com")}static credential(e){return Yo._fromParams({providerId:Ka.PROVIDER_ID,signInMethod:Ka.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ka.credentialFromTaggedObject(e)}static credentialFromError(e){return Ka.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ka.credential(e.oauthAccessToken)}catch{return null}}}Ka.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ka.PROVIDER_ID="facebook.com";class Qa extends du{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yo._fromParams({providerId:Qa.PROVIDER_ID,signInMethod:Qa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Qa.credentialFromTaggedObject(e)}static credentialFromError(e){return Qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:o}=e;if(!n&&!o)return null;try{return Qa.credential(n,o)}catch{return null}}}Qa.GOOGLE_SIGN_IN_METHOD="google.com";Qa.PROVIDER_ID="google.com";class Za extends du{constructor(){super("github.com")}static credential(e){return Yo._fromParams({providerId:Za.PROVIDER_ID,signInMethod:Za.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Za.credentialFromTaggedObject(e)}static credentialFromError(e){return Za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Za.credential(e.oauthAccessToken)}catch{return null}}}Za.GITHUB_SIGN_IN_METHOD="github.com";Za.PROVIDER_ID="github.com";class Ja extends du{constructor(){super("twitter.com")}static credential(e,n){return Yo._fromParams({providerId:Ja.PROVIDER_ID,signInMethod:Ja.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ja.credentialFromTaggedObject(e)}static credentialFromError(e){return Ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:o}=e;if(!n||!o)return null;try{return Ja.credential(n,o)}catch{return null}}}Ja.TWITTER_SIGN_IN_METHOD="twitter.com";Ja.PROVIDER_ID="twitter.com";async function rv(a,e){return fu(a,"POST","/v1/accounts:signUp",ho(a,e))}class Wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,o,h=!1){const m=await ls._fromIdTokenResponse(e,o,h),E=ny(o);return new Wo({user:m,providerId:E,_tokenResponse:o,operationType:n})}static async _forOperation(e,n,o){await e._updateTokensIfNecessary(o,!0);const h=ny(o);return new Wo({user:e,providerId:h,_tokenResponse:o,operationType:n})}}function ny(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}class nf extends ga{constructor(e,n,o,h){super(n.code,n.message),this.operationType=o,this.user=h,Object.setPrototypeOf(this,nf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,n,o,h){return new nf(e,n,o,h)}}function sE(a,e,n,o){return(e==="reauthenticate"?n._getReauthenticationResolver(a):n._getIdTokenResponse(a)).catch(m=>{throw m.code==="auth/multi-factor-auth-required"?nf._fromErrorAndOperation(a,m,e,o):m})}async function sv(a,e,n=!1){const o=await tu(a,e._linkToIdToken(a.auth,await a.getIdToken()),n);return Wo._forOperation(a,"link",o)}async function av(a,e,n=!1){const{auth:o}=a;if(Qr(o.app))return Promise.reject(la(o));const h="reauthenticate";try{const m=await tu(a,sE(o,h,e,a),n);ot(m.idToken,o,"internal-error");const E=D0(m.idToken);ot(E,o,"internal-error");const{sub:v}=E;return ot(a.uid===v,o,"user-mismatch"),Wo._forOperation(a,h,m)}catch(m){throw m?.code==="auth/user-not-found"&&cs(o,"user-mismatch"),m}}async function aE(a,e,n=!1){if(Qr(a.app))return Promise.reject(la(a));const o="signIn",h=await sE(a,o,e),m=await Wo._fromIdTokenResponse(a,o,h);return n||await a._updateCurrentUser(m.user),m}async function ov(a,e){return aE(Zo(a),e)}async function oE(a){const e=Zo(a);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lv(a,e,n){if(Qr(a.app))return Promise.reject(la(a));const o=Zo(a),E=await r0(o,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rv).catch(C=>{throw C.code==="auth/password-does-not-meet-requirements"&&oE(a),C}),v=await Wo._fromIdTokenResponse(o,"signIn",E);return await o._updateCurrentUser(v.user),v}function cv(a,e,n){return Qr(a.app)?Promise.reject(la(a)):ov(Wn(a),Zl.credential(e,n)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&oE(a),o})}function uv(a,e,n,o){return Wn(a).onIdTokenChanged(e,n,o)}function hv(a,e,n){return Wn(a).beforeAuthStateChanged(e,n)}function fv(a,e,n,o){return Wn(a).onAuthStateChanged(e,n,o)}function dv(a){return Wn(a).signOut()}const rf="__sak";class lE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rf,"1"),this.storage.removeItem(rf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const gv=1e3,mv=10;class cE extends lE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const o=this.storage.getItem(n),h=this.localCache[n];o!==h&&e(n,h,o)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((E,v,C)=>{this.notifyListeners(E,C)});return}const o=e.key;n?this.detachListener():this.stopPolling();const h=()=>{const E=this.storage.getItem(o);!n&&this.localCache[o]===E||this.notifyListeners(o,E)},m=this.storage.getItem(o);D3()&&m!==e.newValue&&e.newValue!==e.oldValue?setTimeout(h,mv):h()}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const h of Array.from(o))h(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:o}),!0)})},gv)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cE.type="LOCAL";const pv=cE;class uE extends lE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}uE.type="SESSION";const hE=uE;function yv(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class vf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(h=>h.isListeningto(e));if(n)return n;const o=new vf(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:o,eventType:h,data:m}=n.data,E=this.handlersMap[h];if(!E?.size)return;n.ports[0].postMessage({status:"ack",eventId:o,eventType:h});const v=Array.from(E).map(async w=>w(n.origin,m)),C=await yv(v);n.ports[0].postMessage({status:"done",eventId:o,eventType:h,response:C})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vf.receivers=[];function k0(a="",e=10){let n="";for(let o=0;o<e;o++)n+=Math.floor(Math.random()*10);return a+n}class _v{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,o=50){const h=typeof MessageChannel<"u"?new MessageChannel:null;if(!h)throw new Error("connection_unavailable");let m,E;return new Promise((v,C)=>{const w=k0("",20);h.port1.start();const D=setTimeout(()=>{C(new Error("unsupported_event"))},o);E={messageChannel:h,onMessage(M){const G=M;if(G.data.eventId===w)switch(G.data.status){case"ack":clearTimeout(D),m=setTimeout(()=>{C(new Error("timeout"))},3e3);break;case"done":clearTimeout(m),v(G.data.response);break;default:clearTimeout(D),clearTimeout(m),C(new Error("invalid_response"));break}}},this.handlers.add(E),h.port1.addEventListener("message",E.onMessage),this.target.postMessage({eventType:e,eventId:w,data:n},[h.port2])}).finally(()=>{E&&this.removeMessageHandler(E)})}}function Ts(){return window}function Ev(a){Ts().location.href=a}function fE(){return typeof Ts().WorkerGlobalScope<"u"&&typeof Ts().importScripts=="function"}async function xv(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Av(){return navigator?.serviceWorker?.controller||null}function wv(){return fE()?self:null}const dE="firebaseLocalStorageDb",Tv=1,sf="firebaseLocalStorage",gE="fbase_key";class gu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Cf(a,e){return a.transaction([sf],e?"readwrite":"readonly").objectStore(sf)}function vv(){const a=indexedDB.deleteDatabase(dE);return new gu(a).toPromise()}function s0(){const a=indexedDB.open(dE,Tv);return new Promise((e,n)=>{a.addEventListener("error",()=>{n(a.error)}),a.addEventListener("upgradeneeded",()=>{const o=a.result;try{o.createObjectStore(sf,{keyPath:gE})}catch(h){n(h)}}),a.addEventListener("success",async()=>{const o=a.result;o.objectStoreNames.contains(sf)?e(o):(o.close(),await vv(),e(await s0()))})})}async function iy(a,e,n){const o=Cf(a,!0).put({[gE]:e,value:n});return new gu(o).toPromise()}async function Cv(a,e){const n=Cf(a,!1).get(e),o=await new gu(n).toPromise();return o===void 0?null:o.value}function ry(a,e){const n=Cf(a,!0).delete(e);return new gu(n).toPromise()}const Sv=800,bv=3;class mE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await s0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(n++>bv)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vf._getInstance(wv()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await xv(),!this.activeServiceWorker)return;this.sender=new _v(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Av()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await s0();return await iy(e,rf,"1"),await ry(e,rf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(o=>iy(o,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(o=>Cv(o,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ry(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(h=>{const m=Cf(h,!1).getAll();return new gu(m).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],o=new Set;if(e.length!==0)for(const{fbase_key:h,value:m}of e)o.add(h),JSON.stringify(this.localCache[h])!==JSON.stringify(m)&&(this.notifyListeners(h,m),n.push(h));for(const h of Object.keys(this.localCache))this.localCache[h]&&!o.has(h)&&(this.notifyListeners(h,null),n.push(h));return n}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const h of Array.from(o))h(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Sv)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mE.type="LOCAL";const Iv=mE;new hu(3e4,6e4);function Rv(a,e){return e?oa(e):(ot(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}class B0 extends L0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Nv(a){return aE(a.auth,new B0(a),a.bypassAuthState)}function Ov(a){const{auth:e,user:n}=a;return ot(n,e,"internal-error"),av(n,new B0(a),a.bypassAuthState)}async function Dv(a){const{auth:e,user:n}=a;return ot(n,e,"internal-error"),sv(n,new B0(a),a.bypassAuthState)}class pE{constructor(e,n,o,h,m=!1){this.auth=e,this.resolver=o,this.user=h,this.bypassAuthState=m,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:o,postBody:h,tenantId:m,error:E,type:v}=e;if(E){this.reject(E);return}const C={auth:this.auth,requestUri:n,sessionId:o,tenantId:m||void 0,postBody:h||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(v)(C))}catch(w){this.reject(w)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Nv;case"linkViaPopup":case"linkViaRedirect":return Dv;case"reauthViaPopup":case"reauthViaRedirect":return Ov;default:cs(this.auth,"internal-error")}}resolve(e){ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ha(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Mv=new hu(2e3,1e4);class kl extends pE{constructor(e,n,o,h,m){super(e,n,h,m),this.provider=o,this.authWindow=null,this.pollId=null,kl.currentPopupAction&&kl.currentPopupAction.cancel(),kl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ot(e,this.auth,"internal-error"),e}async onExecution(){ha(this.filter.length===1,"Popup operations only handle one event");const e=k0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ws(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ws(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ws(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Mv.get())};e()}}kl.currentPopupAction=null;const Lv="pendingRedirect",Hh=new Map;class Pv extends pE{constructor(e,n,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,o),this.eventId=null}async execute(){let e=Hh.get(this.auth._key());if(!e){try{const o=await kv(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(n){e=()=>Promise.reject(n)}Hh.set(this.auth._key(),e)}return this.bypassAuthState||Hh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kv(a,e){const n=Uv(e),o=Vv(a);if(!await o._isAvailable())return!1;const h=await o._get(n)==="true";return await o._remove(n),h}function Bv(a,e){Hh.set(a._key(),e)}function Vv(a){return oa(a._redirectPersistence)}function Uv(a){return zh(Lv,a.config.apiKey,a.name)}async function Fv(a,e,n=!1){if(Qr(a.app))return Promise.reject(la(a));const o=Zo(a),h=Rv(o,e),E=await new Pv(o,h,n).execute();return E&&!n&&(delete E.user._redirectEventId,await o._persistUserIfCurrent(E.user),await o._setRedirectUser(null,e)),E}const jv=600*1e3;class zv{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(n=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Hv(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!yE(e)){const o=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ws(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const o=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jv&&this.cachedEventUids.clear(),this.cachedEventUids.has(sy(e))}saveEventToCache(e){this.cachedEventUids.add(sy(e)),this.lastProcessedEventTime=Date.now()}}function sy(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function yE({type:a,error:e}){return a==="unknown"&&e?.code==="auth/no-auth-event"}function Hv(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yE(a);default:return!1}}async function Gv(a,e={}){return fo(a,"GET","/v1/projects",e)}const qv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xv=/^https?/;async function Yv(a){if(a.config.emulator)return;const{authorizedDomains:e}=await Gv(a);for(const n of e)try{if(Wv(n))return}catch{}cs(a,"unauthorized-domain")}function Wv(a){const e=n0(),{protocol:n,hostname:o}=new URL(e);if(a.startsWith("chrome-extension://")){const E=new URL(a);return E.hostname===""&&o===""?n==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&E.hostname===o}if(!Xv.test(n))return!1;if(qv.test(a))return o===a;const h=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+h+"|"+h+")$","i").test(o)}const Kv=new hu(3e4,6e4);function ay(){const a=Ts().___jsl;if(a?.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let n=0;n<a.CP.length;n++)a.CP[n]=null}}function Qv(a){return new Promise((e,n)=>{function o(){ay(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ay(),n(ws(a,"network-request-failed"))},timeout:Kv.get()})}if(Ts().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ts().gapi?.load)o();else{const h=j3("iframefcb");return Ts()[h]=()=>{gapi.load?o():n(ws(a,"network-request-failed"))},tE(`${F3()}?onload=${h}`).catch(m=>n(m))}}).catch(e=>{throw Gh=null,e})}let Gh=null;function Zv(a){return Gh=Gh||Qv(a),Gh}const Jv=new hu(5e3,15e3),$v="__/auth/iframe",eC="emulator/auth/iframe",tC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iC(a){const e=a.config;ot(e.authDomain,a,"auth-domain-config-required");const n=e.emulator?O0(e,eC):`https://${a.config.authDomain}/${$v}`,o={apiKey:e.apiKey,appName:a.name,v:Ql},h=nC.get(a.config.apiHost);h&&(o.eid=h);const m=a._getFrameworks();return m.length&&(o.fw=m.join(",")),`${n}?${uu(o).slice(1)}`}async function rC(a){const e=await Zv(a),n=Ts().gapi;return ot(n,a,"internal-error"),e.open({where:document.body,url:iC(a),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tC,dontclear:!0},o=>new Promise(async(h,m)=>{await o.restyle({setHideOnLeave:!1});const E=ws(a,"network-request-failed"),v=Ts().setTimeout(()=>{m(E)},Jv.get());function C(){Ts().clearTimeout(v),h(o)}o.ping(C).then(C,()=>{m(E)})}))}const sC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aC=500,oC=600,lC="_blank",cC="http://localhost";class oy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uC(a,e,n,o=aC,h=oC){const m=Math.max((window.screen.availHeight-h)/2,0).toString(),E=Math.max((window.screen.availWidth-o)/2,0).toString();let v="";const C={...sC,width:o.toString(),height:h.toString(),top:m,left:E},w=zi().toLowerCase();n&&(v=W_(w)?lC:n),X_(w)&&(e=e||cC,C.scrollbars="yes");const D=Object.entries(C).reduce((G,[te,Ee])=>`${G}${te}=${Ee},`,"");if(O3(w)&&v!=="_self")return hC(e||"",v),new oy(null);const M=window.open(e||"",v,D);ot(M,a,"popup-blocked");try{M.focus()}catch{}return new oy(M)}function hC(a,e){const n=document.createElement("a");n.href=a,n.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(o)}const fC="__/auth/handler",dC="emulator/auth/handler",gC=encodeURIComponent("fac");async function ly(a,e,n,o,h,m){ot(a.config.authDomain,a,"auth-domain-config-required"),ot(a.config.apiKey,a,"invalid-api-key");const E={apiKey:a.config.apiKey,appName:a.name,authType:n,redirectUrl:o,v:Ql,eventId:h};if(e instanceof rE){e.setDefaultLanguage(a.languageCode),E.providerId=e.providerId||"",$w(e.getCustomParameters())||(E.customParameters=JSON.stringify(e.getCustomParameters()));for(const[D,M]of Object.entries({}))E[D]=M}if(e instanceof du){const D=e.getScopes().filter(M=>M!=="");D.length>0&&(E.scopes=D.join(","))}a.tenantId&&(E.tid=a.tenantId);const v=E;for(const D of Object.keys(v))v[D]===void 0&&delete v[D];const C=await a._getAppCheckToken(),w=C?`#${gC}=${encodeURIComponent(C)}`:"";return`${mC(a)}?${uu(v).slice(1)}${w}`}function mC({config:a}){return a.emulator?O0(a,dC):`https://${a.authDomain}/${fC}`}const z1="webStorageSupport";class pC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hE,this._completeRedirectFn=Fv,this._overrideRedirectResult=Bv}async _openPopup(e,n,o,h){ha(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const m=await ly(e,n,o,n0(),h);return uC(e,m,k0())}async _openRedirect(e,n,o,h){await this._originValidation(e);const m=await ly(e,n,o,n0(),h);return Ev(m),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:h,promise:m}=this.eventManagers[n];return h?Promise.resolve(h):(ha(m,"If manager is not set, promise should be"),m)}const o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch(()=>{delete this.eventManagers[n]}),o}async initAndGetManager(e){const n=await rC(e),o=new zv(e);return n.register("authEvent",h=>(ot(h?.authEvent,e,"invalid-auth-event"),{status:o.onEvent(h.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=n,o}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(z1,{type:z1},h=>{const m=h?.[0]?.[z1];m!==void 0&&n(!!m),cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Yv(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $_()||Y_()||M0()}}const yC=pC;var cy="@firebase/auth",uy="1.12.0";class _C{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(o=>{e(o?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function EC(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xC(a){zl(new Xo("auth",(e,{options:n})=>{const o=e.getProvider("app").getImmediate(),h=e.getProvider("heartbeat"),m=e.getProvider("app-check-internal"),{apiKey:E,authDomain:v}=o.options;ot(E&&!E.includes(":"),"invalid-api-key",{appName:o.name});const C={apiKey:E,authDomain:v,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eE(a)},w=new B3(o,h,m,C);return Y3(w,n),w},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,o)=>{e.getProvider("auth-internal").initialize()})),zl(new Xo("auth-internal",e=>{const n=Zo(e.getProvider("auth").getImmediate());return(o=>new _C(o))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),no(cy,uy,EC(a)),no(cy,uy,"esm2020")}const AC=300,wC=R_("authIdTokenMaxAge")||AC;let hy=null;const TC=a=>async e=>{const n=e&&await e.getIdTokenResult(),o=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(o&&o>wC)return;const h=n?.token;hy!==h&&(hy=h,await fetch(a,{method:h?"POST":"DELETE",headers:h?{Authorization:`Bearer ${h}`}:{}}))};function vC(a=P_()){const e=R0(a,"auth");if(e.isInitialized())return e.getImmediate();const n=X3(a,{popupRedirectResolver:yC,persistence:[Iv,pv,hE]}),o=R_("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const m=new URL(o,location.origin);if(location.origin===m.origin){const E=TC(m.toString());hv(n,E,()=>E(n.currentUser)),uv(n,v=>E(v))}}const h=b_("auth");return h&&W3(n,`http://${h}`),n}function CC(){return document.getElementsByTagName("head")?.[0]??document}V3({loadJS(a){return new Promise((e,n)=>{const o=document.createElement("script");o.setAttribute("src",a),o.onload=e,o.onerror=h=>{const m=ws("internal-error");m.customData=h,n(m)},o.type="text/javascript",o.charset="UTF-8",CC().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xC("Browser");var fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var io,_E;(function(){var a;function e(V,F){function B(){}B.prototype=F.prototype,V.F=F.prototype,V.prototype=new B,V.prototype.constructor=V,V.D=function(Z,W,X){for(var P=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)P[Ae-2]=arguments[Ae];return F.prototype[W].apply(Z,P)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,n),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function h(V,F,B){B||(B=0);const Z=Array(16);if(typeof F=="string")for(var W=0;W<16;++W)Z[W]=F.charCodeAt(B++)|F.charCodeAt(B++)<<8|F.charCodeAt(B++)<<16|F.charCodeAt(B++)<<24;else for(W=0;W<16;++W)Z[W]=F[B++]|F[B++]<<8|F[B++]<<16|F[B++]<<24;F=V.g[0],B=V.g[1],W=V.g[2];let X=V.g[3],P;P=F+(X^B&(W^X))+Z[0]+3614090360&4294967295,F=B+(P<<7&4294967295|P>>>25),P=X+(W^F&(B^W))+Z[1]+3905402710&4294967295,X=F+(P<<12&4294967295|P>>>20),P=W+(B^X&(F^B))+Z[2]+606105819&4294967295,W=X+(P<<17&4294967295|P>>>15),P=B+(F^W&(X^F))+Z[3]+3250441966&4294967295,B=W+(P<<22&4294967295|P>>>10),P=F+(X^B&(W^X))+Z[4]+4118548399&4294967295,F=B+(P<<7&4294967295|P>>>25),P=X+(W^F&(B^W))+Z[5]+1200080426&4294967295,X=F+(P<<12&4294967295|P>>>20),P=W+(B^X&(F^B))+Z[6]+2821735955&4294967295,W=X+(P<<17&4294967295|P>>>15),P=B+(F^W&(X^F))+Z[7]+4249261313&4294967295,B=W+(P<<22&4294967295|P>>>10),P=F+(X^B&(W^X))+Z[8]+1770035416&4294967295,F=B+(P<<7&4294967295|P>>>25),P=X+(W^F&(B^W))+Z[9]+2336552879&4294967295,X=F+(P<<12&4294967295|P>>>20),P=W+(B^X&(F^B))+Z[10]+4294925233&4294967295,W=X+(P<<17&4294967295|P>>>15),P=B+(F^W&(X^F))+Z[11]+2304563134&4294967295,B=W+(P<<22&4294967295|P>>>10),P=F+(X^B&(W^X))+Z[12]+1804603682&4294967295,F=B+(P<<7&4294967295|P>>>25),P=X+(W^F&(B^W))+Z[13]+4254626195&4294967295,X=F+(P<<12&4294967295|P>>>20),P=W+(B^X&(F^B))+Z[14]+2792965006&4294967295,W=X+(P<<17&4294967295|P>>>15),P=B+(F^W&(X^F))+Z[15]+1236535329&4294967295,B=W+(P<<22&4294967295|P>>>10),P=F+(W^X&(B^W))+Z[1]+4129170786&4294967295,F=B+(P<<5&4294967295|P>>>27),P=X+(B^W&(F^B))+Z[6]+3225465664&4294967295,X=F+(P<<9&4294967295|P>>>23),P=W+(F^B&(X^F))+Z[11]+643717713&4294967295,W=X+(P<<14&4294967295|P>>>18),P=B+(X^F&(W^X))+Z[0]+3921069994&4294967295,B=W+(P<<20&4294967295|P>>>12),P=F+(W^X&(B^W))+Z[5]+3593408605&4294967295,F=B+(P<<5&4294967295|P>>>27),P=X+(B^W&(F^B))+Z[10]+38016083&4294967295,X=F+(P<<9&4294967295|P>>>23),P=W+(F^B&(X^F))+Z[15]+3634488961&4294967295,W=X+(P<<14&4294967295|P>>>18),P=B+(X^F&(W^X))+Z[4]+3889429448&4294967295,B=W+(P<<20&4294967295|P>>>12),P=F+(W^X&(B^W))+Z[9]+568446438&4294967295,F=B+(P<<5&4294967295|P>>>27),P=X+(B^W&(F^B))+Z[14]+3275163606&4294967295,X=F+(P<<9&4294967295|P>>>23),P=W+(F^B&(X^F))+Z[3]+4107603335&4294967295,W=X+(P<<14&4294967295|P>>>18),P=B+(X^F&(W^X))+Z[8]+1163531501&4294967295,B=W+(P<<20&4294967295|P>>>12),P=F+(W^X&(B^W))+Z[13]+2850285829&4294967295,F=B+(P<<5&4294967295|P>>>27),P=X+(B^W&(F^B))+Z[2]+4243563512&4294967295,X=F+(P<<9&4294967295|P>>>23),P=W+(F^B&(X^F))+Z[7]+1735328473&4294967295,W=X+(P<<14&4294967295|P>>>18),P=B+(X^F&(W^X))+Z[12]+2368359562&4294967295,B=W+(P<<20&4294967295|P>>>12),P=F+(B^W^X)+Z[5]+4294588738&4294967295,F=B+(P<<4&4294967295|P>>>28),P=X+(F^B^W)+Z[8]+2272392833&4294967295,X=F+(P<<11&4294967295|P>>>21),P=W+(X^F^B)+Z[11]+1839030562&4294967295,W=X+(P<<16&4294967295|P>>>16),P=B+(W^X^F)+Z[14]+4259657740&4294967295,B=W+(P<<23&4294967295|P>>>9),P=F+(B^W^X)+Z[1]+2763975236&4294967295,F=B+(P<<4&4294967295|P>>>28),P=X+(F^B^W)+Z[4]+1272893353&4294967295,X=F+(P<<11&4294967295|P>>>21),P=W+(X^F^B)+Z[7]+4139469664&4294967295,W=X+(P<<16&4294967295|P>>>16),P=B+(W^X^F)+Z[10]+3200236656&4294967295,B=W+(P<<23&4294967295|P>>>9),P=F+(B^W^X)+Z[13]+681279174&4294967295,F=B+(P<<4&4294967295|P>>>28),P=X+(F^B^W)+Z[0]+3936430074&4294967295,X=F+(P<<11&4294967295|P>>>21),P=W+(X^F^B)+Z[3]+3572445317&4294967295,W=X+(P<<16&4294967295|P>>>16),P=B+(W^X^F)+Z[6]+76029189&4294967295,B=W+(P<<23&4294967295|P>>>9),P=F+(B^W^X)+Z[9]+3654602809&4294967295,F=B+(P<<4&4294967295|P>>>28),P=X+(F^B^W)+Z[12]+3873151461&4294967295,X=F+(P<<11&4294967295|P>>>21),P=W+(X^F^B)+Z[15]+530742520&4294967295,W=X+(P<<16&4294967295|P>>>16),P=B+(W^X^F)+Z[2]+3299628645&4294967295,B=W+(P<<23&4294967295|P>>>9),P=F+(W^(B|~X))+Z[0]+4096336452&4294967295,F=B+(P<<6&4294967295|P>>>26),P=X+(B^(F|~W))+Z[7]+1126891415&4294967295,X=F+(P<<10&4294967295|P>>>22),P=W+(F^(X|~B))+Z[14]+2878612391&4294967295,W=X+(P<<15&4294967295|P>>>17),P=B+(X^(W|~F))+Z[5]+4237533241&4294967295,B=W+(P<<21&4294967295|P>>>11),P=F+(W^(B|~X))+Z[12]+1700485571&4294967295,F=B+(P<<6&4294967295|P>>>26),P=X+(B^(F|~W))+Z[3]+2399980690&4294967295,X=F+(P<<10&4294967295|P>>>22),P=W+(F^(X|~B))+Z[10]+4293915773&4294967295,W=X+(P<<15&4294967295|P>>>17),P=B+(X^(W|~F))+Z[1]+2240044497&4294967295,B=W+(P<<21&4294967295|P>>>11),P=F+(W^(B|~X))+Z[8]+1873313359&4294967295,F=B+(P<<6&4294967295|P>>>26),P=X+(B^(F|~W))+Z[15]+4264355552&4294967295,X=F+(P<<10&4294967295|P>>>22),P=W+(F^(X|~B))+Z[6]+2734768916&4294967295,W=X+(P<<15&4294967295|P>>>17),P=B+(X^(W|~F))+Z[13]+1309151649&4294967295,B=W+(P<<21&4294967295|P>>>11),P=F+(W^(B|~X))+Z[4]+4149444226&4294967295,F=B+(P<<6&4294967295|P>>>26),P=X+(B^(F|~W))+Z[11]+3174756917&4294967295,X=F+(P<<10&4294967295|P>>>22),P=W+(F^(X|~B))+Z[2]+718787259&4294967295,W=X+(P<<15&4294967295|P>>>17),P=B+(X^(W|~F))+Z[9]+3951481745&4294967295,V.g[0]=V.g[0]+F&4294967295,V.g[1]=V.g[1]+(W+(P<<21&4294967295|P>>>11))&4294967295,V.g[2]=V.g[2]+W&4294967295,V.g[3]=V.g[3]+X&4294967295}o.prototype.v=function(V,F){F===void 0&&(F=V.length);const B=F-this.blockSize,Z=this.C;let W=this.h,X=0;for(;X<F;){if(W==0)for(;X<=B;)h(this,V,X),X+=this.blockSize;if(typeof V=="string"){for(;X<F;)if(Z[W++]=V.charCodeAt(X++),W==this.blockSize){h(this,Z),W=0;break}}else for(;X<F;)if(Z[W++]=V[X++],W==this.blockSize){h(this,Z),W=0;break}}this.h=W,this.o+=F},o.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var F=1;F<V.length-8;++F)V[F]=0;F=this.o*8;for(var B=V.length-8;B<V.length;++B)V[B]=F&255,F/=256;for(this.v(V),V=Array(16),F=0,B=0;B<4;++B)for(let Z=0;Z<32;Z+=8)V[F++]=this.g[B]>>>Z&255;return V};function m(V,F){var B=v;return Object.prototype.hasOwnProperty.call(B,V)?B[V]:B[V]=F(V)}function E(V,F){this.h=F;const B=[];let Z=!0;for(let W=V.length-1;W>=0;W--){const X=V[W]|0;Z&&X==F||(B[W]=X,Z=!1)}this.g=B}var v={};function C(V){return-128<=V&&V<128?m(V,function(F){return new E([F|0],F<0?-1:0)}):new E([V|0],V<0?-1:0)}function w(V){if(isNaN(V)||!isFinite(V))return M;if(V<0)return ye(w(-V));const F=[];let B=1;for(let Z=0;V>=B;Z++)F[Z]=V/B|0,B*=4294967296;return new E(F,0)}function D(V,F){if(V.length==0)throw Error("number format error: empty string");if(F=F||10,F<2||36<F)throw Error("radix out of range: "+F);if(V.charAt(0)=="-")return ye(D(V.substring(1),F));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const B=w(Math.pow(F,8));let Z=M;for(let X=0;X<V.length;X+=8){var W=Math.min(8,V.length-X);const P=parseInt(V.substring(X,X+W),F);W<8?(W=w(Math.pow(F,W)),Z=Z.j(W).add(w(P))):(Z=Z.j(B),Z=Z.add(w(P)))}return Z}var M=C(0),G=C(1),te=C(16777216);a=E.prototype,a.m=function(){if(me(this))return-ye(this).m();let V=0,F=1;for(let B=0;B<this.g.length;B++){const Z=this.i(B);V+=(Z>=0?Z:4294967296+Z)*F,F*=4294967296}return V},a.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(Ee(this))return"0";if(me(this))return"-"+ye(this).toString(V);const F=w(Math.pow(V,6));var B=this;let Z="";for(;;){const W=Ue(B,F).g;B=De(B,W.j(F));let X=((B.g.length>0?B.g[0]:B.h)>>>0).toString(V);if(B=W,Ee(B))return X+Z;for(;X.length<6;)X="0"+X;Z=X+Z}},a.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function Ee(V){if(V.h!=0)return!1;for(let F=0;F<V.g.length;F++)if(V.g[F]!=0)return!1;return!0}function me(V){return V.h==-1}a.l=function(V){return V=De(this,V),me(V)?-1:Ee(V)?0:1};function ye(V){const F=V.g.length,B=[];for(let Z=0;Z<F;Z++)B[Z]=~V.g[Z];return new E(B,~V.h).add(G)}a.abs=function(){return me(this)?ye(this):this},a.add=function(V){const F=Math.max(this.g.length,V.g.length),B=[];let Z=0;for(let W=0;W<=F;W++){let X=Z+(this.i(W)&65535)+(V.i(W)&65535),P=(X>>>16)+(this.i(W)>>>16)+(V.i(W)>>>16);Z=P>>>16,X&=65535,P&=65535,B[W]=P<<16|X}return new E(B,B[B.length-1]&-2147483648?-1:0)};function De(V,F){return V.add(ye(F))}a.j=function(V){if(Ee(this)||Ee(V))return M;if(me(this))return me(V)?ye(this).j(ye(V)):ye(ye(this).j(V));if(me(V))return ye(this.j(ye(V)));if(this.l(te)<0&&V.l(te)<0)return w(this.m()*V.m());const F=this.g.length+V.g.length,B=[];for(var Z=0;Z<2*F;Z++)B[Z]=0;for(Z=0;Z<this.g.length;Z++)for(let W=0;W<V.g.length;W++){const X=this.i(Z)>>>16,P=this.i(Z)&65535,Ae=V.i(W)>>>16,ee=V.i(W)&65535;B[2*Z+2*W]+=P*ee,Le(B,2*Z+2*W),B[2*Z+2*W+1]+=X*ee,Le(B,2*Z+2*W+1),B[2*Z+2*W+1]+=P*Ae,Le(B,2*Z+2*W+1),B[2*Z+2*W+2]+=X*Ae,Le(B,2*Z+2*W+2)}for(V=0;V<F;V++)B[V]=B[2*V+1]<<16|B[2*V];for(V=F;V<2*F;V++)B[V]=0;return new E(B,0)};function Le(V,F){for(;(V[F]&65535)!=V[F];)V[F+1]+=V[F]>>>16,V[F]&=65535,F++}function pe(V,F){this.g=V,this.h=F}function Ue(V,F){if(Ee(F))throw Error("division by zero");if(Ee(V))return new pe(M,M);if(me(V))return F=Ue(ye(V),F),new pe(ye(F.g),ye(F.h));if(me(F))return F=Ue(V,ye(F)),new pe(ye(F.g),F.h);if(V.g.length>30){if(me(V)||me(F))throw Error("slowDivide_ only works with positive integers.");for(var B=G,Z=F;Z.l(V)<=0;)B=nt(B),Z=nt(Z);var W=Ve(B,1),X=Ve(Z,1);for(Z=Ve(Z,2),B=Ve(B,2);!Ee(Z);){var P=X.add(Z);P.l(V)<=0&&(W=W.add(B),X=P),Z=Ve(Z,1),B=Ve(B,1)}return F=De(V,W.j(F)),new pe(W,F)}for(W=M;V.l(F)>=0;){for(B=Math.max(1,Math.floor(V.m()/F.m())),Z=Math.ceil(Math.log(B)/Math.LN2),Z=Z<=48?1:Math.pow(2,Z-48),X=w(B),P=X.j(F);me(P)||P.l(V)>0;)B-=Z,X=w(B),P=X.j(F);Ee(X)&&(X=G),W=W.add(X),V=De(V,P)}return new pe(W,V)}a.B=function(V){return Ue(this,V).h},a.and=function(V){const F=Math.max(this.g.length,V.g.length),B=[];for(let Z=0;Z<F;Z++)B[Z]=this.i(Z)&V.i(Z);return new E(B,this.h&V.h)},a.or=function(V){const F=Math.max(this.g.length,V.g.length),B=[];for(let Z=0;Z<F;Z++)B[Z]=this.i(Z)|V.i(Z);return new E(B,this.h|V.h)},a.xor=function(V){const F=Math.max(this.g.length,V.g.length),B=[];for(let Z=0;Z<F;Z++)B[Z]=this.i(Z)^V.i(Z);return new E(B,this.h^V.h)};function nt(V){const F=V.g.length+1,B=[];for(let Z=0;Z<F;Z++)B[Z]=V.i(Z)<<1|V.i(Z-1)>>>31;return new E(B,V.h)}function Ve(V,F){const B=F>>5;F%=32;const Z=V.g.length-B,W=[];for(let X=0;X<Z;X++)W[X]=F>0?V.i(X+B)>>>F|V.i(X+B+1)<<32-F:V.i(X+B);return new E(W,V.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,_E=o,E.prototype.add=E.prototype.add,E.prototype.multiply=E.prototype.j,E.prototype.modulo=E.prototype.B,E.prototype.compare=E.prototype.l,E.prototype.toNumber=E.prototype.m,E.prototype.toString=E.prototype.toString,E.prototype.getBits=E.prototype.i,E.fromNumber=w,E.fromString=D,io=E}).apply(typeof fy<"u"?fy:typeof self<"u"?self:typeof window<"u"?window:{});var Lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var EE,zc,xE,qh,a0,AE,wE,TE;(function(){var a,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lh=="object"&&Lh];for(var S=0;S<p.length;++S){var R=p[S];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var o=n(this);function h(p,S){if(S)e:{var R=o;p=p.split(".");for(var U=0;U<p.length-1;U++){var re=p[U];if(!(re in R))break e;R=R[re]}p=p[p.length-1],U=R[p],S=S(U),S!=U&&S!=null&&e(R,p,{configurable:!0,writable:!0,value:S})}}h("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),h("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),h("Object.entries",function(p){return p||function(S){var R=[],U;for(U in S)Object.prototype.hasOwnProperty.call(S,U)&&R.push([U,S[U]]);return R}});var m=m||{},E=this||self;function v(p){var S=typeof p;return S=="object"&&p!=null||S=="function"}function C(p,S,R){return p.call.apply(p.bind,arguments)}function w(p,S,R){return w=C,w.apply(null,arguments)}function D(p,S){var R=Array.prototype.slice.call(arguments,1);return function(){var U=R.slice();return U.push.apply(U,arguments),p.apply(this,U)}}function M(p,S){function R(){}R.prototype=S.prototype,p.Z=S.prototype,p.prototype=new R,p.prototype.constructor=p,p.Ob=function(U,re,de){for(var Pe=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)Pe[ct-2]=arguments[ct];return S.prototype[re].apply(U,Pe)}}var G=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function te(p){const S=p.length;if(S>0){const R=Array(S);for(let U=0;U<S;U++)R[U]=p[U];return R}return[]}function Ee(p,S){for(let U=1;U<arguments.length;U++){const re=arguments[U];var R=typeof re;if(R=R!="object"?R:re?Array.isArray(re)?"array":R:"null",R=="array"||R=="object"&&typeof re.length=="number"){R=p.length||0;const de=re.length||0;p.length=R+de;for(let Pe=0;Pe<de;Pe++)p[R+Pe]=re[Pe]}else p.push(re)}}class me{constructor(S,R){this.i=S,this.j=R,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function ye(p){E.setTimeout(()=>{throw p},0)}function De(){var p=V;let S=null;return p.g&&(S=p.g,p.g=p.g.next,p.g||(p.h=null),S.next=null),S}class Le{constructor(){this.h=this.g=null}add(S,R){const U=pe.get();U.set(S,R),this.h?this.h.next=U:this.g=U,this.h=U}}var pe=new me(()=>new Ue,p=>p.reset());class Ue{constructor(){this.next=this.g=this.h=null}set(S,R){this.h=S,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let nt,Ve=!1,V=new Le,F=()=>{const p=Promise.resolve(void 0);nt=()=>{p.then(B)}};function B(){for(var p;p=De();){try{p.h.call(p.g)}catch(R){ye(R)}var S=pe;S.j(p),S.h<100&&(S.h++,p.next=S.g,S.g=p)}Ve=!1}function Z(){this.u=this.u,this.C=this.C}Z.prototype.u=!1,Z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},Z.prototype[Symbol.dispose]=function(){this.dispose()},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(p,S){this.type=p,this.g=this.target=S,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var X=(function(){if(!E.addEventListener||!Object.defineProperty)return!1;var p=!1,S=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const R=()=>{};E.addEventListener("test",R,S),E.removeEventListener("test",R,S)}catch{}return p})();function P(p){return/^[\s\xa0]*$/.test(p)}function Ae(p,S){W.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,S)}M(Ae,W),Ae.prototype.init=function(p,S){const R=this.type=p.type,U=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=S,S=p.relatedTarget,S||(R=="mouseover"?S=p.fromElement:R=="mouseout"&&(S=p.toElement)),this.relatedTarget=S,U?(this.clientX=U.clientX!==void 0?U.clientX:U.pageX,this.clientY=U.clientY!==void 0?U.clientY:U.pageY,this.screenX=U.screenX||0,this.screenY=U.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Ae.Z.h.call(this)},Ae.prototype.h=function(){Ae.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ee="closure_listenable_"+(Math.random()*1e6|0),ie=0;function ae(p,S,R,U,re){this.listener=p,this.proxy=null,this.src=S,this.type=R,this.capture=!!U,this.ha=re,this.key=++ie,this.da=this.fa=!1}function Re(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Fe(p,S,R){for(const U in p)S.call(R,p[U],U,p)}function Ie(p,S){for(const R in p)S.call(void 0,p[R],R,p)}function q(p){const S={};for(const R in p)S[R]=p[R];return S}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ce(p,S){let R,U;for(let re=1;re<arguments.length;re++){U=arguments[re];for(R in U)p[R]=U[R];for(let de=0;de<$.length;de++)R=$[de],Object.prototype.hasOwnProperty.call(U,R)&&(p[R]=U[R])}}function Be(p){this.src=p,this.g={},this.h=0}Be.prototype.add=function(p,S,R,U,re){const de=p.toString();p=this.g[de],p||(p=this.g[de]=[],this.h++);const Pe=ke(p,S,U,re);return Pe>-1?(S=p[Pe],R||(S.fa=!1)):(S=new ae(S,this.src,de,!!U,re),S.fa=R,p.push(S)),S};function et(p,S){const R=S.type;if(R in p.g){var U=p.g[R],re=Array.prototype.indexOf.call(U,S,void 0),de;(de=re>=0)&&Array.prototype.splice.call(U,re,1),de&&(Re(S),p.g[R].length==0&&(delete p.g[R],p.h--))}}function ke(p,S,R,U){for(let re=0;re<p.length;++re){const de=p[re];if(!de.da&&de.listener==S&&de.capture==!!R&&de.ha==U)return re}return-1}var At="closure_lm_"+(Math.random()*1e6|0),wt={};function Zt(p,S,R,U,re){if(Array.isArray(S)){for(let de=0;de<S.length;de++)Zt(p,S[de],R,U,re);return null}return R=Gt(R),p&&p[ee]?p.J(S,R,v(U)?!!U.capture:!1,re):fr(p,S,R,!1,U,re)}function fr(p,S,R,U,re,de){if(!S)throw Error("Invalid event type");const Pe=v(re)?!!re.capture:!!re;let ct=dr(p);if(ct||(p[At]=ct=new Be(p)),R=ct.add(S,R,U,Pe,de),R.proxy)return R;if(U=zn(),R.proxy=U,U.src=p,U.listener=R,p.addEventListener)X||(re=Pe),re===void 0&&(re=!1),p.addEventListener(S.toString(),U,re);else if(p.attachEvent)p.attachEvent(fi(S.toString()),U);else if(p.addListener&&p.removeListener)p.addListener(U);else throw Error("addEventListener and attachEvent are unavailable.");return R}function zn(){function p(R){return S.call(p.src,p.listener,R)}const S=Oi;return p}function Jr(p,S,R,U,re){if(Array.isArray(S))for(var de=0;de<S.length;de++)Jr(p,S[de],R,U,re);else U=v(U)?!!U.capture:!!U,R=Gt(R),p&&p[ee]?(p=p.i,de=String(S).toString(),de in p.g&&(S=p.g[de],R=ke(S,R,U,re),R>-1&&(Re(S[R]),Array.prototype.splice.call(S,R,1),S.length==0&&(delete p.g[de],p.h--)))):p&&(p=dr(p))&&(S=p.g[S.toString()],p=-1,S&&(p=ke(S,R,U,re)),(R=p>-1?S[p]:null)&&Tt(R))}function Tt(p){if(typeof p!="number"&&p&&!p.da){var S=p.src;if(S&&S[ee])et(S.i,p);else{var R=p.type,U=p.proxy;S.removeEventListener?S.removeEventListener(R,U,p.capture):S.detachEvent?S.detachEvent(fi(R),U):S.addListener&&S.removeListener&&S.removeListener(U),(R=dr(S))?(et(R,p),R.h==0&&(R.src=null,S[At]=null)):Re(p)}}}function fi(p){return p in wt?wt[p]:wt[p]="on"+p}function Oi(p,S){if(p.da)p=!0;else{S=new Ae(S,this);const R=p.listener,U=p.ha||p.src;p.fa&&Tt(p),p=R.call(U,S)}return p}function dr(p){return p=p[At],p instanceof Be?p:null}var Nn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Gt(p){return typeof p=="function"?p:(p[Nn]||(p[Nn]=function(S){return p.handleEvent(S)}),p[Nn])}function tt(){Z.call(this),this.i=new Be(this),this.M=this,this.G=null}M(tt,Z),tt.prototype[ee]=!0,tt.prototype.removeEventListener=function(p,S,R,U){Jr(this,p,S,R,U)};function wn(p,S){var R,U=p.G;if(U)for(R=[];U;U=U.G)R.push(U);if(p=p.M,U=S.type||S,typeof S=="string")S=new W(S,p);else if(S instanceof W)S.target=S.target||p;else{var re=S;S=new W(U,p),Ce(S,re)}re=!0;let de,Pe;if(R)for(Pe=R.length-1;Pe>=0;Pe--)de=S.g=R[Pe],re=He(de,U,!0,S)&&re;if(de=S.g=p,re=He(de,U,!0,S)&&re,re=He(de,U,!1,S)&&re,R)for(Pe=0;Pe<R.length;Pe++)de=S.g=R[Pe],re=He(de,U,!1,S)&&re}tt.prototype.N=function(){if(tt.Z.N.call(this),this.i){var p=this.i;for(const S in p.g){const R=p.g[S];for(let U=0;U<R.length;U++)Re(R[U]);delete p.g[S],p.h--}}this.G=null},tt.prototype.J=function(p,S,R,U){return this.i.add(String(p),S,!1,R,U)},tt.prototype.K=function(p,S,R,U){return this.i.add(String(p),S,!0,R,U)};function He(p,S,R,U){if(S=p.i.g[String(S)],!S)return!0;S=S.concat();let re=!0;for(let de=0;de<S.length;++de){const Pe=S[de];if(Pe&&!Pe.da&&Pe.capture==R){const ct=Pe.listener,In=Pe.ha||Pe.src;Pe.fa&&et(p.i,Pe),re=ct.call(In,U)!==!1&&re}}return re&&!U.defaultPrevented}function ma(p,S){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=w(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:E.setTimeout(p,S||0)}function po(p){p.g=ma(()=>{p.g=null,p.i&&(p.i=!1,po(p))},p.l);const S=p.h;p.h=null,p.m.apply(null,S)}class pn extends Z{constructor(S,R){super(),this.m=S,this.l=R,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:po(this)}N(){super.N(),this.g&&(E.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(p){Z.call(this),this.h=p,this.g={}}M($r,Z);var di=[];function pa(p){Fe(p.g,function(S,R){this.g.hasOwnProperty(R)&&Tt(S)},p),p.g={}}$r.prototype.N=function(){$r.Z.N.call(this),pa(this)},$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gi=E.JSON.stringify,ni=E.JSON.parse,yo=class{stringify(p){return E.JSON.stringify(p,void 0)}parse(p){return E.JSON.parse(p,void 0)}};function Ns(){}function tl(){}var qt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ne(){W.call(this,"d")}M(Ne,W);function Xt(){W.call(this,"c")}M(Xt,W);var at={},cn=null;function Dr(){return cn=cn||new tt}at.Ia="serverreachability";function ya(p){W.call(this,at.Ia,p)}M(ya,W);function gr(p){const S=Dr();wn(S,new ya(S))}at.STAT_EVENT="statevent";function xt(p,S){W.call(this,at.STAT_EVENT,p),this.stat=S}M(xt,W);function sn(p){const S=Dr();wn(S,new xt(S,p))}at.Ja="timingevent";function mr(p,S){W.call(this,at.Ja,p),this.size=S}M(mr,W);function pr(p,S){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return E.setTimeout(function(){p()},S)}function On(){this.g=!0}On.prototype.ua=function(){this.g=!1};function _o(p,S,R,U,re,de){p.info(function(){if(p.g)if(de){var Pe="",ct=de.split("&");for(let Vt=0;Vt<ct.length;Vt++){var In=ct[Vt].split("=");if(In.length>1){const hn=In[0];In=In[1];const Xi=hn.split("_");Pe=Xi.length>=2&&Xi[1]=="type"?Pe+(hn+"="+In+"&"):Pe+(hn+"=redacted&")}}}else Pe=null;else Pe=de;return"XMLHTTP REQ ("+U+") [attempt "+re+"]: "+S+`
`+R+`
`+Pe})}function Hn(p,S,R,U,re,de,Pe){p.info(function(){return"XMLHTTP RESP ("+U+") [ attempt "+re+"]: "+S+`
`+R+`
`+de+" "+Pe})}function mi(p,S,R,U){p.info(function(){return"XMLHTTP TEXT ("+S+"): "+$i(p,R)+(U?" "+U:"")})}function Mr(p,S){p.info(function(){return"TIMEOUT: "+S})}On.prototype.info=function(){};function $i(p,S){if(!p.g)return S;if(!S)return null;try{const de=JSON.parse(S);if(de){for(p=0;p<de.length;p++)if(Array.isArray(de[p])){var R=de[p];if(!(R.length<2)){var U=R[1];if(Array.isArray(U)&&!(U.length<1)){var re=U[0];if(re!="noop"&&re!="stop"&&re!="close")for(let Pe=1;Pe<U.length;Pe++)U[Pe]=""}}}}return gi(de)}catch{return S}}var Os={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},yr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ds;function kn(){}M(kn,Ns),kn.prototype.g=function(){return new XMLHttpRequest},Ds=new kn;function pi(p){return encodeURIComponent(String(p))}function yi(p){var S=1;p=p.split(":");const R=[];for(;S>0&&p.length;)R.push(p.shift()),S--;return p.length&&R.push(p.join(":")),R}function je(p,S,R,U){this.j=p,this.i=S,this.l=R,this.S=U||1,this.V=new $r(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new oi}function oi(){this.i=null,this.g="",this.h=!1}var Tn={},zt={};function _i(p,S,R){p.M=1,p.A=Mi(Cn(S)),p.u=R,p.R=!0,es(p,null)}function es(p,S){p.F=Date.now(),Lr(p),p.B=Cn(p.A);var R=p.B,U=p.S;Array.isArray(U)||(U=[String(U)]),Jt(R.i,"t",U),p.C=0,R=p.j.L,p.h=new oi,p.g=Ta(p.j,R?S:null,!p.u),p.P>0&&(p.O=new pn(w(p.Y,p,p.g),p.P)),S=p.V,R=p.g,U=p.ba;var re="readystatechange";Array.isArray(re)||(re&&(di[0]=re.toString()),re=di);for(let de=0;de<re.length;de++){const Pe=Zt(R,re[de],U||S.handleEvent,!1,S.h||S);if(!Pe)break;S.g[Pe.key]=Pe}S=p.J?q(p.J):{},p.u?(p.v||(p.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,S)):(p.v="GET",p.g.ea(p.B,p.v,null,S)),gr(),_o(p.i,p.v,p.B,p.l,p.S,p.u)}je.prototype.ba=function(p){p=p.target;const S=this.O;S&&nr(p)==3?S.j():this.Y(p)},je.prototype.Y=function(p){try{if(p==this.g)e:{const ct=nr(this.g),In=this.g.ya(),Vt=this.g.ca();if(!(ct<3)&&(ct!=3||this.g&&(this.h.h||this.g.la()||Ln(this.g)))){this.K||ct!=4||In==7||(In==8||Vt<=0?gr(3):gr(2)),dn(this);var S=this.g.ca();this.X=S;var R=_a(this);if(this.o=S==200,Hn(this.i,this.v,this.B,this.l,this.S,ct,S),this.o){if(this.U&&!this.L){t:{if(this.g){var U,re=this.g;if((U=re.g?re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(U)){var de=U;break t}}de=null}if(p=de)mi(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ii(this,p);else{this.o=!1,this.m=3,sn(12),Di(this),St(this);break e}}if(this.R){p=!0;let hn;for(;!this.K&&this.C<R.length;)if(hn=nl(this,R),hn==zt){ct==4&&(this.m=4,sn(14),p=!1),mi(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==Tn){this.m=4,sn(15),mi(this.i,this.l,R,"[Invalid Chunk]"),p=!1;break}else mi(this.i,this.l,hn,null),ii(this,hn);if(Hi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||R.length!=0||this.h.h||(this.m=1,sn(16),p=!1),this.o=this.o&&p,!p)mi(this.i,this.l,R,"[Invalid Chunked Response]"),Di(this),St(this);else if(R.length>0&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.aa&&!Pe.P&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),he(Pe),Pe.P=!0,sn(11))}}else mi(this.i,this.l,R,null),ii(this,R);ct==4&&Di(this),this.o&&!this.K&&(ct==4?Vs(this.j,this):(this.o=!1,Lr(this)))}else qi(this.g),S==400&&R.indexOf("Unknown SID")>0?(this.m=3,sn(12)):(this.m=0,sn(13)),Di(this),St(this)}}}catch{}};function _a(p){if(!Hi(p))return p.g.la();const S=Ln(p.g);if(S==="")return"";let R="";const U=S.length,re=nr(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Di(p),St(p),"";p.h.i=new E.TextDecoder}for(let de=0;de<U;de++)p.h.h=!0,R+=p.h.i.decode(S[de],{stream:!(re&&de==U-1)});return S.length=0,p.h.g+=R,p.C=0,p.h.g}function Hi(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function nl(p,S){var R=p.C,U=S.indexOf(`
`,R);return U==-1?zt:(R=Number(S.substring(R,U)),isNaN(R)?Tn:(U+=1,U+R>S.length?zt:(S=S.slice(U,U+R),p.C=U+R,S)))}je.prototype.cancel=function(){this.K=!0,Di(this)};function Lr(p){p.T=Date.now()+p.H,Ei(p,p.H)}function Ei(p,S){if(p.D!=null)throw Error("WatchDog timer not null");p.D=pr(w(p.aa,p),S)}function dn(p){p.D&&(E.clearTimeout(p.D),p.D=null)}je.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Mr(this.i,this.B),this.M!=2&&(gr(),sn(17)),Di(this),this.m=2,St(this)):Ei(this,this.T-p)};function St(p){p.j.I==0||p.K||Vs(p.j,p)}function Di(p){dn(p);var S=p.O;S&&typeof S.dispose=="function"&&S.dispose(),p.O=null,pa(p.V),p.g&&(S=p.g,p.g=null,S.abort(),S.dispose())}function ii(p,S){try{var R=p.j;if(R.I!=0&&(R.g==p||xi(R.h,p))){if(!p.L&&xi(R.h,p)&&R.I==3){try{var U=R.Ba.g.parse(S)}catch{U=null}if(Array.isArray(U)&&U.length==3){var re=U;if(re[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<p.F)Sn(R),is(R);else break e;Bs(R),sn(18)}}else R.xa=re[1],0<R.xa-R.K&&re[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=pr(w(R.Va,R),6e3));Ht(R.h)<=1&&R.ta&&(R.ta=void 0)}else Br(R,11)}else if((p.L||R.g==p)&&Sn(R),!P(S))for(re=R.Ba.g.parse(S),S=0;S<re.length;S++){let Vt=re[S];const hn=Vt[0];if(!(hn<=R.K))if(R.K=hn,Vt=Vt[1],R.I==2)if(Vt[0]=="c"){R.M=Vt[1],R.ba=Vt[2];const Xi=Vt[3];Xi!=null&&(R.ka=Xi,R.j.info("VER="+R.ka));const Fr=Vt[4];Fr!=null&&(R.za=Fr,R.j.info("SVER="+R.za));const ci=Vt[5];ci!=null&&typeof ci=="number"&&ci>0&&(U=1.5*ci,R.O=U,R.j.info("backChannelRequestTimeoutMs_="+U)),U=R;const Yi=p.g;if(Yi){const Fs=Yi.g?Yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fs){var de=U.h;de.g||Fs.indexOf("spdy")==-1&&Fs.indexOf("quic")==-1&&Fs.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(xo(de,de.h),de.h=null))}if(U.G){const jr=Yi.g?Yi.g.getResponseHeader("X-HTTP-Session-Id"):null;jr&&(U.wa=jr,rt(U.J,U.G,jr))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-p.F,R.j.info("Handshake RTT: "+R.T+"ms")),U=R;var Pe=p;if(U.na=rl(U,U.L?U.ba:null,U.W),Pe.L){Ot(U.h,Pe);var ct=Pe,In=U.O;In&&(ct.H=In),ct.D&&(dn(ct),Lr(ct)),U.g=Pe}else Ar(U);R.i.length>0&&kr(R)}else Vt[0]!="stop"&&Vt[0]!="close"||Br(R,7);else R.I==3&&(Vt[0]=="stop"||Vt[0]=="close"?Vt[0]=="stop"?Br(R,7):xa(R):Vt[0]!="noop"&&R.l&&R.l.qa(Vt),R.A=0)}}gr(4)}catch{}}var vn=class{constructor(p,S){this.g=p,this.map=S}};function ve(p){this.l=p||10,E.PerformanceNavigationTiming?(p=E.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(E.chrome&&E.chrome.loadTimes&&E.chrome.loadTimes()&&E.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Eo(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Ht(p){return p.h?1:p.g?p.g.size:0}function xi(p,S){return p.h?p.h==S:p.g?p.g.has(S):!1}function xo(p,S){p.g?p.g.add(S):p.h=S}function Ot(p,S){p.h&&p.h==S?p.h=null:p.g&&p.g.has(S)&&p.g.delete(S)}ve.prototype.cancel=function(){if(this.i=bt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function bt(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let S=p.i;for(const R of p.g.values())S=S.concat(R.G);return S}return te(p.i)}var _t=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hs(p,S){if(p){p=p.split("&");for(let R=0;R<p.length;R++){const U=p[R].indexOf("=");let re,de=null;U>=0?(re=p[R].substring(0,U),de=p[R].substring(U+1)):re=p[R],S(re,de?decodeURIComponent(de.replace(/\+/g," ")):"")}}}function Ai(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;p instanceof Ai?(this.l=p.l,vt(this,p.j),this.o=p.o,this.g=p.g,wi(this,p.u),this.h=p.h,Ao(this,wo(p.i)),this.m=p.m):p&&(S=String(p).match(_t))?(this.l=!1,vt(this,S[1]||"",!0),this.o=Pr(S[2]||""),this.g=Pr(S[3]||"",!0),wi(this,S[4]),this.h=Pr(S[5]||"",!0),Ao(this,S[6]||"",!0),this.m=Pr(S[7]||"")):(this.l=!1,this.i=new Gn(null,this.l))}Ai.prototype.toString=function(){const p=[];var S=this.j;S&&p.push(er(S,Dn,!0),":");var R=this.g;return(R||S=="file")&&(p.push("//"),(S=this.o)&&p.push(er(S,Dn,!0),"@"),p.push(pi(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&p.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&p.push("/"),p.push(er(R,R.charAt(0)=="/"?j:oe,!0))),(R=this.i.toString())&&p.push("?",R),(R=this.m)&&p.push("#",er(R,Mn)),p.join("")},Ai.prototype.resolve=function(p){const S=Cn(this);let R=!!p.j;R?vt(S,p.j):R=!!p.o,R?S.o=p.o:R=!!p.g,R?S.g=p.g:R=p.u!=null;var U=p.h;if(R)wi(S,p.u);else if(R=!!p.h){if(U.charAt(0)!="/")if(this.g&&!this.h)U="/"+U;else{var re=S.h.lastIndexOf("/");re!=-1&&(U=S.h.slice(0,re+1)+U)}if(re=U,re==".."||re==".")U="";else if(re.indexOf("./")!=-1||re.indexOf("/.")!=-1){U=re.lastIndexOf("/",0)==0,re=re.split("/");const de=[];for(let Pe=0;Pe<re.length;){const ct=re[Pe++];ct=="."?U&&Pe==re.length&&de.push(""):ct==".."?((de.length>1||de.length==1&&de[0]!="")&&de.pop(),U&&Pe==re.length&&de.push("")):(de.push(ct),U=!0)}U=de.join("/")}else U=re}return R?S.h=U:R=p.i.toString()!=="",R?Ao(S,wo(p.i)):R=!!p.m,R&&(S.m=p.m),S};function Cn(p){return new Ai(p)}function vt(p,S,R){p.j=R?Pr(S,!0):S,p.j&&(p.j=p.j.replace(/:$/,""))}function wi(p,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);p.u=S}else p.u=null}function Ao(p,S,R){S instanceof Gn?(p.i=S,ds(p.i,p.l)):(R||(S=er(S,Xe)),p.i=new Gn(S,p.l))}function rt(p,S,R){p.i.set(S,R)}function Mi(p){return rt(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Pr(p,S){return p?S?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function er(p,S,R){return typeof p=="string"?(p=encodeURI(p).replace(S,pt),R&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function pt(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Dn=/[#\/\?@]/g,oe=/[#\?:]/g,j=/[#\?]/g,Xe=/[#\?@]/g,Mn=/#/g;function Gn(p,S){this.h=this.g=null,this.i=p||null,this.j=!!S}function Li(p){p.g||(p.g=new Map,p.h=0,p.i&&hs(p.i,function(S,R){p.add(decodeURIComponent(S.replace(/\+/g," ")),R)}))}a=Gn.prototype,a.add=function(p,S){Li(this),this.i=null,p=fs(this,p);let R=this.g.get(p);return R||this.g.set(p,R=[]),R.push(S),this.h+=1,this};function Ea(p,S){Li(p),S=fs(p,S),p.g.has(S)&&(p.i=null,p.h-=p.g.get(S).length,p.g.delete(S))}function li(p,S){return Li(p),S=fs(p,S),p.g.has(S)}a.forEach=function(p,S){Li(this),this.g.forEach(function(R,U){R.forEach(function(re){p.call(S,re,U,this)},this)},this)};function Qe(p,S){Li(p);let R=[];if(typeof S=="string")li(p,S)&&(R=R.concat(p.g.get(fs(p,S))));else for(p=Array.from(p.g.values()),S=0;S<p.length;S++)R=R.concat(p[S]);return R}a.set=function(p,S){return Li(this),this.i=null,p=fs(this,p),li(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[S]),this.h+=1,this},a.get=function(p,S){return p?(p=Qe(this,p),p.length>0?String(p[0]):S):S};function Jt(p,S,R){Ea(p,S),R.length>0&&(p.i=null,p.g.set(fs(p,S),te(R)),p.h+=R.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],S=Array.from(this.g.keys());for(let U=0;U<S.length;U++){var R=S[U];const re=pi(R);R=Qe(this,R);for(let de=0;de<R.length;de++){let Pe=re;R[de]!==""&&(Pe+="="+pi(R[de])),p.push(Pe)}}return this.i=p.join("&")};function wo(p){const S=new Gn;return S.i=p.i,p.g&&(S.g=new Map(p.g),S.h=p.h),S}function fs(p,S){return S=String(S),p.j&&(S=S.toLowerCase()),S}function ds(p,S){S&&!p.j&&(Li(p),p.i=null,p.g.forEach(function(R,U){const re=U.toLowerCase();U!=re&&(Ea(this,U),Jt(this,re,R))},p)),p.j=S}function Pi(p,S){const R=new On;if(E.Image){const U=new Image;U.onload=D(tr,R,"TestLoadImage: loaded",!0,S,U),U.onerror=D(tr,R,"TestLoadImage: error",!1,S,U),U.onabort=D(tr,R,"TestLoadImage: abort",!1,S,U),U.ontimeout=D(tr,R,"TestLoadImage: timeout",!1,S,U),E.setTimeout(function(){U.ontimeout&&U.ontimeout()},1e4),U.src=p}else S(!1)}function Ms(p,S){const R=new On,U=new AbortController,re=setTimeout(()=>{U.abort(),tr(R,"TestPingServer: timeout",!1,S)},1e4);fetch(p,{signal:U.signal}).then(de=>{clearTimeout(re),de.ok?tr(R,"TestPingServer: ok",!0,S):tr(R,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(re),tr(R,"TestPingServer: error",!1,S)})}function tr(p,S,R,U,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),U(R)}catch{}}function un(){this.g=new yo}function ki(p){this.i=p.Sb||null,this.h=p.ab||!1}M(ki,Ns),ki.prototype.g=function(){return new Bi(this.i,this.h)};function Bi(p,S){tt.call(this),this.H=p,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}M(Bi,tt),a=Bi.prototype,a.open=function(p,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=S,this.readyState=1,it(this)},a.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(S.body=p),(this.H||E).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gs(this)),this.readyState=0},a.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,it(this)),this.g&&(this.readyState=3,it(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof E.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ze(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ze(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}a.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var S=p.value?p.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!p.done}))&&(this.response=this.responseText+=S)}p.done?gs(this):it(this),this.readyState==3&&Ze(this)}},a.Oa=function(p){this.g&&(this.response=this.responseText=p,gs(this))},a.Na=function(p){this.g&&(this.response=p,gs(this))},a.ga=function(){this.g&&gs(this)};function gs(p){p.readyState=4,p.l=null,p.j=null,p.B=null,it(p)}a.setRequestHeader=function(p,S){this.A.append(p,S)},a.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],S=this.h.entries();for(var R=S.next();!R.done;)R=R.value,p.push(R[0]+": "+R[1]),R=S.next();return p.join(`\r
`)};function it(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function $t(p){let S="";return Fe(p,function(R,U){S+=U,S+=":",S+=R,S+=`\r
`}),S}function Ls(p,S,R){e:{for(U in R){var U=!1;break e}U=!0}U||(R=$t(R),typeof p=="string"?R!=null&&pi(R):rt(p,S,R))}function Yt(p){tt.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}M(Yt,tt);var _r=/^https?$/i,Er=["POST","PUT"];a=Yt.prototype,a.Fa=function(p){this.H=p},a.ea=function(p,S,R,U){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);S=S?S.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ds.g(),this.g.onreadystatechange=G(w(this.Ca,this));try{this.B=!0,this.g.open(S,String(p),!0),this.B=!1}catch(de){Ps(this,de);return}if(p=R||"",R=new Map(this.headers),U)if(Object.getPrototypeOf(U)===Object.prototype)for(var re in U)R.set(re,U[re]);else if(typeof U.keys=="function"&&typeof U.get=="function")for(const de of U.keys())R.set(de,U.get(de));else throw Error("Unknown input type for opt_headers: "+String(U));U=Array.from(R.keys()).find(de=>de.toLowerCase()=="content-type"),re=E.FormData&&p instanceof E.FormData,!(Array.prototype.indexOf.call(Er,S,void 0)>=0)||U||re||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,Pe]of R)this.g.setRequestHeader(de,Pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(de){Ps(this,de)}};function Ps(p,S){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=S,p.o=5,ts(p),Gi(p)}function ts(p){p.A||(p.A=!0,wn(p,"complete"),wn(p,"error"))}a.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,wn(this,"complete"),wn(this,"abort"),Gi(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),Yt.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?xr(this):this.Xa())},a.Xa=function(){xr(this)};function xr(p){if(p.h&&typeof m<"u"){if(p.v&&nr(p)==4)setTimeout(p.Ca.bind(p),0);else if(wn(p,"readystatechange"),nr(p)==4){p.h=!1;try{const de=p.ca();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var R;if(!(R=S)){var U;if(U=de===0){let Pe=String(p.D).match(_t)[1]||null;!Pe&&E.self&&E.self.location&&(Pe=E.self.location.protocol.slice(0,-1)),U=!_r.test(Pe?Pe.toLowerCase():"")}R=U}if(R)wn(p,"complete"),wn(p,"success");else{p.o=6;try{var re=nr(p)>2?p.g.statusText:""}catch{re=""}p.l=re+" ["+p.ca()+"]",ts(p)}}finally{Gi(p)}}}}function Gi(p,S){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const R=p.g;p.g=null,S||wn(p,"ready");try{R.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function nr(p){return p.g?p.g.readyState:0}a.ca=function(){try{return nr(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(p){if(this.g){var S=this.g.responseText;return p&&S.indexOf(p)==0&&(S=S.substring(p.length)),ni(S)}};function Ln(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function qi(p){const S={};p=(p.g&&nr(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let U=0;U<p.length;U++){if(P(p[U]))continue;var R=yi(p[U]);const re=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const de=S[re]||[];S[re]=de,de.push(R)}Ie(S,function(U){return U.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function yn(p,S,R){return R&&R.internalChannelParams&&R.internalChannelParams[p]||S}function ns(p){this.za=0,this.i=[],this.j=new On,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=yn("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=yn("baseRetryDelayMs",5e3,p),this.Za=yn("retryDelaySeedMs",1e4,p),this.Ta=yn("forwardChannelMaxRetries",2,p),this.va=yn("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new ve(p&&p.concurrentRequestLimit),this.Ba=new un,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=ns.prototype,a.ka=8,a.I=1,a.connect=function(p,S,R,U){sn(0),this.W=p,this.H=S||{},R&&U!==void 0&&(this.H.OSID=R,this.H.OAID=U),this.F=this.X,this.J=rl(this,null,this.W),kr(this)};function xa(p){if(Aa(p),p.I==3){var S=p.V++,R=Cn(p.J);if(rt(R,"SID",p.M),rt(R,"RID",S),rt(R,"TYPE","terminate"),ms(p,R),S=new je(p,p.j,S),S.M=2,S.A=Mi(Cn(R)),R=!1,E.navigator&&E.navigator.sendBeacon)try{R=E.navigator.sendBeacon(S.A.toString(),"")}catch{}!R&&E.Image&&(new Image().src=S.A,R=!0),R||(S.g=Ta(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Lr(S)}il(p)}function is(p){p.g&&(he(p),p.g.cancel(),p.g=null)}function Aa(p){is(p),p.v&&(E.clearTimeout(p.v),p.v=null),Sn(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&E.clearTimeout(p.m),p.m=null)}function kr(p){if(!Eo(p.h)&&!p.m){p.m=!0;var S=p.Ea;nt||F(),Ve||(nt(),Ve=!0),V.add(S,p),p.D=0}}function wa(p,S){return Ht(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=S.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=pr(w(p.Ea,p,S),To(p,p.D)),p.D++,!0)}a.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const re=new je(this,this.j,p);let de=this.o;if(this.U&&(de?(de=q(de),Ce(de,this.U)):de=this.U),this.u!==null||this.R||(re.J=de,de=null),this.S)e:{for(var S=0,R=0;R<this.i.length;R++){t:{var U=this.i[R];if("__data__"in U.map&&(U=U.map.__data__,typeof U=="string")){U=U.length;break t}U=void 0}if(U===void 0)break;if(S+=U,S>4096){S=R;break e}if(S===4096||R===this.i.length-1){S=R+1;break e}}S=1e3}else S=1e3;S=ks(this,re,S),R=Cn(this.J),rt(R,"RID",p),rt(R,"CVER",22),this.G&&rt(R,"X-HTTP-Session-Id",this.G),ms(this,R),de&&(this.R?S="headers="+pi($t(de))+"&"+S:this.u&&Ls(R,this.u,de)),xo(this.h,re),this.Ra&&rt(R,"TYPE","init"),this.S?(rt(R,"$req",S),rt(R,"SID","null"),re.U=!0,_i(re,R,null)):_i(re,R,S),this.I=2}}else this.I==3&&(p?Ft(this,p):this.i.length==0||Eo(this.h)||Ft(this))};function Ft(p,S){var R;S?R=S.l:R=p.V++;const U=Cn(p.J);rt(U,"SID",p.M),rt(U,"RID",R),rt(U,"AID",p.K),ms(p,U),p.u&&p.o&&Ls(U,p.u,p.o),R=new je(p,p.j,R,p.D+1),p.u===null&&(R.J=p.o),S&&(p.i=S.G.concat(p.i)),S=ks(p,R,1e3),R.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),xo(p.h,R),_i(R,U,S)}function ms(p,S){p.H&&Fe(p.H,function(R,U){rt(S,U,R)}),p.l&&Fe({},function(R,U){rt(S,U,R)})}function ks(p,S,R){R=Math.min(p.i.length,R);const U=p.l?w(p.l.Ka,p.l,p):null;e:{var re=p.i;let ct=-1;for(;;){const In=["count="+R];ct==-1?R>0?(ct=re[0].g,In.push("ofs="+ct)):ct=0:In.push("ofs="+ct);let Vt=!0;for(let hn=0;hn<R;hn++){var de=re[hn].g;const Xi=re[hn].map;if(de-=ct,de<0)ct=Math.max(0,re[hn].g-100),Vt=!1;else try{de="req"+de+"_"||"";try{var Pe=Xi instanceof Map?Xi:Object.entries(Xi);for(const[Fr,ci]of Pe){let Yi=ci;v(ci)&&(Yi=gi(ci)),In.push(de+Fr+"="+encodeURIComponent(Yi))}}catch(Fr){throw In.push(de+"type="+encodeURIComponent("_badmap")),Fr}}catch{U&&U(Xi)}}if(Vt){Pe=In.join("&");break e}}Pe=void 0}return p=p.i.splice(0,R),S.G=p,Pe}function Ar(p){if(!p.g&&!p.v){p.Y=1;var S=p.Da;nt||F(),Ve||(nt(),Ve=!0),V.add(S,p),p.A=0}}function Bs(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=pr(w(p.Da,p),To(p,p.A)),p.A++,!0)}a.Da=function(){if(this.v=null,ft(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=pr(w(this.Wa,this),p)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,sn(10),is(this),ft(this))};function he(p){p.B!=null&&(E.clearTimeout(p.B),p.B=null)}function ft(p){p.g=new je(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var S=Cn(p.na);rt(S,"RID","rpc"),rt(S,"SID",p.M),rt(S,"AID",p.K),rt(S,"CI",p.F?"0":"1"),!p.F&&p.ia&&rt(S,"TO",p.ia),rt(S,"TYPE","xmlhttp"),ms(p,S),p.u&&p.o&&Ls(S,p.u,p.o),p.O&&(p.g.H=p.O);var R=p.g;p=p.ba,R.M=1,R.A=Mi(Cn(S)),R.u=null,R.R=!0,es(R,p)}a.Va=function(){this.C!=null&&(this.C=null,is(this),Bs(this),sn(19))};function Sn(p){p.C!=null&&(E.clearTimeout(p.C),p.C=null)}function Vs(p,S){var R=null;if(p.g==S){Sn(p),he(p),p.g=null;var U=2}else if(xi(p.h,S))R=S.G,Ot(p.h,S),U=1;else return;if(p.I!=0){if(S.o)if(U==1){R=S.u?S.u.length:0,S=Date.now()-S.F;var re=p.D;U=Dr(),wn(U,new mr(U,R)),kr(p)}else Ar(p);else if(re=S.m,re==3||re==0&&S.X>0||!(U==1&&wa(p,S)||U==2&&Bs(p)))switch(R&&R.length>0&&(S=p.h,S.i=S.i.concat(R)),re){case 1:Br(p,5);break;case 4:Br(p,10);break;case 3:Br(p,6);break;default:Br(p,2)}}}function To(p,S){let R=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(R*=2),R*S}function Br(p,S){if(p.j.info("Error code "+S),S==2){var R=w(p.bb,p),U=p.Ua;const re=!U;U=new Ai(U||"//www.google.com/images/cleardot.gif"),E.location&&E.location.protocol=="http"||vt(U,"https"),Mi(U),re?Pi(U.toString(),R):Ms(U.toString(),R)}else sn(2);p.I=0,p.l&&p.l.pa(S),il(p),Aa(p)}a.bb=function(p){p?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function il(p){if(p.I=0,p.ja=[],p.l){const S=bt(p.h);(S.length!=0||p.i.length!=0)&&(Ee(p.ja,S),Ee(p.ja,p.i),p.h.i.length=0,te(p.i),p.i.length=0),p.l.oa()}}function rl(p,S,R){var U=R instanceof Ai?Cn(R):new Ai(R);if(U.g!="")S&&(U.g=S+"."+U.g),wi(U,U.u);else{var re=E.location;U=re.protocol,S=S?S+"."+re.hostname:re.hostname,re=+re.port;const de=new Ai(null);U&&vt(de,U),S&&(de.g=S),re&&wi(de,re),R&&(de.h=R),U=de}return R=p.G,S=p.wa,R&&S&&rt(U,R,S),rt(U,"VER",p.ka),ms(p,U),U}function Ta(p,S,R){if(S&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=p.Aa&&!p.ma?new Yt(new ki({ab:R})):new Yt(p.ma),S.Fa(p.L),S}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function bn(){}a=bn.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function Vr(){}Vr.prototype.g=function(p,S){return new Ct(p,S)};function Ct(p,S){tt.call(this),this.g=new ns(S),this.l=p,this.h=S&&S.messageUrlParams||null,p=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(p?p["X-WebChannel-Content-Type"]=S.messageContentType:p={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(p?p["X-WebChannel-Client-Profile"]=S.sa:p={"X-WebChannel-Client-Profile":S.sa}),this.g.U=p,(p=S&&S.Qb)&&!P(p)&&(this.g.u=p),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!P(S)&&(this.g.G=S,p=this.h,p!==null&&S in p&&(p=this.h,S in p&&delete p[S])),this.j=new It(this)}M(Ct,tt),Ct.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){xa(this.g)},Ct.prototype.o=function(p){var S=this.g;if(typeof p=="string"){var R={};R.__data__=p,p=R}else this.v&&(R={},R.__data__=gi(p),p=R);S.i.push(new vn(S.Ya++,p)),S.I==3&&kr(S)},Ct.prototype.N=function(){this.g.l=null,delete this.j,xa(this.g),delete this.g,Ct.Z.N.call(this)};function Us(p){Ne.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var S=p.__sm__;if(S){e:{for(const R in S){p=R;break e}p=void 0}(this.i=p)&&(p=this.i,S=S!==null&&p in S?S[p]:void 0),this.data=S}else this.data=p}M(Us,Ne);function Ur(){Xt.call(this),this.status=1}M(Ur,Xt);function It(p){this.g=p}M(It,bn),It.prototype.ra=function(){wn(this.g,"a")},It.prototype.qa=function(p){wn(this.g,new Us(p))},It.prototype.pa=function(p){wn(this.g,new Ur)},It.prototype.oa=function(){wn(this.g,"b")},Vr.prototype.createWebChannel=Vr.prototype.g,Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,TE=function(){return new Vr},wE=function(){return Dr()},AE=at,a0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Os.NO_ERROR=0,Os.TIMEOUT=8,Os.HTTP_ERROR=6,qh=Os,yr.COMPLETE="complete",xE=yr,tl.EventType=qt,qt.OPEN="a",qt.CLOSE="b",qt.ERROR="c",qt.MESSAGE="d",tt.prototype.listen=tt.prototype.J,zc=tl,Yt.prototype.listenOnce=Yt.prototype.K,Yt.prototype.getLastError=Yt.prototype.Ha,Yt.prototype.getLastErrorCode=Yt.prototype.ya,Yt.prototype.getStatus=Yt.prototype.ca,Yt.prototype.getResponseJson=Yt.prototype.La,Yt.prototype.getResponseText=Yt.prototype.la,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Fa,EE=Yt}).apply(typeof Lh<"u"?Lh:typeof self<"u"?self:typeof window<"u"?window:{});const dy="@firebase/firestore",gy="4.9.3";class Fi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fi.UNAUTHENTICATED=new Fi(null),Fi.GOOGLE_CREDENTIALS=new Fi("google-credentials-uid"),Fi.FIRST_PARTY=new Fi("first-party-uid"),Fi.MOCK_USER=new Fi("mock-user");let Jl="12.7.0";const Ko=new b0("@firebase/firestore");function Dl(){return Ko.logLevel}function Ge(a,...e){if(Ko.logLevel<=Pt.DEBUG){const n=e.map(V0);Ko.debug(`Firestore (${Jl}): ${a}`,...n)}}function fa(a,...e){if(Ko.logLevel<=Pt.ERROR){const n=e.map(V0);Ko.error(`Firestore (${Jl}): ${a}`,...n)}}function Hl(a,...e){if(Ko.logLevel<=Pt.WARN){const n=e.map(V0);Ko.warn(`Firestore (${Jl}): ${a}`,...n)}}function V0(a){if(typeof a=="string")return a;try{return(function(n){return JSON.stringify(n)})(a)}catch{return a}}function lt(a,e,n){let o="Unexpected state";typeof e=="string"?o=e:n=e,vE(a,o,n)}function vE(a,e,n){let o=`FIRESTORE (${Jl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${a.toString(16)})`;if(n!==void 0)try{o+=" CONTEXT: "+JSON.stringify(n)}catch{o+=" CONTEXT: "+n}throw fa(o),new Error(o)}function tn(a,e,n,o){let h="Unexpected state";typeof n=="string"?h=n:o=n,a||vE(e,h,o)}function gt(a,e){return a}const we={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ze extends ga{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ca{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class CE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Fi.UNAUTHENTICATED)))}shutdown(){}}class bC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class IC{constructor(e){this.t=e,this.currentUser=Fi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){tn(this.o===void 0,42304);let o=this.i;const h=C=>this.i!==o?(o=this.i,n(C)):Promise.resolve();let m=new ca;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new ca,e.enqueueRetryable((()=>h(this.currentUser)))};const E=()=>{const C=m;e.enqueueRetryable((async()=>{await C.promise,await h(this.currentUser)}))},v=C=>{Ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.o&&(this.auth.addAuthTokenListener(this.o),E())};this.t.onInit((C=>v(C))),setTimeout((()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?v(C):(Ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new ca)}}),0),E()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==e?(Ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(tn(typeof o.accessToken=="string",31837,{l:o}),new CE(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tn(e===null||typeof e=="string",2055,{h:e}),new Fi(e)}}class RC{constructor(e,n,o){this.P=e,this.T=n,this.I=o,this.type="FirstParty",this.user=Fi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class NC{constructor(e,n,o){this.P=e,this.T=n,this.I=o}getToken(){return Promise.resolve(new RC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Fi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class my{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){tn(this.o===void 0,3512);const o=m=>{m.error!=null&&Ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const E=m.token!==this.m;return this.m=m.token,Ge("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?n(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable((()=>o(m)))};const h=m=>{Ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((m=>h(m))),setTimeout((()=>{if(!this.appCheck){const m=this.V.getImmediate({optional:!0});m?h(m):Ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new my(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(tn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new my(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function DC(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<a;o++)n[o]=Math.floor(256*Math.random());return n}class U0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const h=DC(40);for(let m=0;m<h.length;++m)o.length<20&&h[m]<n&&(o+=e.charAt(h[m]%62))}return o}}function kt(a,e){return a<e?-1:a>e?1:0}function o0(a,e){const n=Math.min(a.length,e.length);for(let o=0;o<n;o++){const h=a.charAt(o),m=e.charAt(o);if(h!==m)return H1(h)===H1(m)?kt(h,m):H1(h)?1:-1}return kt(a.length,e.length)}const MC=55296,LC=57343;function H1(a){const e=a.charCodeAt(0);return e>=MC&&e<=LC}function Gl(a,e,n){return a.length===e.length&&a.every(((o,h)=>n(o,e[h])))}const py="__name__";class As{constructor(e,n,o){n===void 0?n=0:n>e.length&&lt(637,{offset:n,range:e.length}),o===void 0?o=e.length-n:o>e.length-n&&lt(1746,{length:o,range:e.length-n}),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return As.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof As?e.forEach((o=>{n.push(o)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let h=0;h<o;h++){const m=As.compareSegments(e.get(h),n.get(h));if(m!==0)return m}return kt(e.length,n.length)}static compareSegments(e,n){const o=As.isNumericId(e),h=As.isNumericId(n);return o&&!h?-1:!o&&h?1:o&&h?As.extractNumericId(e).compare(As.extractNumericId(n)):o0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return io.fromString(e.substring(4,e.length-2))}}class mn extends As{construct(e,n,o){return new mn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new ze(we.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((h=>h.length>0)))}return new mn(n)}static emptyPath(){return new mn([])}}const PC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ri extends As{construct(e,n,o){return new Ri(e,n,o)}static isValidIdentifier(e){return PC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ri.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===py}static keyField(){return new Ri([py])}static fromServerFormat(e){const n=[];let o="",h=0;const m=()=>{if(o.length===0)throw new ze(we.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let E=!1;for(;h<e.length;){const v=e[h];if(v==="\\"){if(h+1===e.length)throw new ze(we.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const C=e[h+1];if(C!=="\\"&&C!=="."&&C!=="`")throw new ze(we.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=C,h+=2}else v==="`"?(E=!E,h++):v!=="."||E?(o+=v,h++):(m(),h++)}if(m(),E)throw new ze(we.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ri(n)}static emptyPath(){return new Ri([])}}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(mn.fromString(e))}static fromName(e){return new $e(mn.fromString(e).popFirst(5))}static empty(){return new $e(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return mn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new mn(e.slice()))}}function SE(a,e,n){if(!n)throw new ze(we.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function kC(a,e,n,o){if(e===!0&&o===!0)throw new ze(we.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function yy(a){if(!$e.isDocumentKey(a))throw new ze(we.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function _y(a){if($e.isDocumentKey(a))throw new ze(we.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function bE(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function Sf(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":lt(12329,{type:typeof a})}function Zi(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new ze(we.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sf(a);throw new ze(we.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return a}function ti(a,e){const n={typeString:a};return e&&(n.value=e),n}function mu(a,e){if(!bE(a))throw new ze(we.INVALID_ARGUMENT,"JSON must be an object");let n;for(const o in e)if(e[o]){const h=e[o].typeString,m="value"in e[o]?{value:e[o].value}:void 0;if(!(o in a)){n=`JSON missing required field: '${o}'`;break}const E=a[o];if(h&&typeof E!==h){n=`JSON field '${o}' must be a ${h}.`;break}if(m!==void 0&&E!==m.value){n=`Expected '${o}' field to equal '${m.value}'`;break}}if(n)throw new ze(we.INVALID_ARGUMENT,n);return!0}const Ey=-62135596800,xy=1e6;class An{static now(){return An.fromMillis(Date.now())}static fromDate(e){return An.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor((e-1e3*n)*xy);return new An(n,o)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ze(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ze(we.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ey)throw new ze(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ze(we.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xy}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:An._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(mu(e,An._jsonSchema))return new An(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ey;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}An._jsonSchemaVersion="firestore/timestamp/1.0",An._jsonSchema={type:ti("string",An._jsonSchemaVersion),seconds:ti("number"),nanoseconds:ti("number")};class ht{static fromTimestamp(e){return new ht(e)}static min(){return new ht(new An(0,0))}static max(){return new ht(new An(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const iu=-1;function BC(a,e){const n=a.toTimestamp().seconds,o=a.toTimestamp().nanoseconds+1,h=ht.fromTimestamp(o===1e9?new An(n+1,0):new An(n,o));return new so(h,$e.empty(),e)}function VC(a){return new so(a.readTime,a.key,iu)}class so{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new so(ht.min(),$e.empty(),iu)}static max(){return new so(ht.max(),$e.empty(),iu)}}function UC(a,e){let n=a.readTime.compareTo(e.readTime);return n!==0?n:(n=$e.comparator(a.documentKey,e.documentKey),n!==0?n:kt(a.largestBatchId,e.largestBatchId))}const FC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function $l(a){if(a.code!==we.FAILED_PRECONDITION||a.message!==FC)throw a;Ge("LocalStore","Unexpectedly lost primary lease")}class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Se(((o,h)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(o,h)},this.catchCallback=m=>{this.wrapFailure(n,m).next(o,h)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Se?n:Se.resolve(n)}catch(n){return Se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Se.reject(n)}static resolve(e){return new Se(((n,o)=>{n(e)}))}static reject(e){return new Se(((n,o)=>{o(e)}))}static waitFor(e){return new Se(((n,o)=>{let h=0,m=0,E=!1;e.forEach((v=>{++h,v.next((()=>{++m,E&&m===h&&n()}),(C=>o(C)))})),E=!0,m===h&&n()}))}static or(e){let n=Se.resolve(!1);for(const o of e)n=n.next((h=>h?Se.resolve(h):o()));return n}static forEach(e,n){const o=[];return e.forEach(((h,m)=>{o.push(n.call(this,h,m))})),this.waitFor(o)}static mapArray(e,n){return new Se(((o,h)=>{const m=e.length,E=new Array(m);let v=0;for(let C=0;C<m;C++){const w=C;n(e[w]).next((D=>{E[w]=D,++v,v===m&&o(E)}),(D=>h(D)))}}))}static doWhile(e,n){return new Se(((o,h)=>{const m=()=>{e()===!0?n().next((()=>{m()}),h):o()};m()}))}}function zC(a){const e=a.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ec(a){return a.name==="IndexedDbTransactionError"}class bf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>n.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bf.ce=-1;const F0=-1;function If(a){return a==null}function af(a){return a===0&&1/a==-1/0}function HC(a){return typeof a=="number"&&Number.isInteger(a)&&!af(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}const IE="";function GC(a){let e="";for(let n=0;n<a.length;n++)e.length>0&&(e=Ay(e)),e=qC(a.get(n),e);return Ay(e)}function qC(a,e){let n=e;const o=a.length;for(let h=0;h<o;h++){const m=a.charAt(h);switch(m){case"\0":n+="";break;case IE:n+="";break;default:n+=m}}return n}function Ay(a){return a+IE+""}function wy(a){let e=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e++;return e}function go(a,e){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e(n,a[n])}function RE(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class Pn{constructor(e,n){this.comparator=e,this.root=n||Ii.EMPTY}insert(e,n){return new Pn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ii.BLACK,null,null))}remove(e){return new Pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ii.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const h=this.comparator(e,o.key);if(h===0)return n+o.left.size;h<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,o)=>(e(n,o),!1)))}toString(){const e=[];return this.inorderTraversal(((n,o)=>(e.push(`${n}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ph(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ph(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ph(this.root,e,this.comparator,!0)}}class Ph{constructor(e,n,o,h){this.isReverse=h,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=n?o(e.key,n):1,n&&h&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(m===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ii{constructor(e,n,o,h,m){this.key=e,this.value=n,this.color=o??Ii.RED,this.left=h??Ii.EMPTY,this.right=m??Ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,h,m){return new Ii(e??this.key,n??this.value,o??this.color,h??this.left,m??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let h=this;const m=o(e,h.key);return h=m<0?h.copy(null,null,null,h.left.insert(e,n,o),null):m===0?h.copy(null,n,null,null,null):h.copy(null,null,null,null,h.right.insert(e,n,o)),h.fixUp()}removeMin(){if(this.left.isEmpty())return Ii.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,h=this;if(n(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,n),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),n(e,h.key)===0){if(h.right.isEmpty())return Ii.EMPTY;o=h.right.min(),h=h.copy(o.key,o.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,n))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw lt(27949);return e+(this.isRed()?0:1)}}Ii.EMPTY=null,Ii.RED=!0,Ii.BLACK=!1;Ii.EMPTY=new class{constructor(){this.size=0}get key(){throw lt(57766)}get value(){throw lt(16141)}get color(){throw lt(16727)}get left(){throw lt(29726)}get right(){throw lt(36894)}copy(e,n,o,h,m){return this}insert(e,n,o){return new Ii(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ai{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,o)=>(e(n),!1)))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const h=o.getNext();if(this.comparator(h.key,e[1])>=0)return;n(h.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ty(this.data.getIterator())}getIteratorFrom(e){return new Ty(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((o=>{n=n.add(o)})),n}isEqual(e){if(!(e instanceof ai)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const h=n.getNext().key,m=o.getNext().key;if(this.comparator(h,m)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ai(this.comparator);return n.data=e,n}}class Ty{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Or{constructor(e){this.fields=e,e.sort(Ri.comparator)}static empty(){return new Or([])}unionWith(e){let n=new ai(Ri.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Or(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gl(this.fields,e.fields,((n,o)=>n.isEqual(o)))}}class NE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ni{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(h){try{return atob(h)}catch(m){throw typeof DOMException<"u"&&m instanceof DOMException?new NE("Invalid base64 string: "+m):m}})(e);return new Ni(n)}static fromUint8Array(e){const n=(function(h){let m="";for(let E=0;E<h.length;++E)m+=String.fromCharCode(h[E]);return m})(e);return new Ni(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let h=0;h<n.length;h++)o[h]=n.charCodeAt(h);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ni.EMPTY_BYTE_STRING=new Ni("");const XC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ao(a){if(tn(!!a,39018),typeof a=="string"){let e=0;const n=XC.exec(a);if(tn(!!n,46558,{timestamp:a}),n[1]){let h=n[1];h=(h+"000000000").substr(0,9),e=Number(h)}const o=new Date(a);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Yn(a.seconds),nanos:Yn(a.nanos)}}function Yn(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function oo(a){return typeof a=="string"?Ni.fromBase64String(a):Ni.fromUint8Array(a)}const OE="server_timestamp",DE="__type__",ME="__previous_value__",LE="__local_write_time__";function j0(a){return(a?.mapValue?.fields||{})[DE]?.stringValue===OE}function Rf(a){const e=a.mapValue.fields[ME];return j0(e)?Rf(e):e}function ru(a){const e=ao(a.mapValue.fields[LE].timestampValue);return new An(e.seconds,e.nanos)}class YC{constructor(e,n,o,h,m,E,v,C,w,D){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=h,this.ssl=m,this.forceLongPolling=E,this.autoDetectLongPolling=v,this.longPollingOptions=C,this.useFetchStreams=w,this.isUsingEmulator=D}}const of="(default)";class su{constructor(e,n){this.projectId=e,this.database=n||of}static empty(){return new su("","")}get isDefaultDatabase(){return this.database===of}isEqual(e){return e instanceof su&&e.projectId===this.projectId&&e.database===this.database}}const PE="__type__",WC="__max__",kh={mapValue:{}},kE="__vector__",lf="value";function lo(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?j0(a)?4:QC(a)?9007199254740991:KC(a)?10:11:lt(28295,{value:a})}function Is(a,e){if(a===e)return!0;const n=lo(a);if(n!==lo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return ru(a).isEqual(ru(e));case 3:return(function(h,m){if(typeof h.timestampValue=="string"&&typeof m.timestampValue=="string"&&h.timestampValue.length===m.timestampValue.length)return h.timestampValue===m.timestampValue;const E=ao(h.timestampValue),v=ao(m.timestampValue);return E.seconds===v.seconds&&E.nanos===v.nanos})(a,e);case 5:return a.stringValue===e.stringValue;case 6:return(function(h,m){return oo(h.bytesValue).isEqual(oo(m.bytesValue))})(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return(function(h,m){return Yn(h.geoPointValue.latitude)===Yn(m.geoPointValue.latitude)&&Yn(h.geoPointValue.longitude)===Yn(m.geoPointValue.longitude)})(a,e);case 2:return(function(h,m){if("integerValue"in h&&"integerValue"in m)return Yn(h.integerValue)===Yn(m.integerValue);if("doubleValue"in h&&"doubleValue"in m){const E=Yn(h.doubleValue),v=Yn(m.doubleValue);return E===v?af(E)===af(v):isNaN(E)&&isNaN(v)}return!1})(a,e);case 9:return Gl(a.arrayValue.values||[],e.arrayValue.values||[],Is);case 10:case 11:return(function(h,m){const E=h.mapValue.fields||{},v=m.mapValue.fields||{};if(wy(E)!==wy(v))return!1;for(const C in E)if(E.hasOwnProperty(C)&&(v[C]===void 0||!Is(E[C],v[C])))return!1;return!0})(a,e);default:return lt(52216,{left:a})}}function au(a,e){return(a.values||[]).find((n=>Is(n,e)))!==void 0}function ql(a,e){if(a===e)return 0;const n=lo(a),o=lo(e);if(n!==o)return kt(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return kt(a.booleanValue,e.booleanValue);case 2:return(function(m,E){const v=Yn(m.integerValue||m.doubleValue),C=Yn(E.integerValue||E.doubleValue);return v<C?-1:v>C?1:v===C?0:isNaN(v)?isNaN(C)?0:-1:1})(a,e);case 3:return vy(a.timestampValue,e.timestampValue);case 4:return vy(ru(a),ru(e));case 5:return o0(a.stringValue,e.stringValue);case 6:return(function(m,E){const v=oo(m),C=oo(E);return v.compareTo(C)})(a.bytesValue,e.bytesValue);case 7:return(function(m,E){const v=m.split("/"),C=E.split("/");for(let w=0;w<v.length&&w<C.length;w++){const D=kt(v[w],C[w]);if(D!==0)return D}return kt(v.length,C.length)})(a.referenceValue,e.referenceValue);case 8:return(function(m,E){const v=kt(Yn(m.latitude),Yn(E.latitude));return v!==0?v:kt(Yn(m.longitude),Yn(E.longitude))})(a.geoPointValue,e.geoPointValue);case 9:return Cy(a.arrayValue,e.arrayValue);case 10:return(function(m,E){const v=m.fields||{},C=E.fields||{},w=v[lf]?.arrayValue,D=C[lf]?.arrayValue,M=kt(w?.values?.length||0,D?.values?.length||0);return M!==0?M:Cy(w,D)})(a.mapValue,e.mapValue);case 11:return(function(m,E){if(m===kh.mapValue&&E===kh.mapValue)return 0;if(m===kh.mapValue)return 1;if(E===kh.mapValue)return-1;const v=m.fields||{},C=Object.keys(v),w=E.fields||{},D=Object.keys(w);C.sort(),D.sort();for(let M=0;M<C.length&&M<D.length;++M){const G=o0(C[M],D[M]);if(G!==0)return G;const te=ql(v[C[M]],w[D[M]]);if(te!==0)return te}return kt(C.length,D.length)})(a.mapValue,e.mapValue);default:throw lt(23264,{he:n})}}function vy(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return kt(a,e);const n=ao(a),o=ao(e),h=kt(n.seconds,o.seconds);return h!==0?h:kt(n.nanos,o.nanos)}function Cy(a,e){const n=a.values||[],o=e.values||[];for(let h=0;h<n.length&&h<o.length;++h){const m=ql(n[h],o[h]);if(m)return m}return kt(n.length,o.length)}function Xl(a){return l0(a)}function l0(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(n){const o=ao(n);return`time(${o.seconds},${o.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(n){return oo(n).toBase64()})(a.bytesValue):"referenceValue"in a?(function(n){return $e.fromName(n).toString()})(a.referenceValue):"geoPointValue"in a?(function(n){return`geo(${n.latitude},${n.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(n){let o="[",h=!0;for(const m of n.values||[])h?h=!1:o+=",",o+=l0(m);return o+"]"})(a.arrayValue):"mapValue"in a?(function(n){const o=Object.keys(n.fields||{}).sort();let h="{",m=!0;for(const E of o)m?m=!1:h+=",",h+=`${E}:${l0(n.fields[E])}`;return h+"}"})(a.mapValue):lt(61005,{value:a})}function Xh(a){switch(lo(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rf(a);return e?16+Xh(e):16;case 5:return 2*a.stringValue.length;case 6:return oo(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((h,m)=>h+Xh(m)),0)})(a.arrayValue);case 10:case 11:return(function(o){let h=0;return go(o.fields,((m,E)=>{h+=m.length+Xh(E)})),h})(a.mapValue);default:throw lt(13486,{value:a})}}function Sy(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function c0(a){return!!a&&"integerValue"in a}function z0(a){return!!a&&"arrayValue"in a}function by(a){return!!a&&"nullValue"in a}function Iy(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Yh(a){return!!a&&"mapValue"in a}function KC(a){return(a?.mapValue?.fields||{})[PE]?.stringValue===kE}function Kc(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const e={mapValue:{fields:{}}};return go(a.mapValue.fields,((n,o)=>e.mapValue.fields[n]=Kc(o))),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kc(a.arrayValue.values[n]);return e}return{...a}}function QC(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===WC}class hr{constructor(e){this.value=e}static empty(){return new hr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Yh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kc(n)}setAll(e){let n=Ri.emptyPath(),o={},h=[];e.forEach(((E,v)=>{if(!n.isImmediateParentOf(v)){const C=this.getFieldsMap(n);this.applyChanges(C,o,h),o={},h=[],n=v.popLast()}E?o[v.lastSegment()]=Kc(E):h.push(v.lastSegment())}));const m=this.getFieldsMap(n);this.applyChanges(m,o,h)}delete(e){const n=this.field(e.popLast());Yh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Is(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let h=n.mapValue.fields[e.get(o)];Yh(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=h),n=h}return n.mapValue.fields}applyChanges(e,n,o){go(n,((h,m)=>e[h]=m));for(const h of o)delete e[h]}clone(){return new hr(Kc(this.value))}}function BE(a){const e=[];return go(a.fields,((n,o)=>{const h=new Ri([n]);if(Yh(o)){const m=BE(o.mapValue).fields;if(m.length===0)e.push(h);else for(const E of m)e.push(h.child(E))}else e.push(h)})),new Or(e)}class ji{constructor(e,n,o,h,m,E,v){this.key=e,this.documentType=n,this.version=o,this.readTime=h,this.createTime=m,this.data=E,this.documentState=v}static newInvalidDocument(e){return new ji(e,0,ht.min(),ht.min(),ht.min(),hr.empty(),0)}static newFoundDocument(e,n,o,h){return new ji(e,1,n,ht.min(),o,h,0)}static newNoDocument(e,n){return new ji(e,2,n,ht.min(),ht.min(),hr.empty(),0)}static newUnknownDocument(e,n){return new ji(e,3,n,ht.min(),ht.min(),hr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ht.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ht.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ji&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ji(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cf{constructor(e,n){this.position=e,this.inclusive=n}}function Ry(a,e,n){let o=0;for(let h=0;h<a.position.length;h++){const m=e[h],E=a.position[h];if(m.field.isKeyField()?o=$e.comparator($e.fromName(E.referenceValue),n.key):o=ql(E,n.data.field(m.field)),m.dir==="desc"&&(o*=-1),o!==0)break}return o}function Ny(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!Is(a.position[n],e.position[n]))return!1;return!0}class uf{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZC(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class VE{}class ei extends VE{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new $C(e,n,o):n==="array-contains"?new nS(e,o):n==="in"?new iS(e,o):n==="not-in"?new rS(e,o):n==="array-contains-any"?new sS(e,o):new ei(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new eS(e,o):new tS(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ql(n,this.value)):n!==null&&lo(this.value)===lo(n)&&this.matchesComparison(ql(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class us extends VE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new us(e,n)}matches(e){return UE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function UE(a){return a.op==="and"}function FE(a){return JC(a)&&UE(a)}function JC(a){for(const e of a.filters)if(e instanceof us)return!1;return!0}function u0(a){if(a instanceof ei)return a.field.canonicalString()+a.op.toString()+Xl(a.value);if(FE(a))return a.filters.map((e=>u0(e))).join(",");{const e=a.filters.map((n=>u0(n))).join(",");return`${a.op}(${e})`}}function jE(a,e){return a instanceof ei?(function(o,h){return h instanceof ei&&o.op===h.op&&o.field.isEqual(h.field)&&Is(o.value,h.value)})(a,e):a instanceof us?(function(o,h){return h instanceof us&&o.op===h.op&&o.filters.length===h.filters.length?o.filters.reduce(((m,E,v)=>m&&jE(E,h.filters[v])),!0):!1})(a,e):void lt(19439)}function zE(a){return a instanceof ei?(function(n){return`${n.field.canonicalString()} ${n.op} ${Xl(n.value)}`})(a):a instanceof us?(function(n){return n.op.toString()+" {"+n.getFilters().map(zE).join(" ,")+"}"})(a):"Filter"}class $C extends ei{constructor(e,n,o){super(e,n,o),this.key=$e.fromName(o.referenceValue)}matches(e){const n=$e.comparator(e.key,this.key);return this.matchesComparison(n)}}class eS extends ei{constructor(e,n){super(e,"in",n),this.keys=HE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class tS extends ei{constructor(e,n){super(e,"not-in",n),this.keys=HE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function HE(a,e){return(e.arrayValue?.values||[]).map((n=>$e.fromName(n.referenceValue)))}class nS extends ei{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return z0(n)&&au(n.arrayValue,this.value)}}class iS extends ei{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&au(this.value.arrayValue,n)}}class rS extends ei{constructor(e,n){super(e,"not-in",n)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!au(this.value.arrayValue,n)}}class sS extends ei{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!z0(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>au(this.value.arrayValue,o)))}}class aS{constructor(e,n=null,o=[],h=[],m=null,E=null,v=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=h,this.limit=m,this.startAt=E,this.endAt=v,this.Te=null}}function Oy(a,e=null,n=[],o=[],h=null,m=null,E=null){return new aS(a,e,n,o,h,m,E)}function H0(a){const e=gt(a);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((o=>u0(o))).join(","),n+="|ob:",n+=e.orderBy.map((o=>(function(m){return m.field.canonicalString()+m.dir})(o))).join(","),If(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((o=>Xl(o))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((o=>Xl(o))).join(",")),e.Te=n}return e.Te}function G0(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!ZC(a.orderBy[n],e.orderBy[n]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!jE(a.filters[n],e.filters[n]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!Ny(a.startAt,e.startAt)&&Ny(a.endAt,e.endAt)}function h0(a){return $e.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}class pu{constructor(e,n=null,o=[],h=[],m=null,E="F",v=null,C=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=h,this.limit=m,this.limitType=E,this.startAt=v,this.endAt=C,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function oS(a,e,n,o,h,m,E,v){return new pu(a,e,n,o,h,m,E,v)}function Nf(a){return new pu(a)}function Dy(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function GE(a){return a.collectionGroup!==null}function Qc(a){const e=gt(a);if(e.Ie===null){e.Ie=[];const n=new Set;for(const m of e.explicitOrderBy)e.Ie.push(m),n.add(m.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(E){let v=new ai(Ri.comparator);return E.filters.forEach((C=>{C.getFlattenedFilters().forEach((w=>{w.isInequality()&&(v=v.add(w.field))}))})),v})(e).forEach((m=>{n.has(m.canonicalString())||m.isKeyField()||e.Ie.push(new uf(m,o))})),n.has(Ri.keyField().canonicalString())||e.Ie.push(new uf(Ri.keyField(),o))}return e.Ie}function vs(a){const e=gt(a);return e.Ee||(e.Ee=lS(e,Qc(a))),e.Ee}function lS(a,e){if(a.limitType==="F")return Oy(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map((h=>{const m=h.dir==="desc"?"asc":"desc";return new uf(h.field,m)}));const n=a.endAt?new cf(a.endAt.position,a.endAt.inclusive):null,o=a.startAt?new cf(a.startAt.position,a.startAt.inclusive):null;return Oy(a.path,a.collectionGroup,e,a.filters,a.limit,n,o)}}function f0(a,e){const n=a.filters.concat([e]);return new pu(a.path,a.collectionGroup,a.explicitOrderBy.slice(),n,a.limit,a.limitType,a.startAt,a.endAt)}function d0(a,e,n){return new pu(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,n,a.startAt,a.endAt)}function Of(a,e){return G0(vs(a),vs(e))&&a.limitType===e.limitType}function qE(a){return`${H0(vs(a))}|lt:${a.limitType}`}function Ml(a){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((h=>zE(h))).join(", ")}]`),If(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((h=>(function(E){return`${E.field.canonicalString()} (${E.dir})`})(h))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((h=>Xl(h))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((h=>Xl(h))).join(",")),`Target(${o})`})(vs(a))}; limitType=${a.limitType})`}function Df(a,e){return e.isFoundDocument()&&(function(o,h){const m=h.key.path;return o.collectionGroup!==null?h.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(m):$e.isDocumentKey(o.path)?o.path.isEqual(m):o.path.isImmediateParentOf(m)})(a,e)&&(function(o,h){for(const m of Qc(o))if(!m.field.isKeyField()&&h.data.field(m.field)===null)return!1;return!0})(a,e)&&(function(o,h){for(const m of o.filters)if(!m.matches(h))return!1;return!0})(a,e)&&(function(o,h){return!(o.startAt&&!(function(E,v,C){const w=Ry(E,v,C);return E.inclusive?w<=0:w<0})(o.startAt,Qc(o),h)||o.endAt&&!(function(E,v,C){const w=Ry(E,v,C);return E.inclusive?w>=0:w>0})(o.endAt,Qc(o),h))})(a,e)}function cS(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function XE(a){return(e,n)=>{let o=!1;for(const h of Qc(a)){const m=uS(h,e,n);if(m!==0)return m;o=o||h.field.isKeyField()}return 0}}function uS(a,e,n){const o=a.field.isKeyField()?$e.comparator(e.key,n.key):(function(m,E,v){const C=E.data.field(m),w=v.data.field(m);return C!==null&&w!==null?ql(C,w):lt(42886)})(a.field,e,n);switch(a.dir){case"asc":return o;case"desc":return-1*o;default:return lt(19790,{direction:a.dir})}}class Jo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[h,m]of o)if(this.equalsFn(h,e))return m}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),h=this.inner[o];if(h===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let m=0;m<h.length;m++)if(this.equalsFn(h[m][0],e))return void(h[m]=[e,n]);h.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return o.length===1?delete this.inner[n]:o.splice(h,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,((n,o)=>{for(const[h,m]of o)e(h,m)}))}isEmpty(){return RE(this.inner)}size(){return this.innerSize}}const hS=new Pn($e.comparator);function da(){return hS}const YE=new Pn($e.comparator);function Hc(...a){let e=YE;for(const n of a)e=e.insert(n.key,n);return e}function WE(a){let e=YE;return a.forEach(((n,o)=>e=e.insert(n,o.overlayedDocument))),e}function zo(){return Zc()}function KE(){return Zc()}function Zc(){return new Jo((a=>a.toString()),((a,e)=>a.isEqual(e)))}const fS=new Pn($e.comparator),dS=new ai($e.comparator);function Bt(...a){let e=dS;for(const n of a)e=e.add(n);return e}const gS=new ai(kt);function mS(){return gS}function q0(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:af(e)?"-0":e}}function QE(a){return{integerValue:""+a}}function pS(a,e){return HC(e)?QE(e):q0(a,e)}class Mf{constructor(){this._=void 0}}function yS(a,e,n){return a instanceof hf?(function(h,m){const E={fields:{[DE]:{stringValue:OE},[LE]:{timestampValue:{seconds:h.seconds,nanos:h.nanoseconds}}}};return m&&j0(m)&&(m=Rf(m)),m&&(E.fields[ME]=m),{mapValue:E}})(n,e):a instanceof ou?JE(a,e):a instanceof lu?$E(a,e):(function(h,m){const E=ZE(h,m),v=My(E)+My(h.Ae);return c0(E)&&c0(h.Ae)?QE(v):q0(h.serializer,v)})(a,e)}function _S(a,e,n){return a instanceof ou?JE(a,e):a instanceof lu?$E(a,e):n}function ZE(a,e){return a instanceof ff?(function(o){return c0(o)||(function(m){return!!m&&"doubleValue"in m})(o)})(e)?e:{integerValue:0}:null}class hf extends Mf{}class ou extends Mf{constructor(e){super(),this.elements=e}}function JE(a,e){const n=ex(e);for(const o of a.elements)n.some((h=>Is(h,o)))||n.push(o);return{arrayValue:{values:n}}}class lu extends Mf{constructor(e){super(),this.elements=e}}function $E(a,e){let n=ex(e);for(const o of a.elements)n=n.filter((h=>!Is(h,o)));return{arrayValue:{values:n}}}class ff extends Mf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function My(a){return Yn(a.integerValue||a.doubleValue)}function ex(a){return z0(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}function ES(a,e){return a.field.isEqual(e.field)&&(function(o,h){return o instanceof ou&&h instanceof ou||o instanceof lu&&h instanceof lu?Gl(o.elements,h.elements,Is):o instanceof ff&&h instanceof ff?Is(o.Ae,h.Ae):o instanceof hf&&h instanceof hf})(a.transform,e.transform)}class xS{constructor(e,n){this.version=e,this.transformResults=n}}class Ji{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ji}static exists(e){return new Ji(void 0,e)}static updateTime(e){return new Ji(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wh(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class Lf{}function tx(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new Pf(a.key,Ji.none()):new yu(a.key,a.data,Ji.none());{const n=a.data,o=hr.empty();let h=new ai(Ri.comparator);for(let m of e.fields)if(!h.has(m)){let E=n.field(m);E===null&&m.length>1&&(m=m.popLast(),E=n.field(m)),E===null?o.delete(m):o.set(m,E),h=h.add(m)}return new mo(a.key,o,new Or(h.toArray()),Ji.none())}}function AS(a,e,n){a instanceof yu?(function(h,m,E){const v=h.value.clone(),C=Py(h.fieldTransforms,m,E.transformResults);v.setAll(C),m.convertToFoundDocument(E.version,v).setHasCommittedMutations()})(a,e,n):a instanceof mo?(function(h,m,E){if(!Wh(h.precondition,m))return void m.convertToUnknownDocument(E.version);const v=Py(h.fieldTransforms,m,E.transformResults),C=m.data;C.setAll(nx(h)),C.setAll(v),m.convertToFoundDocument(E.version,C).setHasCommittedMutations()})(a,e,n):(function(h,m,E){m.convertToNoDocument(E.version).setHasCommittedMutations()})(0,e,n)}function Jc(a,e,n,o){return a instanceof yu?(function(m,E,v,C){if(!Wh(m.precondition,E))return v;const w=m.value.clone(),D=ky(m.fieldTransforms,C,E);return w.setAll(D),E.convertToFoundDocument(E.version,w).setHasLocalMutations(),null})(a,e,n,o):a instanceof mo?(function(m,E,v,C){if(!Wh(m.precondition,E))return v;const w=ky(m.fieldTransforms,C,E),D=E.data;return D.setAll(nx(m)),D.setAll(w),E.convertToFoundDocument(E.version,D).setHasLocalMutations(),v===null?null:v.unionWith(m.fieldMask.fields).unionWith(m.fieldTransforms.map((M=>M.field)))})(a,e,n,o):(function(m,E,v){return Wh(m.precondition,E)?(E.convertToNoDocument(E.version).setHasLocalMutations(),null):v})(a,e,n)}function wS(a,e){let n=null;for(const o of a.fieldTransforms){const h=e.data.field(o.field),m=ZE(o.transform,h||null);m!=null&&(n===null&&(n=hr.empty()),n.set(o.field,m))}return n||null}function Ly(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!(function(o,h){return o===void 0&&h===void 0||!(!o||!h)&&Gl(o,h,((m,E)=>ES(m,E)))})(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class yu extends Lf{constructor(e,n,o,h=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class mo extends Lf{constructor(e,n,o,h,m=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=h,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function nx(a){const e=new Map;return a.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=a.data.field(n);e.set(n,o)}})),e}function Py(a,e,n){const o=new Map;tn(a.length===n.length,32656,{Re:n.length,Ve:a.length});for(let h=0;h<n.length;h++){const m=a[h],E=m.transform,v=e.data.field(m.field);o.set(m.field,_S(E,v,n[h]))}return o}function ky(a,e,n){const o=new Map;for(const h of a){const m=h.transform,E=n.data.field(h.field);o.set(h.field,yS(m,E,e))}return o}class Pf extends Lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TS extends Lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class vS{constructor(e,n,o,h){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=h}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let h=0;h<this.mutations.length;h++){const m=this.mutations[h];m.key.isEqual(e.key)&&AS(m,e,o[h])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=Jc(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=Jc(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=KE();return this.mutations.forEach((h=>{const m=e.get(h.key),E=m.overlayedDocument;let v=this.applyToLocalView(E,m.mutatedFields);v=n.has(h.key)?null:v;const C=tx(E,v);C!==null&&o.set(h.key,C),E.isValidDocument()||E.convertToNoDocument(ht.min())})),o}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Bt())}isEqual(e){return this.batchId===e.batchId&&Gl(this.mutations,e.mutations,((n,o)=>Ly(n,o)))&&Gl(this.baseMutations,e.baseMutations,((n,o)=>Ly(n,o)))}}class X0{constructor(e,n,o,h){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=h}static from(e,n,o){tn(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let h=(function(){return fS})();const m=e.mutations;for(let E=0;E<m.length;E++)h=h.insert(m[E].key,o[E].version);return new X0(e,n,o,h)}}class CS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class SS{constructor(e,n){this.count=e,this.unchangedNames=n}}var $n,jt;function bS(a){switch(a){case we.OK:return lt(64938);case we.CANCELLED:case we.UNKNOWN:case we.DEADLINE_EXCEEDED:case we.RESOURCE_EXHAUSTED:case we.INTERNAL:case we.UNAVAILABLE:case we.UNAUTHENTICATED:return!1;case we.INVALID_ARGUMENT:case we.NOT_FOUND:case we.ALREADY_EXISTS:case we.PERMISSION_DENIED:case we.FAILED_PRECONDITION:case we.ABORTED:case we.OUT_OF_RANGE:case we.UNIMPLEMENTED:case we.DATA_LOSS:return!0;default:return lt(15467,{code:a})}}function ix(a){if(a===void 0)return fa("GRPC error has no .code"),we.UNKNOWN;switch(a){case $n.OK:return we.OK;case $n.CANCELLED:return we.CANCELLED;case $n.UNKNOWN:return we.UNKNOWN;case $n.DEADLINE_EXCEEDED:return we.DEADLINE_EXCEEDED;case $n.RESOURCE_EXHAUSTED:return we.RESOURCE_EXHAUSTED;case $n.INTERNAL:return we.INTERNAL;case $n.UNAVAILABLE:return we.UNAVAILABLE;case $n.UNAUTHENTICATED:return we.UNAUTHENTICATED;case $n.INVALID_ARGUMENT:return we.INVALID_ARGUMENT;case $n.NOT_FOUND:return we.NOT_FOUND;case $n.ALREADY_EXISTS:return we.ALREADY_EXISTS;case $n.PERMISSION_DENIED:return we.PERMISSION_DENIED;case $n.FAILED_PRECONDITION:return we.FAILED_PRECONDITION;case $n.ABORTED:return we.ABORTED;case $n.OUT_OF_RANGE:return we.OUT_OF_RANGE;case $n.UNIMPLEMENTED:return we.UNIMPLEMENTED;case $n.DATA_LOSS:return we.DATA_LOSS;default:return lt(39323,{code:a})}}(jt=$n||($n={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";function IS(){return new TextEncoder}const RS=new io([4294967295,4294967295],0);function By(a){const e=IS().encode(a),n=new _E;return n.update(e),new Uint8Array(n.digest())}function Vy(a){const e=new DataView(a.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),h=e.getUint32(8,!0),m=e.getUint32(12,!0);return[new io([n,o],0),new io([h,m],0)]}class Y0{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new Gc(`Invalid padding: ${n}`);if(o<0)throw new Gc(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Gc(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new Gc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=io.fromNumber(this.ge)}ye(e,n,o){let h=e.add(n.multiply(io.fromNumber(o)));return h.compare(RS)===1&&(h=new io([h.getBits(0),h.getBits(1)],0)),h.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=By(e),[o,h]=Vy(n);for(let m=0;m<this.hashCount;m++){const E=this.ye(o,h,m);if(!this.we(E))return!1}return!0}static create(e,n,o){const h=e%8==0?0:8-e%8,m=new Uint8Array(Math.ceil(e/8)),E=new Y0(m,h,n);return o.forEach((v=>E.insert(v))),E}insert(e){if(this.ge===0)return;const n=By(e),[o,h]=Vy(n);for(let m=0;m<this.hashCount;m++){const E=this.ye(o,h,m);this.Se(E)}}Se(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class Gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class kf{constructor(e,n,o,h,m){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=h,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const h=new Map;return h.set(e,_u.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new kf(ht.min(),h,new Pn(kt),da(),Bt())}}class _u{constructor(e,n,o,h,m){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=h,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new _u(o,n,Bt(),Bt(),Bt())}}class Kh{constructor(e,n,o,h){this.be=e,this.removedTargetIds=n,this.key=o,this.De=h}}class rx{constructor(e,n){this.targetId=e,this.Ce=n}}class sx{constructor(e,n,o=Ni.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=h}}class Uy{constructor(){this.ve=0,this.Fe=Fy(),this.Me=Ni.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Bt(),n=Bt(),o=Bt();return this.Fe.forEach(((h,m)=>{switch(m){case 0:e=e.add(h);break;case 2:n=n.add(h);break;case 1:o=o.add(h);break;default:lt(38017,{changeType:m})}})),new _u(this.Me,this.xe,e,n,o)}qe(){this.Oe=!1,this.Fe=Fy()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,tn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class NS{constructor(e){this.Ge=e,this.ze=new Map,this.je=da(),this.Je=Bh(),this.He=Bh(),this.Ye=new Pn(kt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const o=this.nt(n);switch(e.state){case 0:this.rt(n)&&o.Le(e.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(e.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(o.We(),o.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),o.Le(e.resumeToken));break;default:lt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((o,h)=>{this.rt(h)&&n(h)}))}st(e){const n=e.targetId,o=e.Ce.count,h=this.ot(n);if(h){const m=h.target;if(h0(m))if(o===0){const E=new $e(m.path);this.et(n,E,ji.newNoDocument(E,ht.min()))}else tn(o===1,20013,{expectedCount:o});else{const E=this._t(n);if(E!==o){const v=this.ut(e),C=v?this.ct(v,e,E):1;if(C!==0){this.it(n);const w=C===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,w)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:h=0},hashCount:m=0}=n;let E,v;try{E=oo(o).toUint8Array()}catch(C){if(C instanceof NE)return Hl("Decoding the base64 bloom filter in existence filter failed ("+C.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw C}try{v=new Y0(E,h,m)}catch(C){return Hl(C instanceof Gc?"BloomFilter error: ":"Applying bloom filter failed: ",C),null}return v.ge===0?null:v}ct(e,n,o){return n.Ce.count===o-this.Pt(e,n.targetId)?0:2}Pt(e,n){const o=this.Ge.getRemoteKeysForTarget(n);let h=0;return o.forEach((m=>{const E=this.Ge.ht(),v=`projects/${E.projectId}/databases/${E.database}/documents/${m.path.canonicalString()}`;e.mightContain(v)||(this.et(n,m,null),h++)})),h}Tt(e){const n=new Map;this.ze.forEach(((m,E)=>{const v=this.ot(E);if(v){if(m.current&&h0(v.target)){const C=new $e(v.target.path);this.It(C).has(E)||this.Et(E,C)||this.et(E,C,ji.newNoDocument(C,e))}m.Be&&(n.set(E,m.ke()),m.qe())}}));let o=Bt();this.He.forEach(((m,E)=>{let v=!0;E.forEachWhile((C=>{const w=this.ot(C);return!w||w.purpose==="TargetPurposeLimboResolution"||(v=!1,!1)})),v&&(o=o.add(m))})),this.je.forEach(((m,E)=>E.setReadTime(e)));const h=new kf(e,n,this.Ye,this.je,o);return this.je=da(),this.Je=Bh(),this.He=Bh(),this.Ye=new Pn(kt),h}Xe(e,n){if(!this.rt(e))return;const o=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,o),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,o){if(!this.rt(e))return;const h=this.nt(e);this.Et(e,n)?h.Qe(n,1):h.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),o&&(this.je=this.je.insert(n,o))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Uy,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ai(kt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ai(kt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Uy),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Bh(){return new Pn($e.comparator)}function Fy(){return new Pn($e.comparator)}const OS={asc:"ASCENDING",desc:"DESCENDING"},DS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MS={and:"AND",or:"OR"};class LS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function g0(a,e){return a.useProto3Json||If(e)?e:{value:e}}function df(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ax(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function PS(a,e){return df(a,e.toTimestamp())}function Cs(a){return tn(!!a,49232),ht.fromTimestamp((function(n){const o=ao(n);return new An(o.seconds,o.nanos)})(a))}function W0(a,e){return m0(a,e).canonicalString()}function m0(a,e){const n=(function(h){return new mn(["projects",h.projectId,"databases",h.database])})(a).child("documents");return e===void 0?n:n.child(e)}function ox(a){const e=mn.fromString(a);return tn(fx(e),10190,{key:e.toString()}),e}function p0(a,e){return W0(a.databaseId,e.path)}function G1(a,e){const n=ox(e);if(n.get(1)!==a.databaseId.projectId)throw new ze(we.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new ze(we.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new $e(cx(n))}function lx(a,e){return W0(a.databaseId,e)}function kS(a){const e=ox(a);return e.length===4?mn.emptyPath():cx(e)}function y0(a){return new mn(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function cx(a){return tn(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function jy(a,e,n){return{name:p0(a,e),fields:n.value.mapValue.fields}}function BS(a,e){let n;if("targetChange"in e){e.targetChange;const o=(function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:lt(39313,{state:w})})(e.targetChange.targetChangeType||"NO_CHANGE"),h=e.targetChange.targetIds||[],m=(function(w,D){return w.useProto3Json?(tn(D===void 0||typeof D=="string",58123),Ni.fromBase64String(D||"")):(tn(D===void 0||D instanceof Buffer||D instanceof Uint8Array,16193),Ni.fromUint8Array(D||new Uint8Array))})(a,e.targetChange.resumeToken),E=e.targetChange.cause,v=E&&(function(w){const D=w.code===void 0?we.UNKNOWN:ix(w.code);return new ze(D,w.message||"")})(E);n=new sx(o,h,m,v||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const h=G1(a,o.document.name),m=Cs(o.document.updateTime),E=o.document.createTime?Cs(o.document.createTime):ht.min(),v=new hr({mapValue:{fields:o.document.fields}}),C=ji.newFoundDocument(h,m,E,v),w=o.targetIds||[],D=o.removedTargetIds||[];n=new Kh(w,D,C.key,C)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const h=G1(a,o.document),m=o.readTime?Cs(o.readTime):ht.min(),E=ji.newNoDocument(h,m),v=o.removedTargetIds||[];n=new Kh([],v,E.key,E)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const h=G1(a,o.document),m=o.removedTargetIds||[];n=new Kh([],m,h,null)}else{if(!("filter"in e))return lt(11601,{Rt:e});{e.filter;const o=e.filter;o.targetId;const{count:h=0,unchangedNames:m}=o,E=new SS(h,m),v=o.targetId;n=new rx(v,E)}}return n}function VS(a,e){let n;if(e instanceof yu)n={update:jy(a,e.key,e.value)};else if(e instanceof Pf)n={delete:p0(a,e.key)};else if(e instanceof mo)n={update:jy(a,e.key,e.data),updateMask:YS(e.fieldMask)};else{if(!(e instanceof TS))return lt(16599,{Vt:e.type});n={verify:p0(a,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((o=>(function(m,E){const v=E.transform;if(v instanceof hf)return{fieldPath:E.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof ou)return{fieldPath:E.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof lu)return{fieldPath:E.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof ff)return{fieldPath:E.field.canonicalString(),increment:v.Ae};throw lt(20930,{transform:E.transform})})(0,o)))),e.precondition.isNone||(n.currentDocument=(function(h,m){return m.updateTime!==void 0?{updateTime:PS(h,m.updateTime)}:m.exists!==void 0?{exists:m.exists}:lt(27497)})(a,e.precondition)),n}function US(a,e){return a&&a.length>0?(tn(e!==void 0,14353),a.map((n=>(function(h,m){let E=h.updateTime?Cs(h.updateTime):Cs(m);return E.isEqual(ht.min())&&(E=Cs(m)),new xS(E,h.transformResults||[])})(n,e)))):[]}function FS(a,e){return{documents:[lx(a,e.path)]}}function jS(a,e){const n={structuredQuery:{}},o=e.path;let h;e.collectionGroup!==null?(h=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(h=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=lx(a,h);const m=(function(w){if(w.length!==0)return hx(us.create(w,"and"))})(e.filters);m&&(n.structuredQuery.where=m);const E=(function(w){if(w.length!==0)return w.map((D=>(function(G){return{field:Ll(G.field),direction:GS(G.dir)}})(D)))})(e.orderBy);E&&(n.structuredQuery.orderBy=E);const v=g0(a,e.limit);return v!==null&&(n.structuredQuery.limit=v),e.startAt&&(n.structuredQuery.startAt=(function(w){return{before:w.inclusive,values:w.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(w){return{before:!w.inclusive,values:w.position}})(e.endAt)),{ft:n,parent:h}}function zS(a){let e=kS(a.parent);const n=a.structuredQuery,o=n.from?n.from.length:0;let h=null;if(o>0){tn(o===1,65062);const D=n.from[0];D.allDescendants?h=D.collectionId:e=e.child(D.collectionId)}let m=[];n.where&&(m=(function(M){const G=ux(M);return G instanceof us&&FE(G)?G.getFilters():[G]})(n.where));let E=[];n.orderBy&&(E=(function(M){return M.map((G=>(function(Ee){return new uf(Pl(Ee.field),(function(ye){switch(ye){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Ee.direction))})(G)))})(n.orderBy));let v=null;n.limit&&(v=(function(M){let G;return G=typeof M=="object"?M.value:M,If(G)?null:G})(n.limit));let C=null;n.startAt&&(C=(function(M){const G=!!M.before,te=M.values||[];return new cf(te,G)})(n.startAt));let w=null;return n.endAt&&(w=(function(M){const G=!M.before,te=M.values||[];return new cf(te,G)})(n.endAt)),oS(e,h,E,m,v,"F",C,w)}function HS(a,e){const n=(function(h){switch(h){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt(28987,{purpose:h})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function ux(a){return a.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Pl(n.unaryFilter.field);return ei.create(o,"==",{doubleValue:NaN});case"IS_NULL":const h=Pl(n.unaryFilter.field);return ei.create(h,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const m=Pl(n.unaryFilter.field);return ei.create(m,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const E=Pl(n.unaryFilter.field);return ei.create(E,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lt(61313);default:return lt(60726)}})(a):a.fieldFilter!==void 0?(function(n){return ei.create(Pl(n.fieldFilter.field),(function(h){switch(h){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lt(58110);default:return lt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(n){return us.create(n.compositeFilter.filters.map((o=>ux(o))),(function(h){switch(h){case"AND":return"and";case"OR":return"or";default:return lt(1026)}})(n.compositeFilter.op))})(a):lt(30097,{filter:a})}function GS(a){return OS[a]}function qS(a){return DS[a]}function XS(a){return MS[a]}function Ll(a){return{fieldPath:a.canonicalString()}}function Pl(a){return Ri.fromServerFormat(a.fieldPath)}function hx(a){return a instanceof ei?(function(n){if(n.op==="=="){if(Iy(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NAN"}};if(by(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Iy(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NOT_NAN"}};if(by(n.value))return{unaryFilter:{field:Ll(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ll(n.field),op:qS(n.op),value:n.value}}})(a):a instanceof us?(function(n){const o=n.getFilters().map((h=>hx(h)));return o.length===1?o[0]:{compositeFilter:{op:XS(n.op),filters:o}}})(a):lt(54877,{filter:a})}function YS(a){const e=[];return a.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function fx(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}class $a{constructor(e,n,o,h,m=ht.min(),E=ht.min(),v=Ni.EMPTY_BYTE_STRING,C=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=h,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=v,this.expectedCount=C}withSequenceNumber(e){return new $a(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class WS{constructor(e){this.yt=e}}function KS(a){const e=zS({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?d0(e,e.limit,"L"):e}class QS{constructor(){this.Cn=new ZS}addToCollectionParentIndex(e,n){return this.Cn.add(n),Se.resolve()}getCollectionParents(e,n){return Se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Se.resolve()}deleteFieldIndex(e,n){return Se.resolve()}deleteAllFieldIndexes(e){return Se.resolve()}createTargetIndexes(e,n){return Se.resolve()}getDocumentsMatchingTarget(e,n){return Se.resolve(null)}getIndexType(e,n){return Se.resolve(0)}getFieldIndexes(e,n){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}getMinOffset(e,n){return Se.resolve(so.min())}getMinOffsetFromCollectionGroup(e,n){return Se.resolve(so.min())}updateCollectionGroup(e,n,o){return Se.resolve()}updateIndexEntries(e,n){return Se.resolve()}}class ZS{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),h=this.index[n]||new ai(mn.comparator),m=!h.has(o);return this.index[n]=h.add(o),m}has(e){const n=e.lastSegment(),o=e.popLast(),h=this.index[n];return h&&h.has(o)}getEntries(e){return(this.index[e]||new ai(mn.comparator)).toArray()}}const zy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dx=41943040;class ur{static withCacheSize(e){return new ur(e,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}ur.DEFAULT_COLLECTION_PERCENTILE=10,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ur.DEFAULT=new ur(dx,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ur.DISABLED=new ur(-1,0,0);class Yl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Yl(0)}static cr(){return new Yl(-1)}}const Hy="LruGarbageCollector",JS=1048576;function Gy([a,e],[n,o]){const h=kt(a,n);return h===0?kt(e,o):h}class $S{constructor(e){this.Ir=e,this.buffer=new ai(Gy),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();Gy(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class eb{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ge(Hy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ec(n)?Ge(Hy,"Ignoring IndexedDB error during garbage collection: ",n):await $l(n)}await this.Vr(3e5)}))}}class tb{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((o=>Math.floor(n/100*o)))}nthSequenceNumber(e,n){if(n===0)return Se.resolve(bf.ce);const o=new $S(n);return this.mr.forEachTarget(e,(h=>o.Ar(h.sequenceNumber))).next((()=>this.mr.pr(e,(h=>o.Ar(h))))).next((()=>o.maxValue))}removeTargets(e,n,o){return this.mr.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ge("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(zy)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(Ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zy):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let o,h,m,E,v,C,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((M=>(M>this.params.maximumSequenceNumbersToCollect?(Ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),h=this.params.maximumSequenceNumbersToCollect):h=M,E=Date.now(),this.nthSequenceNumber(e,h)))).next((M=>(o=M,v=Date.now(),this.removeTargets(e,o,n)))).next((M=>(m=M,C=Date.now(),this.removeOrphanedDocuments(e,o)))).next((M=>(w=Date.now(),Dl()<=Pt.DEBUG&&Ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${E-D}ms
	Determined least recently used ${h} in `+(v-E)+`ms
	Removed ${m} targets in `+(C-v)+`ms
	Removed ${M} documents in `+(w-C)+`ms
Total Duration: ${w-D}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:m,documentsRemoved:M}))))}}function nb(a,e){return new tb(a,e)}class ib{constructor(){this.changes=new Jo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ji.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?Se.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class rb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class sb{constructor(e,n,o,h){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=h}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next((h=>(o=h,this.remoteDocumentCache.getEntry(e,n)))).next((h=>(o!==null&&Jc(o.mutation,h,Or.empty(),An.now()),h)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.getLocalViewOfDocuments(e,o,Bt()).next((()=>o))))}getLocalViewOfDocuments(e,n,o=Bt()){const h=zo();return this.populateOverlays(e,h,n).next((()=>this.computeViews(e,n,h,o).next((m=>{let E=Hc();return m.forEach(((v,C)=>{E=E.insert(v,C.overlayedDocument)})),E}))))}getOverlayedDocuments(e,n){const o=zo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,Bt())))}populateOverlays(e,n,o){const h=[];return o.forEach((m=>{n.has(m)||h.push(m)})),this.documentOverlayCache.getOverlays(e,h).next((m=>{m.forEach(((E,v)=>{n.set(E,v)}))}))}computeViews(e,n,o,h){let m=da();const E=Zc(),v=(function(){return Zc()})();return n.forEach(((C,w)=>{const D=o.get(w.key);h.has(w.key)&&(D===void 0||D.mutation instanceof mo)?m=m.insert(w.key,w):D!==void 0?(E.set(w.key,D.mutation.getFieldMask()),Jc(D.mutation,w,D.mutation.getFieldMask(),An.now())):E.set(w.key,Or.empty())})),this.recalculateAndSaveOverlays(e,m).next((C=>(C.forEach(((w,D)=>E.set(w,D))),n.forEach(((w,D)=>v.set(w,new rb(D,E.get(w)??null)))),v)))}recalculateAndSaveOverlays(e,n){const o=Zc();let h=new Pn(((E,v)=>E-v)),m=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((E=>{for(const v of E)v.keys().forEach((C=>{const w=n.get(C);if(w===null)return;let D=o.get(C)||Or.empty();D=v.applyToLocalView(w,D),o.set(C,D);const M=(h.get(v.batchId)||Bt()).add(C);h=h.insert(v.batchId,M)}))})).next((()=>{const E=[],v=h.getReverseIterator();for(;v.hasNext();){const C=v.getNext(),w=C.key,D=C.value,M=KE();D.forEach((G=>{if(!m.has(G)){const te=tx(n.get(G),o.get(G));te!==null&&M.set(G,te),m=m.add(G)}})),E.push(this.documentOverlayCache.saveOverlays(e,w,M))}return Se.waitFor(E)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,n,o,h){return(function(E){return $e.isDocumentKey(E.path)&&E.collectionGroup===null&&E.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):GE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,h):this.getDocumentsMatchingCollectionQuery(e,n,o,h)}getNextDocuments(e,n,o,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,h).next((m=>{const E=h-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,h-m.size):Se.resolve(zo());let v=iu,C=m;return E.next((w=>Se.forEach(w,((D,M)=>(v<M.largestBatchId&&(v=M.largestBatchId),m.get(D)?Se.resolve():this.remoteDocumentCache.getEntry(e,D).next((G=>{C=C.insert(D,G)}))))).next((()=>this.populateOverlays(e,w,m))).next((()=>this.computeViews(e,C,w,Bt()))).next((D=>({batchId:v,changes:WE(D)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new $e(n)).next((o=>{let h=Hc();return o.isFoundDocument()&&(h=h.insert(o.key,o)),h}))}getDocumentsMatchingCollectionGroupQuery(e,n,o,h){const m=n.collectionGroup;let E=Hc();return this.indexManager.getCollectionParents(e,m).next((v=>Se.forEach(v,(C=>{const w=(function(M,G){return new pu(G,null,M.explicitOrderBy.slice(),M.filters.slice(),M.limit,M.limitType,M.startAt,M.endAt)})(n,C.child(m));return this.getDocumentsMatchingCollectionQuery(e,w,o,h).next((D=>{D.forEach(((M,G)=>{E=E.insert(M,G)}))}))})).next((()=>E))))}getDocumentsMatchingCollectionQuery(e,n,o,h){let m;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next((E=>(m=E,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,m,h)))).next((E=>{m.forEach(((C,w)=>{const D=w.getKey();E.get(D)===null&&(E=E.insert(D,ji.newInvalidDocument(D)))}));let v=Hc();return E.forEach(((C,w)=>{const D=m.get(C);D!==void 0&&Jc(D.mutation,w,Or.empty(),An.now()),Df(n,w)&&(v=v.insert(C,w))})),v}))}}class ab{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Se.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(h){return{id:h.id,version:h.version,createTime:Cs(h.createTime)}})(n)),Se.resolve()}getNamedQuery(e,n){return Se.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(h){return{name:h.name,query:KS(h.bundledQuery),readTime:Cs(h.readTime)}})(n)),Se.resolve()}}class ob{constructor(){this.overlays=new Pn($e.comparator),this.qr=new Map}getOverlay(e,n){return Se.resolve(this.overlays.get(n))}getOverlays(e,n){const o=zo();return Se.forEach(n,(h=>this.getOverlay(e,h).next((m=>{m!==null&&o.set(h,m)})))).next((()=>o))}saveOverlays(e,n,o){return o.forEach(((h,m)=>{this.St(e,n,m)})),Se.resolve()}removeOverlaysForBatchId(e,n,o){const h=this.qr.get(o);return h!==void 0&&(h.forEach((m=>this.overlays=this.overlays.remove(m))),this.qr.delete(o)),Se.resolve()}getOverlaysForCollection(e,n,o){const h=zo(),m=n.length+1,E=new $e(n.child("")),v=this.overlays.getIteratorFrom(E);for(;v.hasNext();){const C=v.getNext().value,w=C.getKey();if(!n.isPrefixOf(w.path))break;w.path.length===m&&C.largestBatchId>o&&h.set(C.getKey(),C)}return Se.resolve(h)}getOverlaysForCollectionGroup(e,n,o,h){let m=new Pn(((w,D)=>w-D));const E=this.overlays.getIterator();for(;E.hasNext();){const w=E.getNext().value;if(w.getKey().getCollectionGroup()===n&&w.largestBatchId>o){let D=m.get(w.largestBatchId);D===null&&(D=zo(),m=m.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const v=zo(),C=m.getIterator();for(;C.hasNext()&&(C.getNext().value.forEach(((w,D)=>v.set(w,D))),!(v.size()>=h)););return Se.resolve(v)}St(e,n,o){const h=this.overlays.get(o.key);if(h!==null){const E=this.qr.get(h.largestBatchId).delete(o.key);this.qr.set(h.largestBatchId,E)}this.overlays=this.overlays.insert(o.key,new CS(n,o));let m=this.qr.get(n);m===void 0&&(m=Bt(),this.qr.set(n,m)),this.qr.set(n,m.add(o.key))}}class lb{constructor(){this.sessionToken=Ni.EMPTY_BYTE_STRING}getSessionToken(e){return Se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Se.resolve()}}class K0{constructor(){this.Qr=new ai(hi.$r),this.Ur=new ai(hi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const o=new hi(e,n);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(e,n){e.forEach((o=>this.addReference(o,n)))}removeReference(e,n){this.Gr(new hi(e,n))}zr(e,n){e.forEach((o=>this.removeReference(o,n)))}jr(e){const n=new $e(new mn([])),o=new hi(n,e),h=new hi(n,e+1),m=[];return this.Ur.forEachInRange([o,h],(E=>{this.Gr(E),m.push(E.key)})),m}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new $e(new mn([])),o=new hi(n,e),h=new hi(n,e+1);let m=Bt();return this.Ur.forEachInRange([o,h],(E=>{m=m.add(E.key)})),m}containsKey(e){const n=new hi(e,0),o=this.Qr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class hi{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return $e.comparator(e.key,n.key)||kt(e.Yr,n.Yr)}static Kr(e,n){return kt(e.Yr,n.Yr)||$e.comparator(e.key,n.key)}}class cb{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ai(hi.$r)}checkEmpty(e){return Se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,h){const m=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const E=new vS(m,n,o,h);this.mutationQueue.push(E);for(const v of h)this.Zr=this.Zr.add(new hi(v.key,m)),this.indexManager.addToCollectionParentIndex(e,v.key.path.popLast());return Se.resolve(E)}lookupMutationBatch(e,n){return Se.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,h=this.ei(o),m=h<0?0:h;return Se.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(this.mutationQueue.length===0?F0:this.tr-1)}getAllMutationBatches(e){return Se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new hi(n,0),h=new hi(n,Number.POSITIVE_INFINITY),m=[];return this.Zr.forEachInRange([o,h],(E=>{const v=this.Xr(E.Yr);m.push(v)})),Se.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new ai(kt);return n.forEach((h=>{const m=new hi(h,0),E=new hi(h,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([m,E],(v=>{o=o.add(v.Yr)}))})),Se.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,h=o.length+1;let m=o;$e.isDocumentKey(m)||(m=m.child(""));const E=new hi(new $e(m),0);let v=new ai(kt);return this.Zr.forEachWhile((C=>{const w=C.key.path;return!!o.isPrefixOf(w)&&(w.length===h&&(v=v.add(C.Yr)),!0)}),E),Se.resolve(this.ti(v))}ti(e){const n=[];return e.forEach((o=>{const h=this.Xr(o);h!==null&&n.push(h)})),n}removeMutationBatch(e,n){tn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return Se.forEach(n.mutations,(h=>{const m=new hi(h.key,n.batchId);return o=o.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)})).next((()=>{this.Zr=o}))}ir(e){}containsKey(e,n){const o=new hi(n,0),h=this.Zr.firstAfterOrEqual(o);return Se.resolve(n.isEqual(h&&h.key))}performConsistencyCheck(e){return this.mutationQueue.length,Se.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class ub{constructor(e){this.ri=e,this.docs=(function(){return new Pn($e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,h=this.docs.get(o),m=h?h.size:0,E=this.ri(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:E}),this.size+=E-m,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Se.resolve(o?o.document.mutableCopy():ji.newInvalidDocument(n))}getEntries(e,n){let o=da();return n.forEach((h=>{const m=this.docs.get(h);o=o.insert(h,m?m.document.mutableCopy():ji.newInvalidDocument(h))})),Se.resolve(o)}getDocumentsMatchingQuery(e,n,o,h){let m=da();const E=n.path,v=new $e(E.child("__id-9223372036854775808__")),C=this.docs.getIteratorFrom(v);for(;C.hasNext();){const{key:w,value:{document:D}}=C.getNext();if(!E.isPrefixOf(w.path))break;w.path.length>E.length+1||UC(VC(D),o)<=0||(h.has(D.key)||Df(n,D))&&(m=m.insert(D.key,D.mutableCopy()))}return Se.resolve(m)}getAllFromCollectionGroup(e,n,o,h){lt(9500)}ii(e,n){return Se.forEach(this.docs,(o=>n(o)))}newChangeBuffer(e){return new hb(this)}getSize(e){return Se.resolve(this.size)}}class hb extends ib{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((o,h)=>{h.isValidDocument()?n.push(this.Nr.addEntry(e,h)):this.Nr.removeEntry(o)})),Se.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class fb{constructor(e){this.persistence=e,this.si=new Jo((n=>H0(n)),G0),this.lastRemoteSnapshotVersion=ht.min(),this.highestTargetId=0,this.oi=0,this._i=new K0,this.targetCount=0,this.ai=Yl.ur()}forEachTarget(e,n){return this.si.forEach(((o,h)=>n(h))),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.oi&&(this.oi=n),Se.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Yl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Se.resolve()}updateTargetData(e,n){return this.Pr(n),Se.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,n,o){let h=0;const m=[];return this.si.forEach(((E,v)=>{v.sequenceNumber<=n&&o.get(v.targetId)===null&&(this.si.delete(E),m.push(this.removeMatchingKeysForTargetId(e,v.targetId)),h++)})),Se.waitFor(m).next((()=>h))}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,n){const o=this.si.get(n)||null;return Se.resolve(o)}addMatchingKeys(e,n,o){return this._i.Wr(n,o),Se.resolve()}removeMatchingKeys(e,n,o){this._i.zr(n,o);const h=this.persistence.referenceDelegate,m=[];return h&&n.forEach((E=>{m.push(h.markPotentiallyOrphaned(e,E))})),Se.waitFor(m)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Se.resolve()}getMatchingKeysForTargetId(e,n){const o=this._i.Hr(n);return Se.resolve(o)}containsKey(e,n){return Se.resolve(this._i.containsKey(n))}}class gx{constructor(e,n){this.ui={},this.overlays={},this.ci=new bf(0),this.li=!1,this.li=!0,this.hi=new lb,this.referenceDelegate=e(this),this.Pi=new fb(this),this.indexManager=new QS,this.remoteDocumentCache=(function(h){return new ub(h)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new WS(n),this.Ii=new ab(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ob,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.ui[e.toKey()];return o||(o=new cb(n,this.referenceDelegate),this.ui[e.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,o){Ge("MemoryPersistence","Starting transaction:",e);const h=new db(this.ci.next());return this.referenceDelegate.Ei(),o(h).next((m=>this.referenceDelegate.di(h).next((()=>m)))).toPromise().then((m=>(h.raiseOnCommittedEvent(),m)))}Ai(e,n){return Se.or(Object.values(this.ui).map((o=>()=>o.containsKey(e,n))))}}class db extends jC{constructor(e){super(),this.currentSequenceNumber=e}}class Q0{constructor(e){this.persistence=e,this.Ri=new K0,this.Vi=null}static mi(e){return new Q0(e)}get fi(){if(this.Vi)return this.Vi;throw lt(60996)}addReference(e,n,o){return this.Ri.addReference(o,n),this.fi.delete(o.toString()),Se.resolve()}removeReference(e,n,o){return this.Ri.removeReference(o,n),this.fi.add(o.toString()),Se.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Se.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((h=>this.fi.add(h.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next((h=>{h.forEach((m=>this.fi.add(m.toString())))})).next((()=>o.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.fi,(o=>{const h=$e.fromPath(o);return this.gi(e,h).next((m=>{m||n.removeEntry(h,ht.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((o=>{o?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return Se.or([()=>Se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class gf{constructor(e,n){this.persistence=e,this.pi=new Jo((o=>GC(o.path)),((o,h)=>o.isEqual(h))),this.garbageCollector=nb(this,n)}static mi(e,n){return new gf(e,n)}Ei(){}di(e){return Se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>n.next((h=>o+h))))}wr(e){let n=0;return this.pr(e,(o=>{n++})).next((()=>n))}pr(e,n){return Se.forEach(this.pi,((o,h)=>this.br(e,o,h).next((m=>m?Se.resolve():n(h)))))}removeTargets(e,n,o){return this.persistence.getTargetCache().removeTargets(e,n,o)}removeOrphanedDocuments(e,n){let o=0;const h=this.persistence.getRemoteDocumentCache(),m=h.newChangeBuffer();return h.ii(e,(E=>this.br(e,E,n).next((v=>{v||(o++,m.removeEntry(E,ht.min()))})))).next((()=>m.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Se.resolve()}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Se.resolve()}removeReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),Se.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Se.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Xh(e.data.value)),n}br(e,n,o){return Se.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const h=this.pi.get(n);return Se.resolve(h!==void 0&&h>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Z0{constructor(e,n,o,h){this.targetId=e,this.fromCache=n,this.Es=o,this.ds=h}static As(e,n){let o=Bt(),h=Bt();for(const m of n.docChanges)switch(m.type){case 0:o=o.add(m.doc.key);break;case 1:h=h.add(m.doc.key)}return new Z0(e,n.fromCache,o,h)}}class gb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class mb{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Yw()?8:zC(zi())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,o,h){const m={result:null};return this.ys(e,n).next((E=>{m.result=E})).next((()=>{if(!m.result)return this.ws(e,n,h,o).next((E=>{m.result=E}))})).next((()=>{if(m.result)return;const E=new gb;return this.Ss(e,n,E).next((v=>{if(m.result=v,this.Vs)return this.bs(e,n,E,v.size)}))})).next((()=>m.result))}bs(e,n,o,h){return o.documentReadCount<this.fs?(Dl()<=Pt.DEBUG&&Ge("QueryEngine","SDK will not create cache indexes for query:",Ml(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Se.resolve()):(Dl()<=Pt.DEBUG&&Ge("QueryEngine","Query:",Ml(n),"scans",o.documentReadCount,"local documents and returns",h,"documents as results."),o.documentReadCount>this.gs*h?(Dl()<=Pt.DEBUG&&Ge("QueryEngine","The SDK decides to create cache indexes for query:",Ml(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vs(n))):Se.resolve())}ys(e,n){if(Dy(n))return Se.resolve(null);let o=vs(n);return this.indexManager.getIndexType(e,o).next((h=>h===0?null:(n.limit!==null&&h===1&&(n=d0(n,null,"F"),o=vs(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next((m=>{const E=Bt(...m);return this.ps.getDocuments(e,E).next((v=>this.indexManager.getMinOffset(e,o).next((C=>{const w=this.Ds(n,v);return this.Cs(n,w,E,C.readTime)?this.ys(e,d0(n,null,"F")):this.vs(e,w,n,C)}))))})))))}ws(e,n,o,h){return Dy(n)||h.isEqual(ht.min())?Se.resolve(null):this.ps.getDocuments(e,o).next((m=>{const E=this.Ds(n,m);return this.Cs(n,E,o,h)?Se.resolve(null):(Dl()<=Pt.DEBUG&&Ge("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Ml(n)),this.vs(e,E,n,BC(h,iu)).next((v=>v)))}))}Ds(e,n){let o=new ai(XE(e));return n.forEach(((h,m)=>{Df(e,m)&&(o=o.add(m))})),o}Cs(e,n,o,h){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const m=e.limitType==="F"?n.last():n.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(h)>0)}Ss(e,n,o){return Dl()<=Pt.DEBUG&&Ge("QueryEngine","Using full collection scan to execute query:",Ml(n)),this.ps.getDocumentsMatchingQuery(e,n,so.min(),o)}vs(e,n,o,h){return this.ps.getDocumentsMatchingQuery(e,o,h).next((m=>(n.forEach((E=>{m=m.insert(E.key,E)})),m)))}}const J0="LocalStore",pb=3e8;class yb{constructor(e,n,o,h){this.persistence=e,this.Fs=n,this.serializer=h,this.Ms=new Pn(kt),this.xs=new Jo((m=>H0(m)),G0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(o)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sb(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function _b(a,e,n,o){return new yb(a,e,n,o)}async function mx(a,e){const n=gt(a);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let h;return n.mutationQueue.getAllMutationBatches(o).next((m=>(h=m,n.Bs(e),n.mutationQueue.getAllMutationBatches(o)))).next((m=>{const E=[],v=[];let C=Bt();for(const w of h){E.push(w.batchId);for(const D of w.mutations)C=C.add(D.key)}for(const w of m){v.push(w.batchId);for(const D of w.mutations)C=C.add(D.key)}return n.localDocuments.getDocuments(o,C).next((w=>({Ls:w,removedBatchIds:E,addedBatchIds:v})))}))}))}function Eb(a,e){const n=gt(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const h=e.batch.keys(),m=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(v,C,w,D){const M=w.batch,G=M.keys();let te=Se.resolve();return G.forEach((Ee=>{te=te.next((()=>D.getEntry(C,Ee))).next((me=>{const ye=w.docVersions.get(Ee);tn(ye!==null,48541),me.version.compareTo(ye)<0&&(M.applyToRemoteDocument(me,w),me.isValidDocument()&&(me.setReadTime(w.commitVersion),D.addEntry(me)))}))})),te.next((()=>v.mutationQueue.removeMutationBatch(C,M)))})(n,o,e,m).next((()=>m.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,h,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(v){let C=Bt();for(let w=0;w<v.mutationResults.length;++w)v.mutationResults[w].transformResults.length>0&&(C=C.add(v.batch.mutations[w].key));return C})(e)))).next((()=>n.localDocuments.getDocuments(o,h)))}))}function px(a){const e=gt(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function xb(a,e){const n=gt(a),o=e.snapshotVersion;let h=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(m=>{const E=n.Ns.newChangeBuffer({trackRemovals:!0});h=n.Ms;const v=[];e.targetChanges.forEach(((D,M)=>{const G=h.get(M);if(!G)return;v.push(n.Pi.removeMatchingKeys(m,D.removedDocuments,M).next((()=>n.Pi.addMatchingKeys(m,D.addedDocuments,M))));let te=G.withSequenceNumber(m.currentSequenceNumber);e.targetMismatches.get(M)!==null?te=te.withResumeToken(Ni.EMPTY_BYTE_STRING,ht.min()).withLastLimboFreeSnapshotVersion(ht.min()):D.resumeToken.approximateByteSize()>0&&(te=te.withResumeToken(D.resumeToken,o)),h=h.insert(M,te),(function(me,ye,De){return me.resumeToken.approximateByteSize()===0||ye.snapshotVersion.toMicroseconds()-me.snapshotVersion.toMicroseconds()>=pb?!0:De.addedDocuments.size+De.modifiedDocuments.size+De.removedDocuments.size>0})(G,te,D)&&v.push(n.Pi.updateTargetData(m,te))}));let C=da(),w=Bt();if(e.documentUpdates.forEach((D=>{e.resolvedLimboDocuments.has(D)&&v.push(n.persistence.referenceDelegate.updateLimboDocument(m,D))})),v.push(Ab(m,E,e.documentUpdates).next((D=>{C=D.ks,w=D.qs}))),!o.isEqual(ht.min())){const D=n.Pi.getLastRemoteSnapshotVersion(m).next((M=>n.Pi.setTargetsMetadata(m,m.currentSequenceNumber,o)));v.push(D)}return Se.waitFor(v).next((()=>E.apply(m))).next((()=>n.localDocuments.getLocalViewOfDocuments(m,C,w))).next((()=>C))})).then((m=>(n.Ms=h,m)))}function Ab(a,e,n){let o=Bt(),h=Bt();return n.forEach((m=>o=o.add(m))),e.getEntries(a,o).next((m=>{let E=da();return n.forEach(((v,C)=>{const w=m.get(v);C.isFoundDocument()!==w.isFoundDocument()&&(h=h.add(v)),C.isNoDocument()&&C.version.isEqual(ht.min())?(e.removeEntry(v,C.readTime),E=E.insert(v,C)):!w.isValidDocument()||C.version.compareTo(w.version)>0||C.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(C),E=E.insert(v,C)):Ge(J0,"Ignoring outdated watch update for ",v,". Current version:",w.version," Watch version:",C.version)})),{ks:E,qs:h}}))}function wb(a,e){const n=gt(a);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=F0),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function Tb(a,e){const n=gt(a);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let h;return n.Pi.getTargetData(o,e).next((m=>m?(h=m,Se.resolve(h)):n.Pi.allocateTargetId(o).next((E=>(h=new $a(e,E,"TargetPurposeListen",o.currentSequenceNumber),n.Pi.addTargetData(o,h).next((()=>h)))))))})).then((o=>{const h=n.Ms.get(o.targetId);return(h===null||o.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(o.targetId,o),n.xs.set(e,o.targetId)),o}))}async function _0(a,e,n){const o=gt(a),h=o.Ms.get(e),m=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",m,(E=>o.persistence.referenceDelegate.removeTarget(E,h)))}catch(E){if(!ec(E))throw E;Ge(J0,`Failed to update sequence numbers for target ${e}: ${E}`)}o.Ms=o.Ms.remove(e),o.xs.delete(h.target)}function qy(a,e,n){const o=gt(a);let h=ht.min(),m=Bt();return o.persistence.runTransaction("Execute query","readwrite",(E=>(function(C,w,D){const M=gt(C),G=M.xs.get(D);return G!==void 0?Se.resolve(M.Ms.get(G)):M.Pi.getTargetData(w,D)})(o,E,vs(e)).next((v=>{if(v)return h=v.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(E,v.targetId).next((C=>{m=C}))})).next((()=>o.Fs.getDocumentsMatchingQuery(E,e,n?h:ht.min(),n?m:Bt()))).next((v=>(vb(o,cS(e),v),{documents:v,Qs:m})))))}function vb(a,e,n){let o=a.Os.get(e)||ht.min();n.forEach(((h,m)=>{m.readTime.compareTo(o)>0&&(o=m.readTime)})),a.Os.set(e,o)}class Xy{constructor(){this.activeTargetIds=mS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Cb{constructor(){this.Mo=new Xy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,o){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Xy,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Sb{Oo(e){}shutdown(){}}const Yy="ConnectivityMonitor";class Wy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ge(Yy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ge(Yy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Vh=null;function E0(){return Vh===null?Vh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vh++,"0x"+Vh.toString(16)}const q1="RestConnection",bb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ib{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),h=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${o}/databases/${h}`,this.Wo=this.databaseId.database===of?`project_id=${o}`:`project_id=${o}&database_id=${h}`}Go(e,n,o,h,m){const E=E0(),v=this.zo(e,n.toUriEncodedString());Ge(q1,`Sending RPC '${e}' ${E}:`,v,o);const C={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(C,h,m);const{host:w}=new URL(v),D=Kl(w);return this.Jo(e,v,C,o,D).then((M=>(Ge(q1,`Received RPC '${e}' ${E}: `,M),M)),(M=>{throw Hl(q1,`RPC '${e}' ${E} failed with error: `,M,"url: ",v,"request:",o),M}))}Ho(e,n,o,h,m,E){return this.Go(e,n,o,h,m)}jo(e,n,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Jl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((h,m)=>e[m]=h)),o&&o.headers.forEach(((h,m)=>e[m]=h))}zo(e,n){const o=bb[e];return`${this.Uo}/v1/${n}:${o}`}terminate(){}}class Rb{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ui="WebChannelConnection";class Nb extends Ib{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,o,h,m){const E=E0();return new Promise(((v,C)=>{const w=new EE;w.setWithCredentials(!0),w.listenOnce(xE.COMPLETE,(()=>{try{switch(w.getLastErrorCode()){case qh.NO_ERROR:const M=w.getResponseJson();Ge(Ui,`XHR for RPC '${e}' ${E} received:`,JSON.stringify(M)),v(M);break;case qh.TIMEOUT:Ge(Ui,`RPC '${e}' ${E} timed out`),C(new ze(we.DEADLINE_EXCEEDED,"Request time out"));break;case qh.HTTP_ERROR:const G=w.getStatus();if(Ge(Ui,`RPC '${e}' ${E} failed with status:`,G,"response text:",w.getResponseText()),G>0){let te=w.getResponseJson();Array.isArray(te)&&(te=te[0]);const Ee=te?.error;if(Ee&&Ee.status&&Ee.message){const me=(function(De){const Le=De.toLowerCase().replace(/_/g,"-");return Object.values(we).indexOf(Le)>=0?Le:we.UNKNOWN})(Ee.status);C(new ze(me,Ee.message))}else C(new ze(we.UNKNOWN,"Server responded with status "+w.getStatus()))}else C(new ze(we.UNAVAILABLE,"Connection failed."));break;default:lt(9055,{l_:e,streamId:E,h_:w.getLastErrorCode(),P_:w.getLastError()})}}finally{Ge(Ui,`RPC '${e}' ${E} completed.`)}}));const D=JSON.stringify(h);Ge(Ui,`RPC '${e}' ${E} sending request:`,h),w.send(n,"POST",D,o,15)}))}T_(e,n,o){const h=E0(),m=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],E=TE(),v=wE(),C={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(C.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(C.useFetchStreams=!0),this.jo(C.initMessageHeaders,n,o),C.encodeInitMessageHeaders=!0;const D=m.join("");Ge(Ui,`Creating RPC '${e}' stream ${h}: ${D}`,C);const M=E.createWebChannel(D,C);this.I_(M);let G=!1,te=!1;const Ee=new Rb({Yo:ye=>{te?Ge(Ui,`Not sending because RPC '${e}' stream ${h} is closed:`,ye):(G||(Ge(Ui,`Opening RPC '${e}' stream ${h} transport.`),M.open(),G=!0),Ge(Ui,`RPC '${e}' stream ${h} sending:`,ye),M.send(ye))},Zo:()=>M.close()}),me=(ye,De,Le)=>{ye.listen(De,(pe=>{try{Le(pe)}catch(Ue){setTimeout((()=>{throw Ue}),0)}}))};return me(M,zc.EventType.OPEN,(()=>{te||(Ge(Ui,`RPC '${e}' stream ${h} transport opened.`),Ee.o_())})),me(M,zc.EventType.CLOSE,(()=>{te||(te=!0,Ge(Ui,`RPC '${e}' stream ${h} transport closed`),Ee.a_(),this.E_(M))})),me(M,zc.EventType.ERROR,(ye=>{te||(te=!0,Hl(Ui,`RPC '${e}' stream ${h} transport errored. Name:`,ye.name,"Message:",ye.message),Ee.a_(new ze(we.UNAVAILABLE,"The operation could not be completed")))})),me(M,zc.EventType.MESSAGE,(ye=>{if(!te){const De=ye.data[0];tn(!!De,16349);const Le=De,pe=Le?.error||Le[0]?.error;if(pe){Ge(Ui,`RPC '${e}' stream ${h} received error:`,pe);const Ue=pe.status;let nt=(function(F){const B=$n[F];if(B!==void 0)return ix(B)})(Ue),Ve=pe.message;nt===void 0&&(nt=we.INTERNAL,Ve="Unknown error status: "+Ue+" with message "+pe.message),te=!0,Ee.a_(new ze(nt,Ve)),M.close()}else Ge(Ui,`RPC '${e}' stream ${h} received:`,De),Ee.u_(De)}})),me(v,AE.STAT_EVENT,(ye=>{ye.stat===a0.PROXY?Ge(Ui,`RPC '${e}' stream ${h} detected buffering proxy`):ye.stat===a0.NOPROXY&&Ge(Ui,`RPC '${e}' stream ${h} detected no buffering proxy`)})),setTimeout((()=>{Ee.__()}),0),Ee}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function X1(){return typeof document<"u"?document:null}function Bf(a){return new LS(a,!0)}class yx{constructor(e,n,o=1e3,h=1.5,m=6e4){this.Mi=e,this.timerId=n,this.d_=o,this.A_=h,this.R_=m,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),h=Math.max(0,n-o);h>0&&Ge("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,h,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Ky="PersistentStream";class _x{constructor(e,n,o,h,m,E,v,C){this.Mi=e,this.S_=o,this.b_=h,this.connection=m,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=v,this.listener=C,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yx(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===we.RESOURCE_EXHAUSTED?(fa(n.toString()),fa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===we.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,h])=>{this.D_===n&&this.G_(o,h)}),(o=>{e((()=>{const h=new ze(we.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(h)}))}))}G_(e,n){const o=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((h=>{o((()=>this.z_(h)))})),this.stream.onMessage((h=>{o((()=>++this.F_==1?this.J_(h):this.onNext(h)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ge(Ky,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Ge(Ky,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ob extends _x{constructor(e,n,o,h,m,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,h,E),this.serializer=m}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=BS(this.serializer,e),o=(function(m){if(!("targetChange"in m))return ht.min();const E=m.targetChange;return E.targetIds&&E.targetIds.length?ht.min():E.readTime?Cs(E.readTime):ht.min()})(e);return this.listener.H_(n,o)}Y_(e){const n={};n.database=y0(this.serializer),n.addTarget=(function(m,E){let v;const C=E.target;if(v=h0(C)?{documents:FS(m,C)}:{query:jS(m,C).ft},v.targetId=E.targetId,E.resumeToken.approximateByteSize()>0){v.resumeToken=ax(m,E.resumeToken);const w=g0(m,E.expectedCount);w!==null&&(v.expectedCount=w)}else if(E.snapshotVersion.compareTo(ht.min())>0){v.readTime=df(m,E.snapshotVersion.toTimestamp());const w=g0(m,E.expectedCount);w!==null&&(v.expectedCount=w)}return v})(this.serializer,e);const o=HS(this.serializer,e);o&&(n.labels=o),this.q_(n)}Z_(e){const n={};n.database=y0(this.serializer),n.removeTarget=e,this.q_(n)}}class Db extends _x{constructor(e,n,o,h,m,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,h,E),this.serializer=m}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return tn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){tn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=US(e.writeResults,e.commitTime),o=Cs(e.commitTime);return this.listener.na(o,n)}ra(){const e={};e.database=y0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((o=>VS(this.serializer,o)))};this.q_(n)}}class Mb{}class Lb extends Mb{constructor(e,n,o,h){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=h,this.ia=!1}sa(){if(this.ia)throw new ze(we.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,o,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,E])=>this.connection.Go(e,m0(n,o),h,m,E))).catch((m=>{throw m.name==="FirebaseError"?(m.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new ze(we.UNKNOWN,m.toString())}))}Ho(e,n,o,h,m){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([E,v])=>this.connection.Ho(e,m0(n,o),h,E,v,m))).catch((E=>{throw E.name==="FirebaseError"?(E.code===we.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),E):new ze(we.UNKNOWN,E.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Pb{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fa(n),this.aa=!1):Ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Qo="RemoteStore";class kb{constructor(e,n,o,h,m){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=m,this.Aa.Oo((E=>{o.enqueueAndForget((async()=>{$o(this)&&(Ge(Qo,"Restarting streams for network reachability change."),await(async function(C){const w=gt(C);w.Ea.add(4),await Eu(w),w.Ra.set("Unknown"),w.Ea.delete(4),await Vf(w)})(this))}))})),this.Ra=new Pb(o,h)}}async function Vf(a){if($o(a))for(const e of a.da)await e(!0)}async function Eu(a){for(const e of a.da)await e(!1)}function Ex(a,e){const n=gt(a);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ng(n)?tg(n):tc(n).O_()&&eg(n,e))}function $0(a,e){const n=gt(a),o=tc(n);n.Ia.delete(e),o.O_()&&xx(n,e),n.Ia.size===0&&(o.O_()?o.L_():$o(n)&&n.Ra.set("Unknown"))}function eg(a,e){if(a.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ht.min())>0){const n=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}tc(a).Y_(e)}function xx(a,e){a.Va.Ue(e),tc(a).Z_(e)}function tg(a){a.Va=new NS({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),At:e=>a.Ia.get(e)||null,ht:()=>a.datastore.serializer.databaseId}),tc(a).start(),a.Ra.ua()}function ng(a){return $o(a)&&!tc(a).x_()&&a.Ia.size>0}function $o(a){return gt(a).Ea.size===0}function Ax(a){a.Va=void 0}async function Bb(a){a.Ra.set("Online")}async function Vb(a){a.Ia.forEach(((e,n)=>{eg(a,e)}))}async function Ub(a,e){Ax(a),ng(a)?(a.Ra.ha(e),tg(a)):a.Ra.set("Unknown")}async function Fb(a,e,n){if(a.Ra.set("Online"),e instanceof sx&&e.state===2&&e.cause)try{await(async function(h,m){const E=m.cause;for(const v of m.targetIds)h.Ia.has(v)&&(await h.remoteSyncer.rejectListen(v,E),h.Ia.delete(v),h.Va.removeTarget(v))})(a,e)}catch(o){Ge(Qo,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await mf(a,o)}else if(e instanceof Kh?a.Va.Ze(e):e instanceof rx?a.Va.st(e):a.Va.tt(e),!n.isEqual(ht.min()))try{const o=await px(a.localStore);n.compareTo(o)>=0&&await(function(m,E){const v=m.Va.Tt(E);return v.targetChanges.forEach(((C,w)=>{if(C.resumeToken.approximateByteSize()>0){const D=m.Ia.get(w);D&&m.Ia.set(w,D.withResumeToken(C.resumeToken,E))}})),v.targetMismatches.forEach(((C,w)=>{const D=m.Ia.get(C);if(!D)return;m.Ia.set(C,D.withResumeToken(Ni.EMPTY_BYTE_STRING,D.snapshotVersion)),xx(m,C);const M=new $a(D.target,C,w,D.sequenceNumber);eg(m,M)})),m.remoteSyncer.applyRemoteEvent(v)})(a,n)}catch(o){Ge(Qo,"Failed to raise snapshot:",o),await mf(a,o)}}async function mf(a,e,n){if(!ec(e))throw e;a.Ea.add(1),await Eu(a),a.Ra.set("Offline"),n||(n=()=>px(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{Ge(Qo,"Retrying IndexedDB access"),await n(),a.Ea.delete(1),await Vf(a)}))}function wx(a,e){return e().catch((n=>mf(a,n,e)))}async function Uf(a){const e=gt(a),n=co(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:F0;for(;jb(e);)try{const h=await wb(e.localStore,o);if(h===null){e.Ta.length===0&&n.L_();break}o=h.batchId,zb(e,h)}catch(h){await mf(e,h)}Tx(e)&&vx(e)}function jb(a){return $o(a)&&a.Ta.length<10}function zb(a,e){a.Ta.push(e);const n=co(a);n.O_()&&n.X_&&n.ea(e.mutations)}function Tx(a){return $o(a)&&!co(a).x_()&&a.Ta.length>0}function vx(a){co(a).start()}async function Hb(a){co(a).ra()}async function Gb(a){const e=co(a);for(const n of a.Ta)e.ea(n.mutations)}async function qb(a,e,n){const o=a.Ta.shift(),h=X0.from(o,e,n);await wx(a,(()=>a.remoteSyncer.applySuccessfulWrite(h))),await Uf(a)}async function Xb(a,e){e&&co(a).X_&&await(async function(o,h){if((function(E){return bS(E)&&E!==we.ABORTED})(h.code)){const m=o.Ta.shift();co(o).B_(),await wx(o,(()=>o.remoteSyncer.rejectFailedWrite(m.batchId,h))),await Uf(o)}})(a,e),Tx(a)&&vx(a)}async function Qy(a,e){const n=gt(a);n.asyncQueue.verifyOperationInProgress(),Ge(Qo,"RemoteStore received new credentials");const o=$o(n);n.Ea.add(3),await Eu(n),o&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Vf(n)}async function Yb(a,e){const n=gt(a);e?(n.Ea.delete(2),await Vf(n)):e||(n.Ea.add(2),await Eu(n),n.Ra.set("Unknown"))}function tc(a){return a.ma||(a.ma=(function(n,o,h){const m=gt(n);return m.sa(),new Ob(o,m.connection,m.authCredentials,m.appCheckCredentials,m.serializer,h)})(a.datastore,a.asyncQueue,{Xo:Bb.bind(null,a),t_:Vb.bind(null,a),r_:Ub.bind(null,a),H_:Fb.bind(null,a)}),a.da.push((async e=>{e?(a.ma.B_(),ng(a)?tg(a):a.Ra.set("Unknown")):(await a.ma.stop(),Ax(a))}))),a.ma}function co(a){return a.fa||(a.fa=(function(n,o,h){const m=gt(n);return m.sa(),new Db(o,m.connection,m.authCredentials,m.appCheckCredentials,m.serializer,h)})(a.datastore,a.asyncQueue,{Xo:()=>Promise.resolve(),t_:Hb.bind(null,a),r_:Xb.bind(null,a),ta:Gb.bind(null,a),na:qb.bind(null,a)}),a.da.push((async e=>{e?(a.fa.B_(),await Uf(a)):(await a.fa.stop(),a.Ta.length>0&&(Ge(Qo,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}class ig{constructor(e,n,o,h,m){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=h,this.removalCallback=m,this.deferred=new ca,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((E=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,h,m){const E=Date.now()+o,v=new ig(e,n,E,h,m);return v.start(o),v}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ze(we.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rg(a,e){if(fa("AsyncQueue",`${e}: ${a}`),ec(a))return new ze(we.UNAVAILABLE,`${e}: ${a}`);throw a}class jl{static emptySet(e){return new jl(e.comparator)}constructor(e){this.comparator=e?(n,o)=>e(n,o)||$e.comparator(n.key,o.key):(n,o)=>$e.comparator(n.key,o.key),this.keyedMap=Hc(),this.sortedSet=new Pn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,o)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const h=n.getNext().key,m=o.getNext().key;if(!h.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new jl;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class Zy{constructor(){this.ga=new Pn($e.comparator)}track(e){const n=e.doc.key,o=this.ga.get(n);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(n,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(n):e.type===1&&o.type===2?this.ga=this.ga.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):lt(63341,{Rt:e,pa:o}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,o)=>{e.push(o)})),e}}class Wl{constructor(e,n,o,h,m,E,v,C,w){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=h,this.mutatedKeys=m,this.fromCache=E,this.syncStateChanged=v,this.excludesMetadataChanges=C,this.hasCachedResults=w}static fromInitialDocuments(e,n,o,h,m){const E=[];return n.forEach((v=>{E.push({type:0,doc:v})})),new Wl(e,n,jl.emptySet(n),E,o,h,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let h=0;h<n.length;h++)if(n[h].type!==o[h].type||!n[h].doc.isEqual(o[h].doc))return!1;return!0}}class Wb{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Kb{constructor(){this.queries=Jy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,o){const h=gt(n),m=h.queries;h.queries=Jy(),m.forEach(((E,v)=>{for(const C of v.Sa)C.onError(o)}))})(this,new ze(we.ABORTED,"Firestore shutting down"))}}function Jy(){return new Jo((a=>qE(a)),Of)}async function sg(a,e){const n=gt(a);let o=3;const h=e.query;let m=n.queries.get(h);m?!m.ba()&&e.Da()&&(o=2):(m=new Wb,o=e.Da()?0:1);try{switch(o){case 0:m.wa=await n.onListen(h,!0);break;case 1:m.wa=await n.onListen(h,!1);break;case 2:await n.onFirstRemoteStoreListen(h)}}catch(E){const v=rg(E,`Initialization of query '${Ml(e.query)}' failed`);return void e.onError(v)}n.queries.set(h,m),m.Sa.push(e),e.va(n.onlineState),m.wa&&e.Fa(m.wa)&&og(n)}async function ag(a,e){const n=gt(a),o=e.query;let h=3;const m=n.queries.get(o);if(m){const E=m.Sa.indexOf(e);E>=0&&(m.Sa.splice(E,1),m.Sa.length===0?h=e.Da()?0:1:!m.ba()&&e.Da()&&(h=2))}switch(h){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function Qb(a,e){const n=gt(a);let o=!1;for(const h of e){const m=h.query,E=n.queries.get(m);if(E){for(const v of E.Sa)v.Fa(h)&&(o=!0);E.wa=h}}o&&og(n)}function Zb(a,e,n){const o=gt(a),h=o.queries.get(e);if(h)for(const m of h.Sa)m.onError(n);o.queries.delete(e)}function og(a){a.Ca.forEach((e=>{e.next()}))}var x0,$y;($y=x0||(x0={})).Ma="default",$y.Cache="cache";class lg{constructor(e,n,o){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const h of e.docChanges)h.type!==3&&o.push(h);e=new Wl(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const o=n!=="Offline";return(!this.options.qa||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Wl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==x0.Cache}}class Cx{constructor(e){this.key=e}}class Sx{constructor(e){this.key=e}}class Jb{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Bt(),this.mutatedKeys=Bt(),this.eu=XE(e),this.tu=new jl(this.eu)}get nu(){return this.Ya}ru(e,n){const o=n?n.iu:new Zy,h=n?n.tu:this.tu;let m=n?n.mutatedKeys:this.mutatedKeys,E=h,v=!1;const C=this.query.limitType==="F"&&h.size===this.query.limit?h.last():null,w=this.query.limitType==="L"&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal(((D,M)=>{const G=h.get(D),te=Df(this.query,M)?M:null,Ee=!!G&&this.mutatedKeys.has(G.key),me=!!te&&(te.hasLocalMutations||this.mutatedKeys.has(te.key)&&te.hasCommittedMutations);let ye=!1;G&&te?G.data.isEqual(te.data)?Ee!==me&&(o.track({type:3,doc:te}),ye=!0):this.su(G,te)||(o.track({type:2,doc:te}),ye=!0,(C&&this.eu(te,C)>0||w&&this.eu(te,w)<0)&&(v=!0)):!G&&te?(o.track({type:0,doc:te}),ye=!0):G&&!te&&(o.track({type:1,doc:G}),ye=!0,(C||w)&&(v=!0)),ye&&(te?(E=E.add(te),m=me?m.add(D):m.delete(D)):(E=E.delete(D),m=m.delete(D)))})),this.query.limit!==null)for(;E.size>this.query.limit;){const D=this.query.limitType==="F"?E.last():E.first();E=E.delete(D.key),m=m.delete(D.key),o.track({type:1,doc:D})}return{tu:E,iu:o,Cs:v,mutatedKeys:m}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,h){const m=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const E=e.iu.ya();E.sort(((D,M)=>(function(te,Ee){const me=ye=>{switch(ye){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt(20277,{Rt:ye})}};return me(te)-me(Ee)})(D.type,M.type)||this.eu(D.doc,M.doc))),this.ou(o),h=h??!1;const v=n&&!h?this._u():[],C=this.Xa.size===0&&this.current&&!h?1:0,w=C!==this.Za;return this.Za=C,E.length!==0||w?{snapshot:new Wl(this.query,e.tu,m,E,e.mutatedKeys,C===0,w,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:v}:{au:v}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Zy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Bt(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const n=[];return e.forEach((o=>{this.Xa.has(o)||n.push(new Sx(o))})),this.Xa.forEach((o=>{e.has(o)||n.push(new Cx(o))})),n}cu(e){this.Ya=e.Qs,this.Xa=Bt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Wl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cg="SyncEngine";class $b{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class eI{constructor(e){this.key=e,this.hu=!1}}class tI{constructor(e,n,o,h,m,E){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=h,this.currentUser=m,this.maxConcurrentLimboResolutions=E,this.Pu={},this.Tu=new Jo((v=>qE(v)),Of),this.Iu=new Map,this.Eu=new Set,this.du=new Pn($e.comparator),this.Au=new Map,this.Ru=new K0,this.Vu={},this.mu=new Map,this.fu=Yl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nI(a,e,n=!0){const o=Dx(a);let h;const m=o.Tu.get(e);return m?(o.sharedClientState.addLocalQueryTarget(m.targetId),h=m.view.lu()):h=await bx(o,e,n,!0),h}async function iI(a,e){const n=Dx(a);await bx(n,e,!0,!1)}async function bx(a,e,n,o){const h=await Tb(a.localStore,vs(e)),m=h.targetId,E=a.sharedClientState.addLocalQueryTarget(m,n);let v;return o&&(v=await rI(a,e,m,E==="current",h.resumeToken)),a.isPrimaryClient&&n&&Ex(a.remoteStore,h),v}async function rI(a,e,n,o,h){a.pu=(M,G,te)=>(async function(me,ye,De,Le){let pe=ye.view.ru(De);pe.Cs&&(pe=await qy(me.localStore,ye.query,!1).then((({documents:V})=>ye.view.ru(V,pe))));const Ue=Le&&Le.targetChanges.get(ye.targetId),nt=Le&&Le.targetMismatches.get(ye.targetId)!=null,Ve=ye.view.applyChanges(pe,me.isPrimaryClient,Ue,nt);return t_(me,ye.targetId,Ve.au),Ve.snapshot})(a,M,G,te);const m=await qy(a.localStore,e,!0),E=new Jb(e,m.Qs),v=E.ru(m.documents),C=_u.createSynthesizedTargetChangeForCurrentChange(n,o&&a.onlineState!=="Offline",h),w=E.applyChanges(v,a.isPrimaryClient,C);t_(a,n,w.au);const D=new $b(e,n,E);return a.Tu.set(e,D),a.Iu.has(n)?a.Iu.get(n).push(e):a.Iu.set(n,[e]),w.snapshot}async function sI(a,e,n){const o=gt(a),h=o.Tu.get(e),m=o.Iu.get(h.targetId);if(m.length>1)return o.Iu.set(h.targetId,m.filter((E=>!Of(E,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(h.targetId),o.sharedClientState.isActiveQueryTarget(h.targetId)||await _0(o.localStore,h.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(h.targetId),n&&$0(o.remoteStore,h.targetId),A0(o,h.targetId)})).catch($l)):(A0(o,h.targetId),await _0(o.localStore,h.targetId,!0))}async function aI(a,e){const n=gt(a),o=n.Tu.get(e),h=n.Iu.get(o.targetId);n.isPrimaryClient&&h.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),$0(n.remoteStore,o.targetId))}async function oI(a,e,n){const o=gI(a);try{const h=await(function(E,v){const C=gt(E),w=An.now(),D=v.reduce(((te,Ee)=>te.add(Ee.key)),Bt());let M,G;return C.persistence.runTransaction("Locally write mutations","readwrite",(te=>{let Ee=da(),me=Bt();return C.Ns.getEntries(te,D).next((ye=>{Ee=ye,Ee.forEach(((De,Le)=>{Le.isValidDocument()||(me=me.add(De))}))})).next((()=>C.localDocuments.getOverlayedDocuments(te,Ee))).next((ye=>{M=ye;const De=[];for(const Le of v){const pe=wS(Le,M.get(Le.key).overlayedDocument);pe!=null&&De.push(new mo(Le.key,pe,BE(pe.value.mapValue),Ji.exists(!0)))}return C.mutationQueue.addMutationBatch(te,w,De,v)})).next((ye=>{G=ye;const De=ye.applyToLocalDocumentSet(M,me);return C.documentOverlayCache.saveOverlays(te,ye.batchId,De)}))})).then((()=>({batchId:G.batchId,changes:WE(M)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(h.batchId),(function(E,v,C){let w=E.Vu[E.currentUser.toKey()];w||(w=new Pn(kt)),w=w.insert(v,C),E.Vu[E.currentUser.toKey()]=w})(o,h.batchId,n),await xu(o,h.changes),await Uf(o.remoteStore)}catch(h){const m=rg(h,"Failed to persist write");n.reject(m)}}async function Ix(a,e){const n=gt(a);try{const o=await xb(n.localStore,e);e.targetChanges.forEach(((h,m)=>{const E=n.Au.get(m);E&&(tn(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1,22616),h.addedDocuments.size>0?E.hu=!0:h.modifiedDocuments.size>0?tn(E.hu,14607):h.removedDocuments.size>0&&(tn(E.hu,42227),E.hu=!1))})),await xu(n,o,e)}catch(o){await $l(o)}}function e_(a,e,n){const o=gt(a);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const h=[];o.Tu.forEach(((m,E)=>{const v=E.view.va(e);v.snapshot&&h.push(v.snapshot)})),(function(E,v){const C=gt(E);C.onlineState=v;let w=!1;C.queries.forEach(((D,M)=>{for(const G of M.Sa)G.va(v)&&(w=!0)})),w&&og(C)})(o.eventManager,e),h.length&&o.Pu.H_(h),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function lI(a,e,n){const o=gt(a);o.sharedClientState.updateQueryState(e,"rejected",n);const h=o.Au.get(e),m=h&&h.key;if(m){let E=new Pn($e.comparator);E=E.insert(m,ji.newNoDocument(m,ht.min()));const v=Bt().add(m),C=new kf(ht.min(),new Map,new Pn(kt),E,v);await Ix(o,C),o.du=o.du.remove(m),o.Au.delete(e),ug(o)}else await _0(o.localStore,e,!1).then((()=>A0(o,e,n))).catch($l)}async function cI(a,e){const n=gt(a),o=e.batch.batchId;try{const h=await Eb(n.localStore,e);Nx(n,o,null),Rx(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await xu(n,h)}catch(h){await $l(h)}}async function uI(a,e,n){const o=gt(a);try{const h=await(function(E,v){const C=gt(E);return C.persistence.runTransaction("Reject batch","readwrite-primary",(w=>{let D;return C.mutationQueue.lookupMutationBatch(w,v).next((M=>(tn(M!==null,37113),D=M.keys(),C.mutationQueue.removeMutationBatch(w,M)))).next((()=>C.mutationQueue.performConsistencyCheck(w))).next((()=>C.documentOverlayCache.removeOverlaysForBatchId(w,D,v))).next((()=>C.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,D))).next((()=>C.localDocuments.getDocuments(w,D)))}))})(o.localStore,e);Nx(o,e,n),Rx(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await xu(o,h)}catch(h){await $l(h)}}function Rx(a,e){(a.mu.get(e)||[]).forEach((n=>{n.resolve()})),a.mu.delete(e)}function Nx(a,e,n){const o=gt(a);let h=o.Vu[o.currentUser.toKey()];if(h){const m=h.get(e);m&&(n?m.reject(n):m.resolve(),h=h.remove(e)),o.Vu[o.currentUser.toKey()]=h}}function A0(a,e,n=null){a.sharedClientState.removeLocalQueryTarget(e);for(const o of a.Iu.get(e))a.Tu.delete(o),n&&a.Pu.yu(o,n);a.Iu.delete(e),a.isPrimaryClient&&a.Ru.jr(e).forEach((o=>{a.Ru.containsKey(o)||Ox(a,o)}))}function Ox(a,e){a.Eu.delete(e.path.canonicalString());const n=a.du.get(e);n!==null&&($0(a.remoteStore,n),a.du=a.du.remove(e),a.Au.delete(n),ug(a))}function t_(a,e,n){for(const o of n)o instanceof Cx?(a.Ru.addReference(o.key,e),hI(a,o)):o instanceof Sx?(Ge(cg,"Document no longer in limbo: "+o.key),a.Ru.removeReference(o.key,e),a.Ru.containsKey(o.key)||Ox(a,o.key)):lt(19791,{wu:o})}function hI(a,e){const n=e.key,o=n.path.canonicalString();a.du.get(n)||a.Eu.has(o)||(Ge(cg,"New document in limbo: "+n),a.Eu.add(o),ug(a))}function ug(a){for(;a.Eu.size>0&&a.du.size<a.maxConcurrentLimboResolutions;){const e=a.Eu.values().next().value;a.Eu.delete(e);const n=new $e(mn.fromString(e)),o=a.fu.next();a.Au.set(o,new eI(n)),a.du=a.du.insert(n,o),Ex(a.remoteStore,new $a(vs(Nf(n.path)),o,"TargetPurposeLimboResolution",bf.ce))}}async function xu(a,e,n){const o=gt(a),h=[],m=[],E=[];o.Tu.isEmpty()||(o.Tu.forEach(((v,C)=>{E.push(o.pu(C,e,n).then((w=>{if((w||n)&&o.isPrimaryClient){const D=w?!w.fromCache:n?.targetChanges.get(C.targetId)?.current;o.sharedClientState.updateQueryState(C.targetId,D?"current":"not-current")}if(w){h.push(w);const D=Z0.As(C.targetId,w);m.push(D)}})))})),await Promise.all(E),o.Pu.H_(h),await(async function(C,w){const D=gt(C);try{await D.persistence.runTransaction("notifyLocalViewChanges","readwrite",(M=>Se.forEach(w,(G=>Se.forEach(G.Es,(te=>D.persistence.referenceDelegate.addReference(M,G.targetId,te))).next((()=>Se.forEach(G.ds,(te=>D.persistence.referenceDelegate.removeReference(M,G.targetId,te)))))))))}catch(M){if(!ec(M))throw M;Ge(J0,"Failed to update sequence numbers: "+M)}for(const M of w){const G=M.targetId;if(!M.fromCache){const te=D.Ms.get(G),Ee=te.snapshotVersion,me=te.withLastLimboFreeSnapshotVersion(Ee);D.Ms=D.Ms.insert(G,me)}}})(o.localStore,m))}async function fI(a,e){const n=gt(a);if(!n.currentUser.isEqual(e)){Ge(cg,"User change. New user:",e.toKey());const o=await mx(n.localStore,e);n.currentUser=e,(function(m,E){m.mu.forEach((v=>{v.forEach((C=>{C.reject(new ze(we.CANCELLED,E))}))})),m.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await xu(n,o.Ls)}}function dI(a,e){const n=gt(a),o=n.Au.get(e);if(o&&o.hu)return Bt().add(o.key);{let h=Bt();const m=n.Iu.get(e);if(!m)return h;for(const E of m){const v=n.Tu.get(E);h=h.unionWith(v.view.nu)}return h}}function Dx(a){const e=gt(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ix.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lI.bind(null,e),e.Pu.H_=Qb.bind(null,e.eventManager),e.Pu.yu=Zb.bind(null,e.eventManager),e}function gI(a){const e=gt(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uI.bind(null,e),e}class pf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return _b(this.persistence,new mb,e.initialUser,this.serializer)}Cu(e){return new gx(Q0.mi,this.serializer)}Du(e){return new Cb}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pf.provider={build:()=>new pf};class mI extends pf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){tn(this.persistence.referenceDelegate instanceof gf,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new eb(o,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ur.withCacheSize(this.cacheSizeBytes):ur.DEFAULT;return new gx((o=>gf.mi(o,n)),this.serializer)}}class w0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>e_(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=fI.bind(null,this.syncEngine),await Yb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Kb})()}createDatastore(e){const n=Bf(e.databaseInfo.databaseId),o=(function(m){return new Nb(m)})(e.databaseInfo);return(function(m,E,v,C){return new Lb(m,E,v,C)})(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return(function(o,h,m,E,v){return new kb(o,h,m,E,v)})(this.localStore,this.datastore,e.asyncQueue,(n=>e_(this.syncEngine,n,0)),(function(){return Wy.v()?new Wy:new Sb})())}createSyncEngine(e,n){return(function(h,m,E,v,C,w,D){const M=new tI(h,m,E,v,C,w);return D&&(M.gu=!0),M})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const o=gt(n);Ge(Qo,"RemoteStore shutting down."),o.Ea.add(5),await Eu(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}w0.provider={build:()=>new w0};class hg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fa("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const uo="FirestoreClient";class pI{constructor(e,n,o,h,m){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=h,this.user=Fi.UNAUTHENTICATED,this.clientId=U0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=m,this.authCredentials.start(o,(async E=>{Ge(uo,"Received user=",E.uid),await this.authCredentialListener(E),this.user=E})),this.appCheckCredentials.start(o,(E=>(Ge(uo,"Received new app check token=",E),this.appCheckCredentialListener(E,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ca;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=rg(n,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function Y1(a,e){a.asyncQueue.verifyOperationInProgress(),Ge(uo,"Initializing OfflineComponentProvider");const n=a.configuration;await e.initialize(n);let o=n.initialUser;a.setCredentialChangeListener((async h=>{o.isEqual(h)||(await mx(e.localStore,h),o=h)})),e.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=e}async function n_(a,e){a.asyncQueue.verifyOperationInProgress();const n=await yI(a);Ge(uo,"Initializing OnlineComponentProvider"),await e.initialize(n,a.configuration),a.setCredentialChangeListener((o=>Qy(e.remoteStore,o))),a.setAppCheckTokenChangeListener(((o,h)=>Qy(e.remoteStore,h))),a._onlineComponents=e}async function yI(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){Ge(uo,"Using user provided OfflineComponentProvider");try{await Y1(a,a._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(h){return h.name==="FirebaseError"?h.code===we.FAILED_PRECONDITION||h.code===we.UNIMPLEMENTED:!(typeof DOMException<"u"&&h instanceof DOMException)||h.code===22||h.code===20||h.code===11})(n))throw n;Hl("Error using user provided cache. Falling back to memory cache: "+n),await Y1(a,new pf)}}else Ge(uo,"Using default OfflineComponentProvider"),await Y1(a,new mI(void 0));return a._offlineComponents}async function Mx(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(Ge(uo,"Using user provided OnlineComponentProvider"),await n_(a,a._uninitializedComponentsProvider._online)):(Ge(uo,"Using default OnlineComponentProvider"),await n_(a,new w0))),a._onlineComponents}function _I(a){return Mx(a).then((e=>e.syncEngine))}async function yf(a){const e=await Mx(a),n=e.eventManager;return n.onListen=nI.bind(null,e.syncEngine),n.onUnlisten=sI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=aI.bind(null,e.syncEngine),n}function EI(a,e,n={}){const o=new ca;return a.asyncQueue.enqueueAndForget((async()=>(function(m,E,v,C,w){const D=new hg({next:G=>{D.Nu(),E.enqueueAndForget((()=>ag(m,M)));const te=G.docs.has(v);!te&&G.fromCache?w.reject(new ze(we.UNAVAILABLE,"Failed to get document because the client is offline.")):te&&G.fromCache&&C&&C.source==="server"?w.reject(new ze(we.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(G)},error:G=>w.reject(G)}),M=new lg(Nf(v.path),D,{includeMetadataChanges:!0,qa:!0});return sg(m,M)})(await yf(a),a.asyncQueue,e,n,o))),o.promise}function xI(a,e,n={}){const o=new ca;return a.asyncQueue.enqueueAndForget((async()=>(function(m,E,v,C,w){const D=new hg({next:G=>{D.Nu(),E.enqueueAndForget((()=>ag(m,M))),G.fromCache&&C.source==="server"?w.reject(new ze(we.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(G)},error:G=>w.reject(G)}),M=new lg(v,D,{includeMetadataChanges:!0,qa:!0});return sg(m,M)})(await yf(a),a.asyncQueue,e,n,o))),o.promise}function Lx(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}const i_=new Map;const Px="firestore.googleapis.com",r_=!0;class s_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ze(we.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Px,this.ssl=r_}else this.host=e.host,this.ssl=e.ssl??r_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JS)throw new ze(we.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lx(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ze(we.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ze(we.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ze(we.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,h){return o.timeoutSeconds===h.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ff{constructor(e,n,o,h){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ze(we.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ze(we.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new SC;switch(o.type){case"firstParty":return new NC(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new ze(we.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=i_.get(n);o&&(Ge("ComponentProvider","Removing Datastore"),i_.delete(n),o.terminate())})(this),Promise.resolve()}}function AI(a,e,n,o={}){a=Zi(a,Ff);const h=Kl(e),m=a._getSettings(),E={...m,emulatorOptions:a._getEmulatorOptions()},v=`${e}:${n}`;h&&(N_(`https://${v}`),O_("Firestore",!0)),m.host!==Px&&m.host!==v&&Hl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const C={...m,host:v,ssl:h,emulatorOptions:o};if(!qo(C,E)&&(a._setSettings(C),o.mockUserToken)){let w,D;if(typeof o.mockUserToken=="string")w=o.mockUserToken,D=Fi.MOCK_USER;else{w=Vw(o.mockUserToken,a._app?.options.projectId);const M=o.mockUserToken.sub||o.mockUserToken.user_id;if(!M)throw new ze(we.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new Fi(M)}a._authCredentials=new bC(new CE(w,D))}}class el{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new el(this.firestore,e,this._query)}}class jn{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ro(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jn(this.firestore,e,this._key)}toJSON(){return{type:jn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,o){if(mu(n,jn._jsonSchema))return new jn(e,o||null,new $e(mn.fromString(n.referencePath)))}}jn._jsonSchemaVersion="firestore/documentReference/1.0",jn._jsonSchema={type:ti("string",jn._jsonSchemaVersion),referencePath:ti("string")};class ro extends el{constructor(e,n,o){super(e,n,Nf(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new $e(e))}withConverter(e){return new ro(this.firestore,e,this._path)}}function Qi(a,e,...n){if(a=Wn(a),SE("collection","path",e),a instanceof Ff){const o=mn.fromString(e,...n);return _y(o),new ro(a,null,o)}{if(!(a instanceof jn||a instanceof ro))throw new ze(we.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(mn.fromString(e,...n));return _y(o),new ro(a.firestore,null,o)}}function os(a,e,...n){if(a=Wn(a),arguments.length===1&&(e=U0.newId()),SE("doc","path",e),a instanceof Ff){const o=mn.fromString(e,...n);return yy(o),new jn(a,null,new $e(o))}{if(!(a instanceof jn||a instanceof ro))throw new ze(we.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(mn.fromString(e,...n));return yy(o),new jn(a.firestore,a instanceof ro?a.converter:null,new $e(o))}}const a_="AsyncQueue";class o_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yx(this,"async_queue_retry"),this._c=()=>{const o=X1();o&&Ge(a_,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const n=X1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=X1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ca;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ec(e))throw e;Ge(a_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,fa("INTERNAL UNHANDLED ERROR: ",l_(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=n,n}enqueueAfterDelay(e,n,o){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const h=ig.createAndSchedule(this,e,n,o,(m=>this.hc(m)));return this.tc.push(h),h}uc(){this.nc&&lt(47125,{Pc:l_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function l_(a){let e=a.message||"";return a.stack&&(e=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),e}function c_(a){return(function(n,o){if(typeof n!="object"||n===null)return!1;const h=n;for(const m of o)if(m in h&&typeof h[m]=="function")return!0;return!1})(a,["next","error","complete"])}class Rs extends Ff{constructor(e,n,o,h){super(e,n,o,h),this.type="firestore",this._queue=new o_,this._persistenceKey=h?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o_(e),this._firestoreClient=void 0,await e}}}function wI(a,e){const n=typeof a=="object"?a:P_(),o=typeof a=="string"?a:of,h=R0(n,"firestore").getImmediate({identifier:o});if(!h._initialized){const m=kw("firestore");m&&AI(h,...m)}return h}function Au(a){if(a._terminated)throw new ze(we.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||TI(a),a._firestoreClient}function TI(a){const e=a._freezeSettings(),n=(function(h,m,E,v){return new YC(h,m,E,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Lx(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(a._databaseId,a._app?.options.appId||"",a._persistenceKey,e);a._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(a._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),a._firestoreClient=new pI(a._authCredentials,a._appCheckCredentials,a._queue,n,a._componentsProvider&&(function(h){const m=h?._online.build();return{_offline:h?._offline.build(m),_online:m}})(a._componentsProvider))}class Zr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zr(Ni.fromBase64String(e))}catch(n){throw new ze(we.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zr(Ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(mu(e,Zr._jsonSchema))return Zr.fromBase64String(e.bytes)}}Zr._jsonSchemaVersion="firestore/bytes/1.0",Zr._jsonSchema={type:ti("string",Zr._jsonSchemaVersion),bytes:ti("string")};class wu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ze(we.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ri(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fg{constructor(e){this._methodName=e}}class Ss{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ze(we.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ze(we.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ss._jsonSchemaVersion}}static fromJSON(e){if(mu(e,Ss._jsonSchema))return new Ss(e.latitude,e.longitude)}}Ss._jsonSchemaVersion="firestore/geoPoint/1.0",Ss._jsonSchema={type:ti("string",Ss._jsonSchemaVersion),latitude:ti("number"),longitude:ti("number")};class bs{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,h){if(o.length!==h.length)return!1;for(let m=0;m<o.length;++m)if(o[m]!==h[m])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(mu(e,bs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new bs(e.vectorValues);throw new ze(we.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bs._jsonSchemaVersion="firestore/vectorValue/1.0",bs._jsonSchema={type:ti("string",bs._jsonSchemaVersion),vectorValues:ti("object")};const vI=/^__.*__$/;class CI{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new mo(e,this.data,this.fieldMask,n,this.fieldTransforms):new yu(e,this.data,n,this.fieldTransforms)}}class kx{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new mo(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Bx(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt(40011,{Ac:a})}}class dg{constructor(e,n,o,h,m,E){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=h,m===void 0&&this.Rc(),this.fieldTransforms=m||[],this.fieldMask=E||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new dg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),o=this.Vc({path:n,fc:!1});return o.gc(e),o}yc(e){const n=this.path?.child(e),o=this.Vc({path:n,fc:!1});return o.Rc(),o}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _f(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Bx(this.Ac)&&vI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class SI{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Bf(e)}Cc(e,n,o,h=!1){return new dg({Ac:e,methodName:n,Dc:o,path:Ri.emptyPath(),fc:!1,bc:h},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tu(a){const e=a._freezeSettings(),n=Bf(a._databaseId);return new SI(a._databaseId,!!e.ignoreUndefinedProperties,n)}function gg(a,e,n,o,h,m={}){const E=a.Cc(m.merge||m.mergeFields?2:0,e,n,h);mg("Data must be an object, but it was:",E,o);const v=Fx(o,E);let C,w;if(m.merge)C=new Or(E.fieldMask),w=E.fieldTransforms;else if(m.mergeFields){const D=[];for(const M of m.mergeFields){const G=T0(e,M,n);if(!E.contains(G))throw new ze(we.INVALID_ARGUMENT,`Field '${G}' is specified in your field mask but missing from your input data.`);zx(D,G)||D.push(G)}C=new Or(D),w=E.fieldTransforms.filter((M=>C.covers(M.field)))}else C=null,w=E.fieldTransforms;return new CI(new hr(v),C,w)}class jf extends fg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jf}}function Vx(a,e,n,o){const h=a.Cc(1,e,n);mg("Data must be an object, but it was:",h,o);const m=[],E=hr.empty();go(o,((C,w)=>{const D=pg(e,C,n);w=Wn(w);const M=h.yc(D);if(w instanceof jf)m.push(D);else{const G=vu(w,M);G!=null&&(m.push(D),E.set(D,G))}}));const v=new Or(m);return new kx(E,v,h.fieldTransforms)}function Ux(a,e,n,o,h,m){const E=a.Cc(1,e,n),v=[T0(e,o,n)],C=[h];if(m.length%2!=0)throw new ze(we.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let G=0;G<m.length;G+=2)v.push(T0(e,m[G])),C.push(m[G+1]);const w=[],D=hr.empty();for(let G=v.length-1;G>=0;--G)if(!zx(w,v[G])){const te=v[G];let Ee=C[G];Ee=Wn(Ee);const me=E.yc(te);if(Ee instanceof jf)w.push(te);else{const ye=vu(Ee,me);ye!=null&&(w.push(te),D.set(te,ye))}}const M=new Or(w);return new kx(D,M,E.fieldTransforms)}function bI(a,e,n,o=!1){return vu(n,a.Cc(o?4:3,e))}function vu(a,e){if(jx(a=Wn(a)))return mg("Unsupported field value:",e,a),Fx(a,e);if(a instanceof fg)return(function(o,h){if(!Bx(h.Ac))throw h.Sc(`${o._methodName}() can only be used with update() and set()`);if(!h.path)throw h.Sc(`${o._methodName}() is not currently supported inside arrays`);const m=o._toFieldTransform(h);m&&h.fieldTransforms.push(m)})(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(o,h){const m=[];let E=0;for(const v of o){let C=vu(v,h.wc(E));C==null&&(C={nullValue:"NULL_VALUE"}),m.push(C),E++}return{arrayValue:{values:m}}})(a,e)}return(function(o,h){if((o=Wn(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return pS(h.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const m=An.fromDate(o);return{timestampValue:df(h.serializer,m)}}if(o instanceof An){const m=new An(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:df(h.serializer,m)}}if(o instanceof Ss)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Zr)return{bytesValue:ax(h.serializer,o._byteString)};if(o instanceof jn){const m=h.databaseId,E=o.firestore._databaseId;if(!E.isEqual(m))throw h.Sc(`Document reference is for database ${E.projectId}/${E.database} but should be for database ${m.projectId}/${m.database}`);return{referenceValue:W0(o.firestore._databaseId||h.databaseId,o._key.path)}}if(o instanceof bs)return(function(E,v){return{mapValue:{fields:{[PE]:{stringValue:kE},[lf]:{arrayValue:{values:E.toArray().map((w=>{if(typeof w!="number")throw v.Sc("VectorValues must only contain numeric values.");return q0(v.serializer,w)}))}}}}}})(o,h);throw h.Sc(`Unsupported field value: ${Sf(o)}`)})(a,e)}function Fx(a,e){const n={};return RE(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(a,((o,h)=>{const m=vu(h,e.mc(o));m!=null&&(n[o]=m)})),{mapValue:{fields:n}}}function jx(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof An||a instanceof Ss||a instanceof Zr||a instanceof jn||a instanceof fg||a instanceof bs)}function mg(a,e,n){if(!jx(n)||!bE(n)){const o=Sf(n);throw o==="an object"?e.Sc(a+" a custom object"):e.Sc(a+" "+o)}}function T0(a,e,n){if((e=Wn(e))instanceof wu)return e._internalPath;if(typeof e=="string")return pg(a,e);throw _f("Field path arguments must be of type string or ",a,!1,void 0,n)}const II=new RegExp("[~\\*/\\[\\]]");function pg(a,e,n){if(e.search(II)>=0)throw _f(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new wu(...e.split("."))._internalPath}catch{throw _f(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function _f(a,e,n,o,h){const m=o&&!o.isEmpty(),E=h!==void 0;let v=`Function ${e}() called with invalid data`;n&&(v+=" (via `toFirestore()`)"),v+=". ";let C="";return(m||E)&&(C+=" (found",m&&(C+=` in field ${o}`),E&&(C+=` in document ${h}`),C+=")"),new ze(we.INVALID_ARGUMENT,v+a+C)}function zx(a,e){return a.some((n=>n.isEqual(e)))}class Hx{constructor(e,n,o,h,m){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=h,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class RI extends Hx{data(){return super.data()}}function yg(a,e){return typeof e=="string"?pg(a,e):e instanceof wu?e._internalPath:e._delegate._internalPath}function Gx(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new ze(we.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _g{}class NI extends _g{}function Vc(a,e,...n){let o=[];e instanceof _g&&o.push(e),o=o.concat(n),(function(m){const E=m.filter((C=>C instanceof Eg)).length,v=m.filter((C=>C instanceof zf)).length;if(E>1||E>0&&v>0)throw new ze(we.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const h of o)a=h._apply(a);return a}class zf extends NI{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new zf(e,n,o)}_apply(e){const n=this._parse(e);return qx(e._query,n),new el(e.firestore,e.converter,f0(e._query,n))}_parse(e){const n=Tu(e.firestore);return(function(m,E,v,C,w,D,M){let G;if(w.isKeyField()){if(D==="array-contains"||D==="array-contains-any")throw new ze(we.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if(D==="in"||D==="not-in"){h_(M,D);const Ee=[];for(const me of M)Ee.push(u_(C,m,me));G={arrayValue:{values:Ee}}}else G=u_(C,m,M)}else D!=="in"&&D!=="not-in"&&D!=="array-contains-any"||h_(M,D),G=bI(v,E,M,D==="in"||D==="not-in");return ei.create(w,D,G)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function OI(a,e,n){const o=e,h=yg("where",a);return zf._create(h,o,n)}class Eg extends _g{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Eg(e,n)}_parse(e){const n=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return n.length===1?n[0]:us.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(h,m){let E=h;const v=m.getFlattenedFilters();for(const C of v)qx(E,C),E=f0(E,C)})(e._query,n),new el(e.firestore,e.converter,f0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function u_(a,e,n){if(typeof(n=Wn(n))=="string"){if(n==="")throw new ze(we.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GE(e)&&n.indexOf("/")!==-1)throw new ze(we.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(mn.fromString(n));if(!$e.isDocumentKey(o))throw new ze(we.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Sy(a,new $e(o))}if(n instanceof jn)return Sy(a,n._key);throw new ze(we.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sf(n)}.`)}function h_(a,e){if(!Array.isArray(a)||a.length===0)throw new ze(we.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qx(a,e){const n=(function(h,m){for(const E of h)for(const v of E.getFlattenedFilters())if(m.indexOf(v.op)>=0)return v.op;return null})(a.filters,(function(h){switch(h){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ze(we.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ze(we.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class DI{convertValue(e,n="none"){switch(lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(oo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw lt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return go(e,((h,m)=>{o[h]=this.convertValue(m,n)})),o}convertVectorValue(e){const n=e.fields?.[lf].arrayValue?.values?.map((o=>Yn(o.doubleValue)));return new bs(n)}convertGeoPoint(e){return new Ss(Yn(e.latitude),Yn(e.longitude))}convertArray(e,n){return(e.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Rf(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(ru(e));default:return null}}convertTimestamp(e){const n=ao(e);return new An(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=mn.fromString(e);tn(fx(o),9688,{name:e});const h=new su(o.get(1),o.get(3)),m=new $e(o.popFirst(5));return h.isEqual(n)||fa(`Document ${m} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),m}}function xg(a,e,n){let o;return o=a?n&&(n.merge||n.mergeFields)?a.toFirestore(e,n):a.toFirestore(e):e,o}class qc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ho extends Hx{constructor(e,n,o,h,m,E){super(e,n,o,h,E),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Qh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(yg("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(we.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ho._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ho._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ho._jsonSchema={type:ti("string",Ho._jsonSchemaVersion),bundleSource:ti("string","DocumentSnapshot"),bundleName:ti("string"),bundle:ti("string")};class Qh extends Ho{data(e={}){return super.data(e)}}class Go{constructor(e,n,o,h){this._firestore=e,this._userDataWriter=n,this._snapshot=h,this.metadata=new qc(h.hasPendingWrites,h.fromCache),this.query=o}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((o=>{e.call(n,new Qh(this._firestore,this._userDataWriter,o.key,o,new qc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ze(we.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(h,m){if(h._snapshot.oldDocs.isEmpty()){let E=0;return h._snapshot.docChanges.map((v=>{const C=new Qh(h._firestore,h._userDataWriter,v.doc.key,v.doc,new qc(h._snapshot.mutatedKeys.has(v.doc.key),h._snapshot.fromCache),h.query.converter);return v.doc,{type:"added",doc:C,oldIndex:-1,newIndex:E++}}))}{let E=h._snapshot.oldDocs;return h._snapshot.docChanges.filter((v=>m||v.type!==3)).map((v=>{const C=new Qh(h._firestore,h._userDataWriter,v.doc.key,v.doc,new qc(h._snapshot.mutatedKeys.has(v.doc.key),h._snapshot.fromCache),h.query.converter);let w=-1,D=-1;return v.type!==0&&(w=E.indexOf(v.doc.key),E=E.delete(v.doc.key)),v.type!==1&&(E=E.add(v.doc),D=E.indexOf(v.doc.key)),{type:MI(v.type),doc:C,oldIndex:w,newIndex:D}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ze(we.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Go._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=U0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],o=[],h=[];return this.docs.forEach((m=>{m._document!==null&&(n.push(m._document),o.push(this._userDataWriter.convertObjectMap(m._document.data.value.mapValue.fields,"previous")),h.push(m.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function MI(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt(61501,{type:a})}}function LI(a){a=Zi(a,jn);const e=Zi(a.firestore,Rs);return EI(Au(e),a._key).then((n=>Xx(e,a,n)))}Go._jsonSchemaVersion="firestore/querySnapshot/1.0",Go._jsonSchema={type:ti("string",Go._jsonSchemaVersion),bundleSource:ti("string","QuerySnapshot"),bundleName:ti("string"),bundle:ti("string")};class Ag extends DI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,n)}}function $c(a){a=Zi(a,el);const e=Zi(a.firestore,Rs),n=Au(e),o=new Ag(e);return Gx(a._query),xI(n,a._query).then((h=>new Go(e,o,a,h)))}function W1(a,e,n){a=Zi(a,jn);const o=Zi(a.firestore,Rs),h=xg(a.converter,e,n);return Cu(o,[gg(Tu(o),"setDoc",a._key,h,a.converter!==null,n).toMutation(a._key,Ji.none())])}function K1(a,e,n,...o){a=Zi(a,jn);const h=Zi(a.firestore,Rs),m=Tu(h);let E;return E=typeof(e=Wn(e))=="string"||e instanceof wu?Ux(m,"updateDoc",a._key,e,n,o):Vx(m,"updateDoc",a._key,e),Cu(h,[E.toMutation(a._key,Ji.exists(!0))])}function v0(a){return Cu(Zi(a.firestore,Rs),[new Pf(a._key,Ji.none())])}function Uc(a,e){const n=Zi(a.firestore,Rs),o=os(a),h=xg(a.converter,e);return Cu(n,[gg(Tu(a.firestore),"addDoc",o._key,h,a.converter!==null,{}).toMutation(o._key,Ji.exists(!1))]).then((()=>o))}function Uh(a,...e){a=Wn(a);let n={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||c_(e[o])||(n=e[o++]);const h={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(c_(e[o])){const C=e[o];e[o]=C.next?.bind(C),e[o+1]=C.error?.bind(C),e[o+2]=C.complete?.bind(C)}let m,E,v;if(a instanceof jn)E=Zi(a.firestore,Rs),v=Nf(a._key.path),m={next:C=>{e[o]&&e[o](Xx(E,a,C))},error:e[o+1],complete:e[o+2]};else{const C=Zi(a,el);E=Zi(C.firestore,Rs),v=C._query;const w=new Ag(E);m={next:D=>{e[o]&&e[o](new Go(E,w,C,D))},error:e[o+1],complete:e[o+2]},Gx(a._query)}return(function(w,D,M,G){const te=new hg(G),Ee=new lg(D,te,M);return w.asyncQueue.enqueueAndForget((async()=>sg(await yf(w),Ee))),()=>{te.Nu(),w.asyncQueue.enqueueAndForget((async()=>ag(await yf(w),Ee)))}})(Au(E),v,h,m)}function Cu(a,e){return(function(o,h){const m=new ca;return o.asyncQueue.enqueueAndForget((async()=>oI(await _I(o),h,m))),m.promise})(Au(a),e)}function Xx(a,e,n){const o=n.docs.get(e._key),h=new Ag(a);return new Ho(a,h,e._key,o,new qc(n.hasPendingWrites,n.fromCache),e.converter)}class PI{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Tu(e)}set(e,n,o){this._verifyNotCommitted();const h=Q1(e,this._firestore),m=xg(h.converter,n,o),E=gg(this._dataReader,"WriteBatch.set",h._key,m,h.converter!==null,o);return this._mutations.push(E.toMutation(h._key,Ji.none())),this}update(e,n,o,...h){this._verifyNotCommitted();const m=Q1(e,this._firestore);let E;return E=typeof(n=Wn(n))=="string"||n instanceof wu?Ux(this._dataReader,"WriteBatch.update",m._key,n,o,h):Vx(this._dataReader,"WriteBatch.update",m._key,n),this._mutations.push(E.toMutation(m._key,Ji.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Q1(e,this._firestore);return this._mutations=this._mutations.concat(new Pf(n._key,Ji.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ze(we.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Q1(a,e){if((a=Wn(a)).firestore!==e)throw new ze(we.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}function f_(a){return Au(a=Zi(a,Rs)),new PI(a,(e=>Cu(a,e)))}(function(e,n=!0){(function(h){Jl=h})(Ql),zl(new Xo("firestore",((o,{instanceIdentifier:h,options:m})=>{const E=o.getProvider("app").getImmediate(),v=new Rs(new IC(o.getProvider("auth-internal")),new OC(E,o.getProvider("app-check-internal")),(function(w,D){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new ze(we.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new su(w.options.projectId,D)})(E,h),E);return m={useFetchStreams:n,...m},v._setSettings(m),v}),"PUBLIC").setMultipleInstances(!0)),no(dy,gy,e),no(dy,gy,"esm2020")})();var kI="firebase",BI="12.7.0";no(kI,BI,"app");const VI={apiKey:"AIzaSyB5M2V4De0XU5y--e09NPStfuKjSr0DAdQ",authDomain:"faktureapp.firebaseapp.com",projectId:"faktureapp",storageBucket:"faktureapp.firebasestorage.app",messagingSenderId:"23563095646",appId:"1:23563095646:web:a707840c2dc8c9733aeecf"},Yx=L_(VI),Fh=vC(Yx),gn=wI(Yx),Wx=We.createContext(void 0),Su=()=>{const a=We.useContext(Wx);if(a===void 0)throw new Error("useAuth must be used within an AuthProvider");return a},UI=({children:a})=>{const[e,n]=We.useState(null),[o,h]=We.useState(!1),[m,E]=We.useState([]),[v,C]=We.useState(!0),w=async ye=>{const De=os(gn,"pharmacy_users",ye.uid),Le=await LI(De);if(Le.exists()){const pe=Le.data();if(!pe.isAdmin){const Ue=await $c(Qi(gn,"pharmacy_users"));let nt=!1;if(Ue.forEach(Ve=>{Ve.data().isAdmin&&(nt=!0)}),!nt){await W1(De,{...pe,isAdmin:!0},{merge:!0}),h(!0);return}}h(pe.isAdmin)}else{const pe=await $c(Qi(gn,"pharmacy_users")),Ue=pe.empty;let nt=!1;pe.forEach(V=>{V.data().isAdmin&&(nt=!0)});const Ve=Ue||!nt;await W1(De,{uid:ye.uid,email:ye.email,isAdmin:Ve,createdAt:Date.now()}),h(Ve)}},D=async()=>{try{const ye=await $c(Qi(gn,"pharmacy_users")),De=[];ye.forEach(Le=>{De.push({id:Le.id,...Le.data()})}),E(De.sort((Le,pe)=>Le.email.localeCompare(pe.email)))}catch(ye){console.error("Error loading users:",ye)}};We.useEffect(()=>fv(Fh,async De=>{n(De),De?(await w(De),await D()):(h(!1),E([])),C(!1)}),[]);const me={currentUser:e,isAdmin:o,loading:v,users:m,signIn:async(ye,De)=>{await cv(Fh,ye,De)},signOut:async()=>{await dv(Fh)},addUser:async(ye,De)=>{if(!o)throw new Error("Samo admin moe dodavati korisnike");const Le=e?.email;try{const pe=await lv(Fh,ye,De);await W1(os(gn,"pharmacy_users",pe.user.uid),{uid:pe.user.uid,email:ye,isAdmin:!1,createdAt:Date.now()}),await D(),Le&&alert(`Korisnik "${ye}" je dodat. Molimo vas da se ponovo prijavite.`)}catch(pe){throw pe instanceof Error&&pe.message.includes("email-already-in-use")?new Error("Korisnik sa ovim email-om ve postoji"):pe}},deleteUser:async ye=>{if(!o)throw new Error("Samo admin moe brisati korisnike");if(ye===e?.uid)throw new Error("Ne moete obrisati svoj nalog");await v0(os(gn,"pharmacy_users",ye)),await D()}};return H.jsx(Wx.Provider,{value:me,children:a})},Kx=We.createContext(void 0),bu=()=>{const a=We.useContext(Kx);if(a===void 0)throw new Error("usePharmacy must be used within a PharmacyProvider");return a},FI=["tableta","ampula","ferveta","komad","litar","ml","gram","kutija"],jI=({children:a})=>{const[e,n]=We.useState([]),[o,h]=We.useState([]),[m,E]=We.useState([]),[v,C]=We.useState([]),[w,D]=We.useState(!0),{currentUser:M}=Su(),G=async()=>{if((await $c(Qi(gn,"pharmacy_units"))).empty){const Ae=f_(gn);for(const ee of FI){const ie=os(Qi(gn,"pharmacy_units"));Ae.set(ie,{name:ee,createdAt:Date.now()})}await Ae.commit()}};We.useEffect(()=>{if(!M){n([]),h([]),E([]),C([]),D(!1);return}G();const P=Uh(Vc(Qi(gn,"pharmacy_medicines")),ae=>{const Re=[];ae.forEach(Fe=>{Re.push({id:Fe.id,...Fe.data()})}),n(Re.sort((Fe,Ie)=>Fe.name.localeCompare(Ie.name)))}),Ae=Uh(Vc(Qi(gn,"pharmacy_stock")),ae=>{const Re=[];ae.forEach(Fe=>{Re.push({id:Fe.id,...Fe.data()})}),h(Re),D(!1)}),ee=Uh(Vc(Qi(gn,"pharmacy_transactions")),ae=>{const Re=[];ae.forEach(Fe=>{Re.push({id:Fe.id,...Fe.data()})}),E(Re.sort((Fe,Ie)=>Ie.createdAt-Fe.createdAt))}),ie=Uh(Vc(Qi(gn,"pharmacy_units")),ae=>{const Re=[];ae.forEach(Fe=>{Re.push({id:Fe.id,...Fe.data()})}),C(Re.sort((Fe,Ie)=>Fe.name.localeCompare(Ie.name)))});return()=>{P(),Ae(),ee(),ie()}},[M]);const te=async P=>{const Ae=e.find(ie=>ie.name.toLowerCase().trim()===P.name.toLowerCase().trim());return Ae?Ae.id:(await Uc(Qi(gn,"pharmacy_medicines"),{...P,createdAt:Date.now(),updatedAt:Date.now()})).id},Ee=async(P,Ae)=>{await K1(os(gn,"pharmacy_medicines",P),{...Ae,updatedAt:Date.now()})},me=async P=>{const Ae=Vc(Qi(gn,"pharmacy_stock"),OI("medicineId","==",P)),ee=await $c(Ae),ie=f_(gn);ee.forEach(ae=>{ie.delete(ae.ref)}),ie.delete(os(gn,"pharmacy_medicines",P)),await ie.commit()},ye=P=>e.find(Ae=>Ae.barcode===P),De=P=>e.find(Ae=>Ae.name.toLowerCase()===P.toLowerCase()),Le=async(P,Ae,ee,ie)=>{const ae=new Date().toISOString().split("T")[0],Re=o.find(Fe=>Fe.medicineId===P&&Fe.expiryDate===ie);Re?await K1(os(gn,"pharmacy_stock",Re.id),{quantity:Re.quantity+ee,updatedAt:Date.now()}):await Uc(Qi(gn,"pharmacy_stock"),{medicineId:P,medicineName:Ae,quantity:ee,expiryDate:ie,entryDate:ae,createdAt:Date.now(),updatedAt:Date.now()}),await Uc(Qi(gn,"pharmacy_transactions"),{type:"entry",medicineId:P,medicineName:Ae,batchId:Re?.id||"new",quantity:ee,expiryDate:ie,transactionDate:ae,createdAt:Date.now()})},pe=async(P,Ae)=>{const ee=o.find(Re=>Re.id===P);if(!ee)throw new Error("Batch not found");const ie=new Date().toISOString().split("T")[0],ae=ee.quantity-Ae;if(ae<0)throw new Error("Insufficient stock");ae===0?await v0(os(gn,"pharmacy_stock",P)):await K1(os(gn,"pharmacy_stock",P),{quantity:ae,updatedAt:Date.now()}),await Uc(Qi(gn,"pharmacy_transactions"),{type:"exit",medicineId:ee.medicineId,medicineName:ee.medicineName,batchId:P,quantity:Ae,expiryDate:ee.expiryDate,transactionDate:ie,createdAt:Date.now()})},Ue=async P=>{if(v.find(ee=>ee.name.toLowerCase()===P.toLowerCase()))throw new Error("Unit already exists");await Uc(Qi(gn,"pharmacy_units"),{name:P,createdAt:Date.now()})},nt=async P=>{await v0(os(gn,"pharmacy_units",P))},Ve=()=>{const P=new Date;return`${P.getFullYear()}-${String(P.getMonth()+1).padStart(2,"0")}`},V=()=>{const P=new Date,Ae=new Date(P.getFullYear(),P.getMonth()+1,1);return`${Ae.getFullYear()}-${String(Ae.getMonth()+1).padStart(2,"0")}`},F=()=>{const P=Ve(),Ae=V(),ee=new Map;for(const ae of e){const Re=ae.name.toLowerCase().trim();if(!ee.has(Re))ee.set(Re,{medicineId:ae.id,medicineName:ae.name,barcode:ae.barcode,unit:ae.unit,totalQuantity:0,minQuantity:ae.minQuantity,batches:[],isLowStock:!1,hasExpiringSoon:!1,hasExpired:!1});else{const Fe=ee.get(Re);ae.minQuantity>Fe.minQuantity&&(Fe.minQuantity=ae.minQuantity),!Fe.barcode&&ae.barcode&&(Fe.barcode=ae.barcode)}}const ie=new Map;for(const ae of e)ie.set(ae.id,ae.name.toLowerCase().trim());for(const ae of o){const Re=ie.get(ae.medicineId),Fe=Re?ee.get(Re):null;if(Fe){Fe.totalQuantity+=ae.quantity,Fe.batches.push(ae);const Ie=ae.expiryDate.substring(0,7);Ie<P?Fe.hasExpired=!0:Ie<=Ae&&(Fe.hasExpiringSoon=!0)}}for(const ae of ee.values())ae.totalQuantity<ae.minQuantity&&(ae.isLowStock=!0),ae.batches.sort((Re,Fe)=>Re.expiryDate.localeCompare(Fe.expiryDate));return Array.from(ee.values()).sort((ae,Re)=>ae.medicineName.localeCompare(Re.medicineName))},X={medicines:e,stockBatches:o,transactions:m,units:v,loading:w,addMedicine:te,updateMedicine:Ee,deleteMedicine:me,getMedicineByBarcode:ye,getMedicineByName:De,addStock:Le,removeStock:pe,addUnit:Ue,deleteUnit:nt,getStockSummary:F,getLowStockItems:()=>F().filter(P=>P.isLowStock),getExpiringItems:(P=30)=>{const Ae=Ve(),ee=V();return F().filter(ie=>ie.batches.some(ae=>{const Re=ae.expiryDate.substring(0,7);return Re>=Ae&&Re<=ee}))},getExpiredItems:()=>{const P=Ve();return F().filter(Ae=>Ae.batches.some(ee=>ee.expiryDate.substring(0,7)<P))}};return H.jsx(Kx.Provider,{value:X,children:a})},zI=()=>{const[a,e]=We.useState(""),[n,o]=We.useState(""),[h,m]=We.useState(""),[E,v]=We.useState(!1),{signIn:C}=Su(),w=async D=>{D.preventDefault(),m(""),v(!0);try{await C(a,n)}catch{m("Pogrean email ili lozinka")}finally{v(!1)}};return H.jsx("div",{className:"login-container",children:H.jsxs("div",{className:"login-box",children:[H.jsx("h1",{children:" Apoteka"}),H.jsx("p",{className:"login-subtitle",children:"Upravljanje lijekovima"}),h&&H.jsx("div",{className:"login-error",children:h}),H.jsxs("form",{onSubmit:w,children:[H.jsxs("div",{className:"form-group",children:[H.jsx("label",{children:"Email"}),H.jsx("input",{type:"email",value:a,onChange:D=>e(D.target.value),required:!0,placeholder:"vas@email.com"})]}),H.jsxs("div",{className:"form-group",children:[H.jsx("label",{children:"Lozinka"}),H.jsx("input",{type:"password",value:n,onChange:D=>o(D.target.value),required:!0,placeholder:""})]}),H.jsx("button",{type:"submit",disabled:E,className:"login-button",children:E?"Prijavljivanje...":"Prijavi se"})]})]})})},HI=({activeView:a,onViewChange:e})=>{const{currentUser:n,signOut:o}=Su();return H.jsxs("header",{className:"header",children:[H.jsx("div",{className:"header-title",children:H.jsx("h1",{children:" Apoteka"})}),H.jsxs("nav",{className:"header-nav",children:[H.jsx("button",{className:a==="entry"?"active":"",onClick:()=>e("entry"),children:" Ulaz"}),H.jsx("button",{className:a==="exit"?"active":"",onClick:()=>e("exit"),children:" Izlaz"}),H.jsx("button",{className:a==="inventory"?"active":"",onClick:()=>e("inventory"),children:" Magacin"}),H.jsx("button",{className:a==="alerts"?"active":"",onClick:()=>e("alerts"),children:" Upozorenja"}),H.jsx("button",{className:a==="settings"?"active":"",onClick:()=>e("settings"),children:" Postavke"})]}),H.jsxs("div",{className:"header-user",children:[H.jsx("span",{children:n?.email}),H.jsx("button",{onClick:o,className:"logout-btn",children:"Odjavi se"})]})]})};var qe;(function(a){a[a.QR_CODE=0]="QR_CODE",a[a.AZTEC=1]="AZTEC",a[a.CODABAR=2]="CODABAR",a[a.CODE_39=3]="CODE_39",a[a.CODE_93=4]="CODE_93",a[a.CODE_128=5]="CODE_128",a[a.DATA_MATRIX=6]="DATA_MATRIX",a[a.MAXICODE=7]="MAXICODE",a[a.ITF=8]="ITF",a[a.EAN_13=9]="EAN_13",a[a.EAN_8=10]="EAN_8",a[a.PDF_417=11]="PDF_417",a[a.RSS_14=12]="RSS_14",a[a.RSS_EXPANDED=13]="RSS_EXPANDED",a[a.UPC_A=14]="UPC_A",a[a.UPC_E=15]="UPC_E",a[a.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(qe||(qe={}));var d_=new Map([[qe.QR_CODE,"QR_CODE"],[qe.AZTEC,"AZTEC"],[qe.CODABAR,"CODABAR"],[qe.CODE_39,"CODE_39"],[qe.CODE_93,"CODE_93"],[qe.CODE_128,"CODE_128"],[qe.DATA_MATRIX,"DATA_MATRIX"],[qe.MAXICODE,"MAXICODE"],[qe.ITF,"ITF"],[qe.EAN_13,"EAN_13"],[qe.EAN_8,"EAN_8"],[qe.PDF_417,"PDF_417"],[qe.RSS_14,"RSS_14"],[qe.RSS_EXPANDED,"RSS_EXPANDED"],[qe.UPC_A,"UPC_A"],[qe.UPC_E,"UPC_E"],[qe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),g_;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.URL=1]="URL"})(g_||(g_={}));function GI(a){return Object.values(qe).includes(a)}var Ef;(function(a){a[a.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",a[a.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ef||(Ef={}));var qI=(function(){function a(){}return a.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",a.SCAN_DEFAULT_FPS=2,a.DEFAULT_DISABLE_FLIP=!1,a.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,a.DEFAULT_SUPPORTED_SCAN_TYPE=[Ef.SCAN_TYPE_CAMERA,Ef.SCAN_TYPE_FILE],a})(),Qx=(function(){function a(e,n){this.format=e,this.formatName=n}return a.prototype.toString=function(){return this.formatName},a.create=function(e){if(!d_.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new a(e,d_.get(e))},a})(),m_=(function(){function a(){}return a.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},a.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},a})(),C0;(function(a){a[a.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",a[a.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",a[a.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(C0||(C0={}));var XI=(function(){function a(){}return a.createFrom=function(e){return{errorMessage:e,type:C0.UNKWOWN_ERROR}},a})(),YI=(function(){function a(e){this.verbose=e}return a.prototype.log=function(e){this.verbose&&console.log(e)},a.prototype.warn=function(e){this.verbose&&console.warn(e)},a.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},a.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},a})();function sa(a){return typeof a>"u"||a===null}var Bl=(function(){function a(){}return a.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},a.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},a.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},a.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},a.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},a.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},a.scannerPaused=function(){return"Scanner paused"},a})(),Zx=(function(){function a(){}return a.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var o=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var h=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],m=new Set(h),E=Object.keys(e),v=0,C=E;v<C.length;v++){var w=C[v];if(m.has(w))return n.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},a})(),Xc={exports:{}},WI=Xc.exports,p_;function KI(){return p_||(p_=1,(function(a,e){(function(n,o){o(e)})(WI,(function(n){function o(N){return N==null}var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,i){N.__proto__=i}||function(N,i){for(var s in i)i.hasOwnProperty(s)&&(N[s]=i[s])};function m(N,i){h(N,i);function s(){this.constructor=N}N.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}function E(N,i){var s=Object.setPrototypeOf;s?s(N,i):N.__proto__=i}function v(N,i){i===void 0&&(i=N.constructor);var s=Error.captureStackTrace;s&&s(N,i)}var C=(function(N){m(i,N);function i(s){var l=this.constructor,u=N.call(this,s)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),E(u,l.prototype),v(u),u}return i})(Error);class w extends C{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}w.kind="Exception";class D extends w{}D.kind="ArgumentException";class M extends w{}M.kind="IllegalArgumentException";class G{constructor(i){if(this.binarizer=i,i===null)throw new M("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,s){return this.binarizer.getBlackRow(i,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,s,l,u){const f=this.binarizer.getLuminanceSource().crop(i,s,l,u);return new G(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new G(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new G(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class te extends w{static getChecksumInstance(){return new te}}te.kind="ChecksumException";class Ee{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class me{static arraycopy(i,s,l,u,f){for(;f--;)l[u++]=i[s++]}static currentTimeMillis(){return Date.now()}}class ye extends w{}ye.kind="IndexOutOfBoundsException";class De extends ye{constructor(i=void 0,s=void 0){super(s),this.index=i,this.message=s}}De.kind="ArrayIndexOutOfBoundsException";class Le{static fill(i,s){for(let l=0,u=i.length;l<u;l++)i[l]=s}static fillWithin(i,s,l,u){Le.rangeCheck(i.length,s,l);for(let f=s;f<l;f++)i[f]=u}static rangeCheck(i,s,l){if(s>l)throw new M("fromIndex("+s+") > toIndex("+l+")");if(s<0)throw new De(s);if(l>i)throw new De(l)}static asList(...i){return i}static create(i,s,l){return Array.from({length:i}).map(f=>Array.from({length:s}).fill(l))}static createInt32Array(i,s,l){return Array.from({length:i}).map(f=>Int32Array.from({length:s}).fill(l))}static equals(i,s){if(!i||!s||!i.length||!s.length||i.length!==s.length)return!1;for(let l=0,u=i.length;l<u;l++)if(i[l]!==s[l])return!1;return!0}static hashCode(i){if(i===null)return 0;let s=1;for(const l of i)s=31*s+l;return s}static fillUint8Array(i,s){for(let l=0;l!==i.length;l++)i[l]=s}static copyOf(i,s){return i.slice(0,s)}static copyOfUint8Array(i,s){if(i.length<=s){const l=new Uint8Array(s);return l.set(i),l}return i.slice(0,s)}static copyOfRange(i,s,l){const u=l-s,f=new Int32Array(u);return me.arraycopy(i,s,f,0,u),f}static binarySearch(i,s,l){l===void 0&&(l=Le.numberComparator);let u=0,f=i.length-1;for(;u<=f;){const g=f+u>>1,y=l(s,i[g]);if(y>0)u=g+1;else if(y<0)f=g-1;else return g}return-u-1}static numberComparator(i,s){return i-s}}class pe{static numberOfTrailingZeros(i){let s;if(i===0)return 32;let l=31;return s=i<<16,s!==0&&(l-=16,i=s),s=i<<8,s!==0&&(l-=8,i=s),s=i<<4,s!==0&&(l-=4,i=s),s=i<<2,s!==0&&(l-=2,i=s),l-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let s=1;return i>>>16||(s+=16,i<<=16),i>>>24||(s+=8,i<<=8),i>>>28||(s+=4,i<<=4),i>>>30||(s+=2,i<<=2),s-=i>>>31,s}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,s){return Math.trunc(i/s)}static parseInt(i,s=void 0){return parseInt(i,s)}}pe.MIN_VALUE_32_BITS=-2147483648,pe.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ue{constructor(i,s){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,s==null?this.bits=Ue.makeArray(i):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const s=Ue.makeArray(i);me.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const s=this.size;if(i>=s)return s;const l=this.bits;let u=Math.floor(i/32),f=l[u];f&=~((1<<(i&31))-1);const g=l.length;for(;f===0;){if(++u===g)return s;f=l[u]}const y=u*32+pe.numberOfTrailingZeros(f);return y>s?s:y}getNextUnset(i){const s=this.size;if(i>=s)return s;const l=this.bits;let u=Math.floor(i/32),f=~l[u];f&=~((1<<(i&31))-1);const g=l.length;for(;f===0;){if(++u===g)return s;f=~l[u]}const y=u*32+pe.numberOfTrailingZeros(f);return y>s?s:y}setBulk(i,s){this.bits[Math.floor(i/32)]=s}setRange(i,s){if(s<i||i<0||s>this.size)throw new M;if(s===i)return;s--;const l=Math.floor(i/32),u=Math.floor(s/32),f=this.bits;for(let g=l;g<=u;g++){const y=g>l?0:i&31,T=(2<<(g<u?31:s&31))-(1<<y);f[g]|=T}}clear(){const i=this.bits.length,s=this.bits;for(let l=0;l<i;l++)s[l]=0}isRange(i,s,l){if(s<i||i<0||s>this.size)throw new M;if(s===i)return!0;s--;const u=Math.floor(i/32),f=Math.floor(s/32),g=this.bits;for(let y=u;y<=f;y++){const x=y>u?0:i&31,b=(2<<(y<f?31:s&31))-(1<<x)&4294967295;if((g[y]&b)!==(l?b:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,s){if(s<0||s>32)throw new M("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let l=s;l>0;l--)this.appendBit((i>>l-1&1)===1)}appendBitArray(i){const s=i.size;this.ensureCapacity(this.size+s);for(let l=0;l<s;l++)this.appendBit(i.get(l))}xor(i){if(this.size!==i.size)throw new M("Sizes don't match");const s=this.bits;for(let l=0,u=s.length;l<u;l++)s[l]^=i.bits[l]}toBytes(i,s,l,u){for(let f=0;f<u;f++){let g=0;for(let y=0;y<8;y++)this.get(i)&&(g|=1<<7-y),i++;s[l+f]=g}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),l=s+1,u=this.bits;for(let f=0;f<l;f++){let g=u[f];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,i[s-f]=g}if(this.size!==l*32){const f=l*32-this.size;let g=i[0]>>>f;for(let y=1;y<l;y++){const x=i[y];g|=x<<32-f,i[y-1]=g,g=x>>>f}i[l-1]=g}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof Ue))return!1;const s=i;return this.size===s.size&&Le.equals(this.bits,s.bits)}hashCode(){return 31*this.size+Le.hashCode(this.bits)}toString(){let i="";for(let s=0,l=this.size;s<l;s++)(s&7)===0&&(i+=" "),i+=this.get(s)?"X":".";return i}clone(){return new Ue(this.size,this.bits.slice())}}var nt;(function(N){N[N.OTHER=0]="OTHER",N[N.PURE_BARCODE=1]="PURE_BARCODE",N[N.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",N[N.TRY_HARDER=3]="TRY_HARDER",N[N.CHARACTER_SET=4]="CHARACTER_SET",N[N.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",N[N.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",N[N.ASSUME_GS1=7]="ASSUME_GS1",N[N.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",N[N.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",N[N.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(nt||(nt={}));var Ve=nt;class V extends w{static getFormatInstance(){return new V}}V.kind="FormatException";var F;(function(N){N[N.Cp437=0]="Cp437",N[N.ISO8859_1=1]="ISO8859_1",N[N.ISO8859_2=2]="ISO8859_2",N[N.ISO8859_3=3]="ISO8859_3",N[N.ISO8859_4=4]="ISO8859_4",N[N.ISO8859_5=5]="ISO8859_5",N[N.ISO8859_6=6]="ISO8859_6",N[N.ISO8859_7=7]="ISO8859_7",N[N.ISO8859_8=8]="ISO8859_8",N[N.ISO8859_9=9]="ISO8859_9",N[N.ISO8859_10=10]="ISO8859_10",N[N.ISO8859_11=11]="ISO8859_11",N[N.ISO8859_13=12]="ISO8859_13",N[N.ISO8859_14=13]="ISO8859_14",N[N.ISO8859_15=14]="ISO8859_15",N[N.ISO8859_16=15]="ISO8859_16",N[N.SJIS=16]="SJIS",N[N.Cp1250=17]="Cp1250",N[N.Cp1251=18]="Cp1251",N[N.Cp1252=19]="Cp1252",N[N.Cp1256=20]="Cp1256",N[N.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",N[N.UTF8=22]="UTF8",N[N.ASCII=23]="ASCII",N[N.Big5=24]="Big5",N[N.GB18030=25]="GB18030",N[N.EUC_KR=26]="EUC_KR"})(F||(F={}));class B{constructor(i,s,l,...u){this.valueIdentifier=i,this.name=l,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=u,B.VALUE_IDENTIFIER_TO_ECI.set(i,this),B.NAME_TO_ECI.set(l,this);const f=this.values;for(let g=0,y=f.length;g!==y;g++){const x=f[g];B.VALUES_TO_ECI.set(x,this)}for(const g of u)B.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new V("incorect value");const s=B.VALUES_TO_ECI.get(i);if(s===void 0)throw new V("incorect value");return s}static getCharacterSetECIByName(i){const s=B.NAME_TO_ECI.get(i);if(s===void 0)throw new V("incorect value");return s}equals(i){if(!(i instanceof B))return!1;const s=i;return this.getName()===s.getName()}}B.VALUE_IDENTIFIER_TO_ECI=new Map,B.VALUES_TO_ECI=new Map,B.NAME_TO_ECI=new Map,B.Cp437=new B(F.Cp437,Int32Array.from([0,2]),"Cp437"),B.ISO8859_1=new B(F.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),B.ISO8859_2=new B(F.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),B.ISO8859_3=new B(F.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),B.ISO8859_4=new B(F.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),B.ISO8859_5=new B(F.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),B.ISO8859_6=new B(F.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),B.ISO8859_7=new B(F.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),B.ISO8859_8=new B(F.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),B.ISO8859_9=new B(F.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),B.ISO8859_10=new B(F.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),B.ISO8859_11=new B(F.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),B.ISO8859_13=new B(F.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),B.ISO8859_14=new B(F.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),B.ISO8859_15=new B(F.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),B.ISO8859_16=new B(F.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),B.SJIS=new B(F.SJIS,20,"SJIS","Shift_JIS"),B.Cp1250=new B(F.Cp1250,21,"Cp1250","windows-1250"),B.Cp1251=new B(F.Cp1251,22,"Cp1251","windows-1251"),B.Cp1252=new B(F.Cp1252,23,"Cp1252","windows-1252"),B.Cp1256=new B(F.Cp1256,24,"Cp1256","windows-1256"),B.UnicodeBigUnmarked=new B(F.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),B.UTF8=new B(F.UTF8,26,"UTF8","UTF-8"),B.ASCII=new B(F.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),B.Big5=new B(F.Big5,28,"Big5"),B.GB18030=new B(F.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),B.EUC_KR=new B(F.EUC_KR,30,"EUC_KR","EUC-KR");class Z extends w{}Z.kind="UnsupportedOperationException";class W{static decode(i,s){const l=this.encodingName(s);return this.customDecoder?this.customDecoder(i,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(i,l):new TextDecoder(l).decode(i)}static shouldDecodeOnFallback(i){return!W.isBrowser()&&i==="ISO-8859-1"}static encode(i,s){const l=this.encodingName(s);return this.customEncoder?this.customEncoder(i,l):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof B?i:B.getCharacterSetECIByName(i)}static decodeFallback(i,s){const l=this.encodingCharacterSet(s);if(W.isDecodeFallbackSupported(l)){let u="";for(let f=0,g=i.length;f<g;f++){let y=i[f].toString(16);y.length<2&&(y="0"+y),u+="%"+y}return decodeURIComponent(u)}if(l.equals(B.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new Z(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(B.UTF8)||i.equals(B.ISO8859_1)||i.equals(B.ASCII)}static encodeFallback(i){const l=btoa(unescape(encodeURIComponent(i))).split(""),u=[];for(let f=0;f<l.length;f++)u.push(l[f].charCodeAt(0));return new Uint8Array(u)}}class X{static castAsNonUtf8Char(i,s=null){const l=s?s.getName():this.ISO88591;return W.decode(new Uint8Array([i]),l)}static guessEncoding(i,s){if(s!=null&&s.get(Ve.CHARACTER_SET)!==void 0)return s.get(Ve.CHARACTER_SET).toString();const l=i.length;let u=!0,f=!0,g=!0,y=0,x=0,T=0,b=0,O=0,L=0,z=0,K=0,Q=0,se=0,fe=0;const Me=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let Oe=0;Oe<l&&(u||f||g);Oe++){const be=i[Oe]&255;g&&(y>0?(be&128)===0?g=!1:y--:(be&128)!==0&&((be&64)===0?g=!1:(y++,(be&32)===0?x++:(y++,(be&16)===0?T++:(y++,(be&8)===0?b++:g=!1))))),u&&(be>127&&be<160?u=!1:be>159&&(be<192||be===215||be===247)&&fe++),f&&(O>0?be<64||be===127||be>252?f=!1:O--:be===128||be===160||be>239?f=!1:be>160&&be<224?(L++,K=0,z++,z>Q&&(Q=z)):be>127?(O++,z=0,K++,K>se&&(se=K)):(z=0,K=0))}return g&&y>0&&(g=!1),f&&O>0&&(f=!1),g&&(Me||x+T+b>0)?X.UTF8:f&&(X.ASSUME_SHIFT_JIS||Q>=3||se>=3)?X.SHIFT_JIS:u&&f?Q===2&&L===2||fe*10>=l?X.SHIFT_JIS:X.ISO88591:u?X.ISO88591:f?X.SHIFT_JIS:g?X.UTF8:X.PLATFORM_DEFAULT_ENCODING}static format(i,...s){let l=-1;function u(g,y,x,T,b,O){if(g==="%%")return"%";if(s[++l]===void 0)return;g=T?parseInt(T.substr(1)):void 0;let L=b?parseInt(b.substr(1)):void 0,z;switch(O){case"s":z=s[l];break;case"c":z=s[l][0];break;case"f":z=parseFloat(s[l]).toFixed(g);break;case"p":z=parseFloat(s[l]).toPrecision(g);break;case"e":z=parseFloat(s[l]).toExponential(g);break;case"x":z=parseInt(s[l]).toString(L||16);break;case"d":z=parseFloat(parseInt(s[l],L||10).toPrecision(g)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(L);let K=parseInt(x),Q=x&&x[0]+""=="0"?"0":" ";for(;z.length<K;)z=y!==void 0?z+Q:Q+z;return z}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,u)}static getBytes(i,s){return W.encode(i,s)}static getCharCode(i,s=0){return i.charCodeAt(s)}static getCharAt(i){return String.fromCharCode(i)}}X.SHIFT_JIS=B.SJIS.getName(),X.GB2312="GB2312",X.ISO88591=B.ISO8859_1.getName(),X.EUC_JP="EUC_JP",X.UTF8=B.UTF8.getName(),X.PLATFORM_DEFAULT_ENCODING=X.UTF8,X.ASSUME_SHIFT_JIS=!1;class P{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=X.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,s,l){for(let u=s;s<s+l;u++)this.append(i[u]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,s){this.value=this.value.substr(0,i)+s+this.value.substr(i+1)}substring(i,s){return this.value.substring(i,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,s){this.value=this.value.substr(0,i)+s+this.value.substr(i+s.length)}}class Ae{constructor(i,s,l,u){if(this.width=i,this.height=s,this.rowSize=l,this.bits=u,s==null&&(s=i),this.height=s,i<1||s<1)throw new M("Both dimensions must be greater than 0");l==null&&(l=Math.floor((i+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const s=i.length,l=i[0].length,u=new Ae(l,s);for(let f=0;f<s;f++){const g=i[f];for(let y=0;y<l;y++)g[y]&&u.set(y,f)}return u}static parseFromString(i,s,l){if(i===null)throw new M("stringRepresentation cannot be null");const u=new Array(i.length);let f=0,g=0,y=-1,x=0,T=0;for(;T<i.length;)if(i.charAt(T)===`
`||i.charAt(T)==="\r"){if(f>g){if(y===-1)y=f-g;else if(f-g!==y)throw new M("row lengths do not match");g=f,x++}T++}else if(i.substring(T,T+s.length)===s)T+=s.length,u[f]=!0,f++;else if(i.substring(T,T+l.length)===l)T+=l.length,u[f]=!1,f++;else throw new M("illegal character encountered: "+i.substring(T));if(f>g){if(y===-1)y=f-g;else if(f-g!==y)throw new M("row lengths do not match");x++}const b=new Ae(y,x);for(let O=0;O<f;O++)u[O]&&b.set(Math.floor(O%y),Math.floor(O/y));return b}get(i,s){const l=s*this.rowSize+Math.floor(i/32);return(this.bits[l]>>>(i&31)&1)!==0}set(i,s){const l=s*this.rowSize+Math.floor(i/32);this.bits[l]|=1<<(i&31)&4294967295}unset(i,s){const l=s*this.rowSize+Math.floor(i/32);this.bits[l]&=~(1<<(i&31)&4294967295)}flip(i,s){const l=s*this.rowSize+Math.floor(i/32);this.bits[l]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new M("input matrix dimensions do not match");const s=new Ue(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let f=0,g=this.height;f<g;f++){const y=f*l,x=i.getRow(f,s).getBitArray();for(let T=0;T<l;T++)u[y+T]^=x[T]}}clear(){const i=this.bits,s=i.length;for(let l=0;l<s;l++)i[l]=0}setRegion(i,s,l,u){if(s<0||i<0)throw new M("Left and top must be nonnegative");if(u<1||l<1)throw new M("Height and width must be at least 1");const f=i+l,g=s+u;if(g>this.height||f>this.width)throw new M("The region must fit inside the matrix");const y=this.rowSize,x=this.bits;for(let T=s;T<g;T++){const b=T*y;for(let O=i;O<f;O++)x[b+Math.floor(O/32)]|=1<<(O&31)&4294967295}}getRow(i,s){s==null||s.getSize()<this.width?s=new Ue(this.width):s.clear();const l=this.rowSize,u=this.bits,f=i*l;for(let g=0;g<l;g++)s.setBulk(g*32,u[f+g]);return s}setRow(i,s){me.arraycopy(s.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),s=this.getHeight();let l=new Ue(i),u=new Ue(i);for(let f=0,g=Math.floor((s+1)/2);f<g;f++)l=this.getRow(f,l),u=this.getRow(s-1-f,u),l.reverse(),u.reverse(),this.setRow(f,u),this.setRow(s-1-f,l)}getEnclosingRectangle(){const i=this.width,s=this.height,l=this.rowSize,u=this.bits;let f=i,g=s,y=-1,x=-1;for(let T=0;T<s;T++)for(let b=0;b<l;b++){const O=u[T*l+b];if(O!==0){if(T<g&&(g=T),T>x&&(x=T),b*32<f){let L=0;for(;(O<<31-L&4294967295)===0;)L++;b*32+L<f&&(f=b*32+L)}if(b*32+31>y){let L=31;for(;!(O>>>L);)L--;b*32+L>y&&(y=b*32+L)}}}return y<f||x<g?null:Int32Array.from([f,g,y-f+1,x-g+1])}getTopLeftOnBit(){const i=this.rowSize,s=this.bits;let l=0;for(;l<s.length&&s[l]===0;)l++;if(l===s.length)return null;const u=l/i;let f=l%i*32;const g=s[l];let y=0;for(;(g<<31-y&4294967295)===0;)y++;return f+=y,Int32Array.from([f,u])}getBottomRightOnBit(){const i=this.rowSize,s=this.bits;let l=s.length-1;for(;l>=0&&s[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/i);let f=Math.floor(l%i)*32;const g=s[l];let y=31;for(;!(g>>>y);)y--;return f+=y,Int32Array.from([f,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof Ae))return!1;const s=i;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&Le.equals(this.bits,s.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+Le.hashCode(this.bits),i}toString(i="X ",s="  ",l=`
`){return this.buildToString(i,s,l)}buildToString(i,s,l){let u=new P;for(let f=0,g=this.height;f<g;f++){for(let y=0,x=this.width;y<x;y++)u.append(this.get(y,f)?i:s);u.append(l)}return u.toString()}clone(){return new Ae(this.width,this.height,this.rowSize,this.bits.slice())}}class ee extends w{static getNotFoundInstance(){return new ee}}ee.kind="NotFoundException";class ie extends Ee{constructor(i){super(i),this.luminances=ie.EMPTY,this.buckets=new Int32Array(ie.LUMINANCE_BUCKETS)}getBlackRow(i,s){const l=this.getLuminanceSource(),u=l.getWidth();s==null||s.getSize()<u?s=new Ue(u):s.clear(),this.initArrays(u);const f=l.getRow(i,this.luminances),g=this.buckets;for(let x=0;x<u;x++)g[(f[x]&255)>>ie.LUMINANCE_SHIFT]++;const y=ie.estimateBlackPoint(g);if(u<3)for(let x=0;x<u;x++)(f[x]&255)<y&&s.set(x);else{let x=f[0]&255,T=f[1]&255;for(let b=1;b<u-1;b++){const O=f[b+1]&255;(T*4-x-O)/2<y&&s.set(b),x=T,T=O}}return s}getBlackMatrix(){const i=this.getLuminanceSource(),s=i.getWidth(),l=i.getHeight(),u=new Ae(s,l);this.initArrays(s);const f=this.buckets;for(let x=1;x<5;x++){const T=Math.floor(l*x/5),b=i.getRow(T,this.luminances),O=Math.floor(s*4/5);for(let L=Math.floor(s/5);L<O;L++){const z=b[L]&255;f[z>>ie.LUMINANCE_SHIFT]++}}const g=ie.estimateBlackPoint(f),y=i.getMatrix();for(let x=0;x<l;x++){const T=x*s;for(let b=0;b<s;b++)(y[T+b]&255)<g&&u.set(b,x)}return u}createBinarizer(i){return new ie(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const s=this.buckets;for(let l=0;l<ie.LUMINANCE_BUCKETS;l++)s[l]=0}static estimateBlackPoint(i){const s=i.length;let l=0,u=0,f=0;for(let b=0;b<s;b++)i[b]>f&&(u=b,f=i[b]),i[b]>l&&(l=i[b]);let g=0,y=0;for(let b=0;b<s;b++){const O=b-u,L=i[b]*O*O;L>y&&(g=b,y=L)}if(u>g){const b=u;u=g,g=b}if(g-u<=s/16)throw new ee;let x=g-1,T=-1;for(let b=g-1;b>u;b--){const O=b-u,L=O*O*(g-b)*(l-i[b]);L>T&&(x=b,T=L)}return x<<ie.LUMINANCE_SHIFT}}ie.LUMINANCE_BITS=5,ie.LUMINANCE_SHIFT=8-ie.LUMINANCE_BITS,ie.LUMINANCE_BUCKETS=1<<ie.LUMINANCE_BITS,ie.EMPTY=Uint8ClampedArray.from([0]);class ae extends ie{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),s=i.getWidth(),l=i.getHeight();if(s>=ae.MINIMUM_DIMENSION&&l>=ae.MINIMUM_DIMENSION){const u=i.getMatrix();let f=s>>ae.BLOCK_SIZE_POWER;(s&ae.BLOCK_SIZE_MASK)!==0&&f++;let g=l>>ae.BLOCK_SIZE_POWER;(l&ae.BLOCK_SIZE_MASK)!==0&&g++;const y=ae.calculateBlackPoints(u,f,g,s,l),x=new Ae(s,l);ae.calculateThresholdForBlock(u,f,g,s,l,y,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new ae(i)}static calculateThresholdForBlock(i,s,l,u,f,g,y){const x=f-ae.BLOCK_SIZE,T=u-ae.BLOCK_SIZE;for(let b=0;b<l;b++){let O=b<<ae.BLOCK_SIZE_POWER;O>x&&(O=x);const L=ae.cap(b,2,l-3);for(let z=0;z<s;z++){let K=z<<ae.BLOCK_SIZE_POWER;K>T&&(K=T);const Q=ae.cap(z,2,s-3);let se=0;for(let Me=-2;Me<=2;Me++){const Oe=g[L+Me];se+=Oe[Q-2]+Oe[Q-1]+Oe[Q]+Oe[Q+1]+Oe[Q+2]}const fe=se/25;ae.thresholdBlock(i,K,O,fe,u,y)}}}static cap(i,s,l){return i<s?s:i>l?l:i}static thresholdBlock(i,s,l,u,f,g){for(let y=0,x=l*f+s;y<ae.BLOCK_SIZE;y++,x+=f)for(let T=0;T<ae.BLOCK_SIZE;T++)(i[x+T]&255)<=u&&g.set(s+T,l+y)}static calculateBlackPoints(i,s,l,u,f){const g=f-ae.BLOCK_SIZE,y=u-ae.BLOCK_SIZE,x=new Array(l);for(let T=0;T<l;T++){x[T]=new Int32Array(s);let b=T<<ae.BLOCK_SIZE_POWER;b>g&&(b=g);for(let O=0;O<s;O++){let L=O<<ae.BLOCK_SIZE_POWER;L>y&&(L=y);let z=0,K=255,Q=0;for(let fe=0,Me=b*u+L;fe<ae.BLOCK_SIZE;fe++,Me+=u){for(let Oe=0;Oe<ae.BLOCK_SIZE;Oe++){const be=i[Me+Oe]&255;z+=be,be<K&&(K=be),be>Q&&(Q=be)}if(Q-K>ae.MIN_DYNAMIC_RANGE)for(fe++,Me+=u;fe<ae.BLOCK_SIZE;fe++,Me+=u)for(let Oe=0;Oe<ae.BLOCK_SIZE;Oe++)z+=i[Me+Oe]&255}let se=z>>ae.BLOCK_SIZE_POWER*2;if(Q-K<=ae.MIN_DYNAMIC_RANGE&&(se=K/2,T>0&&O>0)){const fe=(x[T-1][O]+2*x[T][O-1]+x[T-1][O-1])/4;K<fe&&(se=fe)}x[T][O]=se}}return x}}ae.BLOCK_SIZE_POWER=3,ae.BLOCK_SIZE=1<<ae.BLOCK_SIZE_POWER,ae.BLOCK_SIZE_MASK=ae.BLOCK_SIZE-1,ae.MINIMUM_DIMENSION=ae.BLOCK_SIZE*5,ae.MIN_DYNAMIC_RANGE=24;class Re{constructor(i,s){this.width=i,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,s,l,u){throw new Z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Z("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let s=new P;for(let l=0;l<this.height;l++){const u=this.getRow(l,i);for(let f=0;f<this.width;f++){const g=u[f]&255;let y;g<64?y="#":g<128?y="+":g<192?y=".":y=" ",s.append(y)}s.append(`
`)}return s.toString()}}class Fe extends Re{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,s){const l=this.delegate.getRow(i,s),u=this.getWidth();for(let f=0;f<u;f++)l[f]=255-(l[f]&255);return l}getMatrix(){const i=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(s);for(let u=0;u<s;u++)l[u]=255-(i[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(i,s,l,u){return new Fe(this.delegate.crop(i,s,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Fe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Fe(this.delegate.rotateCounterClockwise45())}}class Ie extends Re{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=Ie.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const s=i.getContext("2d").getImageData(0,0,i.width,i.height);return Ie.toGrayscaleBuffer(s.data,i.width,i.height)}static toGrayscaleBuffer(i,s,l){const u=new Uint8ClampedArray(s*l);for(let f=0,g=0,y=i.length;f<y;f+=4,g++){let x;if(i[f+3]===0)x=255;else{const b=i[f],O=i[f+1],L=i[f+2];x=306*b+601*O+117*L+512>>10}u[g]=x}return u}getRow(i,s){if(i<0||i>=this.getHeight())throw new M("Requested row is outside the image: "+i);const l=this.getWidth(),u=i*l;return s===null?s=this.buffer.slice(u,u+l):(s.length<l&&(s=new Uint8ClampedArray(l)),s.set(this.buffer.slice(u,u+l))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,s,l,u){return super.crop(i,s,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const s=this.getTempCanvasElement(),l=s.getContext("2d"),u=i*Ie.DEGREE_TO_RADIANS,f=this.canvas.width,g=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(u))*f+Math.abs(Math.sin(u))*g),x=Math.ceil(Math.abs(Math.sin(u))*f+Math.abs(Math.cos(u))*g);return s.width=y,s.height=x,l.translate(y/2,x/2),l.rotate(u),l.drawImage(this.canvas,f/-2,g/-2),this.buffer=Ie.makeBufferFromCanvasImageData(s),this}invert(){return new Fe(this)}}Ie.DEGREE_TO_RADIANS=Math.PI/180;class q{constructor(i,s,l){this.deviceId=i,this.label=s,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var $=(globalThis||Dh||self||window||void 0)&&(globalThis||Dh||self||window||void 0).__awaiter||function(N,i,s,l){function u(f){return f instanceof s?f:new s(function(g){g(f)})}return new(s||(s=Promise))(function(f,g){function y(b){try{T(l.next(b))}catch(O){g(O)}}function x(b){try{T(l.throw(b))}catch(O){g(O)}}function T(b){b.done?f(b.value):u(b.value).then(y,x)}T((l=l.apply(N,i||[])).next())})};class Ce{constructor(i,s=500,l){this.reader=i,this.timeBetweenScansMillis=s,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return $(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const l of i){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const f=l.deviceId||l.id,g=l.label||`Video device ${s.length+1}`,y=l.groupId,x={deviceId:f,label:g,kind:u,groupId:y};s.push(x)}return s})}getVideoInputDevices(){return $(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new q(s.deviceId,s.label))})}findDeviceById(i){return $(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(l=>l.deviceId===i):null})}decodeFromInputVideoDevice(i,s){return $(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,s)})}decodeOnceFromVideoDevice(i,s){return $(this,void 0,void 0,function*(){this.reset();let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,s)})}decodeOnceFromConstraints(i,s){return $(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(l,s)})}decodeOnceFromStream(i,s){return $(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,s);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(i,s,l){return $(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,s,l)})}decodeFromVideoDevice(i,s,l){return $(this,void 0,void 0,function*(){let u;i?u={deviceId:{exact:i}}:u={facingMode:"environment"};const f={video:u};return yield this.decodeFromConstraints(f,s,l)})}decodeFromConstraints(i,s,l){return $(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(u,s,l)})}decodeFromStream(i,s,l){return $(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(i,s);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,s){return $(this,void 0,void 0,function*(){const l=this.prepareVideoElement(s);return this.addVideoSource(l,i),this.videoElement=l,this.stream=i,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(i){return new Promise((s,l)=>this.playVideoOnLoad(i,()=>s()))}playVideoOnLoad(i,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",s),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return $(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,s){const l=document.getElementById(i);if(!l)throw new D(`element with id '${i}' not found`);if(l.nodeName.toLowerCase()!==s.toLowerCase())throw new D(`element with id '${i}' must be an ${s} element`);return l}decodeFromImage(i,s){if(!i&&!s)throw new D("either imageElement with a src set or an url must be provided");return s&&!i?this.decodeFromImageUrl(s):this.decodeFromImageElement(i)}decodeFromVideo(i,s){if(!i&&!s)throw new D("Either an element with a src set or an URL must be provided");return s&&!i?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,s,l){if(i===void 0&&s===void 0)throw new D("Either an element with a src set or an URL must be provided");return s&&!i?this.decodeFromVideoUrlContinuously(s,l):this.decodeFromVideoElementContinuously(i,l)}decodeFromImageElement(i){if(!i)throw new D("An image element must be provided.");this.reset();const s=this.prepareImageElement(i);this.imageElement=s;let l;return this.isImageLoaded(s)?l=this.decodeOnce(s,!1,!0):l=this._decodeOnLoadImage(s),l}decodeFromVideoElement(i){const s=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(i,s){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(l,s)}_decodeFromVideoElementSetup(i){if(!i)throw new D("A video element must be provided.");this.reset();const s=this.prepareVideoElement(i);return this.videoElement=s,s}decodeFromImageUrl(i){if(!i)throw new D("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const l=this._decodeOnLoadImage(s);return s.src=i,l}decodeFromVideoUrl(i){if(!i)throw new D("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElement(s);return s.src=i,l}decodeFromVideoUrlContinuously(i,s){if(!i)throw new D("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,s);return l.src=i,u}_decodeOnLoadImage(i){return new Promise((s,l)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(s,l),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return $(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,s){return $(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,s)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let s;return typeof i>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof i=="string"&&(s=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(s=i),s}prepareVideoElement(i){let s;return!i&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof i=="string"&&(s=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(s=i),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(i,s=!0,l=!0){this._stopAsyncDecode=!1;const u=(f,g)=>{if(this._stopAsyncDecode){g(new ee("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(i);f(y)}catch(y){const x=s&&y instanceof ee,b=(y instanceof te||y instanceof V)&&l;if(x||b)return setTimeout(u,this._timeBetweenDecodingAttempts,f,g);g(y)}};return new Promise((f,g)=>u(f,g))}decodeContinuously(i,s){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(i);s(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){s(null,u);const f=u instanceof te||u instanceof V,g=u instanceof ee;(f||g)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(i){const s=this.createBinaryBitmap(i);return this.decodeBitmap(s)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,s,l){s||(s={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(i,s,l=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const s=this.getCaptureCanvas(i),l=new Ie(s),u=new ae(l);return new G(u)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const s=this.createCaptureCanvas(i);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let l,u;return typeof i<"u"&&(i instanceof HTMLVideoElement?(l=i.videoWidth,u=i.videoHeight):i instanceof HTMLImageElement&&(l=i.naturalWidth||i.width,u=i.naturalHeight||i.height)),s.style.width=l+"px",s.style.height=u+"px",s.width=l,s.height=u,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,s){try{i.srcObject=s}catch{i.src=URL.createObjectURL(s)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class Be{constructor(i,s,l=s==null?0:8*s.length,u,f,g=me.currentTimeMillis()){this.text=i,this.rawBytes=s,this.numBits=l,this.resultPoints=u,this.format=f,this.timestamp=g,this.text=i,this.rawBytes=s,l==null?this.numBits=s==null?0:8*s.length:this.numBits=l,this.resultPoints=u,this.format=f,this.resultMetadata=null,g==null?this.timestamp=me.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,s)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const s=this.resultPoints;if(s===null)this.resultPoints=i;else if(i!==null&&i.length>0){const l=new Array(s.length+i.length);me.arraycopy(s,0,l,0,s.length),me.arraycopy(i,0,l,s.length,i.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var et;(function(N){N[N.AZTEC=0]="AZTEC",N[N.CODABAR=1]="CODABAR",N[N.CODE_39=2]="CODE_39",N[N.CODE_93=3]="CODE_93",N[N.CODE_128=4]="CODE_128",N[N.DATA_MATRIX=5]="DATA_MATRIX",N[N.EAN_8=6]="EAN_8",N[N.EAN_13=7]="EAN_13",N[N.ITF=8]="ITF",N[N.MAXICODE=9]="MAXICODE",N[N.PDF_417=10]="PDF_417",N[N.QR_CODE=11]="QR_CODE",N[N.RSS_14=12]="RSS_14",N[N.RSS_EXPANDED=13]="RSS_EXPANDED",N[N.UPC_A=14]="UPC_A",N[N.UPC_E=15]="UPC_E",N[N.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(et||(et={}));var ke=et,At;(function(N){N[N.OTHER=0]="OTHER",N[N.ORIENTATION=1]="ORIENTATION",N[N.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",N[N.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",N[N.ISSUE_NUMBER=4]="ISSUE_NUMBER",N[N.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",N[N.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",N[N.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",N[N.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",N[N.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",N[N.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(At||(At={}));var wt=At;class Zt{constructor(i,s,l,u,f=-1,g=-1){this.rawBytes=i,this.text=s,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=g,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class fr{exp(i){return this.expTable[i]}log(i){if(i===0)throw new M;return this.logTable[i]}static addOrSubtract(i,s){return i^s}}class zn{constructor(i,s){if(s.length===0)throw new M;this.field=i;const l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),me.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const s=this.coefficients;let l;if(i===1){l=0;for(let g=0,y=s.length;g!==y;g++){const x=s[g];l=fr.addOrSubtract(l,x)}return l}l=s[0];const u=s.length,f=this.field;for(let g=1;g<u;g++)l=fr.addOrSubtract(f.multiply(i,l),s[g]);return l}addOrSubtract(i){if(!this.field.equals(i.field))throw new M("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let s=this.coefficients,l=i.coefficients;if(s.length>l.length){const g=s;s=l,l=g}let u=new Int32Array(l.length);const f=l.length-s.length;me.arraycopy(l,0,u,0,f);for(let g=f;g<l.length;g++)u[g]=fr.addOrSubtract(s[g-f],l[g]);return new zn(this.field,u)}multiply(i){if(!this.field.equals(i.field))throw new M("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const s=this.coefficients,l=s.length,u=i.coefficients,f=u.length,g=new Int32Array(l+f-1),y=this.field;for(let x=0;x<l;x++){const T=s[x];for(let b=0;b<f;b++)g[x+b]=fr.addOrSubtract(g[x+b],y.multiply(T,u[b]))}return new zn(y,g)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const s=this.coefficients.length,l=this.field,u=new Int32Array(s),f=this.coefficients;for(let g=0;g<s;g++)u[g]=l.multiply(f[g],i);return new zn(l,u)}multiplyByMonomial(i,s){if(i<0)throw new M;if(s===0)return this.field.getZero();const l=this.coefficients,u=l.length,f=new Int32Array(u+i),g=this.field;for(let y=0;y<u;y++)f[y]=g.multiply(l[y],s);return new zn(g,f)}divide(i){if(!this.field.equals(i.field))throw new M("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new M("Divide by 0");const s=this.field;let l=s.getZero(),u=this;const f=i.getCoefficient(i.getDegree()),g=s.inverse(f);for(;u.getDegree()>=i.getDegree()&&!u.isZero();){const y=u.getDegree()-i.getDegree(),x=s.multiply(u.getCoefficient(u.getDegree()),g),T=i.multiplyByMonomial(y,x),b=s.buildMonomial(y,x);l=l.addOrSubtract(b),u=u.addOrSubtract(T)}return[l,u]}toString(){let i="";for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);if(l!==0){if(l<0?(i+=" - ",l=-l):i.length>0&&(i+=" + "),s===0||l!==1){const u=this.field.log(l);u===0?i+="1":u===1?i+="a":(i+="a^",i+=u)}s!==0&&(s===1?i+="x":(i+="x^",i+=s))}}return i}}class Jr extends w{}Jr.kind="ArithmeticException";class Tt extends fr{constructor(i,s,l){super(),this.primitive=i,this.size=s,this.generatorBase=l;const u=new Int32Array(s);let f=1;for(let y=0;y<s;y++)u[y]=f,f*=2,f>=s&&(f^=i,f&=s-1);this.expTable=u;const g=new Int32Array(s);for(let y=0;y<s-1;y++)g[u[y]]=y;this.logTable=g,this.zero=new zn(this,Int32Array.from([0])),this.one=new zn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,s){if(i<0)throw new M;if(s===0)return this.zero;const l=new Int32Array(i+1);return l[0]=s,new zn(this,l)}inverse(i){if(i===0)throw new Jr;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,s){return i===0||s===0?0:this.expTable[(this.logTable[i]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+pe.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}Tt.AZTEC_DATA_12=new Tt(4201,4096,1),Tt.AZTEC_DATA_10=new Tt(1033,1024,1),Tt.AZTEC_DATA_6=new Tt(67,64,1),Tt.AZTEC_PARAM=new Tt(19,16,1),Tt.QR_CODE_FIELD_256=new Tt(285,256,0),Tt.DATA_MATRIX_FIELD_256=new Tt(301,256,1),Tt.AZTEC_DATA_8=Tt.DATA_MATRIX_FIELD_256,Tt.MAXICODE_FIELD_64=Tt.AZTEC_DATA_6;class fi extends w{}fi.kind="ReedSolomonException";class Oi extends w{}Oi.kind="IllegalStateException";class dr{constructor(i){this.field=i}decode(i,s){const l=this.field,u=new zn(l,i),f=new Int32Array(s);let g=!0;for(let z=0;z<s;z++){const K=u.evaluateAt(l.exp(z+l.getGeneratorBase()));f[f.length-1-z]=K,K!==0&&(g=!1)}if(g)return;const y=new zn(l,f),x=this.runEuclideanAlgorithm(l.buildMonomial(s,1),y,s),T=x[0],b=x[1],O=this.findErrorLocations(T),L=this.findErrorMagnitudes(b,O);for(let z=0;z<O.length;z++){const K=i.length-1-l.log(O[z]);if(K<0)throw new fi("Bad error location");i[K]=Tt.addOrSubtract(i[K],L[z])}}runEuclideanAlgorithm(i,s,l){if(i.getDegree()<s.getDegree()){const z=i;i=s,s=z}const u=this.field;let f=i,g=s,y=u.getZero(),x=u.getOne();for(;g.getDegree()>=(l/2|0);){let z=f,K=y;if(f=g,y=x,f.isZero())throw new fi("r_{i-1} was zero");g=z;let Q=u.getZero();const se=f.getCoefficient(f.getDegree()),fe=u.inverse(se);for(;g.getDegree()>=f.getDegree()&&!g.isZero();){const Me=g.getDegree()-f.getDegree(),Oe=u.multiply(g.getCoefficient(g.getDegree()),fe);Q=Q.addOrSubtract(u.buildMonomial(Me,Oe)),g=g.addOrSubtract(f.multiplyByMonomial(Me,Oe))}if(x=Q.multiply(y).addOrSubtract(K),g.getDegree()>=f.getDegree())throw new Oi("Division algorithm failed to reduce polynomial?")}const T=x.getCoefficient(0);if(T===0)throw new fi("sigmaTilde(0) was zero");const b=u.inverse(T),O=x.multiplyScalar(b),L=g.multiplyScalar(b);return[O,L]}findErrorLocations(i){const s=i.getDegree();if(s===1)return Int32Array.from([i.getCoefficient(1)]);const l=new Int32Array(s);let u=0;const f=this.field;for(let g=1;g<f.getSize()&&u<s;g++)i.evaluateAt(g)===0&&(l[u]=f.inverse(g),u++);if(u!==s)throw new fi("Error locator degree does not match number of roots");return l}findErrorMagnitudes(i,s){const l=s.length,u=new Int32Array(l),f=this.field;for(let g=0;g<l;g++){const y=f.inverse(s[g]);let x=1;for(let T=0;T<l;T++)if(g!==T){const b=f.multiply(s[T],y),O=(b&1)===0?b|1:b&-2;x=f.multiply(x,O)}u[g]=f.multiply(i.evaluateAt(y),f.inverse(x)),f.getGeneratorBase()!==0&&(u[g]=f.multiply(u[g],y))}return u}}var Nn;(function(N){N[N.UPPER=0]="UPPER",N[N.LOWER=1]="LOWER",N[N.MIXED=2]="MIXED",N[N.DIGIT=3]="DIGIT",N[N.PUNCT=4]="PUNCT",N[N.BINARY=5]="BINARY"})(Nn||(Nn={}));class Gt{decode(i){this.ddata=i;let s=i.getBits(),l=this.extractBits(s),u=this.correctBits(l),f=Gt.convertBoolArrayToByteArray(u),g=Gt.getEncodedData(u),y=new Zt(f,g,null,null);return y.setNumBits(u.length),y}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let s=i.length,l=Nn.UPPER,u=Nn.UPPER,f="",g=0;for(;g<s;)if(u===Nn.BINARY){if(s-g<5)break;let y=Gt.readCode(i,g,5);if(g+=5,y===0){if(s-g<11)break;y=Gt.readCode(i,g,11)+31,g+=11}for(let x=0;x<y;x++){if(s-g<8){g=s;break}const T=Gt.readCode(i,g,8);f+=X.castAsNonUtf8Char(T),g+=8}u=l}else{let y=u===Nn.DIGIT?4:5;if(s-g<y)break;let x=Gt.readCode(i,g,y);g+=y;let T=Gt.getCharacter(u,x);T.startsWith("CTRL_")?(l=u,u=Gt.getTable(T.charAt(5)),T.charAt(6)==="L"&&(l=u)):(f+=T,u=l)}return f}static getTable(i){switch(i){case"L":return Nn.LOWER;case"P":return Nn.PUNCT;case"M":return Nn.MIXED;case"D":return Nn.DIGIT;case"B":return Nn.BINARY;default:return Nn.UPPER}}static getCharacter(i,s){switch(i){case Nn.UPPER:return Gt.UPPER_TABLE[s];case Nn.LOWER:return Gt.LOWER_TABLE[s];case Nn.MIXED:return Gt.MIXED_TABLE[s];case Nn.PUNCT:return Gt.PUNCT_TABLE[s];case Nn.DIGIT:return Gt.DIGIT_TABLE[s];default:throw new Oi("Bad table")}}correctBits(i){let s,l;this.ddata.getNbLayers()<=2?(l=6,s=Tt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,s=Tt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,s=Tt.AZTEC_DATA_10):(l=12,s=Tt.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),f=i.length/l;if(f<u)throw new V;let g=i.length%l,y=new Int32Array(f);for(let L=0;L<f;L++,g+=l)y[L]=Gt.readCode(i,g,l);try{new dr(s).decode(y,f-u)}catch(L){throw new V(L)}let x=(1<<l)-1,T=0;for(let L=0;L<u;L++){let z=y[L];if(z===0||z===x)throw new V;(z===1||z===x-1)&&T++}let b=new Array(u*l-T),O=0;for(let L=0;L<u;L++){let z=y[L];if(z===1||z===x-1)b.fill(z>1,O,O+l-1),O+=l-1;else for(let K=l-1;K>=0;--K)b[O++]=(z&1<<K)!==0}return b}extractBits(i){let s=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(s?11:14)+l*4,f=new Int32Array(u),g=new Array(this.totalBitsInLayer(l,s));if(s)for(let y=0;y<f.length;y++)f[y]=y;else{let y=u+1+2*pe.truncDivision(pe.truncDivision(u,2)-1,15),x=u/2,T=pe.truncDivision(y,2);for(let b=0;b<x;b++){let O=b+pe.truncDivision(b,15);f[x-b-1]=T-O-1,f[x+b]=T+O+1}}for(let y=0,x=0;y<l;y++){let T=(l-y)*4+(s?9:12),b=y*2,O=u-1-b;for(let L=0;L<T;L++){let z=L*2;for(let K=0;K<2;K++)g[x+z+K]=i.get(f[b+K],f[b+L]),g[x+2*T+z+K]=i.get(f[b+L],f[O-K]),g[x+4*T+z+K]=i.get(f[O-K],f[O-L]),g[x+6*T+z+K]=i.get(f[O-L],f[b+K])}x+=T*8}return g}static readCode(i,s,l){let u=0;for(let f=s;f<s+l;f++)u<<=1,i[f]&&(u|=1);return u}static readByte(i,s){let l=i.length-s;return l>=8?Gt.readCode(i,s,8):Gt.readCode(i,s,l)<<8-l}static convertBoolArrayToByteArray(i){let s=new Uint8Array((i.length+7)/8);for(let l=0;l<s.length;l++)s[l]=Gt.readByte(i,8*l);return s}totalBitsInLayer(i,s){return((s?88:112)+16*i)*i}}Gt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Gt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Gt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Gt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Gt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class tt{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,s,l,u){const f=i-l,g=s-u;return Math.sqrt(f*f+g*g)}static sum(i){let s=0;for(let l=0,u=i.length;l!==u;l++){const f=i[l];s+=f}return s}}class wn{static floatToIntBits(i){return i}}wn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class He{constructor(i,s){this.x=i,this.y=s}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof He){const s=i;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*wn.floatToIntBits(this.x)+wn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const s=this.distance(i[0],i[1]),l=this.distance(i[1],i[2]),u=this.distance(i[0],i[2]);let f,g,y;if(l>=s&&l>=u?(g=i[0],f=i[1],y=i[2]):u>=l&&u>=s?(g=i[1],f=i[0],y=i[2]):(g=i[2],f=i[0],y=i[1]),this.crossProductZ(f,g,y)<0){const x=f;f=y,y=x}i[0]=f,i[1]=g,i[2]=y}static distance(i,s){return tt.distance(i.x,i.y,s.x,s.y)}static crossProductZ(i,s,l){const u=s.x,f=s.y;return(l.x-u)*(i.y-f)-(l.y-f)*(i.x-u)}}class ma{constructor(i,s){this.bits=i,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class po extends ma{constructor(i,s,l,u,f){super(i,s),this.compact=l,this.nbDatablocks=u,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class pn{constructor(i,s,l,u){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),s==null&&(s=pn.INIT_SIZE),l==null&&(l=i.getWidth()/2|0),u==null&&(u=i.getHeight()/2|0);const f=s/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=u-f,this.downInit=u+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ee}detect(){let i=this.leftInit,s=this.rightInit,l=this.upInit,u=this.downInit,f=!1,g=!0,y=!1,x=!1,T=!1,b=!1,O=!1;const L=this.width,z=this.height;for(;g;){g=!1;let K=!0;for(;(K||!x)&&s<L;)K=this.containsBlackPoint(l,u,s,!1),K?(s++,g=!0,x=!0):x||s++;if(s>=L){f=!0;break}let Q=!0;for(;(Q||!T)&&u<z;)Q=this.containsBlackPoint(i,s,u,!0),Q?(u++,g=!0,T=!0):T||u++;if(u>=z){f=!0;break}let se=!0;for(;(se||!b)&&i>=0;)se=this.containsBlackPoint(l,u,i,!1),se?(i--,g=!0,b=!0):b||i--;if(i<0){f=!0;break}let fe=!0;for(;(fe||!O)&&l>=0;)fe=this.containsBlackPoint(i,s,l,!0),fe?(l--,g=!0,O=!0):O||l--;if(l<0){f=!0;break}g&&(y=!0)}if(!f&&y){const K=s-i;let Q=null;for(let Oe=1;Q===null&&Oe<K;Oe++)Q=this.getBlackPointOnSegment(i,u-Oe,i+Oe,u);if(Q==null)throw new ee;let se=null;for(let Oe=1;se===null&&Oe<K;Oe++)se=this.getBlackPointOnSegment(i,l+Oe,i+Oe,l);if(se==null)throw new ee;let fe=null;for(let Oe=1;fe===null&&Oe<K;Oe++)fe=this.getBlackPointOnSegment(s,l+Oe,s-Oe,l);if(fe==null)throw new ee;let Me=null;for(let Oe=1;Me===null&&Oe<K;Oe++)Me=this.getBlackPointOnSegment(s,u-Oe,s-Oe,u);if(Me==null)throw new ee;return this.centerEdges(Me,Q,fe,se)}else throw new ee}getBlackPointOnSegment(i,s,l,u){const f=tt.round(tt.distance(i,s,l,u)),g=(l-i)/f,y=(u-s)/f,x=this.image;for(let T=0;T<f;T++){const b=tt.round(i+T*g),O=tt.round(s+T*y);if(x.get(b,O))return new He(b,O)}return null}centerEdges(i,s,l,u){const f=i.getX(),g=i.getY(),y=s.getX(),x=s.getY(),T=l.getX(),b=l.getY(),O=u.getX(),L=u.getY(),z=pn.CORR;return f<this.width/2?[new He(O-z,L+z),new He(y+z,x+z),new He(T-z,b-z),new He(f+z,g-z)]:[new He(O+z,L+z),new He(y+z,x-z),new He(T-z,b+z),new He(f-z,g-z)]}containsBlackPoint(i,s,l,u){const f=this.image;if(u){for(let g=i;g<=s;g++)if(f.get(g,l))return!0}else for(let g=i;g<=s;g++)if(f.get(l,g))return!0;return!1}}pn.INIT_SIZE=10,pn.CORR=1;class $r{static checkAndNudgePoints(i,s){const l=i.getWidth(),u=i.getHeight();let f=!0;for(let g=0;g<s.length&&f;g+=2){const y=Math.floor(s[g]),x=Math.floor(s[g+1]);if(y<-1||y>l||x<-1||x>u)throw new ee;f=!1,y===-1?(s[g]=0,f=!0):y===l&&(s[g]=l-1,f=!0),x===-1?(s[g+1]=0,f=!0):x===u&&(s[g+1]=u-1,f=!0)}f=!0;for(let g=s.length-2;g>=0&&f;g-=2){const y=Math.floor(s[g]),x=Math.floor(s[g+1]);if(y<-1||y>l||x<-1||x>u)throw new ee;f=!1,y===-1?(s[g]=0,f=!0):y===l&&(s[g]=l-1,f=!0),x===-1?(s[g+1]=0,f=!0):x===u&&(s[g+1]=u-1,f=!0)}}}class di{constructor(i,s,l,u,f,g,y,x,T){this.a11=i,this.a21=s,this.a31=l,this.a12=u,this.a22=f,this.a32=g,this.a13=y,this.a23=x,this.a33=T}static quadrilateralToQuadrilateral(i,s,l,u,f,g,y,x,T,b,O,L,z,K,Q,se){const fe=di.quadrilateralToSquare(i,s,l,u,f,g,y,x);return di.squareToQuadrilateral(T,b,O,L,z,K,Q,se).times(fe)}transformPoints(i){const s=i.length,l=this.a11,u=this.a12,f=this.a13,g=this.a21,y=this.a22,x=this.a23,T=this.a31,b=this.a32,O=this.a33;for(let L=0;L<s;L+=2){const z=i[L],K=i[L+1],Q=f*z+x*K+O;i[L]=(l*z+g*K+T)/Q,i[L+1]=(u*z+y*K+b)/Q}}transformPointsWithValues(i,s){const l=this.a11,u=this.a12,f=this.a13,g=this.a21,y=this.a22,x=this.a23,T=this.a31,b=this.a32,O=this.a33,L=i.length;for(let z=0;z<L;z++){const K=i[z],Q=s[z],se=f*K+x*Q+O;i[z]=(l*K+g*Q+T)/se,s[z]=(u*K+y*Q+b)/se}}static squareToQuadrilateral(i,s,l,u,f,g,y,x){const T=i-l+f-y,b=s-u+g-x;if(T===0&&b===0)return new di(l-i,f-l,i,u-s,g-u,s,0,0,1);{const O=l-f,L=y-f,z=u-g,K=x-g,Q=O*K-L*z,se=(T*K-L*b)/Q,fe=(O*b-T*z)/Q;return new di(l-i+se*l,y-i+fe*y,i,u-s+se*u,x-s+fe*x,s,se,fe,1)}}static quadrilateralToSquare(i,s,l,u,f,g,y,x){return di.squareToQuadrilateral(i,s,l,u,f,g,y,x).buildAdjoint()}buildAdjoint(){return new di(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new di(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class pa extends $r{sampleGrid(i,s,l,u,f,g,y,x,T,b,O,L,z,K,Q,se,fe,Me,Oe){const be=di.quadrilateralToQuadrilateral(u,f,g,y,x,T,b,O,L,z,K,Q,se,fe,Me,Oe);return this.sampleGridWithTransform(i,s,l,be)}sampleGridWithTransform(i,s,l,u){if(s<=0||l<=0)throw new ee;const f=new Ae(s,l),g=new Float32Array(2*s);for(let y=0;y<l;y++){const x=g.length,T=y+.5;for(let b=0;b<x;b+=2)g[b]=b/2+.5,g[b+1]=T;u.transformPoints(g),$r.checkAndNudgePoints(i,g);try{for(let b=0;b<x;b+=2)i.get(Math.floor(g[b]),Math.floor(g[b+1]))&&f.set(b/2,y)}catch{throw new ee}}return f}}class gi{static setGridSampler(i){gi.gridSampler=i}static getInstance(){return gi.gridSampler}}gi.gridSampler=new pa;class ni{constructor(i,s){this.x=i,this.y=s}toResultPoint(){return new He(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class yo{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let s=this.getMatrixCenter(),l=this.getBullsEyeCorners(s);if(i){let g=l[0];l[0]=l[2],l[2]=g}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),f=this.getMatrixCornerPoints(l);return new po(u,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new ee;let s=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(i[0],i[1],s),this.sampleLine(i[1],i[2],s),this.sampleLine(i[2],i[3],s),this.sampleLine(i[3],i[0],s)]);this.shift=this.getRotation(l,s);let u=0;for(let g=0;g<4;g++){let y=l[(this.shift+g)%4];this.compact?(u<<=7,u+=y>>1&127):(u<<=10,u+=(y>>2&992)+(y>>1&31))}let f=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(i,s){let l=0;i.forEach((u,f,g)=>{let y=(u>>s-2<<1)+(u&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(pe.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new ee}getCorrectedParameterData(i,s){let l,u;s?(l=7,u=2):(l=10,u=4);let f=l-u,g=new Int32Array(l);for(let x=l-1;x>=0;--x)g[x]=i&15,i>>=4;try{new dr(Tt.AZTEC_PARAM).decode(g,f)}catch{throw new ee}let y=0;for(let x=0;x<u;x++)y=(y<<4)+g[x];return y}getBullsEyeCorners(i){let s=i,l=i,u=i,f=i,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let O=this.getFirstDifferent(s,g,1,-1),L=this.getFirstDifferent(l,g,1,1),z=this.getFirstDifferent(u,g,-1,1),K=this.getFirstDifferent(f,g,-1,-1);if(this.nbCenterLayers>2){let Q=this.distancePoint(K,O)*this.nbCenterLayers/(this.distancePoint(f,s)*(this.nbCenterLayers+2));if(Q<.75||Q>1.25||!this.isWhiteOrBlackRectangle(O,L,z,K))break}s=O,l=L,u=z,f=K,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ee;this.compact=this.nbCenterLayers===5;let y=new He(s.getX()+.5,s.getY()-.5),x=new He(l.getX()+.5,l.getY()+.5),T=new He(u.getX()-.5,u.getY()+.5),b=new He(f.getX()-.5,f.getY()-.5);return this.expandSquare([y,x,T,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,s,l,u;try{let y=new pn(this.image).detect();i=y[0],s=y[1],l=y[2],u=y[3]}catch{let x=this.image.getWidth()/2,T=this.image.getHeight()/2;i=this.getFirstDifferent(new ni(x+7,T-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new ni(x+7,T+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new ni(x-7,T+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new ni(x-7,T-7),!1,-1,-1).toResultPoint()}let f=tt.round((i.getX()+u.getX()+s.getX()+l.getX())/4),g=tt.round((i.getY()+u.getY()+s.getY()+l.getY())/4);try{let y=new pn(this.image,15,f,g).detect();i=y[0],s=y[1],l=y[2],u=y[3]}catch{i=this.getFirstDifferent(new ni(f+7,g-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new ni(f+7,g+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new ni(f-7,g+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new ni(f-7,g-7),!1,-1,-1).toResultPoint()}return f=tt.round((i.getX()+u.getX()+s.getX()+l.getX())/4),g=tt.round((i.getY()+u.getY()+s.getY()+l.getY())/4),new ni(f,g)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,s,l,u,f){let g=gi.getInstance(),y=this.getDimension(),x=y/2-this.nbCenterLayers,T=y/2+this.nbCenterLayers;return g.sampleGrid(i,y,y,x,x,T,x,T,T,x,T,s.getX(),s.getY(),l.getX(),l.getY(),u.getX(),u.getY(),f.getX(),f.getY())}sampleLine(i,s,l){let u=0,f=this.distanceResultPoint(i,s),g=f/l,y=i.getX(),x=i.getY(),T=g*(s.getX()-i.getX())/f,b=g*(s.getY()-i.getY())/f;for(let O=0;O<l;O++)this.image.get(tt.round(y+O*T),tt.round(x+O*b))&&(u|=1<<l-O-1);return u}isWhiteOrBlackRectangle(i,s,l,u){let f=3;i=new ni(i.getX()-f,i.getY()+f),s=new ni(s.getX()-f,s.getY()-f),l=new ni(l.getX()+f,l.getY()-f),u=new ni(u.getX()+f,u.getY()+f);let g=this.getColor(u,i);if(g===0)return!1;let y=this.getColor(i,s);return y!==g||(y=this.getColor(s,l),y!==g)?!1:(y=this.getColor(l,u),y===g)}getColor(i,s){let l=this.distancePoint(i,s),u=(s.getX()-i.getX())/l,f=(s.getY()-i.getY())/l,g=0,y=i.getX(),x=i.getY(),T=this.image.get(i.getX(),i.getY()),b=Math.ceil(l);for(let L=0;L<b;L++)y+=u,x+=f,this.image.get(tt.round(y),tt.round(x))!==T&&g++;let O=g/l;return O>.1&&O<.9?0:O<=.1===T?1:-1}getFirstDifferent(i,s,l,u){let f=i.getX()+l,g=i.getY()+u;for(;this.isValid(f,g)&&this.image.get(f,g)===s;)f+=l,g+=u;for(f-=l,g-=u;this.isValid(f,g)&&this.image.get(f,g)===s;)f+=l;for(f-=l;this.isValid(f,g)&&this.image.get(f,g)===s;)g+=u;return g-=u,new ni(f,g)}expandSquare(i,s,l){let u=l/(2*s),f=i[0].getX()-i[2].getX(),g=i[0].getY()-i[2].getY(),y=(i[0].getX()+i[2].getX())/2,x=(i[0].getY()+i[2].getY())/2,T=new He(y+u*f,x+u*g),b=new He(y-u*f,x-u*g);f=i[1].getX()-i[3].getX(),g=i[1].getY()-i[3].getY(),y=(i[1].getX()+i[3].getX())/2,x=(i[1].getY()+i[3].getY())/2;let O=new He(y+u*f,x+u*g),L=new He(y-u*f,x-u*g);return[T,O,b,L]}isValid(i,s){return i>=0&&i<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(i){let s=tt.round(i.getX()),l=tt.round(i.getY());return this.isValid(s,l)}distancePoint(i,s){return tt.distance(i.getX(),i.getY(),s.getX(),s.getY())}distanceResultPoint(i,s){return tt.distance(i.getX(),i.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(pe.truncDivision(this.nbLayers-4,8)+1)+15}}class Ns{decode(i,s=null){let l=null,u=new yo(i.getBlackMatrix()),f=null,g=null;try{let b=u.detectMirror(!1);f=b.getPoints(),this.reportFoundResultPoints(s,f),g=new Gt().decode(b)}catch(b){l=b}if(g==null)try{let b=u.detectMirror(!0);f=b.getPoints(),this.reportFoundResultPoints(s,f),g=new Gt().decode(b)}catch(b){throw l??b}let y=new Be(g.getText(),g.getRawBytes(),g.getNumBits(),f,ke.AZTEC,me.currentTimeMillis()),x=g.getByteSegments();x!=null&&y.putMetadata(wt.BYTE_SEGMENTS,x);let T=g.getECLevel();return T!=null&&y.putMetadata(wt.ERROR_CORRECTION_LEVEL,T),y}reportFoundResultPoints(i,s){if(i!=null){let l=i.get(Ve.NEED_RESULT_POINT_CALLBACK);l!=null&&s.forEach((u,f,g)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class tl extends Ce{constructor(i=500){super(new Ns,i)}}class qt{decode(i,s){try{return this.doDecode(i,s)}catch{if(s&&s.get(Ve.TRY_HARDER)===!0&&i.isRotateSupported()){const f=i.rotateCounterClockwise(),g=this.doDecode(f,s),y=g.getResultMetadata();let x=270;y!==null&&y.get(wt.ORIENTATION)===!0&&(x=x+y.get(wt.ORIENTATION)%360),g.putMetadata(wt.ORIENTATION,x);const T=g.getResultPoints();if(T!==null){const b=f.getHeight();for(let O=0;O<T.length;O++)T[O]=new He(b-T[O].getY()-1,T[O].getX())}return g}else throw new ee}}reset(){}doDecode(i,s){const l=i.getWidth(),u=i.getHeight();let f=new Ue(l);const g=s&&s.get(Ve.TRY_HARDER)===!0,y=Math.max(1,u>>(g?8:5));let x;g?x=u:x=15;const T=Math.trunc(u/2);for(let b=0;b<x;b++){const O=Math.trunc((b+1)/2),L=(b&1)===0,z=T+y*(L?O:-O);if(z<0||z>=u)break;try{f=i.getBlackRow(z,f)}catch{continue}for(let K=0;K<2;K++){if(K===1&&(f.reverse(),s&&s.get(Ve.NEED_RESULT_POINT_CALLBACK)===!0)){const Q=new Map;s.forEach((se,fe)=>Q.set(fe,se)),Q.delete(Ve.NEED_RESULT_POINT_CALLBACK),s=Q}try{const Q=this.decodeRow(z,f,s);if(K===1){Q.putMetadata(wt.ORIENTATION,180);const se=Q.getResultPoints();se!==null&&(se[0]=new He(l-se[0].getX()-1,se[0].getY()),se[1]=new He(l-se[1].getX()-1,se[1].getY()))}return Q}catch{}}}throw new ee}static recordPattern(i,s,l){const u=l.length;for(let T=0;T<u;T++)l[T]=0;const f=i.getSize();if(s>=f)throw new ee;let g=!i.get(s),y=0,x=s;for(;x<f;){if(i.get(x)!==g)l[y]++;else{if(++y===u)break;l[y]=1,g=!g}x++}if(!(y===u||y===u-1&&x===f))throw new ee}static recordPatternInReverse(i,s,l){let u=l.length,f=i.get(s);for(;s>0&&u>=0;)i.get(--s)!==f&&(u--,f=!f);if(u>=0)throw new ee;qt.recordPattern(i,s+1,l)}static patternMatchVariance(i,s,l){const u=i.length;let f=0,g=0;for(let T=0;T<u;T++)f+=i[T],g+=s[T];if(f<g)return Number.POSITIVE_INFINITY;const y=f/g;l*=y;let x=0;for(let T=0;T<u;T++){const b=i[T],O=s[T]*y,L=b>O?b-O:O-b;if(L>l)return Number.POSITIVE_INFINITY;x+=L}return x/f}}class Ne extends qt{static findStartPattern(i){const s=i.getSize(),l=i.getNextSet(0);let u=0,f=Int32Array.from([0,0,0,0,0,0]),g=l,y=!1;const x=6;for(let T=l;T<s;T++)if(i.get(T)!==y)f[u]++;else{if(u===x-1){let b=Ne.MAX_AVG_VARIANCE,O=-1;for(let L=Ne.CODE_START_A;L<=Ne.CODE_START_C;L++){const z=qt.patternMatchVariance(f,Ne.CODE_PATTERNS[L],Ne.MAX_INDIVIDUAL_VARIANCE);z<b&&(b=z,O=L)}if(O>=0&&i.isRange(Math.max(0,g-(T-g)/2),g,!1))return Int32Array.from([g,T,O]);g+=f[0]+f[1],f=f.slice(2,f.length-1),f[u-1]=0,f[u]=0,u--}else u++;f[u]=1,y=!y}throw new ee}static decodeCode(i,s,l){qt.recordPattern(i,l,s);let u=Ne.MAX_AVG_VARIANCE,f=-1;for(let g=0;g<Ne.CODE_PATTERNS.length;g++){const y=Ne.CODE_PATTERNS[g],x=this.patternMatchVariance(s,y,Ne.MAX_INDIVIDUAL_VARIANCE);x<u&&(u=x,f=g)}if(f>=0)return f;throw new ee}decodeRow(i,s,l){const u=l&&l.get(Ve.ASSUME_GS1)===!0,f=Ne.findStartPattern(s),g=f[2];let y=0;const x=new Uint8Array(20);x[y++]=g;let T;switch(g){case Ne.CODE_START_A:T=Ne.CODE_CODE_A;break;case Ne.CODE_START_B:T=Ne.CODE_CODE_B;break;case Ne.CODE_START_C:T=Ne.CODE_CODE_C;break;default:throw new V}let b=!1,O=!1,L="",z=f[0],K=f[1];const Q=Int32Array.from([0,0,0,0,0,0]);let se=0,fe=0,Me=g,Oe=0,be=!0,Et=!1,ut=!1;for(;!b;){const Hs=O;switch(O=!1,se=fe,fe=Ne.decodeCode(s,Q,K),x[y++]=fe,fe!==Ne.CODE_STOP&&(be=!0),fe!==Ne.CODE_STOP&&(Oe++,Me+=Oe*fe),z=K,K+=Q.reduce((Ru,ic)=>Ru+ic,0),fe){case Ne.CODE_START_A:case Ne.CODE_START_B:case Ne.CODE_START_C:throw new V}switch(T){case Ne.CODE_CODE_A:if(fe<64)ut===Et?L+=String.fromCharCode(32+fe):L+=String.fromCharCode(32+fe+128),ut=!1;else if(fe<96)ut===Et?L+=String.fromCharCode(fe-64):L+=String.fromCharCode(fe+64),ut=!1;else switch(fe!==Ne.CODE_STOP&&(be=!1),fe){case Ne.CODE_FNC_1:u&&(L.length===0?L+="]C1":L+="");break;case Ne.CODE_FNC_2:case Ne.CODE_FNC_3:break;case Ne.CODE_FNC_4_A:!Et&&ut?(Et=!0,ut=!1):Et&&ut?(Et=!1,ut=!1):ut=!0;break;case Ne.CODE_SHIFT:O=!0,T=Ne.CODE_CODE_B;break;case Ne.CODE_CODE_B:T=Ne.CODE_CODE_B;break;case Ne.CODE_CODE_C:T=Ne.CODE_CODE_C;break;case Ne.CODE_STOP:b=!0;break}break;case Ne.CODE_CODE_B:if(fe<96)ut===Et?L+=String.fromCharCode(32+fe):L+=String.fromCharCode(32+fe+128),ut=!1;else switch(fe!==Ne.CODE_STOP&&(be=!1),fe){case Ne.CODE_FNC_1:u&&(L.length===0?L+="]C1":L+="");break;case Ne.CODE_FNC_2:case Ne.CODE_FNC_3:break;case Ne.CODE_FNC_4_B:!Et&&ut?(Et=!0,ut=!1):Et&&ut?(Et=!1,ut=!1):ut=!0;break;case Ne.CODE_SHIFT:O=!0,T=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_A:T=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_C:T=Ne.CODE_CODE_C;break;case Ne.CODE_STOP:b=!0;break}break;case Ne.CODE_CODE_C:if(fe<100)fe<10&&(L+="0"),L+=fe;else switch(fe!==Ne.CODE_STOP&&(be=!1),fe){case Ne.CODE_FNC_1:u&&(L.length===0?L+="]C1":L+="");break;case Ne.CODE_CODE_A:T=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_B:T=Ne.CODE_CODE_B;break;case Ne.CODE_STOP:b=!0;break}break}Hs&&(T=T===Ne.CODE_CODE_A?Ne.CODE_CODE_B:Ne.CODE_CODE_A)}const Bn=K-z;if(K=s.getNextUnset(K),!s.isRange(K,Math.min(s.getSize(),K+(K-z)/2),!1))throw new ee;if(Me-=Oe*se,Me%103!==se)throw new te;const rr=L.length;if(rr===0)throw new ee;rr>0&&be&&(T===Ne.CODE_CODE_C?L=L.substring(0,rr-2):L=L.substring(0,rr-1));const Ti=(f[1]+f[0])/2,en=z+Bn/2,ri=x.length,Wi=new Uint8Array(ri);for(let Hs=0;Hs<ri;Hs++)Wi[Hs]=x[Hs];const Ca=[new He(Ti,i),new He(en,i)];return new Be(L,Wi,0,Ca,ke.CODE_128,new Date().getTime())}}Ne.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ne.MAX_AVG_VARIANCE=.25,Ne.MAX_INDIVIDUAL_VARIANCE=.7,Ne.CODE_SHIFT=98,Ne.CODE_CODE_C=99,Ne.CODE_CODE_B=100,Ne.CODE_CODE_A=101,Ne.CODE_FNC_1=102,Ne.CODE_FNC_2=97,Ne.CODE_FNC_3=96,Ne.CODE_FNC_4_A=101,Ne.CODE_FNC_4_B=100,Ne.CODE_START_A=103,Ne.CODE_START_B=104,Ne.CODE_START_C=105,Ne.CODE_STOP=106;class Xt extends qt{constructor(i=!1,s=!1){super(),this.usingCheckDigit=i,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,s,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let f=Xt.findAsteriskPattern(s,u),g=s.getNextSet(f[1]),y=s.getSize(),x,T;do{Xt.recordPattern(s,g,u);let Q=Xt.toNarrowWidePattern(u);if(Q<0)throw new ee;x=Xt.patternToChar(Q),this.decodeRowResult+=x,T=g;for(let se of u)g+=se;g=s.getNextSet(g)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let b=0;for(let Q of u)b+=Q;let O=g-T-b;if(g!==y&&O*2<b)throw new ee;if(this.usingCheckDigit){let Q=this.decodeRowResult.length-1,se=0;for(let fe=0;fe<Q;fe++)se+=Xt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(fe));if(this.decodeRowResult.charAt(Q)!==Xt.ALPHABET_STRING.charAt(se%43))throw new te;this.decodeRowResult=this.decodeRowResult.substring(0,Q)}if(this.decodeRowResult.length===0)throw new ee;let L;this.extendedMode?L=Xt.decodeExtended(this.decodeRowResult):L=this.decodeRowResult;let z=(f[1]+f[0])/2,K=T+b/2;return new Be(L,null,0,[new He(z,i),new He(K,i)],ke.CODE_39,new Date().getTime())}static findAsteriskPattern(i,s){let l=i.getSize(),u=i.getNextSet(0),f=0,g=u,y=!1,x=s.length;for(let T=u;T<l;T++)if(i.get(T)!==y)s[f]++;else{if(f===x-1){if(this.toNarrowWidePattern(s)===Xt.ASTERISK_ENCODING&&i.isRange(Math.max(0,g-Math.floor((T-g)/2)),g,!1))return[g,T];g+=s[0]+s[1],s.copyWithin(0,2,2+f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,y=!y}throw new ee}static toNarrowWidePattern(i){let s=i.length,l=0,u;do{let f=2147483647;for(let x of i)x<f&&x>l&&(f=x);l=f,u=0;let g=0,y=0;for(let x=0;x<s;x++){let T=i[x];T>l&&(y|=1<<s-1-x,u++,g+=T)}if(u===3){for(let x=0;x<s&&u>0;x++){let T=i[x];if(T>l&&(u--,T*2>=g))return-1}return y}}while(u>3);return-1}static patternToChar(i){for(let s=0;s<Xt.CHARACTER_ENCODINGS.length;s++)if(Xt.CHARACTER_ENCODINGS[s]===i)return Xt.ALPHABET_STRING.charAt(s);if(i===Xt.ASTERISK_ENCODING)return"*";throw new ee}static decodeExtended(i){let s=i.length,l="";for(let u=0;u<s;u++){let f=i.charAt(u);if(f==="+"||f==="$"||f==="%"||f==="/"){let g=i.charAt(u+1),y="\0";switch(f){case"+":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)+32);else throw new V;break;case"$":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)-64);else throw new V;break;case"%":if(g>="A"&&g<="E")y=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")y=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")y=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")y="\0";else if(g==="V")y="@";else if(g==="W")y="`";else if(g==="X"||g==="Y"||g==="Z")y="";else throw new V;break;case"/":if(g>="A"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")y=":";else throw new V;break}l+=y,u++}else l+=f}return l}}Xt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Xt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Xt.ASTERISK_ENCODING=148;class at extends qt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,s,l){let u=this.decodeStart(s),f=this.decodeEnd(s),g=new P;at.decodeMiddle(s,u[1],f[0],g);let y=g.toString(),x=null;l!=null&&(x=l.get(Ve.ALLOWED_LENGTHS)),x==null&&(x=at.DEFAULT_ALLOWED_LENGTHS);let T=y.length,b=!1,O=0;for(let K of x){if(T===K){b=!0;break}K>O&&(O=K)}if(!b&&T>O&&(b=!0),!b)throw new V;const L=[new He(u[1],i),new He(f[0],i)];return new Be(y,null,0,L,ke.ITF,new Date().getTime())}static decodeMiddle(i,s,l,u){let f=new Int32Array(10),g=new Int32Array(5),y=new Int32Array(5);for(f.fill(0),g.fill(0),y.fill(0);s<l;){qt.recordPattern(i,s,f);for(let T=0;T<5;T++){let b=2*T;g[T]=f[b],y[T]=f[b+1]}let x=at.decodeDigit(g);u.append(x.toString()),x=this.decodeDigit(y),u.append(x.toString()),f.forEach(function(T){s+=T})}}decodeStart(i){let s=at.skipWhiteSpace(i),l=at.findGuardPattern(i,s,at.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(i,l[0]),l}validateQuietZone(i,s){let l=this.narrowLineWidth*10;l=l<s?l:s;for(let u=s-1;l>0&&u>=0&&!i.get(u);u--)l--;if(l!==0)throw new ee}static skipWhiteSpace(i){const s=i.getSize(),l=i.getNextSet(0);if(l===s)throw new ee;return l}decodeEnd(i){i.reverse();try{let s=at.skipWhiteSpace(i),l;try{l=at.findGuardPattern(i,s,at.END_PATTERN_REVERSED[0])}catch(f){f instanceof ee&&(l=at.findGuardPattern(i,s,at.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,l[0]);let u=l[0];return l[0]=i.getSize()-l[1],l[1]=i.getSize()-u,l}finally{i.reverse()}}static findGuardPattern(i,s,l){let u=l.length,f=new Int32Array(u),g=i.getSize(),y=!1,x=0,T=s;f.fill(0);for(let b=s;b<g;b++)if(i.get(b)!==y)f[x]++;else{if(x===u-1){if(qt.patternMatchVariance(f,l,at.MAX_INDIVIDUAL_VARIANCE)<at.MAX_AVG_VARIANCE)return[T,b];T+=f[0]+f[1],me.arraycopy(f,2,f,0,x-1),f[x-1]=0,f[x]=0,x--}else x++;f[x]=1,y=!y}throw new ee}static decodeDigit(i){let s=at.MAX_AVG_VARIANCE,l=-1,u=at.PATTERNS.length;for(let f=0;f<u;f++){let g=at.PATTERNS[f],y=qt.patternMatchVariance(i,g,at.MAX_INDIVIDUAL_VARIANCE);y<s?(s=y,l=f):y===s&&(l=-1)}if(l>=0)return l%10;throw new ee}}at.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],at.MAX_AVG_VARIANCE=.38,at.MAX_INDIVIDUAL_VARIANCE=.5,at.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],at.START_PATTERN=Int32Array.from([1,1,1,1]),at.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class cn extends qt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let s=!1,l,u=0,f=Int32Array.from([0,0,0]);for(;!s;){f=Int32Array.from([0,0,0]),l=cn.findGuardPattern(i,u,!1,this.START_END_PATTERN,f);let g=l[0];u=l[1];let y=g-(u-g);y>=0&&(s=i.isRange(y,g,!1))}return l}static checkChecksum(i){return cn.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let s=i.length;if(s===0)return!1;let l=parseInt(i.charAt(s-1),10);return cn.getStandardUPCEANChecksum(i.substring(0,s-1))===l}static getStandardUPCEANChecksum(i){let s=i.length,l=0;for(let u=s-1;u>=0;u-=2){let f=i.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new V;l+=f}l*=3;for(let u=s-2;u>=0;u-=2){let f=i.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new V;l+=f}return(1e3-l)%10}static decodeEnd(i,s){return cn.findGuardPattern(i,s,!1,cn.START_END_PATTERN,new Int32Array(cn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,s,l,u){return this.findGuardPattern(i,s,l,u,new Int32Array(u.length))}static findGuardPattern(i,s,l,u,f){let g=i.getSize();s=l?i.getNextUnset(s):i.getNextSet(s);let y=0,x=s,T=u.length,b=l;for(let O=s;O<g;O++)if(i.get(O)!==b)f[y]++;else{if(y===T-1){if(qt.patternMatchVariance(f,u,cn.MAX_INDIVIDUAL_VARIANCE)<cn.MAX_AVG_VARIANCE)return Int32Array.from([x,O]);x+=f[0]+f[1];let L=f.slice(2,f.length-1);for(let z=0;z<y-1;z++)f[z]=L[z];f[y-1]=0,f[y]=0,y--}else y++;f[y]=1,b=!b}throw new ee}static decodeDigit(i,s,l,u){this.recordPattern(i,l,s);let f=this.MAX_AVG_VARIANCE,g=-1,y=u.length;for(let x=0;x<y;x++){let T=u[x],b=qt.patternMatchVariance(s,T,cn.MAX_INDIVIDUAL_VARIANCE);b<f&&(f=b,g=x)}if(g>=0)return g;throw new ee}}cn.MAX_AVG_VARIANCE=.48,cn.MAX_INDIVIDUAL_VARIANCE=.7,cn.START_END_PATTERN=Int32Array.from([1,1,1]),cn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),cn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),cn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Dr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,s,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(s,l,u),g=u.toString(),y=Dr.parseExtensionString(g),x=[new He((l[0]+l[1])/2,i),new He(f,i)],T=new Be(g,null,0,x,ke.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&T.putAllMetadata(y),T}decodeMiddle(i,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g=s[1],y=0;for(let T=0;T<5&&g<f;T++){let b=cn.decodeDigit(i,u,g,cn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+b%10);for(let O of u)g+=O;b>=10&&(y|=1<<4-T),T!==4&&(g=i.getNextSet(g),g=i.getNextUnset(g))}if(l.length!==5)throw new ee;let x=this.determineCheckDigit(y);if(Dr.extensionChecksum(l.toString())!==x)throw new ee;return g}static extensionChecksum(i){let s=i.length,l=0;for(let u=s-2;u>=0;u-=2)l+=i.charAt(u).charCodeAt(0)-48;l*=3;for(let u=s-1;u>=0;u-=2)l+=i.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(i){for(let s=0;s<10;s++)if(i===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new ee}static parseExtensionString(i){if(i.length!==5)return null;let s=Dr.parseExtension5String(i);return s==null?null:new Map([[wt.SUGGESTED_PRICE,s]])}static parseExtension5String(i){let s;switch(i.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let l=parseInt(i.substring(1)),u=(l/100).toString(),f=l%100,g=f<10?"0"+f:f.toString();return s+u+"."+g}}class ya{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,s,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(s,l,u),g=u.toString(),y=ya.parseExtensionString(g),x=[new He((l[0]+l[1])/2,i),new He(f,i)],T=new Be(g,null,0,x,ke.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&T.putAllMetadata(y),T}decodeMiddle(i,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g=s[1],y=0;for(let x=0;x<2&&g<f;x++){let T=cn.decodeDigit(i,u,g,cn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+T%10);for(let b of u)g+=b;T>=10&&(y|=1<<1-x),x!==1&&(g=i.getNextSet(g),g=i.getNextUnset(g))}if(l.length!==2)throw new ee;if(parseInt(l.toString())%4!==y)throw new ee;return g}static parseExtensionString(i){return i.length!==2?null:new Map([[wt.ISSUE_NUMBER,parseInt(i)]])}}class gr{static decodeRow(i,s,l){let u=cn.findGuardPattern(s,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Dr().decodeRow(i,s,u)}catch{return new ya().decodeRow(i,s,u)}}}gr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class xt extends cn{constructor(){super(),this.decodeRowStringBuffer="",xt.L_AND_G_PATTERNS=xt.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let s=xt.L_PATTERNS[i-10],l=new Int32Array(s.length);for(let u=0;u<s.length;u++)l[u]=s[s.length-u-1];xt.L_AND_G_PATTERNS[i]=l}}decodeRow(i,s,l){let u=xt.findStartGuardPattern(s),f=l==null?null:l.get(Ve.NEED_RESULT_POINT_CALLBACK);if(f!=null){const be=new He((u[0]+u[1])/2,i);f.foundPossibleResultPoint(be)}let g=this.decodeMiddle(s,u,this.decodeRowStringBuffer),y=g.rowOffset,x=g.resultString;if(f!=null){const be=new He(y,i);f.foundPossibleResultPoint(be)}let T=this.decodeEnd(s,y);if(f!=null){const be=new He((T[0]+T[1])/2,i);f.foundPossibleResultPoint(be)}let b=T[1],O=b+(b-T[0]);if(O>=s.getSize()||!s.isRange(b,O,!1))throw new ee;let L=x.toString();if(L.length<8)throw new V;if(!xt.checkChecksum(L))throw new te;let z=(u[1]+u[0])/2,K=(T[1]+T[0])/2,Q=this.getBarcodeFormat(),se=[new He(z,i),new He(K,i)],fe=new Be(L,null,0,se,Q,new Date().getTime()),Me=0;try{let be=gr.decodeRow(i,s,T[1]);fe.putMetadata(wt.UPC_EAN_EXTENSION,be.getText()),fe.putAllMetadata(be.getResultMetadata()),fe.addResultPoints(be.getResultPoints()),Me=be.getText().length}catch{}let Oe=l==null?null:l.get(Ve.ALLOWED_EAN_EXTENSIONS);if(Oe!=null){let be=!1;for(let Et in Oe)if(Me.toString()===Et){be=!0;break}if(!be)throw new ee}return fe}decodeEnd(i,s){return xt.findGuardPattern(i,s,!1,xt.START_END_PATTERN,new Int32Array(xt.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return xt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let s=i.length;if(s===0)return!1;let l=parseInt(i.charAt(s-1),10);return xt.getStandardUPCEANChecksum(i.substring(0,s-1))===l}static getStandardUPCEANChecksum(i){let s=i.length,l=0;for(let u=s-1;u>=0;u-=2){let f=i.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new V;l+=f}l*=3;for(let u=s-2;u>=0;u-=2){let f=i.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new V;l+=f}return(1e3-l)%10}}class sn extends xt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g=s[1],y=0;for(let T=0;T<6&&g<f;T++){let b=xt.decodeDigit(i,u,g,xt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+b%10);for(let O of u)g+=O;b>=10&&(y|=1<<5-T)}l=sn.determineFirstDigit(l,y),g=xt.findGuardPattern(i,g,!0,xt.MIDDLE_PATTERN,new Int32Array(xt.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<6&&g<f;T++){let b=xt.decodeDigit(i,u,g,xt.L_PATTERNS);l+=String.fromCharCode(48+b);for(let O of u)g+=O}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return ke.EAN_13}static determineFirstDigit(i,s){for(let l=0;l<10;l++)if(s===this.FIRST_DIGIT_ENCODINGS[l])return i=String.fromCharCode(48+l)+i,i;throw new ee}}sn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class mr extends xt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,s,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g=s[1];for(let x=0;x<4&&g<f;x++){let T=xt.decodeDigit(i,u,g,xt.L_PATTERNS);l+=String.fromCharCode(48+T);for(let b of u)g+=b}g=xt.findGuardPattern(i,g,!0,xt.MIDDLE_PATTERN,new Int32Array(xt.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&g<f;x++){let T=xt.decodeDigit(i,u,g,xt.L_PATTERNS);l+=String.fromCharCode(48+T);for(let b of u)g+=b}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return ke.EAN_8}}class pr extends xt{constructor(){super(...arguments),this.ean13Reader=new sn}getBarcodeFormat(){return ke.UPC_A}decode(i,s){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,s,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,s,l))}decodeMiddle(i,s,l){return this.ean13Reader.decodeMiddle(i,s,l)}maybeReturnResult(i){let s=i.getText();if(s.charAt(0)==="0"){let l=new Be(s.substring(1),null,null,i.getResultPoints(),ke.UPC_A);return i.getResultMetadata()!=null&&l.putAllMetadata(i.getResultMetadata()),l}else throw new ee}reset(){this.ean13Reader.reset()}}class On extends xt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,s,l){const u=this.decodeMiddleCounters.map(T=>T);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const f=i.getSize();let g=s[1],y=0;for(let T=0;T<6&&g<f;T++){const b=On.decodeDigit(i,u,g,On.L_AND_G_PATTERNS);l+=String.fromCharCode(48+b%10);for(let O of u)g+=O;b>=10&&(y|=1<<5-T)}let x=On.determineNumSysAndCheckDigit(l,y);return{rowOffset:g,resultString:x}}decodeEnd(i,s){return On.findGuardPatternWithoutCounters(i,s,!0,On.MIDDLE_END_PATTERN)}checkChecksum(i){return xt.checkChecksum(On.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,s){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let f=String.fromCharCode(48+l),g=String.fromCharCode(48+u);return f+i+g}throw ee.getNotFoundInstance()}getBarcodeFormat(){return ke.UPC_E}static convertUPCEtoUPCA(i){const s=i.slice(1,7).split("").map(f=>f.charCodeAt(0)),l=new P;l.append(i.charAt(0));let u=s[5];switch(u){case 0:case 1:case 2:l.appendChars(s,0,2),l.append(u),l.append("0000"),l.appendChars(s,2,3);break;case 3:l.appendChars(s,0,3),l.append("00000"),l.appendChars(s,3,2);break;case 4:l.appendChars(s,0,4),l.append("00000"),l.append(s[4]);break;default:l.appendChars(s,0,5),l.append("0000"),l.append(u);break}return i.length>=8&&l.append(i.charAt(7)),l.toString()}}On.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),On.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class _o extends qt{constructor(i){super();let s=i==null?null:i.get(Ve.POSSIBLE_FORMATS),l=[];o(s)?(l.push(new sn),l.push(new pr),l.push(new mr),l.push(new On)):(s.indexOf(ke.EAN_13)>-1&&l.push(new sn),s.indexOf(ke.UPC_A)>-1&&l.push(new pr),s.indexOf(ke.EAN_8)>-1&&l.push(new mr),s.indexOf(ke.UPC_E)>-1&&l.push(new On)),this.readers=l}decodeRow(i,s,l){for(let u of this.readers)try{const f=u.decodeRow(i,s,l),g=f.getBarcodeFormat()===ke.EAN_13&&f.getText().charAt(0)==="0",y=l==null?null:l.get(Ve.POSSIBLE_FORMATS),x=y==null||y.includes(ke.UPC_A);if(g&&x){const T=f.getRawBytes(),b=new Be(f.getText().substring(1),T,T?T.length:null,f.getResultPoints(),ke.UPC_A);return b.putAllMetadata(f.getResultMetadata()),b}return f}catch{}throw new ee}reset(){for(let i of this.readers)i.reset()}}class Hn extends qt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,s){for(let l=0;l<s.length;l++)if(qt.patternMatchVariance(i,s[l],Hn.MAX_INDIVIDUAL_VARIANCE)<Hn.MAX_AVG_VARIANCE)return l;throw new ee}static count(i){return tt.sum(new Int32Array(i))}static increment(i,s){let l=0,u=s[0];for(let f=1;f<i.length;f++)s[f]>u&&(u=s[f],l=f);i[l]++}static decrement(i,s){let l=0,u=s[0];for(let f=1;f<i.length;f++)s[f]<u&&(u=s[f],l=f);i[l]--}static isFinderPattern(i){let s=i[0]+i[1],l=s+i[2]+i[3],u=s/l;if(u>=Hn.MIN_FINDER_PATTERN_RATIO&&u<=Hn.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let y of i)y>g&&(g=y),y<f&&(f=y);return g<10*f}return!1}}Hn.MAX_AVG_VARIANCE=.2,Hn.MAX_INDIVIDUAL_VARIANCE=.45,Hn.MIN_FINDER_PATTERN_RATIO=9.5/12,Hn.MAX_FINDER_PATTERN_RATIO=12.5/14;class mi{constructor(i,s){this.value=i,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof mi))return!1;const s=i;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Mr{constructor(i,s,l,u,f){this.value=i,this.startEnd=s,this.value=i,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new He(l,f)),this.resultPoints.push(new He(u,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof Mr))return!1;const s=i;return this.value===s.value}hashCode(){return this.value}}class $i{constructor(){}static getRSSvalue(i,s,l){let u=0;for(let x of i)u+=x;let f=0,g=0,y=i.length;for(let x=0;x<y-1;x++){let T;for(T=1,g|=1<<x;T<i[x];T++,g&=~(1<<x)){let b=$i.combins(u-T-1,y-x-2);if(l&&g===0&&u-T-(y-x-1)>=y-x-1&&(b-=$i.combins(u-T-(y-x),y-x-2)),y-x-1>1){let O=0;for(let L=u-T-(y-x-2);L>s;L--)O+=$i.combins(u-T-L-1,y-x-3);b-=O*(y-1-x)}else u-T>s&&b--;f+=b}u-=T}return f}static combins(i,s){let l,u;i-s>s?(u=s,l=i-s):(u=i-s,l=s);let f=1,g=1;for(let y=i;y>l;y--)f*=y,g<=u&&(f/=g,g++);for(;g<=u;)f/=g,g++;return f}}class Os{static buildBitArray(i){let s=i.length*2-1;i[i.length-1].getRightChar()==null&&(s-=1);let l=12*s,u=new Ue(l),f=0,y=i[0].getRightChar().getValue();for(let x=11;x>=0;--x)(y&1<<x)!=0&&u.set(f),f++;for(let x=1;x<i.length;++x){let T=i[x],b=T.getLeftChar().getValue();for(let O=11;O>=0;--O)(b&1<<O)!=0&&u.set(f),f++;if(T.getRightChar()!=null){let O=T.getRightChar().getValue();for(let L=11;L>=0;--L)(O&1<<L)!=0&&u.set(f),f++}}return u}}class yr{constructor(i,s){s?this.decodedInformation=null:(this.finished=i,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ds{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class kn extends Ds{constructor(i,s){super(i),this.value=s}getValue(){return this.value}isFNC1(){return this.value===kn.FNC1}}kn.FNC1="$";class pi extends Ds{constructor(i,s,l){super(i),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class yi extends Ds{constructor(i,s,l){if(super(i),s<0||s>10||l<0||l>10)throw new V;this.firstDigit=s,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===yi.FNC1}isSecondDigitFNC1(){return this.secondDigit===yi.FNC1}isAnyFNC1(){return this.firstDigit===yi.FNC1||this.secondDigit===yi.FNC1}}yi.FNC1=10;class je{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new ee;let s=i.substring(0,2);for(let f of je.TWO_DIGIT_DATA_LENGTH)if(f[0]===s)return f[1]===je.VARIABLE_LENGTH?je.processVariableAI(2,f[2],i):je.processFixedAI(2,f[1],i);if(i.length<3)throw new ee;let l=i.substring(0,3);for(let f of je.THREE_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===je.VARIABLE_LENGTH?je.processVariableAI(3,f[2],i):je.processFixedAI(3,f[1],i);for(let f of je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,f[2],i):je.processFixedAI(4,f[1],i);if(i.length<4)throw new ee;let u=i.substring(0,4);for(let f of je.FOUR_DIGIT_DATA_LENGTH)if(f[0]===u)return f[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,f[2],i):je.processFixedAI(4,f[1],i);throw new ee}static processFixedAI(i,s,l){if(l.length<i)throw new ee;let u=l.substring(0,i);if(l.length<i+s)throw new ee;let f=l.substring(i,i+s),g=l.substring(i+s),y="("+u+")"+f,x=je.parseFieldsInGeneralPurpose(g);return x==null?y:y+x}static processVariableAI(i,s,l){let u=l.substring(0,i),f;l.length<i+s?f=l.length:f=i+s;let g=l.substring(i,f),y=l.substring(f),x="("+u+")"+g,T=je.parseFieldsInGeneralPurpose(y);return T==null?x:x+T}}je.VARIABLE_LENGTH=[],je.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",je.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",je.VARIABLE_LENGTH,20],["22",je.VARIABLE_LENGTH,29],["30",je.VARIABLE_LENGTH,8],["37",je.VARIABLE_LENGTH,8],["90",je.VARIABLE_LENGTH,30],["91",je.VARIABLE_LENGTH,30],["92",je.VARIABLE_LENGTH,30],["93",je.VARIABLE_LENGTH,30],["94",je.VARIABLE_LENGTH,30],["95",je.VARIABLE_LENGTH,30],["96",je.VARIABLE_LENGTH,30],["97",je.VARIABLE_LENGTH,3],["98",je.VARIABLE_LENGTH,30],["99",je.VARIABLE_LENGTH,30]],je.THREE_DIGIT_DATA_LENGTH=[["240",je.VARIABLE_LENGTH,30],["241",je.VARIABLE_LENGTH,30],["242",je.VARIABLE_LENGTH,6],["250",je.VARIABLE_LENGTH,30],["251",je.VARIABLE_LENGTH,30],["253",je.VARIABLE_LENGTH,17],["254",je.VARIABLE_LENGTH,20],["400",je.VARIABLE_LENGTH,30],["401",je.VARIABLE_LENGTH,30],["402",17],["403",je.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",je.VARIABLE_LENGTH,20],["421",je.VARIABLE_LENGTH,15],["422",3],["423",je.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",je.VARIABLE_LENGTH,15],["391",je.VARIABLE_LENGTH,18],["392",je.VARIABLE_LENGTH,15],["393",je.VARIABLE_LENGTH,18],["703",je.VARIABLE_LENGTH,30]],je.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",je.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",je.VARIABLE_LENGTH,20],["8003",je.VARIABLE_LENGTH,30],["8004",je.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",je.VARIABLE_LENGTH,30],["8008",je.VARIABLE_LENGTH,12],["8018",18],["8020",je.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",je.VARIABLE_LENGTH,70],["8200",je.VARIABLE_LENGTH,70]];class oi{constructor(i){this.buffer=new P,this.information=i}decodeAllCodes(i,s){let l=s,u=null;do{let f=this.decodeGeneralPurposeField(l,u),g=je.parseFieldsInGeneralPurpose(f.getNewString());if(g!=null&&i.append(g),f.isRemaining()?u=""+f.getRemainingValue():u=null,l===f.getNewPosition())break;l=f.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let s=i;s<i+3;++s)if(this.information.get(s))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(i,4);return f===0?new yi(this.information.getSize(),yi.FNC1,yi.FNC1):new yi(this.information.getSize(),f-1,yi.FNC1)}let s=this.extractNumericValueFromBitArray(i,7),l=(s-8)/11,u=(s-8)%11;return new yi(i+7,l,u)}extractNumericValueFromBitArray(i,s){return oi.extractNumericValueFromBitArray(this.information,i,s)}static extractNumericValueFromBitArray(i,s,l){let u=0;for(let f=0;f<l;++f)i.get(s+f)&&(u|=1<<l-f-1);return u}decodeGeneralPurposeField(i,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(i);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new pi(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new pi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,s;do{let l=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),i=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),i=s.isFinished()):(s=this.parseNumericBlock(),i=s.isFinished()),!(l!==this.current.getPosition())&&!i)break}while(!i);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let s;return i.isSecondDigitFNC1()?s=new pi(this.current.getPosition(),this.buffer.toString()):s=new pi(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new yr(!0,s)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let s=new pi(this.current.getPosition(),this.buffer.toString());return new yr(!0,s)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new yr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let s=new pi(this.current.getPosition(),this.buffer.toString());return new yr(!0,s)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new yr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let s=new pi(this.current.getPosition(),this.buffer.toString());return new yr(!0,s)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new yr(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(i,5);if(s>=5&&s<16)return!0;if(i+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<116)return!0;if(i+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(i,8);return u>=232&&u<253}decodeIsoIec646(i){let s=this.extractNumericValueFromBitArray(i,5);if(s===15)return new kn(i+5,kn.FNC1);if(s>=5&&s<15)return new kn(i+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<90)return new kn(i+7,""+(l+1));if(l>=90&&l<116)return new kn(i+7,""+(l+7));let u=this.extractNumericValueFromBitArray(i,8),f;switch(u){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new V}return new kn(i+8,f)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(i,5);if(s>=5&&s<16)return!0;if(i+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,6);return l>=16&&l<63}decodeAlphanumeric(i){let s=this.extractNumericValueFromBitArray(i,5);if(s===15)return new kn(i+5,kn.FNC1);if(s>=5&&s<15)return new kn(i+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(i,6);if(l>=32&&l<58)return new kn(i+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new Oi("Decoding invalid alphanumeric value: "+l)}return new kn(i+6,u)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let s=0;s<5&&s+i<this.information.getSize();++s)if(s===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+s))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let s=i;s<i+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let s=0;s<4&&s+i<this.information.getSize();++s)if(this.information.get(i+s))return!1;return!0}}class Tn{constructor(i){this.information=i,this.generalDecoder=new oi(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class zt extends Tn{constructor(i){super(i)}encodeCompressedGtin(i,s){i.append("(01)");let l=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,s,l)}encodeCompressedGtinWithoutAI(i,s,l){for(let u=0;u<4;++u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);f/100===0&&i.append("0"),f/10===0&&i.append("0"),i.append(f)}zt.appendCheckDigit(i,l)}static appendCheckDigit(i,s){let l=0;for(let u=0;u<13;u++){let f=i.charAt(u+s).charCodeAt(0)-48;l+=(u&1)===0?3*f:f}l=10-l%10,l===10&&(l=0),i.append(l)}}zt.GTIN_SIZE=40;class _i extends zt{constructor(i){super(i)}parseInformation(){let i=new P;i.append("(01)");let s=i.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(_i.HEADER_SIZE,4);return i.append(l),this.encodeCompressedGtinWithoutAI(i,_i.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(i,_i.HEADER_SIZE+44)}}_i.HEADER_SIZE=4;class es extends Tn{constructor(i){super(i)}parseInformation(){let i=new P;return this.getGeneralDecoder().decodeAllCodes(i,es.HEADER_SIZE)}}es.HEADER_SIZE=5;class _a extends zt{constructor(i){super(i)}encodeCompressedWeight(i,s,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s,l);this.addWeightCode(i,u);let f=this.checkWeight(u),g=1e5;for(let y=0;y<5;++y)f/g===0&&i.append("0"),g/=10;i.append(f)}}class Hi extends _a{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Hi.HEADER_SIZE+_a.GTIN_SIZE+Hi.WEIGHT_SIZE)throw new ee;let i=new P;return this.encodeCompressedGtin(i,Hi.HEADER_SIZE),this.encodeCompressedWeight(i,Hi.HEADER_SIZE+_a.GTIN_SIZE,Hi.WEIGHT_SIZE),i.toString()}}Hi.HEADER_SIZE=5,Hi.WEIGHT_SIZE=15;class nl extends Hi{constructor(i){super(i)}addWeightCode(i,s){i.append("(3103)")}checkWeight(i){return i}}class Lr extends Hi{constructor(i){super(i)}addWeightCode(i,s){s<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class Ei extends zt{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<Ei.HEADER_SIZE+zt.GTIN_SIZE)throw new ee;let i=new P;this.encodeCompressedGtin(i,Ei.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Ei.HEADER_SIZE+zt.GTIN_SIZE,Ei.LAST_DIGIT_SIZE);i.append("(392"),i.append(s),i.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Ei.HEADER_SIZE+zt.GTIN_SIZE+Ei.LAST_DIGIT_SIZE,null);return i.append(l.getNewString()),i.toString()}}Ei.HEADER_SIZE=8,Ei.LAST_DIGIT_SIZE=2;class dn extends zt{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<dn.HEADER_SIZE+zt.GTIN_SIZE)throw new ee;let i=new P;this.encodeCompressedGtin(i,dn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(dn.HEADER_SIZE+zt.GTIN_SIZE,dn.LAST_DIGIT_SIZE);i.append("(393"),i.append(s),i.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(dn.HEADER_SIZE+zt.GTIN_SIZE+dn.LAST_DIGIT_SIZE,dn.FIRST_THREE_DIGITS_SIZE);l/100==0&&i.append("0"),l/10==0&&i.append("0"),i.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(dn.HEADER_SIZE+zt.GTIN_SIZE+dn.LAST_DIGIT_SIZE+dn.FIRST_THREE_DIGITS_SIZE,null);return i.append(u.getNewString()),i.toString()}}dn.HEADER_SIZE=8,dn.LAST_DIGIT_SIZE=2,dn.FIRST_THREE_DIGITS_SIZE=10;class St extends _a{constructor(i,s,l){super(i),this.dateCode=l,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=St.HEADER_SIZE+St.GTIN_SIZE+St.WEIGHT_SIZE+St.DATE_SIZE)throw new ee;let i=new P;return this.encodeCompressedGtin(i,St.HEADER_SIZE),this.encodeCompressedWeight(i,St.HEADER_SIZE+St.GTIN_SIZE,St.WEIGHT_SIZE),this.encodeCompressedDate(i,St.HEADER_SIZE+St.GTIN_SIZE+St.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,St.DATE_SIZE);if(l==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let u=l%32;l/=32;let f=l%12+1;l/=12;let g=l;g/10==0&&i.append("0"),i.append(g),f/10==0&&i.append("0"),i.append(f),u/10==0&&i.append("0"),i.append(u)}addWeightCode(i,s){i.append("("),i.append(this.firstAIdigits),i.append(s/1e5),i.append(")")}checkWeight(i){return i%1e5}}St.HEADER_SIZE=8,St.WEIGHT_SIZE=20,St.DATE_SIZE=16;function Di(N){try{if(N.get(1))return new _i(N);if(!N.get(2))return new es(N);switch(oi.extractNumericValueFromBitArray(N,1,4)){case 4:return new nl(N);case 5:return new Lr(N)}switch(oi.extractNumericValueFromBitArray(N,1,5)){case 12:return new Ei(N);case 13:return new dn(N)}switch(oi.extractNumericValueFromBitArray(N,1,7)){case 56:return new St(N,"310","11");case 57:return new St(N,"320","11");case 58:return new St(N,"310","13");case 59:return new St(N,"320","13");case 60:return new St(N,"310","15");case 61:return new St(N,"320","15");case 62:return new St(N,"310","17");case 63:return new St(N,"320","17")}}catch(i){throw console.log(i),new Oi("unknown decoder: "+N)}}class ii{constructor(i,s,l,u){this.leftchar=i,this.rightchar=s,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,s){return i instanceof ii?ii.equalsOrNull(i.leftchar,s.leftchar)&&ii.equalsOrNull(i.rightchar,s.rightchar)&&ii.equalsOrNull(i.finderpattern,s.finderpattern):!1}static equalsOrNull(i,s){return i===null?s===null:ii.equals(i,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class vn{constructor(i,s,l){this.pairs=i,this.rowNumber=s,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,s){return i instanceof vn?this.checkEqualitity(i,s)&&i.wasReversed===s.wasReversed:!1}checkEqualitity(i,s){if(!i||!s)return;let l;return i.forEach((u,f)=>{s.forEach(g=>{u.getLeftChar().getValue()===g.getLeftChar().getValue()&&u.getRightChar().getValue()===g.getRightChar().getValue()&&u.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(l=!0)})}),l}}class ve extends Hn{constructor(i){super(...arguments),this.pairs=new Array(ve.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,s,l){this.pairs.length=0,this.startFromEven=!1;try{return ve.constructResult(this.decodeRow2pairs(i,s))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,ve.constructResult(this.decodeRow2pairs(i,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,s){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,i))}catch(f){if(f instanceof ee){if(!this.pairs.length)throw new ee;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(i,!1),u){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new ee}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return i&&(this.rows=this.rows.reverse()),s}checkRows(i,s){for(let l=s;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let g of i)this.pairs.push(g.getPairs());if(this.pairs.push(u.getPairs()),!ve.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(i);f.push(u);try{return this.checkRows(f,l+1)}catch(g){this.verbose&&console.log(g)}}throw new ee}static isValidSequence(i){for(let s of ve.FINDER_PATTERN_SEQUENCES){if(i.length>s.length)continue;let l=!0;for(let u=0;u<i.length;u++)if(i[u].getFinderPattern().getValue()!=s[u]){l=!1;break}if(l)return!0}return!1}storeRow(i,s){let l=0,u=!1,f=!1;for(;l<this.rows.length;){let g=this.rows[l];if(g.getRowNumber()>i){f=g.isEquivalent(this.pairs);break}u=g.isEquivalent(this.pairs),l++}f||u||ve.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new vn(this.pairs,i,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,s){for(let l of s)if(l.getPairs().length!==i.length){for(let u of l.getPairs())for(let f of i)if(ii.equals(u,f))break}}static isPartialRow(i,s){for(let l of s){let u=!0;for(let f of i){let g=!1;for(let y of l.getPairs())if(f.equals(y)){g=!0;break}if(!g){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(i){let s=Os.buildBitArray(i),u=Di(s).parseInformation(),f=i[0].getFinderPattern().getResultPoints(),g=i[i.length-1].getFinderPattern().getResultPoints(),y=[f[0],f[1],g[0],g[1]];return new Be(u,null,null,y,ke.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),s=i.getLeftChar(),l=i.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),f=2;for(let y=1;y<this.pairs.size();++y){let x=this.pairs.get(y);u+=x.getLeftChar().getChecksumPortion(),f++;let T=x.getRightChar();T!=null&&(u+=T.getChecksumPortion(),f++)}return u%=211,211*(f-4)+u==s.getValue()}static getNextSecondBar(i,s){let l;return i.get(s)?(l=i.getNextUnset(s),l=i.getNextSet(l)):(l=i.getNextSet(s),l=i.getNextUnset(l)),l}retrieveNextPair(i,s,l){let u=s.length%2==0;this.startFromEven&&(u=!u);let f,g=!0,y=-1;do this.findNextPair(i,s,y),f=this.parseFoundFinderPattern(i,l,u),f==null?y=ve.getNextSecondBar(i,this.startEnd[0]):g=!1;while(g);let x=this.decodeDataCharacter(i,f,u,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new ee;let T;try{T=this.decodeDataCharacter(i,f,u,!1)}catch(b){T=null,this.verbose&&console.log(b)}return new ii(x,T,f,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,s,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g;l>=0?g=l:this.isEmptyPair(s)?g=0:g=s[s.length-1].getFinderPattern().getStartEnd()[1];let y=s.length%2!=0;this.startFromEven&&(y=!y);let x=!1;for(;g<f&&(x=!i.get(g),!!x);)g++;let T=0,b=g;for(let O=g;O<f;O++)if(i.get(O)!=x)u[T]++;else{if(T==3){if(y&&ve.reverseCounters(u),ve.isFinderPattern(u)){this.startEnd[0]=b,this.startEnd[1]=O;return}y&&ve.reverseCounters(u),b+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,T--}else T++;u[T]=1,x=!x}throw new ee}static reverseCounters(i){let s=i.length;for(let l=0;l<s/2;++l){let u=i[l];i[l]=i[s-l-1],i[s-l-1]=u}}parseFoundFinderPattern(i,s,l){let u,f,g;if(l){let T=this.startEnd[0]-1;for(;T>=0&&!i.get(T);)T--;T++,u=this.startEnd[0]-T,f=T,g=this.startEnd[1]}else f=this.startEnd[0],g=i.getNextUnset(this.startEnd[1]+1),u=g-this.startEnd[1];let y=this.getDecodeFinderCounters();me.arraycopy(y,0,y,1,y.length-1),y[0]=u;let x;try{x=this.parseFinderValue(y,ve.FINDER_PATTERNS)}catch{return null}return new Mr(x,[f,g],f,g,s)}decodeDataCharacter(i,s,l,u){let f=this.getDataCharacterCounters();for(let en=0;en<f.length;en++)f[en]=0;if(u)ve.recordPatternInReverse(i,s.getStartEnd()[0],f);else{ve.recordPattern(i,s.getStartEnd()[1],f);for(let en=0,ri=f.length-1;en<ri;en++,ri--){let Wi=f[en];f[en]=f[ri],f[ri]=Wi}}let g=17,y=tt.sum(new Int32Array(f))/g,x=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(y-x)/x>.3)throw new ee;let T=this.getOddCounts(),b=this.getEvenCounts(),O=this.getOddRoundingErrors(),L=this.getEvenRoundingErrors();for(let en=0;en<f.length;en++){let ri=1*f[en]/y,Wi=ri+.5;if(Wi<1){if(ri<.3)throw new ee;Wi=1}else if(Wi>8){if(ri>8.7)throw new ee;Wi=8}let Ca=en/2;(en&1)==0?(T[Ca]=Wi,O[Ca]=ri-Wi):(b[Ca]=Wi,L[Ca]=ri-Wi)}this.adjustOddEvenCounts(g);let z=4*s.getValue()+(l?0:2)+(u?0:1)-1,K=0,Q=0;for(let en=T.length-1;en>=0;en--){if(ve.isNotA1left(s,l,u)){let ri=ve.WEIGHTS[z][2*en];Q+=T[en]*ri}K+=T[en]}let se=0;for(let en=b.length-1;en>=0;en--)if(ve.isNotA1left(s,l,u)){let ri=ve.WEIGHTS[z][2*en+1];se+=b[en]*ri}let fe=Q+se;if((K&1)!=0||K>13||K<4)throw new ee;let Me=(13-K)/2,Oe=ve.SYMBOL_WIDEST[Me],be=9-Oe,Et=$i.getRSSvalue(T,Oe,!0),ut=$i.getRSSvalue(b,be,!1),Bn=ve.EVEN_TOTAL_SUBSET[Me],rr=ve.GSUM[Me],Ti=Et*Bn+ut+rr;return new mi(Ti,fe)}static isNotA1left(i,s,l){return!(i.getValue()==0&&s&&l)}adjustOddEvenCounts(i){let s=tt.sum(new Int32Array(this.getOddCounts())),l=tt.sum(new Int32Array(this.getEvenCounts())),u=!1,f=!1;s>13?f=!0:s<4&&(u=!0);let g=!1,y=!1;l>13?y=!0:l<4&&(g=!0);let x=s+l-i,T=(s&1)==1,b=(l&1)==0;if(x==1)if(T){if(b)throw new ee;f=!0}else{if(!b)throw new ee;y=!0}else if(x==-1)if(T){if(b)throw new ee;u=!0}else{if(!b)throw new ee;g=!0}else if(x==0){if(T){if(!b)throw new ee;s<l?(u=!0,y=!0):(f=!0,g=!0)}else if(b)throw new ee}else throw new ee;if(u){if(f)throw new ee;ve.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&ve.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(y)throw new ee;ve.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&ve.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ve.SYMBOL_WIDEST=[7,5,4,3,1],ve.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ve.GSUM=[0,348,1388,2948,3988],ve.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ve.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ve.FINDER_PAT_A=0,ve.FINDER_PAT_B=1,ve.FINDER_PAT_C=2,ve.FINDER_PAT_D=3,ve.FINDER_PAT_E=4,ve.FINDER_PAT_F=5,ve.FINDER_PATTERN_SEQUENCES=[[ve.FINDER_PAT_A,ve.FINDER_PAT_A],[ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B],[ve.FINDER_PAT_A,ve.FINDER_PAT_C,ve.FINDER_PAT_B,ve.FINDER_PAT_D],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_C],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_D,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_E,ve.FINDER_PAT_B,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_D],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_E],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F],[ve.FINDER_PAT_A,ve.FINDER_PAT_A,ve.FINDER_PAT_B,ve.FINDER_PAT_B,ve.FINDER_PAT_C,ve.FINDER_PAT_D,ve.FINDER_PAT_D,ve.FINDER_PAT_E,ve.FINDER_PAT_E,ve.FINDER_PAT_F,ve.FINDER_PAT_F]],ve.MAX_PAIRS=11;class Eo extends mi{constructor(i,s,l){super(i,s),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ht extends Hn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,s,l){const u=this.decodePair(s,!1,i,l);Ht.addOrTally(this.possibleLeftPairs,u),s.reverse();let f=this.decodePair(s,!0,i,l);Ht.addOrTally(this.possibleRightPairs,f),s.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&Ht.checkChecksum(g,y))return Ht.constructResult(g,y)}throw new ee}static addOrTally(i,s){if(s==null)return;let l=!1;for(let u of i)if(u.getValue()===s.getValue()){u.incrementCount(),l=!0;break}l||i.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,s){let l=4537077*i.getValue()+s.getValue(),u=new String(l).toString(),f=new P;for(let T=13-u.length;T>0;T--)f.append("0");f.append(u);let g=0;for(let T=0;T<13;T++){let b=f.charAt(T).charCodeAt(0)-48;g+=(T&1)===0?3*b:b}g=10-g%10,g===10&&(g=0),f.append(g.toString());let y=i.getFinderPattern().getResultPoints(),x=s.getFinderPattern().getResultPoints();return new Be(f.toString(),null,0,[y[0],y[1],x[0],x[1]],ke.RSS_14,new Date().getTime())}static checkChecksum(i,s){let l=(i.getChecksumPortion()+16*s.getChecksumPortion())%79,u=9*i.getFinderPattern().getValue()+s.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(i,s,l,u){try{let f=this.findFinderPattern(i,s),g=this.parseFoundFinderPattern(i,l,s,f),y=u==null?null:u.get(Ve.NEED_RESULT_POINT_CALLBACK);if(y!=null){let b=(f[0]+f[1])/2;s&&(b=i.getSize()-1-b),y.foundPossibleResultPoint(new He(b,l))}let x=this.decodeDataCharacter(i,g,!0),T=this.decodeDataCharacter(i,g,!1);return new Eo(1597*x.getValue()+T.getValue(),x.getChecksumPortion()+4*T.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(i,s,l){let u=this.getDataCharacterCounters();for(let se=0;se<u.length;se++)u[se]=0;if(l)qt.recordPatternInReverse(i,s.getStartEnd()[0],u);else{qt.recordPattern(i,s.getStartEnd()[1]+1,u);for(let se=0,fe=u.length-1;se<fe;se++,fe--){let Me=u[se];u[se]=u[fe],u[fe]=Me}}let f=l?16:15,g=tt.sum(new Int32Array(u))/f,y=this.getOddCounts(),x=this.getEvenCounts(),T=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors();for(let se=0;se<u.length;se++){let fe=u[se]/g,Me=Math.floor(fe+.5);Me<1?Me=1:Me>8&&(Me=8);let Oe=Math.floor(se/2);(se&1)===0?(y[Oe]=Me,T[Oe]=fe-Me):(x[Oe]=Me,b[Oe]=fe-Me)}this.adjustOddEvenCounts(l,f);let O=0,L=0;for(let se=y.length-1;se>=0;se--)L*=9,L+=y[se],O+=y[se];let z=0,K=0;for(let se=x.length-1;se>=0;se--)z*=9,z+=x[se],K+=x[se];let Q=L+3*z;if(l){if((O&1)!==0||O>12||O<4)throw new ee;let se=(12-O)/2,fe=Ht.OUTSIDE_ODD_WIDEST[se],Me=9-fe,Oe=$i.getRSSvalue(y,fe,!1),be=$i.getRSSvalue(x,Me,!0),Et=Ht.OUTSIDE_EVEN_TOTAL_SUBSET[se],ut=Ht.OUTSIDE_GSUM[se];return new mi(Oe*Et+be+ut,Q)}else{if((K&1)!==0||K>10||K<4)throw new ee;let se=(10-K)/2,fe=Ht.INSIDE_ODD_WIDEST[se],Me=9-fe,Oe=$i.getRSSvalue(y,fe,!0),be=$i.getRSSvalue(x,Me,!1),Et=Ht.INSIDE_ODD_TOTAL_SUBSET[se],ut=Ht.INSIDE_GSUM[se];return new mi(be*Et+Oe+ut,Q)}}findFinderPattern(i,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=i.getSize(),f=!1,g=0;for(;g<u&&(f=!i.get(g),s!==f);)g++;let y=0,x=g;for(let T=g;T<u;T++)if(i.get(T)!==f)l[y]++;else{if(y===3){if(Hn.isFinderPattern(l))return[x,T];x+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,f=!f}throw new ee}parseFoundFinderPattern(i,s,l,u){let f=i.get(u[0]),g=u[0]-1;for(;g>=0&&f!==i.get(g);)g--;g++;const y=u[0]-g,x=this.getDecodeFinderCounters(),T=new Int32Array(x.length);me.arraycopy(x,0,T,1,x.length-1),T[0]=y;const b=this.parseFinderValue(T,Ht.FINDER_PATTERNS);let O=g,L=u[1];return l&&(O=i.getSize()-1-O,L=i.getSize()-1-L),new Mr(b,[g,u[1]],O,L,s)}adjustOddEvenCounts(i,s){let l=tt.sum(new Int32Array(this.getOddCounts())),u=tt.sum(new Int32Array(this.getEvenCounts())),f=!1,g=!1,y=!1,x=!1;i?(l>12?g=!0:l<4&&(f=!0),u>12?x=!0:u<4&&(y=!0)):(l>11?g=!0:l<5&&(f=!0),u>10?x=!0:u<4&&(y=!0));let T=l+u-s,b=(l&1)===(i?1:0),O=(u&1)===1;if(T===1)if(b){if(O)throw new ee;g=!0}else{if(!O)throw new ee;x=!0}else if(T===-1)if(b){if(O)throw new ee;f=!0}else{if(!O)throw new ee;y=!0}else if(T===0){if(b){if(!O)throw new ee;l<u?(f=!0,x=!0):(g=!0,y=!0)}else if(O)throw new ee}else throw new ee;if(f){if(g)throw new ee;Hn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&Hn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(x)throw new ee;Hn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Hn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ht.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ht.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ht.OUTSIDE_GSUM=[0,161,961,2015,2715],Ht.INSIDE_GSUM=[0,336,1036,1516],Ht.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ht.INSIDE_ODD_WIDEST=[2,4,6,8],Ht.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class xi extends qt{constructor(i,s){super(),this.readers=[],this.verbose=s===!0;const l=i?i.get(Ve.POSSIBLE_FORMATS):null,u=i&&i.get(Ve.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(ke.EAN_13)||l.includes(ke.UPC_A)||l.includes(ke.EAN_8)||l.includes(ke.UPC_E))&&this.readers.push(new _o(i)),l.includes(ke.CODE_39)&&this.readers.push(new Xt(u)),l.includes(ke.CODE_128)&&this.readers.push(new Ne),l.includes(ke.ITF)&&this.readers.push(new at),l.includes(ke.RSS_14)&&this.readers.push(new Ht),l.includes(ke.RSS_EXPANDED)&&this.readers.push(new ve(this.verbose))):(this.readers.push(new _o(i)),this.readers.push(new Xt),this.readers.push(new _o(i)),this.readers.push(new Ne),this.readers.push(new at),this.readers.push(new Ht),this.readers.push(new ve(this.verbose)))}decodeRow(i,s,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(i,s,l)}catch{}throw new ee}reset(){this.readers.forEach(i=>i.reset())}}class xo extends Ce{constructor(i=500,s){super(new xi(s),i,s)}}class Ot{constructor(i,s,l){this.ecCodewords=i,this.ecBlocks=[s],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class bt{constructor(i,s){this.count=i,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _t{constructor(i,s,l,u,f,g){this.versionNumber=i,this.symbolSizeRows=s,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=f,this.ecBlocks=g;let y=0;const x=g.getECCodewords(),T=g.getECBlocks();for(let b of T)y+=b.getCount()*(b.getDataCodewords()+x);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,s){if((i&1)!==0||(s&1)!==0)throw new V;for(let l of _t.VERSIONS)if(l.symbolSizeRows===i&&l.symbolSizeColumns===s)return l;throw new V}toString(){return""+this.versionNumber}static buildVersions(){return[new _t(1,10,10,8,8,new Ot(5,new bt(1,3))),new _t(2,12,12,10,10,new Ot(7,new bt(1,5))),new _t(3,14,14,12,12,new Ot(10,new bt(1,8))),new _t(4,16,16,14,14,new Ot(12,new bt(1,12))),new _t(5,18,18,16,16,new Ot(14,new bt(1,18))),new _t(6,20,20,18,18,new Ot(18,new bt(1,22))),new _t(7,22,22,20,20,new Ot(20,new bt(1,30))),new _t(8,24,24,22,22,new Ot(24,new bt(1,36))),new _t(9,26,26,24,24,new Ot(28,new bt(1,44))),new _t(10,32,32,14,14,new Ot(36,new bt(1,62))),new _t(11,36,36,16,16,new Ot(42,new bt(1,86))),new _t(12,40,40,18,18,new Ot(48,new bt(1,114))),new _t(13,44,44,20,20,new Ot(56,new bt(1,144))),new _t(14,48,48,22,22,new Ot(68,new bt(1,174))),new _t(15,52,52,24,24,new Ot(42,new bt(2,102))),new _t(16,64,64,14,14,new Ot(56,new bt(2,140))),new _t(17,72,72,16,16,new Ot(36,new bt(4,92))),new _t(18,80,80,18,18,new Ot(48,new bt(4,114))),new _t(19,88,88,20,20,new Ot(56,new bt(4,144))),new _t(20,96,96,22,22,new Ot(68,new bt(4,174))),new _t(21,104,104,24,24,new Ot(56,new bt(6,136))),new _t(22,120,120,18,18,new Ot(68,new bt(6,175))),new _t(23,132,132,20,20,new Ot(62,new bt(8,163))),new _t(24,144,144,22,22,new Ot(62,new bt(8,156),new bt(2,155))),new _t(25,8,18,6,16,new Ot(7,new bt(1,5))),new _t(26,8,32,6,14,new Ot(11,new bt(1,10))),new _t(27,12,26,10,24,new Ot(14,new bt(1,16))),new _t(28,12,36,10,16,new Ot(18,new bt(1,22))),new _t(29,16,36,14,16,new Ot(24,new bt(1,32))),new _t(30,16,48,14,22,new Ot(28,new bt(1,49)))]}}_t.VERSIONS=_t.buildVersions();class hs{constructor(i){const s=i.getHeight();if(s<8||s>144||(s&1)!==0)throw new V;this.version=hs.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new Ae(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const s=i.getHeight(),l=i.getWidth();return _t.getVersionForDimensions(s,l)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let s=0,l=4,u=0;const f=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let y=!1,x=!1,T=!1,b=!1;do if(l===f&&u===0&&!y)i[s++]=this.readCorner1(f,g)&255,l-=2,u+=2,y=!0;else if(l===f-2&&u===0&&(g&3)!==0&&!x)i[s++]=this.readCorner2(f,g)&255,l-=2,u+=2,x=!0;else if(l===f+4&&u===2&&(g&7)===0&&!T)i[s++]=this.readCorner3(f,g)&255,l-=2,u+=2,T=!0;else if(l===f-2&&u===0&&(g&7)===4&&!b)i[s++]=this.readCorner4(f,g)&255,l-=2,u+=2,b=!0;else{do l<f&&u>=0&&!this.readMappingMatrix.get(u,l)&&(i[s++]=this.readUtah(l,u,f,g)&255),l-=2,u+=2;while(l>=0&&u<g);l+=1,u+=3;do l>=0&&u<g&&!this.readMappingMatrix.get(u,l)&&(i[s++]=this.readUtah(l,u,f,g)&255),l+=2,u-=2;while(l<f&&u>=0);l+=3,u+=1}while(l<f||u<g);if(s!==this.version.getTotalCodewords())throw new V;return i}readModule(i,s,l,u){return i<0&&(i+=l,s+=4-(l+4&7)),s<0&&(s+=u,i+=4-(u+4&7)),this.readMappingMatrix.set(s,i),this.mappingBitMatrix.get(s,i)}readUtah(i,s,l,u){let f=0;return this.readModule(i-2,s-2,l,u)&&(f|=1),f<<=1,this.readModule(i-2,s-1,l,u)&&(f|=1),f<<=1,this.readModule(i-1,s-2,l,u)&&(f|=1),f<<=1,this.readModule(i-1,s-1,l,u)&&(f|=1),f<<=1,this.readModule(i-1,s,l,u)&&(f|=1),f<<=1,this.readModule(i,s-2,l,u)&&(f|=1),f<<=1,this.readModule(i,s-1,l,u)&&(f|=1),f<<=1,this.readModule(i,s,l,u)&&(f|=1),f}readCorner1(i,s){let l=0;return this.readModule(i-1,0,i,s)&&(l|=1),l<<=1,this.readModule(i-1,1,i,s)&&(l|=1),l<<=1,this.readModule(i-1,2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-1,i,s)&&(l|=1),l<<=1,this.readModule(1,s-1,i,s)&&(l|=1),l<<=1,this.readModule(2,s-1,i,s)&&(l|=1),l<<=1,this.readModule(3,s-1,i,s)&&(l|=1),l}readCorner2(i,s){let l=0;return this.readModule(i-3,0,i,s)&&(l|=1),l<<=1,this.readModule(i-2,0,i,s)&&(l|=1),l<<=1,this.readModule(i-1,0,i,s)&&(l|=1),l<<=1,this.readModule(0,s-4,i,s)&&(l|=1),l<<=1,this.readModule(0,s-3,i,s)&&(l|=1),l<<=1,this.readModule(0,s-2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-1,i,s)&&(l|=1),l<<=1,this.readModule(1,s-1,i,s)&&(l|=1),l}readCorner3(i,s){let l=0;return this.readModule(i-1,0,i,s)&&(l|=1),l<<=1,this.readModule(i-1,s-1,i,s)&&(l|=1),l<<=1,this.readModule(0,s-3,i,s)&&(l|=1),l<<=1,this.readModule(0,s-2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-1,i,s)&&(l|=1),l<<=1,this.readModule(1,s-3,i,s)&&(l|=1),l<<=1,this.readModule(1,s-2,i,s)&&(l|=1),l<<=1,this.readModule(1,s-1,i,s)&&(l|=1),l}readCorner4(i,s){let l=0;return this.readModule(i-3,0,i,s)&&(l|=1),l<<=1,this.readModule(i-2,0,i,s)&&(l|=1),l<<=1,this.readModule(i-1,0,i,s)&&(l|=1),l<<=1,this.readModule(0,s-2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-1,i,s)&&(l|=1),l<<=1,this.readModule(1,s-1,i,s)&&(l|=1),l<<=1,this.readModule(2,s-1,i,s)&&(l|=1),l<<=1,this.readModule(3,s-1,i,s)&&(l|=1),l}extractDataRegion(i){const s=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(i.getHeight()!==s)throw new M("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),g=s/u|0,y=l/f|0,x=g*u,T=y*f,b=new Ae(T,x);for(let O=0;O<g;++O){const L=O*u;for(let z=0;z<y;++z){const K=z*f;for(let Q=0;Q<u;++Q){const se=O*(u+2)+1+Q,fe=L+Q;for(let Me=0;Me<f;++Me){const Oe=z*(f+2)+1+Me;if(i.get(Oe,se)){const be=K+Me;b.set(be,fe)}}}}}return b}}class Ai{constructor(i,s){this.numDataCodewords=i,this.codewords=s}static getDataBlocks(i,s){const l=s.getECBlocks();let u=0;const f=l.getECBlocks();for(let Q of f)u+=Q.getCount();const g=new Array(u);let y=0;for(let Q of f)for(let se=0;se<Q.getCount();se++){const fe=Q.getDataCodewords(),Me=l.getECCodewords()+fe;g[y++]=new Ai(fe,new Uint8Array(Me))}const T=g[0].codewords.length-l.getECCodewords(),b=T-1;let O=0;for(let Q=0;Q<b;Q++)for(let se=0;se<y;se++)g[se].codewords[Q]=i[O++];const L=s.getVersionNumber()===24,z=L?8:y;for(let Q=0;Q<z;Q++)g[Q].codewords[T-1]=i[O++];const K=g[0].codewords.length;for(let Q=T;Q<K;Q++)for(let se=0;se<y;se++){const fe=L?(se+8)%y:se,Me=L&&fe>7?Q-1:Q;g[fe].codewords[Me]=i[O++]}if(O!==i.length)throw new M;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Cn{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new M(""+i);let s=0,l=this.bitOffset,u=this.byteOffset;const f=this.bytes;if(l>0){const g=8-l,y=i<g?i:g,x=g-y,T=255>>8-y<<x;s=(f[u]&T)>>x,i-=y,l+=y,l===8&&(l=0,u++)}if(i>0){for(;i>=8;)s=s<<8|f[u]&255,u++,i-=8;if(i>0){const g=8-i,y=255>>g<<g;s=s<<i|(f[u]&y)>>g,l+=i}}return this.bitOffset=l,this.byteOffset=u,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var vt;(function(N){N[N.PAD_ENCODE=0]="PAD_ENCODE",N[N.ASCII_ENCODE=1]="ASCII_ENCODE",N[N.C40_ENCODE=2]="C40_ENCODE",N[N.TEXT_ENCODE=3]="TEXT_ENCODE",N[N.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",N[N.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",N[N.BASE256_ENCODE=6]="BASE256_ENCODE"})(vt||(vt={}));class wi{static decode(i){const s=new Cn(i),l=new P,u=new P,f=new Array;let g=vt.ASCII_ENCODE;do if(g===vt.ASCII_ENCODE)g=this.decodeAsciiSegment(s,l,u);else{switch(g){case vt.C40_ENCODE:this.decodeC40Segment(s,l);break;case vt.TEXT_ENCODE:this.decodeTextSegment(s,l);break;case vt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,l);break;case vt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,l);break;case vt.BASE256_ENCODE:this.decodeBase256Segment(s,l,f);break;default:throw new V}g=vt.ASCII_ENCODE}while(g!==vt.PAD_ENCODE&&s.available()>0);return u.length()>0&&l.append(u.toString()),new Zt(i,l.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(i,s,l){let u=!1;do{let f=i.readBits(8);if(f===0)throw new V;if(f<=128)return u&&(f+=128),s.append(String.fromCharCode(f-1)),vt.ASCII_ENCODE;if(f===129)return vt.PAD_ENCODE;if(f<=229){const g=f-130;g<10&&s.append("0"),s.append(""+g)}else switch(f){case 230:return vt.C40_ENCODE;case 231:return vt.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:s.append("[)>05"),l.insert(0,"");break;case 237:s.append("[)>06"),l.insert(0,"");break;case 238:return vt.ANSIX12_ENCODE;case 239:return vt.TEXT_ENCODE;case 240:return vt.EDIFACT_ENCODE;case 241:break;default:if(f!==254||i.available()!==0)throw new V;break}}while(i.available()>0);return vt.ASCII_ENCODE}static decodeC40Segment(i,s){let l=!1;const u=[];let f=0;do{if(i.available()===8)return;const g=i.readBits(8);if(g===254)return;this.parseTwoBytes(g,i.readBits(8),u);for(let y=0;y<3;y++){const x=u[y];switch(f){case 0:if(x<3)f=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const T=this.C40_BASIC_SET_CHARS[x];l?(s.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):s.append(T)}else throw new V;break;case 1:l?(s.append(String.fromCharCode(x+128)),l=!1):s.append(String.fromCharCode(x)),f=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const T=this.C40_SHIFT2_SET_CHARS[x];l?(s.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):s.append(T)}else switch(x){case 27:s.append("");break;case 30:l=!0;break;default:throw new V}f=0;break;case 3:l?(s.append(String.fromCharCode(x+224)),l=!1):s.append(String.fromCharCode(x+96)),f=0;break;default:throw new V}}}while(i.available()>0)}static decodeTextSegment(i,s){let l=!1,u=[],f=0;do{if(i.available()===8)return;const g=i.readBits(8);if(g===254)return;this.parseTwoBytes(g,i.readBits(8),u);for(let y=0;y<3;y++){const x=u[y];switch(f){case 0:if(x<3)f=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const T=this.TEXT_BASIC_SET_CHARS[x];l?(s.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):s.append(T)}else throw new V;break;case 1:l?(s.append(String.fromCharCode(x+128)),l=!1):s.append(String.fromCharCode(x)),f=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const T=this.TEXT_SHIFT2_SET_CHARS[x];l?(s.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):s.append(T)}else switch(x){case 27:s.append("");break;case 30:l=!0;break;default:throw new V}f=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const T=this.TEXT_SHIFT3_SET_CHARS[x];l?(s.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):s.append(T),f=0}else throw new V;break;default:throw new V}}}while(i.available()>0)}static decodeAnsiX12Segment(i,s){const l=[];do{if(i.available()===8)return;const u=i.readBits(8);if(u===254)return;this.parseTwoBytes(u,i.readBits(8),l);for(let f=0;f<3;f++){const g=l[f];switch(g){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(g<14)s.append(String.fromCharCode(g+44));else if(g<40)s.append(String.fromCharCode(g+51));else throw new V;break}}}while(i.available()>0)}static parseTwoBytes(i,s,l){let u=(i<<8)+s-1,f=Math.floor(u/1600);l[0]=f,u-=f*1600,f=Math.floor(u/40),l[1]=f,l[2]=u-f*40}static decodeEdifactSegment(i,s){do{if(i.available()<=16)return;for(let l=0;l<4;l++){let u=i.readBits(6);if(u===31){const f=8-i.getBitOffset();f!==8&&i.readBits(f);return}(u&32)===0&&(u|=64),s.append(String.fromCharCode(u))}}while(i.available()>0)}static decodeBase256Segment(i,s,l){let u=1+i.getByteOffset();const f=this.unrandomize255State(i.readBits(8),u++);let g;if(f===0?g=i.available()/8|0:f<250?g=f:g=250*(f-249)+this.unrandomize255State(i.readBits(8),u++),g<0)throw new V;const y=new Uint8Array(g);for(let x=0;x<g;x++){if(i.available()<8)throw new V;y[x]=this.unrandomize255State(i.readBits(8),u++)}l.push(y);try{s.append(W.decode(y,X.ISO88591))}catch(x){throw new Oi("Platform does not support required encoding: "+x.message)}}static unrandomize255State(i,s){const l=149*s%255+1,u=i-l;return u>=0?u:u+256}}wi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],wi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],wi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],wi.TEXT_SHIFT2_SET_CHARS=wi.C40_SHIFT2_SET_CHARS,wi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ao{constructor(){this.rsDecoder=new dr(Tt.DATA_MATRIX_FIELD_256)}decode(i){const s=new hs(i),l=s.getVersion(),u=s.readCodewords(),f=Ai.getDataBlocks(u,l);let g=0;for(let T of f)g+=T.getNumDataCodewords();const y=new Uint8Array(g),x=f.length;for(let T=0;T<x;T++){const b=f[T],O=b.getCodewords(),L=b.getNumDataCodewords();this.correctErrors(O,L);for(let z=0;z<L;z++)y[z*x+T]=O[z]}return wi.decode(y)}correctErrors(i,s){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-s)}catch{throw new te}for(let u=0;u<s;u++)i[u]=l[u]}}class rt{constructor(i){this.image=i,this.rectangleDetector=new pn(this.image)}detect(){const i=this.rectangleDetector.detect();let s=this.detectSolid1(i);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new ee;s=this.shiftToModuleCenter(s);const l=s[0],u=s[1],f=s[2],g=s[3];let y=this.transitionsBetween(l,g)+1,x=this.transitionsBetween(f,g)+1;(y&1)===1&&(y+=1),(x&1)===1&&(x+=1),4*y<7*x&&4*x<7*y&&(y=x=Math.max(y,x));let T=rt.sampleGrid(this.image,l,u,f,g,y,x);return new ma(T,[l,u,f,g])}static shiftPoint(i,s,l){let u=(s.getX()-i.getX())/(l+1),f=(s.getY()-i.getY())/(l+1);return new He(i.getX()+u,i.getY()+f)}static moveAway(i,s,l){let u=i.getX(),f=i.getY();return u<s?u-=1:u+=1,f<l?f-=1:f+=1,new He(u,f)}detectSolid1(i){let s=i[0],l=i[1],u=i[3],f=i[2],g=this.transitionsBetween(s,l),y=this.transitionsBetween(l,u),x=this.transitionsBetween(u,f),T=this.transitionsBetween(f,s),b=g,O=[f,s,l,u];return b>y&&(b=y,O[0]=s,O[1]=l,O[2]=u,O[3]=f),b>x&&(b=x,O[0]=l,O[1]=u,O[2]=f,O[3]=s),b>T&&(O[0]=u,O[1]=f,O[2]=s,O[3]=l),O}detectSolid2(i){let s=i[0],l=i[1],u=i[2],f=i[3],g=this.transitionsBetween(s,f),y=rt.shiftPoint(l,u,(g+1)*4),x=rt.shiftPoint(u,l,(g+1)*4),T=this.transitionsBetween(y,s),b=this.transitionsBetween(x,f);return T<b?(i[0]=s,i[1]=l,i[2]=u,i[3]=f):(i[0]=l,i[1]=u,i[2]=f,i[3]=s),i}correctTopRight(i){let s=i[0],l=i[1],u=i[2],f=i[3],g=this.transitionsBetween(s,f),y=this.transitionsBetween(l,f),x=rt.shiftPoint(s,l,(y+1)*4),T=rt.shiftPoint(u,l,(g+1)*4);g=this.transitionsBetween(x,f),y=this.transitionsBetween(T,f);let b=new He(f.getX()+(u.getX()-l.getX())/(g+1),f.getY()+(u.getY()-l.getY())/(g+1)),O=new He(f.getX()+(s.getX()-l.getX())/(y+1),f.getY()+(s.getY()-l.getY())/(y+1));if(!this.isValid(b))return this.isValid(O)?O:null;if(!this.isValid(O))return b;let L=this.transitionsBetween(x,b)+this.transitionsBetween(T,b),z=this.transitionsBetween(x,O)+this.transitionsBetween(T,O);return L>z?b:O}shiftToModuleCenter(i){let s=i[0],l=i[1],u=i[2],f=i[3],g=this.transitionsBetween(s,f)+1,y=this.transitionsBetween(u,f)+1,x=rt.shiftPoint(s,l,y*4),T=rt.shiftPoint(u,l,g*4);g=this.transitionsBetween(x,f)+1,y=this.transitionsBetween(T,f)+1,(g&1)===1&&(g+=1),(y&1)===1&&(y+=1);let b=(s.getX()+l.getX()+u.getX()+f.getX())/4,O=(s.getY()+l.getY()+u.getY()+f.getY())/4;s=rt.moveAway(s,b,O),l=rt.moveAway(l,b,O),u=rt.moveAway(u,b,O),f=rt.moveAway(f,b,O);let L,z;return x=rt.shiftPoint(s,l,y*4),x=rt.shiftPoint(x,f,g*4),L=rt.shiftPoint(l,s,y*4),L=rt.shiftPoint(L,u,g*4),T=rt.shiftPoint(u,f,y*4),T=rt.shiftPoint(T,l,g*4),z=rt.shiftPoint(f,u,y*4),z=rt.shiftPoint(z,s,g*4),[x,L,T,z]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,s,l,u,f,g,y){return gi.getInstance().sampleGrid(i,g,y,.5,.5,g-.5,.5,g-.5,y-.5,.5,y-.5,s.getX(),s.getY(),f.getX(),f.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(i,s){let l=Math.trunc(i.getX()),u=Math.trunc(i.getY()),f=Math.trunc(s.getX()),g=Math.trunc(s.getY()),y=Math.abs(g-u)>Math.abs(f-l);if(y){let Q=l;l=u,u=Q,Q=f,f=g,g=Q}let x=Math.abs(f-l),T=Math.abs(g-u),b=-x/2,O=u<g?1:-1,L=l<f?1:-1,z=0,K=this.image.get(y?u:l,y?l:u);for(let Q=l,se=u;Q!==f;Q+=L){let fe=this.image.get(y?se:Q,y?Q:se);if(fe!==K&&(z++,K=fe),b+=T,b>0){if(se===g)break;se+=O,b-=x}}return z}}class Mi{constructor(){this.decoder=new Ao}decode(i,s=null){let l,u;if(s!=null&&s.has(Ve.PURE_BARCODE)){const T=Mi.extractPureBits(i.getBlackMatrix());l=this.decoder.decode(T),u=Mi.NO_POINTS}else{const T=new rt(i.getBlackMatrix()).detect();l=this.decoder.decode(T.getBits()),u=T.getPoints()}const f=l.getRawBytes(),g=new Be(l.getText(),f,8*f.length,u,ke.DATA_MATRIX,me.currentTimeMillis()),y=l.getByteSegments();y!=null&&g.putMetadata(wt.BYTE_SEGMENTS,y);const x=l.getECLevel();return x!=null&&g.putMetadata(wt.ERROR_CORRECTION_LEVEL,x),g}reset(){}static extractPureBits(i){const s=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(s==null||l==null)throw new ee;const u=this.moduleSize(s,i);let f=s[1];const g=l[1];let y=s[0];const T=(l[0]-y+1)/u,b=(g-f+1)/u;if(T<=0||b<=0)throw new ee;const O=u/2;f+=O,y+=O;const L=new Ae(T,b);for(let z=0;z<b;z++){const K=f+z*u;for(let Q=0;Q<T;Q++)i.get(y+Q*u,K)&&L.set(Q,z)}return L}static moduleSize(i,s){const l=s.getWidth();let u=i[0];const f=i[1];for(;u<l&&s.get(u,f);)u++;if(u===l)throw new ee;const g=u-i[0];if(g===0)throw new ee;return g}}Mi.NO_POINTS=[];class Pr extends Ce{constructor(i=500){super(new Mi,i)}}var er;(function(N){N[N.L=0]="L",N[N.M=1]="M",N[N.Q=2]="Q",N[N.H=3]="H"})(er||(er={}));class pt{constructor(i,s,l){this.value=i,this.stringValue=s,this.bits=l,pt.FOR_BITS.set(l,this),pt.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return pt.L;case"M":return pt.M;case"Q":return pt.Q;case"H":return pt.H;default:throw new D(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof pt))return!1;const s=i;return this.value===s.value}static forBits(i){if(i<0||i>=pt.FOR_BITS.size)throw new M;return pt.FOR_BITS.get(i)}}pt.FOR_BITS=new Map,pt.FOR_VALUE=new Map,pt.L=new pt(er.L,"L",1),pt.M=new pt(er.M,"M",0),pt.Q=new pt(er.Q,"Q",3),pt.H=new pt(er.H,"H",2);class Dn{constructor(i){this.errorCorrectionLevel=pt.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,s){return pe.bitCount(i^s)}static decodeFormatInformation(i,s){const l=Dn.doDecodeFormatInformation(i,s);return l!==null?l:Dn.doDecodeFormatInformation(i^Dn.FORMAT_INFO_MASK_QR,s^Dn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,s){let l=Number.MAX_SAFE_INTEGER,u=0;for(const f of Dn.FORMAT_INFO_DECODE_LOOKUP){const g=f[0];if(g===i||g===s)return new Dn(f[1]);let y=Dn.numBitsDiffering(i,g);y<l&&(u=f[1],l=y),i!==s&&(y=Dn.numBitsDiffering(s,g),y<l&&(u=f[1],l=y))}return l<=3?new Dn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof Dn))return!1;const s=i;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Dn.FORMAT_INFO_MASK_QR=21522,Dn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class oe{constructor(i,...s){this.ecCodewordsPerBlock=i,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const s=this.ecBlocks;for(const l of s)i+=l.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class j{constructor(i,s){this.count=i,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Xe{constructor(i,s,...l){this.versionNumber=i,this.alignmentPatternCenters=s,this.ecBlocks=l;let u=0;const f=l[0].getECCodewordsPerBlock(),g=l[0].getECBlocks();for(const y of g)u+=y.getCount()*(y.getDataCodewords()+f);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new V;try{return this.getVersionForNumber((i-17)/4)}catch{throw new V}}static getVersionForNumber(i){if(i<1||i>40)throw new M;return Xe.VERSIONS[i-1]}static decodeVersionInformation(i){let s=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<Xe.VERSION_DECODE_INFO.length;u++){const f=Xe.VERSION_DECODE_INFO[u];if(f===i)return Xe.getVersionForNumber(u+7);const g=Dn.numBitsDiffering(i,f);g<s&&(l=u+7,s=g)}return s<=3?Xe.getVersionForNumber(l):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),s=new Ae(i);s.setRegion(0,0,9,9),s.setRegion(i-8,0,8,9),s.setRegion(0,i-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const f=this.alignmentPatternCenters[u]-2;for(let g=0;g<l;g++)u===0&&(g===0||g===l-1)||u===l-1&&g===0||s.setRegion(this.alignmentPatternCenters[g]-2,f,5,5)}return s.setRegion(6,9,1,i-17),s.setRegion(9,6,i-17,1),this.versionNumber>6&&(s.setRegion(i-11,0,3,6),s.setRegion(0,i-11,6,3)),s}toString(){return""+this.versionNumber}}Xe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Xe.VERSIONS=[new Xe(1,new Int32Array(0),new oe(7,new j(1,19)),new oe(10,new j(1,16)),new oe(13,new j(1,13)),new oe(17,new j(1,9))),new Xe(2,Int32Array.from([6,18]),new oe(10,new j(1,34)),new oe(16,new j(1,28)),new oe(22,new j(1,22)),new oe(28,new j(1,16))),new Xe(3,Int32Array.from([6,22]),new oe(15,new j(1,55)),new oe(26,new j(1,44)),new oe(18,new j(2,17)),new oe(22,new j(2,13))),new Xe(4,Int32Array.from([6,26]),new oe(20,new j(1,80)),new oe(18,new j(2,32)),new oe(26,new j(2,24)),new oe(16,new j(4,9))),new Xe(5,Int32Array.from([6,30]),new oe(26,new j(1,108)),new oe(24,new j(2,43)),new oe(18,new j(2,15),new j(2,16)),new oe(22,new j(2,11),new j(2,12))),new Xe(6,Int32Array.from([6,34]),new oe(18,new j(2,68)),new oe(16,new j(4,27)),new oe(24,new j(4,19)),new oe(28,new j(4,15))),new Xe(7,Int32Array.from([6,22,38]),new oe(20,new j(2,78)),new oe(18,new j(4,31)),new oe(18,new j(2,14),new j(4,15)),new oe(26,new j(4,13),new j(1,14))),new Xe(8,Int32Array.from([6,24,42]),new oe(24,new j(2,97)),new oe(22,new j(2,38),new j(2,39)),new oe(22,new j(4,18),new j(2,19)),new oe(26,new j(4,14),new j(2,15))),new Xe(9,Int32Array.from([6,26,46]),new oe(30,new j(2,116)),new oe(22,new j(3,36),new j(2,37)),new oe(20,new j(4,16),new j(4,17)),new oe(24,new j(4,12),new j(4,13))),new Xe(10,Int32Array.from([6,28,50]),new oe(18,new j(2,68),new j(2,69)),new oe(26,new j(4,43),new j(1,44)),new oe(24,new j(6,19),new j(2,20)),new oe(28,new j(6,15),new j(2,16))),new Xe(11,Int32Array.from([6,30,54]),new oe(20,new j(4,81)),new oe(30,new j(1,50),new j(4,51)),new oe(28,new j(4,22),new j(4,23)),new oe(24,new j(3,12),new j(8,13))),new Xe(12,Int32Array.from([6,32,58]),new oe(24,new j(2,92),new j(2,93)),new oe(22,new j(6,36),new j(2,37)),new oe(26,new j(4,20),new j(6,21)),new oe(28,new j(7,14),new j(4,15))),new Xe(13,Int32Array.from([6,34,62]),new oe(26,new j(4,107)),new oe(22,new j(8,37),new j(1,38)),new oe(24,new j(8,20),new j(4,21)),new oe(22,new j(12,11),new j(4,12))),new Xe(14,Int32Array.from([6,26,46,66]),new oe(30,new j(3,115),new j(1,116)),new oe(24,new j(4,40),new j(5,41)),new oe(20,new j(11,16),new j(5,17)),new oe(24,new j(11,12),new j(5,13))),new Xe(15,Int32Array.from([6,26,48,70]),new oe(22,new j(5,87),new j(1,88)),new oe(24,new j(5,41),new j(5,42)),new oe(30,new j(5,24),new j(7,25)),new oe(24,new j(11,12),new j(7,13))),new Xe(16,Int32Array.from([6,26,50,74]),new oe(24,new j(5,98),new j(1,99)),new oe(28,new j(7,45),new j(3,46)),new oe(24,new j(15,19),new j(2,20)),new oe(30,new j(3,15),new j(13,16))),new Xe(17,Int32Array.from([6,30,54,78]),new oe(28,new j(1,107),new j(5,108)),new oe(28,new j(10,46),new j(1,47)),new oe(28,new j(1,22),new j(15,23)),new oe(28,new j(2,14),new j(17,15))),new Xe(18,Int32Array.from([6,30,56,82]),new oe(30,new j(5,120),new j(1,121)),new oe(26,new j(9,43),new j(4,44)),new oe(28,new j(17,22),new j(1,23)),new oe(28,new j(2,14),new j(19,15))),new Xe(19,Int32Array.from([6,30,58,86]),new oe(28,new j(3,113),new j(4,114)),new oe(26,new j(3,44),new j(11,45)),new oe(26,new j(17,21),new j(4,22)),new oe(26,new j(9,13),new j(16,14))),new Xe(20,Int32Array.from([6,34,62,90]),new oe(28,new j(3,107),new j(5,108)),new oe(26,new j(3,41),new j(13,42)),new oe(30,new j(15,24),new j(5,25)),new oe(28,new j(15,15),new j(10,16))),new Xe(21,Int32Array.from([6,28,50,72,94]),new oe(28,new j(4,116),new j(4,117)),new oe(26,new j(17,42)),new oe(28,new j(17,22),new j(6,23)),new oe(30,new j(19,16),new j(6,17))),new Xe(22,Int32Array.from([6,26,50,74,98]),new oe(28,new j(2,111),new j(7,112)),new oe(28,new j(17,46)),new oe(30,new j(7,24),new j(16,25)),new oe(24,new j(34,13))),new Xe(23,Int32Array.from([6,30,54,78,102]),new oe(30,new j(4,121),new j(5,122)),new oe(28,new j(4,47),new j(14,48)),new oe(30,new j(11,24),new j(14,25)),new oe(30,new j(16,15),new j(14,16))),new Xe(24,Int32Array.from([6,28,54,80,106]),new oe(30,new j(6,117),new j(4,118)),new oe(28,new j(6,45),new j(14,46)),new oe(30,new j(11,24),new j(16,25)),new oe(30,new j(30,16),new j(2,17))),new Xe(25,Int32Array.from([6,32,58,84,110]),new oe(26,new j(8,106),new j(4,107)),new oe(28,new j(8,47),new j(13,48)),new oe(30,new j(7,24),new j(22,25)),new oe(30,new j(22,15),new j(13,16))),new Xe(26,Int32Array.from([6,30,58,86,114]),new oe(28,new j(10,114),new j(2,115)),new oe(28,new j(19,46),new j(4,47)),new oe(28,new j(28,22),new j(6,23)),new oe(30,new j(33,16),new j(4,17))),new Xe(27,Int32Array.from([6,34,62,90,118]),new oe(30,new j(8,122),new j(4,123)),new oe(28,new j(22,45),new j(3,46)),new oe(30,new j(8,23),new j(26,24)),new oe(30,new j(12,15),new j(28,16))),new Xe(28,Int32Array.from([6,26,50,74,98,122]),new oe(30,new j(3,117),new j(10,118)),new oe(28,new j(3,45),new j(23,46)),new oe(30,new j(4,24),new j(31,25)),new oe(30,new j(11,15),new j(31,16))),new Xe(29,Int32Array.from([6,30,54,78,102,126]),new oe(30,new j(7,116),new j(7,117)),new oe(28,new j(21,45),new j(7,46)),new oe(30,new j(1,23),new j(37,24)),new oe(30,new j(19,15),new j(26,16))),new Xe(30,Int32Array.from([6,26,52,78,104,130]),new oe(30,new j(5,115),new j(10,116)),new oe(28,new j(19,47),new j(10,48)),new oe(30,new j(15,24),new j(25,25)),new oe(30,new j(23,15),new j(25,16))),new Xe(31,Int32Array.from([6,30,56,82,108,134]),new oe(30,new j(13,115),new j(3,116)),new oe(28,new j(2,46),new j(29,47)),new oe(30,new j(42,24),new j(1,25)),new oe(30,new j(23,15),new j(28,16))),new Xe(32,Int32Array.from([6,34,60,86,112,138]),new oe(30,new j(17,115)),new oe(28,new j(10,46),new j(23,47)),new oe(30,new j(10,24),new j(35,25)),new oe(30,new j(19,15),new j(35,16))),new Xe(33,Int32Array.from([6,30,58,86,114,142]),new oe(30,new j(17,115),new j(1,116)),new oe(28,new j(14,46),new j(21,47)),new oe(30,new j(29,24),new j(19,25)),new oe(30,new j(11,15),new j(46,16))),new Xe(34,Int32Array.from([6,34,62,90,118,146]),new oe(30,new j(13,115),new j(6,116)),new oe(28,new j(14,46),new j(23,47)),new oe(30,new j(44,24),new j(7,25)),new oe(30,new j(59,16),new j(1,17))),new Xe(35,Int32Array.from([6,30,54,78,102,126,150]),new oe(30,new j(12,121),new j(7,122)),new oe(28,new j(12,47),new j(26,48)),new oe(30,new j(39,24),new j(14,25)),new oe(30,new j(22,15),new j(41,16))),new Xe(36,Int32Array.from([6,24,50,76,102,128,154]),new oe(30,new j(6,121),new j(14,122)),new oe(28,new j(6,47),new j(34,48)),new oe(30,new j(46,24),new j(10,25)),new oe(30,new j(2,15),new j(64,16))),new Xe(37,Int32Array.from([6,28,54,80,106,132,158]),new oe(30,new j(17,122),new j(4,123)),new oe(28,new j(29,46),new j(14,47)),new oe(30,new j(49,24),new j(10,25)),new oe(30,new j(24,15),new j(46,16))),new Xe(38,Int32Array.from([6,32,58,84,110,136,162]),new oe(30,new j(4,122),new j(18,123)),new oe(28,new j(13,46),new j(32,47)),new oe(30,new j(48,24),new j(14,25)),new oe(30,new j(42,15),new j(32,16))),new Xe(39,Int32Array.from([6,26,54,82,110,138,166]),new oe(30,new j(20,117),new j(4,118)),new oe(28,new j(40,47),new j(7,48)),new oe(30,new j(43,24),new j(22,25)),new oe(30,new j(10,15),new j(67,16))),new Xe(40,Int32Array.from([6,30,58,86,114,142,170]),new oe(30,new j(19,118),new j(6,119)),new oe(28,new j(18,47),new j(31,48)),new oe(30,new j(34,24),new j(34,25)),new oe(30,new j(20,15),new j(61,16)))];var Mn;(function(N){N[N.DATA_MASK_000=0]="DATA_MASK_000",N[N.DATA_MASK_001=1]="DATA_MASK_001",N[N.DATA_MASK_010=2]="DATA_MASK_010",N[N.DATA_MASK_011=3]="DATA_MASK_011",N[N.DATA_MASK_100=4]="DATA_MASK_100",N[N.DATA_MASK_101=5]="DATA_MASK_101",N[N.DATA_MASK_110=6]="DATA_MASK_110",N[N.DATA_MASK_111=7]="DATA_MASK_111"})(Mn||(Mn={}));class Gn{constructor(i,s){this.value=i,this.isMasked=s}unmaskBitMatrix(i,s){for(let l=0;l<s;l++)for(let u=0;u<s;u++)this.isMasked(l,u)&&i.flip(u,l)}}Gn.values=new Map([[Mn.DATA_MASK_000,new Gn(Mn.DATA_MASK_000,(N,i)=>(N+i&1)===0)],[Mn.DATA_MASK_001,new Gn(Mn.DATA_MASK_001,(N,i)=>(N&1)===0)],[Mn.DATA_MASK_010,new Gn(Mn.DATA_MASK_010,(N,i)=>i%3===0)],[Mn.DATA_MASK_011,new Gn(Mn.DATA_MASK_011,(N,i)=>(N+i)%3===0)],[Mn.DATA_MASK_100,new Gn(Mn.DATA_MASK_100,(N,i)=>(Math.floor(N/2)+Math.floor(i/3)&1)===0)],[Mn.DATA_MASK_101,new Gn(Mn.DATA_MASK_101,(N,i)=>N*i%6===0)],[Mn.DATA_MASK_110,new Gn(Mn.DATA_MASK_110,(N,i)=>N*i%6<3)],[Mn.DATA_MASK_111,new Gn(Mn.DATA_MASK_111,(N,i)=>(N+i+N*i%3&1)===0)]]);class Li{constructor(i){const s=i.getHeight();if(s<21||(s&3)!==1)throw new V;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let f=0;f<6;f++)i=this.copyBit(f,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let f=5;f>=0;f--)i=this.copyBit(8,f,i);const s=this.bitMatrix.getHeight();let l=0;const u=s-7;for(let f=s-1;f>=u;f--)l=this.copyBit(8,f,l);for(let f=s-8;f<s;f++)l=this.copyBit(f,8,l);if(this.parsedFormatInfo=Dn.decodeFormatInformation(i,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new V}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),s=Math.floor((i-17)/4);if(s<=6)return Xe.getVersionForNumber(s);let l=0;const u=i-11;for(let g=5;g>=0;g--)for(let y=i-9;y>=u;y--)l=this.copyBit(y,g,l);let f=Xe.decodeVersionInformation(l);if(f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;l=0;for(let g=5;g>=0;g--)for(let y=i-9;y>=u;y--)l=this.copyBit(g,y,l);if(f=Xe.decodeVersionInformation(l),f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;throw new V}copyBit(i,s,l){return(this.isMirror?this.bitMatrix.get(s,i):this.bitMatrix.get(i,s))?l<<1|1:l<<1}readCodewords(){const i=this.readFormatInformation(),s=this.readVersion(),l=Gn.values.get(i.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const f=s.buildFunctionPattern();let g=!0;const y=new Uint8Array(s.getTotalCodewords());let x=0,T=0,b=0;for(let O=u-1;O>0;O-=2){O===6&&O--;for(let L=0;L<u;L++){const z=g?u-1-L:L;for(let K=0;K<2;K++)f.get(O-K,z)||(b++,T<<=1,this.bitMatrix.get(O-K,z)&&(T|=1),b===8&&(y[x++]=T,b=0,T=0))}g=!g}if(x!==s.getTotalCodewords())throw new V;return y}remask(){if(this.parsedFormatInfo===null)return;const i=Gn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,s)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let s=0,l=i.getWidth();s<l;s++)for(let u=s+1,f=i.getHeight();u<f;u++)i.get(s,u)!==i.get(u,s)&&(i.flip(u,s),i.flip(s,u))}}class Ea{constructor(i,s){this.numDataCodewords=i,this.codewords=s}static getDataBlocks(i,s,l){if(i.length!==s.getTotalCodewords())throw new M;const u=s.getECBlocksForLevel(l);let f=0;const g=u.getECBlocks();for(const K of g)f+=K.getCount();const y=new Array(f);let x=0;for(const K of g)for(let Q=0;Q<K.getCount();Q++){const se=K.getDataCodewords(),fe=u.getECCodewordsPerBlock()+se;y[x++]=new Ea(se,new Uint8Array(fe))}const T=y[0].codewords.length;let b=y.length-1;for(;b>=0&&y[b].codewords.length!==T;)b--;b++;const O=T-u.getECCodewordsPerBlock();let L=0;for(let K=0;K<O;K++)for(let Q=0;Q<x;Q++)y[Q].codewords[K]=i[L++];for(let K=b;K<x;K++)y[K].codewords[O]=i[L++];const z=y[0].codewords.length;for(let K=O;K<z;K++)for(let Q=0;Q<x;Q++){const se=Q<b?K:K+1;y[Q].codewords[se]=i[L++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var li;(function(N){N[N.TERMINATOR=0]="TERMINATOR",N[N.NUMERIC=1]="NUMERIC",N[N.ALPHANUMERIC=2]="ALPHANUMERIC",N[N.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",N[N.BYTE=4]="BYTE",N[N.ECI=5]="ECI",N[N.KANJI=6]="KANJI",N[N.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",N[N.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",N[N.HANZI=9]="HANZI"})(li||(li={}));class Qe{constructor(i,s,l,u){this.value=i,this.stringValue=s,this.characterCountBitsForVersions=l,this.bits=u,Qe.FOR_BITS.set(u,this),Qe.FOR_VALUE.set(i,this)}static forBits(i){const s=Qe.FOR_BITS.get(i);if(s===void 0)throw new M;return s}getCharacterCountBits(i){const s=i.getVersionNumber();let l;return s<=9?l=0:s<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Qe))return!1;const s=i;return this.value===s.value}toString(){return this.stringValue}}Qe.FOR_BITS=new Map,Qe.FOR_VALUE=new Map,Qe.TERMINATOR=new Qe(li.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Qe.NUMERIC=new Qe(li.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Qe.ALPHANUMERIC=new Qe(li.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Qe.STRUCTURED_APPEND=new Qe(li.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Qe.BYTE=new Qe(li.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Qe.ECI=new Qe(li.ECI,"ECI",Int32Array.from([0,0,0]),7),Qe.KANJI=new Qe(li.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Qe.FNC1_FIRST_POSITION=new Qe(li.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Qe.FNC1_SECOND_POSITION=new Qe(li.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Qe.HANZI=new Qe(li.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Jt{static decode(i,s,l,u){const f=new Cn(i);let g=new P;const y=new Array;let x=-1,T=-1;try{let b=null,O=!1,L;do{if(f.available()<4)L=Qe.TERMINATOR;else{const z=f.readBits(4);L=Qe.forBits(z)}switch(L){case Qe.TERMINATOR:break;case Qe.FNC1_FIRST_POSITION:case Qe.FNC1_SECOND_POSITION:O=!0;break;case Qe.STRUCTURED_APPEND:if(f.available()<16)throw new V;x=f.readBits(8),T=f.readBits(8);break;case Qe.ECI:const z=Jt.parseECIValue(f);if(b=B.getCharacterSetECIByValue(z),b===null)throw new V;break;case Qe.HANZI:const K=f.readBits(4),Q=f.readBits(L.getCharacterCountBits(s));K===Jt.GB2312_SUBSET&&Jt.decodeHanziSegment(f,g,Q);break;default:const se=f.readBits(L.getCharacterCountBits(s));switch(L){case Qe.NUMERIC:Jt.decodeNumericSegment(f,g,se);break;case Qe.ALPHANUMERIC:Jt.decodeAlphanumericSegment(f,g,se,O);break;case Qe.BYTE:Jt.decodeByteSegment(f,g,se,b,y,u);break;case Qe.KANJI:Jt.decodeKanjiSegment(f,g,se);break;default:throw new V}break}}while(L!==Qe.TERMINATOR)}catch{throw new V}return new Zt(i,g.toString(),y.length===0?null:y,l===null?null:l.toString(),x,T)}static decodeHanziSegment(i,s,l){if(l*13>i.available())throw new V;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const g=i.readBits(13);let y=g/96<<8&4294967295|g%96;y<959?y+=41377:y+=42657,u[f]=y>>8&255,u[f+1]=y&255,f+=2,l--}try{s.append(W.decode(u,X.GB2312))}catch(g){throw new V(g)}}static decodeKanjiSegment(i,s,l){if(l*13>i.available())throw new V;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const g=i.readBits(13);let y=g/192<<8&4294967295|g%192;y<7936?y+=33088:y+=49472,u[f]=y>>8,u[f+1]=y,f+=2,l--}try{s.append(W.decode(u,X.SHIFT_JIS))}catch(g){throw new V(g)}}static decodeByteSegment(i,s,l,u,f,g){if(8*l>i.available())throw new V;const y=new Uint8Array(l);for(let T=0;T<l;T++)y[T]=i.readBits(8);let x;u===null?x=X.guessEncoding(y,g):x=u.getName();try{s.append(W.decode(y,x))}catch(T){throw new V(T)}f.push(y)}static toAlphaNumericChar(i){if(i>=Jt.ALPHANUMERIC_CHARS.length)throw new V;return Jt.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,s,l,u){const f=s.length();for(;l>1;){if(i.available()<11)throw new V;const g=i.readBits(11);s.append(Jt.toAlphaNumericChar(Math.floor(g/45))),s.append(Jt.toAlphaNumericChar(g%45)),l-=2}if(l===1){if(i.available()<6)throw new V;s.append(Jt.toAlphaNumericChar(i.readBits(6)))}if(u)for(let g=f;g<s.length();g++)s.charAt(g)==="%"&&(g<s.length()-1&&s.charAt(g+1)==="%"?s.deleteCharAt(g+1):s.setCharAt(g,""))}static decodeNumericSegment(i,s,l){for(;l>=3;){if(i.available()<10)throw new V;const u=i.readBits(10);if(u>=1e3)throw new V;s.append(Jt.toAlphaNumericChar(Math.floor(u/100))),s.append(Jt.toAlphaNumericChar(Math.floor(u/10)%10)),s.append(Jt.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(i.available()<7)throw new V;const u=i.readBits(7);if(u>=100)throw new V;s.append(Jt.toAlphaNumericChar(Math.floor(u/10))),s.append(Jt.toAlphaNumericChar(u%10))}else if(l===1){if(i.available()<4)throw new V;const u=i.readBits(4);if(u>=10)throw new V;s.append(Jt.toAlphaNumericChar(u))}}static parseECIValue(i){const s=i.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){const l=i.readBits(8);return(s&63)<<8&4294967295|l}if((s&224)===192){const l=i.readBits(16);return(s&31)<<16&4294967295|l}throw new V}}Jt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Jt.GB2312_SUBSET=1;class wo{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const s=i[0];i[0]=i[2],i[2]=s}}class fs{constructor(){this.rsDecoder=new dr(Tt.QR_CODE_FIELD_256)}decodeBooleanArray(i,s){return this.decodeBitMatrix(Ae.parseFromBooleanArray(i),s)}decodeBitMatrix(i,s){const l=new Li(i);let u=null;try{return this.decodeBitMatrixParser(l,s)}catch(f){u=f}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const f=this.decodeBitMatrixParser(l,s);return f.setOther(new wo(!0)),f}catch(f){throw u!==null?u:f}}decodeBitMatrixParser(i,s){const l=i.readVersion(),u=i.readFormatInformation().getErrorCorrectionLevel(),f=i.readCodewords(),g=Ea.getDataBlocks(f,l,u);let y=0;for(const b of g)y+=b.getNumDataCodewords();const x=new Uint8Array(y);let T=0;for(const b of g){const O=b.getCodewords(),L=b.getNumDataCodewords();this.correctErrors(O,L);for(let z=0;z<L;z++)x[T++]=O[z]}return Jt.decode(x,l,u,s)}correctErrors(i,s){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-s)}catch{throw new te}for(let u=0;u<s;u++)i[u]=l[u]}}class ds extends He{constructor(i,s,l){super(i,s),this.estimatedModuleSize=l}aboutEquals(i,s,l){if(Math.abs(s-this.getY())<=i&&Math.abs(l-this.getX())<=i){const u=Math.abs(i-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(i,s,l){const u=(this.getX()+s)/2,f=(this.getY()+i)/2,g=(this.estimatedModuleSize+l)/2;return new ds(u,f,g)}}class Pi{constructor(i,s,l,u,f,g,y){this.image=i,this.startX=s,this.startY=l,this.width=u,this.height=f,this.moduleSize=g,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,s=this.height,l=this.width,u=i+l,f=this.startY+s/2,g=new Int32Array(3),y=this.image;for(let x=0;x<s;x++){const T=f+((x&1)===0?Math.floor((x+1)/2):-Math.floor((x+1)/2));g[0]=0,g[1]=0,g[2]=0;let b=i;for(;b<u&&!y.get(b,T);)b++;let O=0;for(;b<u;){if(y.get(b,T))if(O===1)g[1]++;else if(O===2){if(this.foundPatternCross(g)){const L=this.handlePossibleCenter(g,T,b);if(L!==null)return L}g[0]=g[2],g[1]=1,g[2]=0,O=1}else g[++O]++;else O===1&&O++,g[O]++;b++}if(this.foundPatternCross(g)){const L=this.handlePossibleCenter(g,T,u);if(L!==null)return L}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ee}static centerFromEnd(i,s){return s-i[2]-i[1]/2}foundPatternCross(i){const s=this.moduleSize,l=s/2;for(let u=0;u<3;u++)if(Math.abs(s-i[u])>=l)return!1;return!0}crossCheckVertical(i,s,l,u){const f=this.image,g=f.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let x=i;for(;x>=0&&f.get(s,x)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&!f.get(s,x)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=i+1;x<g&&f.get(s,x)&&y[1]<=l;)y[1]++,x++;if(x===g||y[1]>l)return NaN;for(;x<g&&!f.get(s,x)&&y[2]<=l;)y[2]++,x++;if(y[2]>l)return NaN;const T=y[0]+y[1]+y[2];return 5*Math.abs(T-u)>=2*u?NaN:this.foundPatternCross(y)?Pi.centerFromEnd(y,x):NaN}handlePossibleCenter(i,s,l){const u=i[0]+i[1]+i[2],f=Pi.centerFromEnd(i,l),g=this.crossCheckVertical(s,f,2*i[1],u);if(!isNaN(g)){const y=(i[0]+i[1]+i[2])/3;for(const T of this.possibleCenters)if(T.aboutEquals(y,g,f))return T.combineEstimate(g,f,y);const x=new ds(f,g,y);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class Ms extends He{constructor(i,s,l,u){super(i,s),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,s,l){if(Math.abs(s-this.getY())<=i&&Math.abs(l-this.getX())<=i){const u=Math.abs(i-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(i,s,l){const u=this.count+1,f=(this.count*this.getX()+s)/u,g=(this.count*this.getY()+i)/u,y=(this.count*this.estimatedModuleSize+l)/u;return new Ms(f,g,y,u)}}class tr{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class un{constructor(i,s){this.image=i,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const s=i!=null&&i.get(Ve.TRY_HARDER)!==void 0,l=i!=null&&i.get(Ve.PURE_BARCODE)!==void 0,u=this.image,f=u.getHeight(),g=u.getWidth();let y=Math.floor(3*f/(4*un.MAX_MODULES));(y<un.MIN_SKIP||s)&&(y=un.MIN_SKIP);let x=!1;const T=new Int32Array(5);for(let O=y-1;O<f&&!x;O+=y){T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0;let L=0;for(let z=0;z<g;z++)if(u.get(z,O))(L&1)===1&&L++,T[L]++;else if((L&1)===0)if(L===4)if(un.foundPatternCross(T)){if(this.handlePossibleCenter(T,O,z,l)===!0)if(y=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const Q=this.findRowSkip();Q>T[2]&&(O+=Q-T[2]-y,z=g-1)}else{T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,L=3;continue}L=0,T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0}else T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,L=3;else T[++L]++;else T[L]++;un.foundPatternCross(T)&&this.handlePossibleCenter(T,O,g,l)===!0&&(y=T[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const b=this.selectBestPatterns();return He.orderBestPatterns(b),new tr(b)}static centerFromEnd(i,s){return s-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let s=0;for(let f=0;f<5;f++){const g=i[f];if(g===0)return!1;s+=g}if(s<7)return!1;const l=s/7,u=l/2;return Math.abs(l-i[0])<u&&Math.abs(l-i[1])<u&&Math.abs(3*l-i[2])<3*u&&Math.abs(l-i[3])<u&&Math.abs(l-i[4])<u}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,s,l,u){const f=this.getCrossCheckStateCount();let g=0;const y=this.image;for(;i>=g&&s>=g&&y.get(s-g,i-g);)f[2]++,g++;if(i<g||s<g)return!1;for(;i>=g&&s>=g&&!y.get(s-g,i-g)&&f[1]<=l;)f[1]++,g++;if(i<g||s<g||f[1]>l)return!1;for(;i>=g&&s>=g&&y.get(s-g,i-g)&&f[0]<=l;)f[0]++,g++;if(f[0]>l)return!1;const x=y.getHeight(),T=y.getWidth();for(g=1;i+g<x&&s+g<T&&y.get(s+g,i+g);)f[2]++,g++;if(i+g>=x||s+g>=T)return!1;for(;i+g<x&&s+g<T&&!y.get(s+g,i+g)&&f[3]<l;)f[3]++,g++;if(i+g>=x||s+g>=T||f[3]>=l)return!1;for(;i+g<x&&s+g<T&&y.get(s+g,i+g)&&f[4]<l;)f[4]++,g++;if(f[4]>=l)return!1;const b=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(b-u)<2*u&&un.foundPatternCross(f)}crossCheckVertical(i,s,l,u){const f=this.image,g=f.getHeight(),y=this.getCrossCheckStateCount();let x=i;for(;x>=0&&f.get(s,x);)y[2]++,x--;if(x<0)return NaN;for(;x>=0&&!f.get(s,x)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&f.get(s,x)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=i+1;x<g&&f.get(s,x);)y[2]++,x++;if(x===g)return NaN;for(;x<g&&!f.get(s,x)&&y[3]<l;)y[3]++,x++;if(x===g||y[3]>=l)return NaN;for(;x<g&&f.get(s,x)&&y[4]<l;)y[4]++,x++;if(y[4]>=l)return NaN;const T=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(T-u)>=2*u?NaN:un.foundPatternCross(y)?un.centerFromEnd(y,x):NaN}crossCheckHorizontal(i,s,l,u){const f=this.image,g=f.getWidth(),y=this.getCrossCheckStateCount();let x=i;for(;x>=0&&f.get(x,s);)y[2]++,x--;if(x<0)return NaN;for(;x>=0&&!f.get(x,s)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&f.get(x,s)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=i+1;x<g&&f.get(x,s);)y[2]++,x++;if(x===g)return NaN;for(;x<g&&!f.get(x,s)&&y[3]<l;)y[3]++,x++;if(x===g||y[3]>=l)return NaN;for(;x<g&&f.get(x,s)&&y[4]<l;)y[4]++,x++;if(y[4]>=l)return NaN;const T=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(T-u)>=u?NaN:un.foundPatternCross(y)?un.centerFromEnd(y,x):NaN}handlePossibleCenter(i,s,l,u){const f=i[0]+i[1]+i[2]+i[3]+i[4];let g=un.centerFromEnd(i,l),y=this.crossCheckVertical(s,Math.floor(g),i[2],f);if(!isNaN(y)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(y),i[2],f),!isNaN(g)&&(!u||this.crossCheckDiagonal(Math.floor(y),Math.floor(g),i[2],f)))){const x=f/7;let T=!1;const b=this.possibleCenters;for(let O=0,L=b.length;O<L;O++){const z=b[O];if(z.aboutEquals(x,y,g)){b[O]=z.combineEstimate(y,g,x),T=!0;break}}if(!T){const O=new Ms(g,y,x);b.push(O),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(O)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const l of this.possibleCenters)if(l.getCount()>=un.CENTER_QUORUM)if(s==null)s=l;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-l.getX())-Math.abs(s.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,s=0;const l=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=un.CENTER_QUORUM&&(i++,s+=g.getEstimatedModuleSize());if(i<3)return!1;const u=s/l;let f=0;for(const g of this.possibleCenters)f+=Math.abs(g.getEstimatedModuleSize()-u);return f<=.05*s}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new ee;const s=this.possibleCenters;let l;if(i>3){let u=0,f=0;for(const x of this.possibleCenters){const T=x.getEstimatedModuleSize();u+=T,f+=T*T}l=u/i;let g=Math.sqrt(f/i-l*l);s.sort((x,T)=>{const b=Math.abs(T.getEstimatedModuleSize()-l),O=Math.abs(x.getEstimatedModuleSize()-l);return b<O?-1:b>O?1:0});const y=Math.max(.2*l,g);for(let x=0;x<s.length&&s.length>3;x++){const T=s[x];Math.abs(T.getEstimatedModuleSize()-l)>y&&(s.splice(x,1),x--)}}if(s.length>3){let u=0;for(const f of s)u+=f.getEstimatedModuleSize();l=u/s.length,s.sort((f,g)=>{if(g.getCount()===f.getCount()){const y=Math.abs(g.getEstimatedModuleSize()-l),x=Math.abs(f.getEstimatedModuleSize()-l);return y<x?1:y>x?-1:0}else return g.getCount()-f.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}un.CENTER_QUORUM=2,un.MIN_SKIP=3,un.MAX_MODULES=57;class ki{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(Ve.NEED_RESULT_POINT_CALLBACK);const l=new un(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(l)}processFinderPatternInfo(i){const s=i.getTopLeft(),l=i.getTopRight(),u=i.getBottomLeft(),f=this.calculateModuleSize(s,l,u);if(f<1)throw new ee("No pattern found in proccess finder.");const g=ki.computeDimension(s,l,u,f),y=Xe.getProvisionalVersionForDimension(g),x=y.getDimensionForVersion()-7;let T=null;if(y.getAlignmentPatternCenters().length>0){const z=l.getX()-s.getX()+u.getX(),K=l.getY()-s.getY()+u.getY(),Q=1-3/x,se=Math.floor(s.getX()+Q*(z-s.getX())),fe=Math.floor(s.getY()+Q*(K-s.getY()));for(let Me=4;Me<=16;Me<<=1)try{T=this.findAlignmentInRegion(f,se,fe,Me);break}catch(Oe){if(!(Oe instanceof ee))throw Oe}}const b=ki.createTransform(s,l,u,T,g),O=ki.sampleGrid(this.image,b,g);let L;return T===null?L=[u,s,l]:L=[u,s,l,T],new ma(O,L)}static createTransform(i,s,l,u,f){const g=f-3.5;let y,x,T,b;return u!==null?(y=u.getX(),x=u.getY(),T=g-3,b=T):(y=s.getX()-i.getX()+l.getX(),x=s.getY()-i.getY()+l.getY(),T=g,b=g),di.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,T,b,3.5,g,i.getX(),i.getY(),s.getX(),s.getY(),y,x,l.getX(),l.getY())}static sampleGrid(i,s,l){return gi.getInstance().sampleGridWithTransform(i,l,l,s)}static computeDimension(i,s,l,u){const f=tt.round(He.distance(i,s)/u),g=tt.round(He.distance(i,l)/u);let y=Math.floor((f+g)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new ee("Dimensions could be not found.")}return y}calculateModuleSize(i,s,l){return(this.calculateModuleSizeOneWay(i,s)+this.calculateModuleSizeOneWay(i,l))/2}calculateModuleSizeOneWay(i,s){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(s.getX()),Math.floor(s.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(i,s,l,u){let f=this.sizeOfBlackWhiteBlackRun(i,s,l,u),g=1,y=i-(l-i);y<0?(g=i/(i-y),y=0):y>=this.image.getWidth()&&(g=(this.image.getWidth()-1-i)/(y-i),y=this.image.getWidth()-1);let x=Math.floor(s-(u-s)*g);return g=1,x<0?(g=s/(s-x),x=0):x>=this.image.getHeight()&&(g=(this.image.getHeight()-1-s)/(x-s),x=this.image.getHeight()-1),y=Math.floor(i+(y-i)*g),f+=this.sizeOfBlackWhiteBlackRun(i,s,y,x),f-1}sizeOfBlackWhiteBlackRun(i,s,l,u){const f=Math.abs(u-s)>Math.abs(l-i);if(f){let z=i;i=s,s=z,z=l,l=u,u=z}const g=Math.abs(l-i),y=Math.abs(u-s);let x=-g/2;const T=i<l?1:-1,b=s<u?1:-1;let O=0;const L=l+T;for(let z=i,K=s;z!==L;z+=T){const Q=f?K:z,se=f?z:K;if(O===1===this.image.get(Q,se)){if(O===2)return tt.distance(z,K,i,s);O++}if(x+=y,x>0){if(K===u)break;K+=b,x-=g}}return O===2?tt.distance(l+T,u,i,s):NaN}findAlignmentInRegion(i,s,l,u){const f=Math.floor(u*i),g=Math.max(0,s-f),y=Math.min(this.image.getWidth()-1,s+f);if(y-g<i*3)throw new ee("Alignment top exceeds estimated module size.");const x=Math.max(0,l-f),T=Math.min(this.image.getHeight()-1,l+f);if(T-x<i*3)throw new ee("Alignment bottom exceeds estimated module size.");return new Pi(this.image,g,x,y-g,T-x,i,this.resultPointCallback).find()}}class Bi{constructor(){this.decoder=new fs}getDecoder(){return this.decoder}decode(i,s){let l,u;if(s!=null&&s.get(Ve.PURE_BARCODE)!==void 0){const x=Bi.extractPureBits(i.getBlackMatrix());l=this.decoder.decodeBitMatrix(x,s),u=Bi.NO_POINTS}else{const x=new ki(i.getBlackMatrix()).detect(s);l=this.decoder.decodeBitMatrix(x.getBits(),s),u=x.getPoints()}l.getOther()instanceof wo&&l.getOther().applyMirroredCorrection(u);const f=new Be(l.getText(),l.getRawBytes(),void 0,u,ke.QR_CODE,void 0),g=l.getByteSegments();g!==null&&f.putMetadata(wt.BYTE_SEGMENTS,g);const y=l.getECLevel();return y!==null&&f.putMetadata(wt.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(f.putMetadata(wt.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),f.putMetadata(wt.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),f}reset(){}static extractPureBits(i){const s=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(s===null||l===null)throw new ee;const u=this.moduleSize(s,i);let f=s[1],g=l[1],y=s[0],x=l[0];if(y>=x||f>=g)throw new ee;if(g-f!==x-y&&(x=y+(g-f),x>=i.getWidth()))throw new ee;const T=Math.round((x-y+1)/u),b=Math.round((g-f+1)/u);if(T<=0||b<=0)throw new ee;if(b!==T)throw new ee;const O=Math.floor(u/2);f+=O,y+=O;const L=y+Math.floor((T-1)*u)-x;if(L>0){if(L>O)throw new ee;y-=L}const z=f+Math.floor((b-1)*u)-g;if(z>0){if(z>O)throw new ee;f-=z}const K=new Ae(T,b);for(let Q=0;Q<b;Q++){const se=f+Math.floor(Q*u);for(let fe=0;fe<T;fe++)i.get(y+Math.floor(fe*u),se)&&K.set(fe,Q)}return K}static moduleSize(i,s){const l=s.getHeight(),u=s.getWidth();let f=i[0],g=i[1],y=!0,x=0;for(;f<u&&g<l;){if(y!==s.get(f,g)){if(++x===5)break;y=!y}f++,g++}if(f===u||g===l)throw new ee;return(f-i[0])/7}}Bi.NO_POINTS=new Array;class Ze{PDF417Common(){}static getBitCountSum(i){return tt.sum(i)}static toIntArray(i){if(i==null||!i.length)return Ze.EMPTY_INT_ARRAY;const s=new Int32Array(i.length);let l=0;for(const u of i)s[l++]=u;return s}static getCodeword(i){const s=Le.binarySearch(Ze.SYMBOL_TABLE,i&262143);return s<0?-1:(Ze.CODEWORD_TABLE[s]-1)%Ze.NUMBER_OF_CODEWORDS}}Ze.NUMBER_OF_CODEWORDS=929,Ze.MAX_CODEWORDS_IN_BARCODE=Ze.NUMBER_OF_CODEWORDS-1,Ze.MIN_ROWS_IN_BARCODE=3,Ze.MAX_ROWS_IN_BARCODE=90,Ze.MODULES_IN_CODEWORD=17,Ze.MODULES_IN_STOP_PATTERN=18,Ze.BARS_IN_MODULE=8,Ze.EMPTY_INT_ARRAY=new Int32Array([]),Ze.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ze.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class gs{constructor(i,s){this.bits=i,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class it{static detectMultiple(i,s,l){let u=i.getBlackMatrix(),f=it.detect(l,u);return f.length||(u=u.clone(),u.rotate180(),f=it.detect(l,u)),new gs(u,f)}static detect(i,s){const l=new Array;let u=0,f=0,g=!1;for(;u<s.getHeight();){const y=it.findVertices(s,u,f);if(y[0]==null&&y[3]==null){if(!g)break;g=!1,f=0;for(const x of l)x[1]!=null&&(u=Math.trunc(Math.max(u,x[1].getY()))),x[3]!=null&&(u=Math.max(u,Math.trunc(x[3].getY())));u+=it.ROW_STEP;continue}if(g=!0,l.push(y),!i)break;y[2]!=null?(f=Math.trunc(y[2].getX()),u=Math.trunc(y[2].getY())):(f=Math.trunc(y[4].getX()),u=Math.trunc(y[4].getY()))}return l}static findVertices(i,s,l){const u=i.getHeight(),f=i.getWidth(),g=new Array(8);return it.copyToResult(g,it.findRowsWithPattern(i,u,f,s,l,it.START_PATTERN),it.INDEXES_START_PATTERN),g[4]!=null&&(l=Math.trunc(g[4].getX()),s=Math.trunc(g[4].getY())),it.copyToResult(g,it.findRowsWithPattern(i,u,f,s,l,it.STOP_PATTERN),it.INDEXES_STOP_PATTERN),g}static copyToResult(i,s,l){for(let u=0;u<l.length;u++)i[l[u]]=s[u]}static findRowsWithPattern(i,s,l,u,f,g){const y=new Array(4);let x=!1;const T=new Int32Array(g.length);for(;u<s;u+=it.ROW_STEP){let O=it.findGuardPattern(i,f,u,l,!1,g,T);if(O!=null){for(;u>0;){const L=it.findGuardPattern(i,f,--u,l,!1,g,T);if(L!=null)O=L;else{u++;break}}y[0]=new He(O[0],u),y[1]=new He(O[1],u),x=!0;break}}let b=u+1;if(x){let O=0,L=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;b<s;b++){const z=it.findGuardPattern(i,L[0],b,l,!1,g,T);if(z!=null&&Math.abs(L[0]-z[0])<it.MAX_PATTERN_DRIFT&&Math.abs(L[1]-z[1])<it.MAX_PATTERN_DRIFT)L=z,O=0;else{if(O>it.SKIPPED_ROW_COUNT_MAX)break;O++}}b-=O+1,y[2]=new He(L[0],b),y[3]=new He(L[1],b)}return b-u<it.BARCODE_MIN_HEIGHT&&Le.fill(y,null),y}static findGuardPattern(i,s,l,u,f,g,y){Le.fillWithin(y,0,y.length,0);let x=s,T=0;for(;i.get(x,l)&&x>0&&T++<it.MAX_PIXEL_DRIFT;)x--;let b=x,O=0,L=g.length;for(let z=f;b<u;b++)if(i.get(b,l)!==z)y[O]++;else{if(O===L-1){if(it.patternMatchVariance(y,g,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return new Int32Array([x,b]);x+=y[0]+y[1],me.arraycopy(y,2,y,0,O-1),y[O-1]=0,y[O]=0,O--}else O++;y[O]=1,z=!z}return O===L-1&&it.patternMatchVariance(y,g,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE?new Int32Array([x,b-1]):null}static patternMatchVariance(i,s,l){let u=i.length,f=0,g=0;for(let T=0;T<u;T++)f+=i[T],g+=s[T];if(f<g)return 1/0;let y=f/g;l*=y;let x=0;for(let T=0;T<u;T++){let b=i[T],O=s[T]*y,L=b>O?b-O:O-b;if(L>l)return 1/0;x+=L}return x/f}}it.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),it.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),it.MAX_AVG_VARIANCE=.42,it.MAX_INDIVIDUAL_VARIANCE=.8,it.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),it.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),it.MAX_PIXEL_DRIFT=3,it.MAX_PATTERN_DRIFT=5,it.SKIPPED_ROW_COUNT_MAX=25,it.ROW_STEP=5,it.BARCODE_MIN_HEIGHT=10;class $t{constructor(i,s){if(s.length===0)throw new M;this.field=i;let l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),me.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let u=0;for(let f of this.coefficients)u=this.field.add(u,f);return u}let s=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)s=this.field.add(this.field.multiply(i,s),this.coefficients[u]);return s}add(i){if(!this.field.equals(i.field))throw new M("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let s=this.coefficients,l=i.coefficients;if(s.length>l.length){let g=s;s=l,l=g}let u=new Int32Array(l.length),f=l.length-s.length;me.arraycopy(l,0,u,0,f);for(let g=f;g<l.length;g++)u[g]=this.field.add(s[g-f],l[g]);return new $t(this.field,u)}subtract(i){if(!this.field.equals(i.field))throw new M("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof $t?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new M("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new $t(this.field,new Int32Array([0]));let s=this.coefficients,l=s.length,u=i.coefficients,f=u.length,g=new Int32Array(l+f-1);for(let y=0;y<l;y++){let x=s[y];for(let T=0;T<f;T++)g[y+T]=this.field.add(g[y+T],this.field.multiply(x,u[T]))}return new $t(this.field,g)}negative(){let i=this.coefficients.length,s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=this.field.subtract(0,this.coefficients[l]);return new $t(this.field,s)}multiplyScalar(i){if(i===0)return new $t(this.field,new Int32Array([0]));if(i===1)return this;let s=this.coefficients.length,l=new Int32Array(s);for(let u=0;u<s;u++)l[u]=this.field.multiply(this.coefficients[u],i);return new $t(this.field,l)}multiplyByMonomial(i,s){if(i<0)throw new M;if(s===0)return new $t(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+i);for(let f=0;f<l;f++)u[f]=this.field.multiply(this.coefficients[f],s);return new $t(this.field,u)}toString(){let i=new P;for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);l!==0&&(l<0?(i.append(" - "),l=-l):i.length()>0&&i.append(" + "),(s===0||l!==1)&&i.append(l),s!==0&&(s===1?i.append("x"):(i.append("x^"),i.append(s))))}return i.toString()}}class Ls{add(i,s){return(i+s)%this.modulus}subtract(i,s){return(this.modulus+i-s)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new M;return this.logTable[i]}inverse(i){if(i===0)throw new Jr;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,s){return i===0||s===0?0:this.expTable[(this.logTable[i]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class Yt extends Ls{constructor(i,s){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let l=1;for(let u=0;u<i;u++)this.expTable[u]=l,l=l*s%i;for(let u=0;u<i-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new $t(this,new Int32Array([0])),this.one=new $t(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,s){if(i<0)throw new M;if(s===0)return this.zero;let l=new Int32Array(i+1);return l[0]=s,new $t(this,l)}}Yt.PDF417_GF=new Yt(Ze.NUMBER_OF_CODEWORDS,3);class _r{constructor(){this.field=Yt.PDF417_GF}decode(i,s,l){let u=new $t(this.field,i),f=new Int32Array(s),g=!1;for(let K=s;K>0;K--){let Q=u.evaluateAt(this.field.exp(K));f[s-K]=Q,Q!==0&&(g=!0)}if(!g)return 0;let y=this.field.getOne();if(l!=null)for(const K of l){let Q=this.field.exp(i.length-1-K),se=new $t(this.field,new Int32Array([this.field.subtract(0,Q),1]));y=y.multiply(se)}let x=new $t(this.field,f),T=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),x,s),b=T[0],O=T[1],L=this.findErrorLocations(b),z=this.findErrorMagnitudes(O,b,L);for(let K=0;K<L.length;K++){let Q=i.length-1-this.field.log(L[K]);if(Q<0)throw te.getChecksumInstance();i[Q]=this.field.subtract(i[Q],z[K])}return L.length}runEuclideanAlgorithm(i,s,l){if(i.getDegree()<s.getDegree()){let L=i;i=s,s=L}let u=i,f=s,g=this.field.getZero(),y=this.field.getOne();for(;f.getDegree()>=Math.round(l/2);){let L=u,z=g;if(u=f,g=y,u.isZero())throw te.getChecksumInstance();f=L;let K=this.field.getZero(),Q=u.getCoefficient(u.getDegree()),se=this.field.inverse(Q);for(;f.getDegree()>=u.getDegree()&&!f.isZero();){let fe=f.getDegree()-u.getDegree(),Me=this.field.multiply(f.getCoefficient(f.getDegree()),se);K=K.add(this.field.buildMonomial(fe,Me)),f=f.subtract(u.multiplyByMonomial(fe,Me))}y=K.multiply(g).subtract(z).negative()}let x=y.getCoefficient(0);if(x===0)throw te.getChecksumInstance();let T=this.field.inverse(x),b=y.multiply(T),O=f.multiply(T);return[b,O]}findErrorLocations(i){let s=i.getDegree(),l=new Int32Array(s),u=0;for(let f=1;f<this.field.getSize()&&u<s;f++)i.evaluateAt(f)===0&&(l[u]=this.field.inverse(f),u++);if(u!==s)throw te.getChecksumInstance();return l}findErrorMagnitudes(i,s,l){let u=s.getDegree(),f=new Int32Array(u);for(let T=1;T<=u;T++)f[u-T]=this.field.multiply(T,s.getCoefficient(T));let g=new $t(this.field,f),y=l.length,x=new Int32Array(y);for(let T=0;T<y;T++){let b=this.field.inverse(l[T]),O=this.field.subtract(0,i.evaluateAt(b)),L=this.field.inverse(g.evaluateAt(b));x[T]=this.field.multiply(O,L)}return x}}class Er{constructor(i,s,l,u,f){i instanceof Er?this.constructor_2(i):this.constructor_1(i,s,l,u,f)}constructor_1(i,s,l,u,f){const g=s==null||l==null,y=u==null||f==null;if(g&&y)throw new ee;g?(s=new He(0,u.getY()),l=new He(0,f.getY())):y&&(u=new He(i.getWidth()-1,s.getY()),f=new He(i.getWidth()-1,l.getY())),this.image=i,this.topLeft=s,this.bottomLeft=l,this.topRight=u,this.bottomRight=f,this.minX=Math.trunc(Math.min(s.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),f.getX())),this.minY=Math.trunc(Math.min(s.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),f.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,s){return i==null?s:s==null?i:new Er(i.image,i.topLeft,i.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(i,s,l){let u=this.topLeft,f=this.bottomLeft,g=this.topRight,y=this.bottomRight;if(i>0){let x=l?this.topLeft:this.topRight,T=Math.trunc(x.getY()-i);T<0&&(T=0);let b=new He(x.getX(),T);l?u=b:g=b}if(s>0){let x=l?this.bottomLeft:this.bottomRight,T=Math.trunc(x.getY()+s);T>=this.image.getHeight()&&(T=this.image.getHeight()-1);let b=new He(x.getX(),T);l?f=b:y=b}return new Er(this.image,u,f,g,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ps{constructor(i,s,l,u){this.columnCount=i,this.errorCorrectionLevel=u,this.rowCountUpperPart=s,this.rowCountLowerPart=l,this.rowCount=s+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ts{constructor(){this.buffer=""}static form(i,s){let l=-1;function u(g,y,x,T,b,O){if(g==="%%")return"%";if(s[++l]===void 0)return;g=T?parseInt(T.substr(1)):void 0;let L=b?parseInt(b.substr(1)):void 0,z;switch(O){case"s":z=s[l];break;case"c":z=s[l][0];break;case"f":z=parseFloat(s[l]).toFixed(g);break;case"p":z=parseFloat(s[l]).toPrecision(g);break;case"e":z=parseFloat(s[l]).toExponential(g);break;case"x":z=parseInt(s[l]).toString(L||16);break;case"d":z=parseFloat(parseInt(s[l],L||10).toPrecision(g)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(L);let K=parseInt(x),Q=x&&x[0]+""=="0"?"0":" ";for(;z.length<K;)z=y!==void 0?z+Q:Q+z;return z}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,u)}format(i,...s){this.buffer+=ts.form(i,s)}toString(){return this.buffer}}class xr{constructor(i){this.boundingBox=new Er(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let s=this.getCodeword(i);if(s!=null)return s;for(let l=1;l<xr.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(i)-l;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(i)+l,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,s){this.codewords[this.imageRowToCodewordIndex(i)]=s}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new ts;let s=0;for(const l of this.codewords){if(l==null){i.format("%3d:    |   %n",s++);continue}i.format("%3d: %3d|%3d%n",s++,l.getRowNumber(),l.getValue())}return i.toString()}}xr.MAX_NEARBY_DISTANCE=5;class Gi{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let s=this.values.get(i);s==null&&(s=0),s++,this.values.set(i,s)}getValue(){let i=-1,s=new Array;for(const[l,u]of this.values.entries()){const f={getKey:()=>l,getValue:()=>u};f.getValue()>i?(i=f.getValue(),s=[],s.push(f.getKey())):f.getValue()===i&&s.push(f.getKey())}return Ze.toIntArray(s)}getConfidence(i){return this.values.get(i)}}class nr extends xr{constructor(i,s){super(i),this._isLeft=s}setRowNumbers(){for(let i of this.getCodewords())i?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,i);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),x=-1,T=1,b=0;for(let O=g;O<y;O++){if(s[O]==null)continue;let L=s[O],z=L.getRowNumber()-x;if(z===0)b++;else if(z===1)T=Math.max(T,b),b=1,x=L.getRowNumber();else if(z<0||L.getRowNumber()>=i.getRowCount()||z>O)s[O]=null;else{let K;T>2?K=(T-2)*z:K=z;let Q=K>=O;for(let se=1;se<=K&&!Q;se++)Q=s[O-se]!=null;Q?s[O]=null:(x=L.getRowNumber(),b=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let s=new Int32Array(i.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=s.length)continue;s[u]++}return s}adjustIncompleteIndicatorColumnRowNumbers(i){let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.getCodewords(),x=-1;for(let T=f;T<g;T++){if(y[T]==null)continue;let b=y[T];b.setRowNumberAsRowIndicatorColumn();let O=b.getRowNumber()-x;O===0||(O===1?x=b.getRowNumber():b.getRowNumber()>=i.getRowCount()?y[T]=null:x=b.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),s=new Gi,l=new Gi,u=new Gi,f=new Gi;for(let y of i){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let x=y.getValue()%30,T=y.getRowNumber();switch(this._isLeft||(T+=2),T%3){case 0:l.setValue(x*3+1);break;case 1:f.setValue(x/3),u.setValue(x%3);break;case 2:s.setValue(x+1);break}}if(s.getValue().length===0||l.getValue().length===0||u.getValue().length===0||f.getValue().length===0||s.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<Ze.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>Ze.MAX_ROWS_IN_BARCODE)return null;let g=new Ps(s.getValue()[0],l.getValue()[0],u.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(i,g),g}removeIncorrectCodewords(i,s){for(let l=0;l<i.length;l++){let u=i[l];if(i[l]==null)continue;let f=u.getValue()%30,g=u.getRowNumber();if(g>s.getRowCount()){i[l]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:f*3+1!==s.getRowCountUpperPart()&&(i[l]=null);break;case 1:(Math.trunc(f/3)!==s.getErrorCorrectionLevel()||f%3!==s.getRowCountLowerPart())&&(i[l]=null);break;case 2:f+1!==s.getColumnCount()&&(i[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ln{constructor(i,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=Ze.MAX_CODEWORDS_IN_BARCODE,s;do s=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let l=this.detectionResultColumns[s].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(s,u,l))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++)if(i[l]!=null&&s[l]!=null&&i[l].getRowNumber()===s[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let f=this.detectionResultColumns[u].getCodewords()[l];f!=null&&(f.setRowNumber(i[l].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),f=0;for(let g=this.barcodeColumnCount+1;g>0&&f<this.ADJUST_ROW_NUMBER_SKIP;g--){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(f=Ln.adjustRowNumberIfValid(u,f,y),y.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,s=this.detectionResultColumns[0].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),f=0;for(let g=1;g<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;g++){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(f=Ln.adjustRowNumberIfValid(u,f,y),y.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,s,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(i)?(l.setRowNumber(i),s=0):++s),s}adjustRowNumbers(i,s,l){if(!this.detectionResultColumns[i-1])return;let u=l[s],f=this.detectionResultColumns[i-1].getCodewords(),g=f;this.detectionResultColumns[i+1]!=null&&(g=this.detectionResultColumns[i+1].getCodewords());let y=new Array(14);y[2]=f[s],y[3]=g[s],s>0&&(y[0]=l[s-1],y[4]=f[s-1],y[5]=g[s-1]),s>1&&(y[8]=l[s-2],y[10]=f[s-2],y[11]=g[s-2]),s<l.length-1&&(y[1]=l[s+1],y[6]=f[s+1],y[7]=g[s+1]),s<l.length-2&&(y[9]=l[s+2],y[12]=f[s+2],y[13]=g[s+2]);for(let x of y)if(Ln.adjustRowNumber(u,x))return}static adjustRowNumber(i,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===i.getBucket()?(i.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,s){this.detectionResultColumns[i]=s}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new ts;for(let l=0;l<i.getCodewords().length;l++){s.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){s.format("    |   ");continue}let f=this.detectionResultColumns[u].getCodewords()[l];if(f==null){s.format("    |   ");continue}s.format(" %3d|%3d",f.getRowNumber(),f.getValue())}s.format("%n")}return s.toString()}}class qi{constructor(i,s,l,u){this.rowNumber=qi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(s),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==qi.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}qi.BARCODE_ROW_UNKNOWN=-1;class yn{static initialize(){for(let i=0;i<Ze.SYMBOL_TABLE.length;i++){let s=Ze.SYMBOL_TABLE[i],l=s&1;for(let u=0;u<Ze.BARS_IN_MODULE;u++){let f=0;for(;(s&1)===l;)f+=1,s>>=1;l=s&1,yn.RATIOS_TABLE[i]||(yn.RATIOS_TABLE[i]=new Array(Ze.BARS_IN_MODULE)),yn.RATIOS_TABLE[i][Ze.BARS_IN_MODULE-u-1]=Math.fround(f/Ze.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let s=yn.getDecodedCodewordValue(yn.sampleBitCounts(i));return s!==-1?s:yn.getClosestDecodedValue(i)}static sampleBitCounts(i){let s=tt.sum(i),l=new Int32Array(Ze.BARS_IN_MODULE),u=0,f=0;for(let g=0;g<Ze.MODULES_IN_CODEWORD;g++){let y=s/(2*Ze.MODULES_IN_CODEWORD)+g*s/Ze.MODULES_IN_CODEWORD;f+i[u]<=y&&(f+=i[u],u++),l[u]++}return l}static getDecodedCodewordValue(i){let s=yn.getBitValue(i);return Ze.getCodeword(s)===-1?-1:s}static getBitValue(i){let s=0;for(let l=0;l<i.length;l++)for(let u=0;u<i[l];u++)s=s<<1|(l%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(i){let s=tt.sum(i),l=new Array(Ze.BARS_IN_MODULE);if(s>1)for(let g=0;g<l.length;g++)l[g]=Math.fround(i[g]/s);let u=wn.MAX_VALUE,f=-1;this.bSymbolTableReady||yn.initialize();for(let g=0;g<yn.RATIOS_TABLE.length;g++){let y=0,x=yn.RATIOS_TABLE[g];for(let T=0;T<Ze.BARS_IN_MODULE;T++){let b=Math.fround(x[T]-l[T]);if(y+=Math.fround(b*b),y>=u)break}y<u&&(u=y,f=Ze.SYMBOL_TABLE[g])}return f}}yn.bSymbolTableReady=!1,yn.RATIOS_TABLE=new Array(Ze.SYMBOL_TABLE.length).map(N=>new Array(Ze.BARS_IN_MODULE));class ns{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class xa{static parseLong(i,s=void 0){return parseInt(i,s)}}class is extends w{}is.kind="NullPointerException";class Aa{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,s,l){if(i==null)throw new is;if(s<0||s>i.length||l<0||s+l>i.length||s+l<0)throw new ye;if(l===0)return;for(let u=0;u<l;u++)this.write(i[s+u])}flush(){}close(){}}class kr extends w{}class wa extends Aa{constructor(i=32){if(super(),this.count=0,i<0)throw new M("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let l=this.buf.length<<1;if(l-i<0&&(l=i),l<0){if(i<0)throw new kr;l=pe.MAX_VALUE}this.buf=Le.copyOfUint8Array(this.buf,l)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,s,l){if(s<0||s>i.length||l<0||s+l-i.length>0)throw new ye;this.ensureCapacity(this.count+l),me.arraycopy(i,s,this.buf,this.count,l),this.count+=l}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Le.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Ft;(function(N){N[N.ALPHA=0]="ALPHA",N[N.LOWER=1]="LOWER",N[N.MIXED=2]="MIXED",N[N.PUNCT=3]="PUNCT",N[N.ALPHA_SHIFT=4]="ALPHA_SHIFT",N[N.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ft||(Ft={}));function ms(){if(typeof window<"u")return window.BigInt||null;if(typeof Dh<"u")return Dh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ks;function Ar(N){if(typeof ks>"u"&&(ks=ms()),ks===null)throw new Error("BigInt is not supported!");return ks(N)}function Bs(){let N=[];N[0]=Ar(1);let i=Ar(900);N[1]=i;for(let s=2;s<16;s++)N[s]=N[s-1]*i;return N}class he{static decode(i,s){let l=new P(""),u=B.ISO8859_1;l.enableDecoding(u);let f=1,g=i[f++],y=new ns;for(;f<i[0];){switch(g){case he.TEXT_COMPACTION_MODE_LATCH:f=he.textCompaction(i,f,l);break;case he.BYTE_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:f=he.byteCompaction(g,i,u,f,l);break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(i[f++]);break;case he.NUMERIC_COMPACTION_MODE_LATCH:f=he.numericCompaction(i,f,l);break;case he.ECI_CHARSET:B.getCharacterSetECIByValue(i[f++]);break;case he.ECI_GENERAL_PURPOSE:f+=2;break;case he.ECI_USER_DEFINED:f++;break;case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=he.decodeMacroBlock(i,f,y);break;case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:throw new V;default:f--,f=he.textCompaction(i,f,l);break}if(f<i.length)g=i[f++];else throw V.getFormatInstance()}if(l.length()===0)throw V.getFormatInstance();let x=new Zt(null,l.toString(),null,s);return x.setOther(y),x}static decodeMacroBlock(i,s,l){if(s+he.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw V.getFormatInstance();let u=new Int32Array(he.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<he.NUMBER_OF_SEQUENCE_CODEWORDS;y++,s++)u[y]=i[s];l.setSegmentIndex(pe.parseInt(he.decodeBase900toBase10(u,he.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new P;s=he.textCompaction(i,s,f),l.setFileId(f.toString());let g=-1;for(i[s]===he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=s+1);s<i[0];)switch(i[s]){case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,i[s]){case he.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new P;s=he.textCompaction(i,s+1,y),l.setFileName(y.toString());break;case he.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new P;s=he.textCompaction(i,s+1,x),l.setSender(x.toString());break;case he.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let T=new P;s=he.textCompaction(i,s+1,T),l.setAddressee(T.toString());break;case he.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let b=new P;s=he.numericCompaction(i,s+1,b),l.setSegmentCount(pe.parseInt(b.toString()));break;case he.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let O=new P;s=he.numericCompaction(i,s+1,O),l.setTimestamp(xa.parseLong(O.toString()));break;case he.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let L=new P;s=he.numericCompaction(i,s+1,L),l.setChecksum(pe.parseInt(L.toString()));break;case he.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let z=new P;s=he.numericCompaction(i,s+1,z),l.setFileSize(xa.parseLong(z.toString()));break;default:throw V.getFormatInstance()}break;case he.MACRO_PDF417_TERMINATOR:s++,l.setLastSegment(!0);break;default:throw V.getFormatInstance()}if(g!==-1){let y=s-g;l.isLastSegment()&&y--,l.setOptionalData(Le.copyOfRange(i,g,g+y))}return s}static textCompaction(i,s,l){let u=new Int32Array((i[0]-s)*2),f=new Int32Array((i[0]-s)*2),g=0,y=!1;for(;s<i[0]&&!y;){let x=i[s++];if(x<he.TEXT_COMPACTION_MODE_LATCH)u[g]=x/30,u[g+1]=x%30,g+=2;else switch(x){case he.TEXT_COMPACTION_MODE_LATCH:u[g++]=he.TEXT_COMPACTION_MODE_LATCH;break;case he.BYTE_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:case he.NUMERIC_COMPACTION_MODE_LATCH:case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:s--,y=!0;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[g]=he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=i[s++],f[g]=x,g++;break}}return he.decodeTextCompaction(u,f,g,l),s}static decodeTextCompaction(i,s,l,u){let f=Ft.ALPHA,g=Ft.ALPHA,y=0;for(;y<l;){let x=i[y],T="";switch(f){case Ft.ALPHA:if(x<26)T=String.fromCharCode(65+x);else switch(x){case 26:T=" ";break;case he.LL:f=Ft.LOWER;break;case he.ML:f=Ft.MIXED;break;case he.PS:g=f,f=Ft.PUNCT_SHIFT;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case he.TEXT_COMPACTION_MODE_LATCH:f=Ft.ALPHA;break}break;case Ft.LOWER:if(x<26)T=String.fromCharCode(97+x);else switch(x){case 26:T=" ";break;case he.AS:g=f,f=Ft.ALPHA_SHIFT;break;case he.ML:f=Ft.MIXED;break;case he.PS:g=f,f=Ft.PUNCT_SHIFT;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case he.TEXT_COMPACTION_MODE_LATCH:f=Ft.ALPHA;break}break;case Ft.MIXED:if(x<he.PL)T=he.MIXED_CHARS[x];else switch(x){case he.PL:f=Ft.PUNCT;break;case 26:T=" ";break;case he.LL:f=Ft.LOWER;break;case he.AL:f=Ft.ALPHA;break;case he.PS:g=f,f=Ft.PUNCT_SHIFT;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case he.TEXT_COMPACTION_MODE_LATCH:f=Ft.ALPHA;break}break;case Ft.PUNCT:if(x<he.PAL)T=he.PUNCT_CHARS[x];else switch(x){case he.PAL:f=Ft.ALPHA;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case he.TEXT_COMPACTION_MODE_LATCH:f=Ft.ALPHA;break}break;case Ft.ALPHA_SHIFT:if(f=g,x<26)T=String.fromCharCode(65+x);else switch(x){case 26:T=" ";break;case he.TEXT_COMPACTION_MODE_LATCH:f=Ft.ALPHA;break}break;case Ft.PUNCT_SHIFT:if(f=g,x<he.PAL)T=he.PUNCT_CHARS[x];else switch(x){case he.PAL:f=Ft.ALPHA;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case he.TEXT_COMPACTION_MODE_LATCH:f=Ft.ALPHA;break}break}T!==""&&u.append(T),y++}}static byteCompaction(i,s,l,u,f){let g=new wa,y=0,x=0,T=!1;switch(i){case he.BYTE_COMPACTION_MODE_LATCH:let b=new Int32Array(6),O=s[u++];for(;u<s[0]&&!T;)switch(b[y++]=O,x=900*x+O,O=s[u++],O){case he.TEXT_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH:case he.NUMERIC_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:u--,T=!0;break;default:if(y%5===0&&y>0){for(let L=0;L<6;++L)g.write(Number(Ar(x)>>Ar(8*(5-L))));x=0,y=0}break}u===s[0]&&O<he.TEXT_COMPACTION_MODE_LATCH&&(b[y++]=O);for(let L=0;L<y;L++)g.write(b[L]);break;case he.BYTE_COMPACTION_MODE_LATCH_6:for(;u<s[0]&&!T;){let L=s[u++];if(L<he.TEXT_COMPACTION_MODE_LATCH)y++,x=900*x+L;else switch(L){case he.TEXT_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH:case he.NUMERIC_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:u--,T=!0;break}if(y%5===0&&y>0){for(let z=0;z<6;++z)g.write(Number(Ar(x)>>Ar(8*(5-z))));x=0,y=0}}break}return f.append(W.decode(g.toByteArray(),l)),u}static numericCompaction(i,s,l){let u=0,f=!1,g=new Int32Array(he.MAX_NUMERIC_CODEWORDS);for(;s<i[0]&&!f;){let y=i[s++];if(s===i[0]&&(f=!0),y<he.TEXT_COMPACTION_MODE_LATCH)g[u]=y,u++;else switch(y){case he.TEXT_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:s--,f=!0;break}(u%he.MAX_NUMERIC_CODEWORDS===0||y===he.NUMERIC_COMPACTION_MODE_LATCH||f)&&u>0&&(l.append(he.decodeBase900toBase10(g,u)),u=0)}return s}static decodeBase900toBase10(i,s){let l=Ar(0);for(let f=0;f<s;f++)l+=he.EXP900[s-f-1]*Ar(i[f]);let u=l.toString();if(u.charAt(0)!=="1")throw new V;return u.substring(1)}}he.TEXT_COMPACTION_MODE_LATCH=900,he.BYTE_COMPACTION_MODE_LATCH=901,he.NUMERIC_COMPACTION_MODE_LATCH=902,he.BYTE_COMPACTION_MODE_LATCH_6=924,he.ECI_USER_DEFINED=925,he.ECI_GENERAL_PURPOSE=926,he.ECI_CHARSET=927,he.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,he.MACRO_PDF417_TERMINATOR=922,he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,he.MAX_NUMERIC_CODEWORDS=15,he.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,he.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,he.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,he.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,he.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,he.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,he.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,he.PL=25,he.LL=27,he.AS=27,he.ML=28,he.AL=28,he.PS=29,he.PAL=29,he.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,he.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",he.EXP900=ms()?Bs():[],he.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ft{constructor(){}static decode(i,s,l,u,f,g,y){let x=new Er(i,s,l,u,f),T=null,b=null,O;for(let K=!0;;K=!1){if(s!=null&&(T=ft.getRowIndicatorColumn(i,x,s,!0,g,y)),u!=null&&(b=ft.getRowIndicatorColumn(i,x,u,!1,g,y)),O=ft.merge(T,b),O==null)throw ee.getNotFoundInstance();let Q=O.getBoundingBox();if(K&&Q!=null&&(Q.getMinY()<x.getMinY()||Q.getMaxY()>x.getMaxY()))x=Q;else break}O.setBoundingBox(x);let L=O.getBarcodeColumnCount()+1;O.setDetectionResultColumn(0,T),O.setDetectionResultColumn(L,b);let z=T!=null;for(let K=1;K<=L;K++){let Q=z?K:L-K;if(O.getDetectionResultColumn(Q)!==void 0)continue;let se;Q===0||Q===L?se=new nr(x,Q===0):se=new xr(x),O.setDetectionResultColumn(Q,se);let fe=-1,Me=fe;for(let Oe=x.getMinY();Oe<=x.getMaxY();Oe++){if(fe=ft.getStartColumn(O,Q,Oe,z),fe<0||fe>x.getMaxX()){if(Me===-1)continue;fe=Me}let be=ft.detectCodeword(i,x.getMinX(),x.getMaxX(),z,fe,Oe,g,y);be!=null&&(se.setCodeword(Oe,be),Me=fe,g=Math.min(g,be.getWidth()),y=Math.max(y,be.getWidth()))}}return ft.createDecoderResult(O)}static merge(i,s){if(i==null&&s==null)return null;let l=ft.getBarcodeMetadata(i,s);if(l==null)return null;let u=Er.merge(ft.adjustBoundingBox(i),ft.adjustBoundingBox(s));return new Ln(l,u)}static adjustBoundingBox(i){if(i==null)return null;let s=i.getRowHeights();if(s==null)return null;let l=ft.getMax(s),u=0;for(let y of s)if(u+=l-y,y>0)break;let f=i.getCodewords();for(let y=0;u>0&&f[y]==null;y++)u--;let g=0;for(let y=s.length-1;y>=0&&(g+=l-s[y],!(s[y]>0));y--);for(let y=f.length-1;g>0&&f[y]==null;y--)g--;return i.getBoundingBox().addMissingRows(u,g,i.isLeft())}static getMax(i){let s=-1;for(let l of i)s=Math.max(s,l);return s}static getBarcodeMetadata(i,s){let l;if(i==null||(l=i.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let u;return s==null||(u=s.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(i,s,l,u,f,g){let y=new nr(s,u);for(let x=0;x<2;x++){let T=x===0?1:-1,b=Math.trunc(Math.trunc(l.getX()));for(let O=Math.trunc(Math.trunc(l.getY()));O<=s.getMaxY()&&O>=s.getMinY();O+=T){let L=ft.detectCodeword(i,0,i.getWidth(),u,b,O,f,g);L!=null&&(y.setCodeword(O,L),u?b=L.getStartX():b=L.getEndX())}}return y}static adjustCodewordCount(i,s){let l=s[0][1],u=l.getValue(),f=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-ft.getNumberOfECCodeWords(i.getBarcodeECLevel());if(u.length===0){if(f<1||f>Ze.MAX_CODEWORDS_IN_BARCODE)throw ee.getNotFoundInstance();l.setValue(f)}else u[0]!==f&&l.setValue(f)}static createDecoderResult(i){let s=ft.createBarcodeMatrix(i);ft.adjustCodewordCount(i,s);let l=new Array,u=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),f=[],g=new Array;for(let x=0;x<i.getBarcodeRowCount();x++)for(let T=0;T<i.getBarcodeColumnCount();T++){let b=s[x][T+1].getValue(),O=x*i.getBarcodeColumnCount()+T;b.length===0?l.push(O):b.length===1?u[O]=b[0]:(g.push(O),f.push(b))}let y=new Array(f.length);for(let x=0;x<y.length;x++)y[x]=f[x];return ft.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),u,Ze.toIntArray(l),Ze.toIntArray(g),y)}static createDecoderResultFromAmbiguousValues(i,s,l,u,f){let g=new Int32Array(u.length),y=100;for(;y-- >0;){for(let x=0;x<g.length;x++)s[u[x]]=f[x][g[x]];try{return ft.decodeCodewords(s,i,l)}catch(x){if(!(x instanceof te))throw x}if(g.length===0)throw te.getChecksumInstance();for(let x=0;x<g.length;x++)if(g[x]<f[x].length-1){g[x]++;break}else if(g[x]=0,x===g.length-1)throw te.getChecksumInstance()}throw te.getChecksumInstance()}static createBarcodeMatrix(i){let s=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let u=0;u<s.length;u++)for(let f=0;f<s[u].length;f++)s[u][f]=new Gi;let l=0;for(let u of i.getDetectionResultColumns()){if(u!=null){for(let f of u.getCodewords())if(f!=null){let g=f.getRowNumber();if(g>=0){if(g>=s.length)continue;s[g][l].setValue(f.getValue())}}}l++}return s}static isValidBarcodeColumn(i,s){return s>=0&&s<=i.getBarcodeColumnCount()+1}static getStartColumn(i,s,l,u){let f=u?1:-1,g=null;if(ft.isValidBarcodeColumn(i,s-f)&&(g=i.getDetectionResultColumn(s-f).getCodeword(l)),g!=null)return u?g.getEndX():g.getStartX();if(g=i.getDetectionResultColumn(s).getCodewordNearby(l),g!=null)return u?g.getStartX():g.getEndX();if(ft.isValidBarcodeColumn(i,s-f)&&(g=i.getDetectionResultColumn(s-f).getCodewordNearby(l)),g!=null)return u?g.getEndX():g.getStartX();let y=0;for(;ft.isValidBarcodeColumn(i,s-f);){s-=f;for(let x of i.getDetectionResultColumn(s).getCodewords())if(x!=null)return(u?x.getEndX():x.getStartX())+f*y*(x.getEndX()-x.getStartX());y++}return u?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,s,l,u,f,g,y,x){f=ft.adjustCodewordStartColumn(i,s,l,u,f,g);let T=ft.getModuleBitCount(i,s,l,u,f,g);if(T==null)return null;let b,O=tt.sum(T);if(u)b=f+O;else{for(let K=0;K<T.length/2;K++){let Q=T[K];T[K]=T[T.length-1-K],T[T.length-1-K]=Q}b=f,f=b-O}if(!ft.checkCodewordSkew(O,y,x))return null;let L=yn.getDecodedValue(T),z=Ze.getCodeword(L);return z===-1?null:new qi(f,b,ft.getCodewordBucketNumber(L),z)}static getModuleBitCount(i,s,l,u,f,g){let y=f,x=new Int32Array(8),T=0,b=u?1:-1,O=u;for(;(u?y<l:y>=s)&&T<x.length;)i.get(y,g)===O?(x[T]++,y+=b):(T++,O=!O);return T===x.length||y===(u?l:s)&&T===x.length-1?x:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,s,l,u,f,g){let y=f,x=u?-1:1;for(let T=0;T<2;T++){for(;(u?y>=s:y<l)&&u===i.get(y,g);){if(Math.abs(f-y)>ft.CODEWORD_SKEW_SIZE)return f;y+=x}x=-x,u=!u}return y}static checkCodewordSkew(i,s,l){return s-ft.CODEWORD_SKEW_SIZE<=i&&i<=l+ft.CODEWORD_SKEW_SIZE}static decodeCodewords(i,s,l){if(i.length===0)throw V.getFormatInstance();let u=1<<s+1,f=ft.correctErrors(i,l,u);ft.verifyCodewordCount(i,u);let g=he.decode(i,""+s);return g.setErrorsCorrected(f),g.setErasures(l.length),g}static correctErrors(i,s,l){if(s!=null&&s.length>l/2+ft.MAX_ERRORS||l<0||l>ft.MAX_EC_CODEWORDS)throw te.getChecksumInstance();return ft.errorCorrection.decode(i,l,s)}static verifyCodewordCount(i,s){if(i.length<4)throw V.getFormatInstance();let l=i[0];if(l>i.length)throw V.getFormatInstance();if(l===0)if(s<i.length)i[0]=i.length-s;else throw V.getFormatInstance()}static getBitCountForCodeword(i){let s=new Int32Array(8),l=0,u=s.length-1;for(;!((i&1)!==l&&(l=i&1,u--,u<0));)s[u]++,i>>=1;return s}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return ft.getCodewordBucketNumber(ft.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let s=new ts;for(let l=0;l<i.length;l++){s.format("Row %2d: ",l);for(let u=0;u<i[l].length;u++){let f=i[l][u];f.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}s.format("%n")}return s.toString()}}ft.CODEWORD_SKEW_SIZE=2,ft.MAX_ERRORS=3,ft.MAX_EC_CODEWORDS=512,ft.errorCorrection=new _r;class Sn{decode(i,s=null){let l=Sn.decode(i,s,!1);if(l==null||l.length===0||l[0]==null)throw ee.getNotFoundInstance();return l[0]}decodeMultiple(i,s=null){try{return Sn.decode(i,s,!0)}catch(l){throw l instanceof V||l instanceof te?ee.getNotFoundInstance():l}}static decode(i,s,l){const u=new Array,f=it.detectMultiple(i,s,l);for(const g of f.getPoints()){const y=ft.decode(f.getBits(),g[4],g[5],g[6],g[7],Sn.getMinCodewordWidth(g),Sn.getMaxCodewordWidth(g)),x=new Be(y.getText(),y.getRawBytes(),void 0,g,ke.PDF_417);x.putMetadata(wt.ERROR_CORRECTION_LEVEL,y.getECLevel());const T=y.getOther();T!=null&&x.putMetadata(wt.PDF417_EXTRA_METADATA,T),u.push(x)}return u.map(g=>g)}static getMaxWidth(i,s){return i==null||s==null?0:Math.trunc(Math.abs(i.getX()-s.getX()))}static getMinWidth(i,s){return i==null||s==null?pe.MAX_VALUE:Math.trunc(Math.abs(i.getX()-s.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Sn.getMaxWidth(i[0],i[4]),Sn.getMaxWidth(i[6],i[2])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN),Math.max(Sn.getMaxWidth(i[1],i[5]),Sn.getMaxWidth(i[7],i[3])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Sn.getMinWidth(i[0],i[4]),Sn.getMinWidth(i[6],i[2])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN),Math.min(Sn.getMinWidth(i[1],i[5]),Sn.getMinWidth(i[7],i[3])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN)))}reset(){}}class Vs extends w{}Vs.kind="ReaderException";class To{constructor(i,s){this.verbose=i===!0,s&&this.setHints(s)}decode(i,s){return s&&this.setHints(s),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const s=!o(i)&&i.get(Ve.TRY_HARDER)===!0,l=o(i)?null:i.get(Ve.POSSIBLE_FORMATS),u=new Array;if(!o(l)){const f=l.some(g=>g===ke.UPC_A||g===ke.UPC_E||g===ke.EAN_13||g===ke.EAN_8||g===ke.CODABAR||g===ke.CODE_39||g===ke.CODE_93||g===ke.CODE_128||g===ke.ITF||g===ke.RSS_14||g===ke.RSS_EXPANDED);f&&!s&&u.push(new xi(i,this.verbose)),l.includes(ke.QR_CODE)&&u.push(new Bi),l.includes(ke.DATA_MATRIX)&&u.push(new Mi),l.includes(ke.AZTEC)&&u.push(new Ns),l.includes(ke.PDF_417)&&u.push(new Sn),f&&s&&u.push(new xi(i,this.verbose))}u.length===0&&(s||u.push(new xi(i,this.verbose)),u.push(new Bi),u.push(new Mi),u.push(new Ns),u.push(new Sn),s&&u.push(new xi(i,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new Vs("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(i,this.hints)}catch(l){if(l instanceof Vs)continue}throw new ee("No MultiFormat Readers were able to detect the code.")}}class Br extends Ce{constructor(i=null,s=500){const l=new To;l.setHints(i),super(l,s)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class il extends Ce{constructor(i=500){super(new Sn,i)}}class rl extends Ce{constructor(i=500){super(new Bi,i)}}var Ta;(function(N){N[N.ERROR_CORRECTION=0]="ERROR_CORRECTION",N[N.CHARACTER_SET=1]="CHARACTER_SET",N[N.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",N[N.MIN_SIZE=3]="MIN_SIZE",N[N.MAX_SIZE=4]="MAX_SIZE",N[N.MARGIN=5]="MARGIN",N[N.PDF417_COMPACT=6]="PDF417_COMPACT",N[N.PDF417_COMPACTION=7]="PDF417_COMPACTION",N[N.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",N[N.AZTEC_LAYERS=9]="AZTEC_LAYERS",N[N.QR_VERSION=10]="QR_VERSION"})(Ta||(Ta={}));var bn=Ta;class Vr{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new zn(i,Int32Array.from([1])))}buildGenerator(i){const s=this.cachedGenerators;if(i>=s.length){let l=s[s.length-1];const u=this.field;for(let f=s.length;f<=i;f++){const g=l.multiply(new zn(u,Int32Array.from([1,u.exp(f-1+u.getGeneratorBase())])));s.push(g),l=g}}return s[i]}encode(i,s){if(s===0)throw new M("No error correction bytes");const l=i.length-s;if(l<=0)throw new M("No data bytes provided");const u=this.buildGenerator(s),f=new Int32Array(l);me.arraycopy(i,0,f,0,l);let g=new zn(this.field,f);g=g.multiplyByMonomial(s,1);const x=g.divide(u)[1].getCoefficients(),T=s-x.length;for(let b=0;b<T;b++)i[l+b]=0;me.arraycopy(x,0,i,l+T,x.length)}}class Ct{constructor(){}static applyMaskPenaltyRule1(i){return Ct.applyMaskPenaltyRule1Internal(i,!0)+Ct.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let s=0;const l=i.getArray(),u=i.getWidth(),f=i.getHeight();for(let g=0;g<f-1;g++){const y=l[g];for(let x=0;x<u-1;x++){const T=y[x];T===y[x+1]&&T===l[g+1][x]&&T===l[g+1][x+1]&&s++}}return Ct.N2*s}static applyMaskPenaltyRule3(i){let s=0;const l=i.getArray(),u=i.getWidth(),f=i.getHeight();for(let g=0;g<f;g++)for(let y=0;y<u;y++){const x=l[g];y+6<u&&x[y]===1&&x[y+1]===0&&x[y+2]===1&&x[y+3]===1&&x[y+4]===1&&x[y+5]===0&&x[y+6]===1&&(Ct.isWhiteHorizontal(x,y-4,y)||Ct.isWhiteHorizontal(x,y+7,y+11))&&s++,g+6<f&&l[g][y]===1&&l[g+1][y]===0&&l[g+2][y]===1&&l[g+3][y]===1&&l[g+4][y]===1&&l[g+5][y]===0&&l[g+6][y]===1&&(Ct.isWhiteVertical(l,y,g-4,g)||Ct.isWhiteVertical(l,y,g+7,g+11))&&s++}return s*Ct.N3}static isWhiteHorizontal(i,s,l){s=Math.max(s,0),l=Math.min(l,i.length);for(let u=s;u<l;u++)if(i[u]===1)return!1;return!0}static isWhiteVertical(i,s,l,u){l=Math.max(l,0),u=Math.min(u,i.length);for(let f=l;f<u;f++)if(i[f][s]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let s=0;const l=i.getArray(),u=i.getWidth(),f=i.getHeight();for(let x=0;x<f;x++){const T=l[x];for(let b=0;b<u;b++)T[b]===1&&s++}const g=i.getHeight()*i.getWidth();return Math.floor(Math.abs(s*2-g)*10/g)*Ct.N4}static getDataMaskBit(i,s,l){let u,f;switch(i){case 0:u=l+s&1;break;case 1:u=l&1;break;case 2:u=s%3;break;case 3:u=(l+s)%3;break;case 4:u=Math.floor(l/2)+Math.floor(s/3)&1;break;case 5:f=l*s,u=(f&1)+f%3;break;case 6:f=l*s,u=(f&1)+f%3&1;break;case 7:f=l*s,u=f%3+(l+s&1)&1;break;default:throw new M("Invalid mask pattern: "+i)}return u===0}static applyMaskPenaltyRule1Internal(i,s){let l=0;const u=s?i.getHeight():i.getWidth(),f=s?i.getWidth():i.getHeight(),g=i.getArray();for(let y=0;y<u;y++){let x=0,T=-1;for(let b=0;b<f;b++){const O=s?g[y][b]:g[b][y];O===T?x++:(x>=5&&(l+=Ct.N1+(x-5)),x=1,T=O)}x>=5&&(l+=Ct.N1+(x-5))}return l}}Ct.N1=3,Ct.N2=3,Ct.N3=40,Ct.N4=10;class Us{constructor(i,s){this.width=i,this.height=s;const l=new Array(s);for(let u=0;u!==s;u++)l[u]=new Uint8Array(i);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(i,s){return this.bytes[s][i]}getArray(){return this.bytes}setNumber(i,s,l){this.bytes[s][i]=l}setBoolean(i,s,l){this.bytes[s][i]=l?1:0}clear(i){for(const s of this.bytes)Le.fill(s,i)}equals(i){if(!(i instanceof Us))return!1;const s=i;if(this.width!==s.width||this.height!==s.height)return!1;for(let l=0,u=this.height;l<u;++l){const f=this.bytes[l],g=s.bytes[l];for(let y=0,x=this.width;y<x;++y)if(f[y]!==g[y])return!1}return!0}toString(){const i=new P;for(let s=0,l=this.height;s<l;++s){const u=this.bytes[s];for(let f=0,g=this.width;f<g;++f)switch(u[f]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class Ur{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new P;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<Ur.NUM_MASK_PATTERNS}}Ur.NUM_MASK_PATTERNS=8;class It extends w{}It.kind="WriterException";class p{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,s,l,u,f){p.clearMatrix(f),p.embedBasicPatterns(l,f),p.embedTypeInfo(s,u,f),p.maybeEmbedVersionInfo(l,f),p.embedDataBits(i,u,f)}static embedBasicPatterns(i,s){p.embedPositionDetectionPatternsAndSeparators(s),p.embedDarkDotAtLeftBottomCorner(s),p.maybeEmbedPositionAdjustmentPatterns(i,s),p.embedTimingPatterns(s)}static embedTypeInfo(i,s,l){const u=new Ue;p.makeTypeInfoBits(i,s,u);for(let f=0,g=u.getSize();f<g;++f){const y=u.get(u.getSize()-1-f),x=p.TYPE_INFO_COORDINATES[f],T=x[0],b=x[1];if(l.setBoolean(T,b,y),f<8){const O=l.getWidth()-f-1;l.setBoolean(O,8,y)}else{const L=l.getHeight()-7+(f-8);l.setBoolean(8,L,y)}}}static maybeEmbedVersionInfo(i,s){if(i.getVersionNumber()<7)return;const l=new Ue;p.makeVersionInfoBits(i,l);let u=17;for(let f=0;f<6;++f)for(let g=0;g<3;++g){const y=l.get(u);u--,s.setBoolean(f,s.getHeight()-11+g,y),s.setBoolean(s.getHeight()-11+g,f,y)}}static embedDataBits(i,s,l){let u=0,f=-1,g=l.getWidth()-1,y=l.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);y>=0&&y<l.getHeight();){for(let x=0;x<2;++x){const T=g-x;if(!p.isEmpty(l.get(T,y)))continue;let b;u<i.getSize()?(b=i.get(u),++u):b=!1,s!==255&&Ct.getDataMaskBit(s,T,y)&&(b=!b),l.setBoolean(T,y,b)}y+=f}f=-f,y+=f,g-=2}if(u!==i.getSize())throw new It("Not all bits consumed: "+u+"/"+i.getSize())}static findMSBSet(i){return 32-pe.numberOfLeadingZeros(i)}static calculateBCHCode(i,s){if(s===0)throw new M("0 polynomial");const l=p.findMSBSet(s);for(i<<=l-1;p.findMSBSet(i)>=l;)i^=s<<p.findMSBSet(i)-l;return i}static makeTypeInfoBits(i,s,l){if(!Ur.isValidMaskPattern(s))throw new It("Invalid mask pattern");const u=i.getBits()<<3|s;l.appendBits(u,5);const f=p.calculateBCHCode(u,p.TYPE_INFO_POLY);l.appendBits(f,10);const g=new Ue;if(g.appendBits(p.TYPE_INFO_MASK_PATTERN,15),l.xor(g),l.getSize()!==15)throw new It("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(i,s){s.appendBits(i.getVersionNumber(),6);const l=p.calculateBCHCode(i.getVersionNumber(),p.VERSION_INFO_POLY);if(s.appendBits(l,12),s.getSize()!==18)throw new It("should not happen but we got: "+s.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let s=8;s<i.getWidth()-8;++s){const l=(s+1)%2;p.isEmpty(i.get(s,6))&&i.setNumber(s,6,l),p.isEmpty(i.get(6,s))&&i.setNumber(6,s,l)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new It;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,s,l){for(let u=0;u<8;++u){if(!p.isEmpty(l.get(i+u,s)))throw new It;l.setNumber(i+u,s,0)}}static embedVerticalSeparationPattern(i,s,l){for(let u=0;u<7;++u){if(!p.isEmpty(l.get(i,s+u)))throw new It;l.setNumber(i,s+u,0)}}static embedPositionAdjustmentPattern(i,s,l){for(let u=0;u<5;++u){const f=p.POSITION_ADJUSTMENT_PATTERN[u];for(let g=0;g<5;++g)l.setNumber(i+g,s+u,f[g])}}static embedPositionDetectionPattern(i,s,l){for(let u=0;u<7;++u){const f=p.POSITION_DETECTION_PATTERN[u];for(let g=0;g<7;++g)l.setNumber(i+g,s+u,f[g])}}static embedPositionDetectionPatternsAndSeparators(i){const s=p.POSITION_DETECTION_PATTERN[0].length;p.embedPositionDetectionPattern(0,0,i),p.embedPositionDetectionPattern(i.getWidth()-s,0,i),p.embedPositionDetectionPattern(0,i.getWidth()-s,i);const l=8;p.embedHorizontalSeparationPattern(0,l-1,i),p.embedHorizontalSeparationPattern(i.getWidth()-l,l-1,i),p.embedHorizontalSeparationPattern(0,i.getWidth()-l,i);const u=7;p.embedVerticalSeparationPattern(u,0,i),p.embedVerticalSeparationPattern(i.getHeight()-u-1,0,i),p.embedVerticalSeparationPattern(u,i.getHeight()-u,i)}static maybeEmbedPositionAdjustmentPatterns(i,s){if(i.getVersionNumber()<2)return;const l=i.getVersionNumber()-1,u=p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let f=0,g=u.length;f!==g;f++){const y=u[f];if(y>=0)for(let x=0;x!==g;x++){const T=u[x];T>=0&&p.isEmpty(s.get(T,y))&&p.embedPositionAdjustmentPattern(T-2,y-2,s)}}}}p.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),p.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),p.VERSION_INFO_POLY=7973,p.TYPE_INFO_POLY=1335,p.TYPE_INFO_MASK_PATTERN=21522;class S{constructor(i,s){this.dataBytes=i,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class R{constructor(){}static calculateMaskPenalty(i){return Ct.applyMaskPenaltyRule1(i)+Ct.applyMaskPenaltyRule2(i)+Ct.applyMaskPenaltyRule3(i)+Ct.applyMaskPenaltyRule4(i)}static encode(i,s,l=null){let u=R.DEFAULT_BYTE_MODE_ENCODING;const f=l!==null&&l.get(bn.CHARACTER_SET)!==void 0;f&&(u=l.get(bn.CHARACTER_SET).toString());const g=this.chooseMode(i,u),y=new Ue;if(g===Qe.BYTE&&(f||R.DEFAULT_BYTE_MODE_ENCODING!==u)){const Oe=B.getCharacterSetECIByName(u);Oe!==void 0&&this.appendECI(Oe,y)}this.appendModeInfo(g,y);const x=new Ue;this.appendBytes(i,g,x,u);let T;if(l!==null&&l.get(bn.QR_VERSION)!==void 0){const Oe=Number.parseInt(l.get(bn.QR_VERSION).toString(),10);T=Xe.getVersionForNumber(Oe);const be=this.calculateBitsNeeded(g,y,x,T);if(!this.willFit(be,T,s))throw new It("Data too big for requested version")}else T=this.recommendVersion(s,g,y,x);const b=new Ue;b.appendBitArray(y);const O=g===Qe.BYTE?x.getSizeInBytes():i.length;this.appendLengthInfo(O,T,g,b),b.appendBitArray(x);const L=T.getECBlocksForLevel(s),z=T.getTotalCodewords()-L.getTotalECCodewords();this.terminateBits(z,b);const K=this.interleaveWithECBytes(b,T.getTotalCodewords(),z,L.getNumBlocks()),Q=new Ur;Q.setECLevel(s),Q.setMode(g),Q.setVersion(T);const se=T.getDimensionForVersion(),fe=new Us(se,se),Me=this.chooseMaskPattern(K,s,T,fe);return Q.setMaskPattern(Me),p.buildMatrix(K,s,T,Me,fe),Q.setMatrix(fe),Q}static recommendVersion(i,s,l,u){const f=this.calculateBitsNeeded(s,l,u,Xe.getVersionForNumber(1)),g=this.chooseVersion(f,i),y=this.calculateBitsNeeded(s,l,u,g);return this.chooseVersion(y,i)}static calculateBitsNeeded(i,s,l,u){return s.getSize()+i.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(i){return i<R.ALPHANUMERIC_TABLE.length?R.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,s=null){if(B.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(i))return Qe.KANJI;let l=!1,u=!1;for(let f=0,g=i.length;f<g;++f){const y=i.charAt(f);if(R.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)u=!0;else return Qe.BYTE}return u?Qe.ALPHANUMERIC:l?Qe.NUMERIC:Qe.BYTE}static isOnlyDoubleByteKanji(i){let s;try{s=W.encode(i,B.SJIS)}catch{return!1}const l=s.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const f=s[u]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(i,s,l,u){let f=Number.MAX_SAFE_INTEGER,g=-1;for(let y=0;y<Ur.NUM_MASK_PATTERNS;y++){p.buildMatrix(i,s,l,y,u);let x=this.calculateMaskPenalty(u);x<f&&(f=x,g=y)}return g}static chooseVersion(i,s){for(let l=1;l<=40;l++){const u=Xe.getVersionForNumber(l);if(R.willFit(i,u,s))return u}throw new It("Data too big")}static willFit(i,s,l){const u=s.getTotalCodewords(),g=s.getECBlocksForLevel(l).getTotalECCodewords(),y=u-g,x=(i+7)/8;return y>=x}static terminateBits(i,s){const l=i*8;if(s.getSize()>l)throw new It("data bits cannot fit in the QR Code"+s.getSize()+" > "+l);for(let g=0;g<4&&s.getSize()<l;++g)s.appendBit(!1);const u=s.getSize()&7;if(u>0)for(let g=u;g<8;g++)s.appendBit(!1);const f=i-s.getSizeInBytes();for(let g=0;g<f;++g)s.appendBits((g&1)===0?236:17,8);if(s.getSize()!==l)throw new It("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,s,l,u,f,g){if(u>=l)throw new It("Block ID too large");const y=i%l,x=l-y,T=Math.floor(i/l),b=T+1,O=Math.floor(s/l),L=O+1,z=T-O,K=b-L;if(z!==K)throw new It("EC bytes mismatch");if(l!==x+y)throw new It("RS blocks mismatch");if(i!==(O+z)*x+(L+K)*y)throw new It("Total bytes mismatch");u<x?(f[0]=O,g[0]=z):(f[0]=L,g[0]=K)}static interleaveWithECBytes(i,s,l,u){if(i.getSizeInBytes()!==l)throw new It("Number of bits and data bytes does not match");let f=0,g=0,y=0;const x=new Array;for(let b=0;b<u;++b){const O=new Int32Array(1),L=new Int32Array(1);R.getNumDataBytesAndNumECBytesForBlockID(s,l,u,b,O,L);const z=O[0],K=new Uint8Array(z);i.toBytes(8*f,K,0,z);const Q=R.generateECBytes(K,L[0]);x.push(new S(K,Q)),g=Math.max(g,z),y=Math.max(y,Q.length),f+=O[0]}if(l!==f)throw new It("Data bytes does not match offset");const T=new Ue;for(let b=0;b<g;++b)for(const O of x){const L=O.getDataBytes();b<L.length&&T.appendBits(L[b],8)}for(let b=0;b<y;++b)for(const O of x){const L=O.getErrorCorrectionBytes();b<L.length&&T.appendBits(L[b],8)}if(s!==T.getSizeInBytes())throw new It("Interleaving error: "+s+" and "+T.getSizeInBytes()+" differ.");return T}static generateECBytes(i,s){const l=i.length,u=new Int32Array(l+s);for(let g=0;g<l;g++)u[g]=i[g]&255;new Vr(Tt.QR_CODE_FIELD_256).encode(u,s);const f=new Uint8Array(s);for(let g=0;g<s;g++)f[g]=u[l+g];return f}static appendModeInfo(i,s){s.appendBits(i.getBits(),4)}static appendLengthInfo(i,s,l,u){const f=l.getCharacterCountBits(s);if(i>=1<<f)throw new It(i+" is bigger than "+((1<<f)-1));u.appendBits(i,f)}static appendBytes(i,s,l,u){switch(s){case Qe.NUMERIC:R.appendNumericBytes(i,l);break;case Qe.ALPHANUMERIC:R.appendAlphanumericBytes(i,l);break;case Qe.BYTE:R.append8BitBytes(i,l,u);break;case Qe.KANJI:R.appendKanjiBytes(i,l);break;default:throw new It("Invalid mode: "+s)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const s=R.getDigit(i);return s>=0&&s<=9}static appendNumericBytes(i,s){const l=i.length;let u=0;for(;u<l;){const f=R.getDigit(i.charAt(u));if(u+2<l){const g=R.getDigit(i.charAt(u+1)),y=R.getDigit(i.charAt(u+2));s.appendBits(f*100+g*10+y,10),u+=3}else if(u+1<l){const g=R.getDigit(i.charAt(u+1));s.appendBits(f*10+g,7),u+=2}else s.appendBits(f,4),u++}}static appendAlphanumericBytes(i,s){const l=i.length;let u=0;for(;u<l;){const f=R.getAlphanumericCode(i.charCodeAt(u));if(f===-1)throw new It;if(u+1<l){const g=R.getAlphanumericCode(i.charCodeAt(u+1));if(g===-1)throw new It;s.appendBits(f*45+g,11),u+=2}else s.appendBits(f,6),u++}}static append8BitBytes(i,s,l){let u;try{u=W.encode(i,l)}catch(f){throw new It(f)}for(let f=0,g=u.length;f!==g;f++){const y=u[f];s.appendBits(y,8)}}static appendKanjiBytes(i,s){let l;try{l=W.encode(i,B.SJIS)}catch(f){throw new It(f)}const u=l.length;for(let f=0;f<u;f+=2){const g=l[f]&255,y=l[f+1]&255,x=g<<8&4294967295|y;let T=-1;if(x>=33088&&x<=40956?T=x-33088:x>=57408&&x<=60351&&(T=x-49472),T===-1)throw new It("Invalid byte sequence");const b=(T>>8)*192+(T&255);s.appendBits(b,13)}}static appendECI(i,s){s.appendBits(Qe.ECI.getBits(),4),s.appendBits(i.getValue(),8)}}R.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),R.DEFAULT_BYTE_MODE_ENCODING=B.UTF8.getName();class U{write(i,s,l,u=null){if(i.length===0)throw new M("Found empty contents");if(s<0||l<0)throw new M("Requested dimensions are too small: "+s+"x"+l);let f=pt.L,g=U.QUIET_ZONE_SIZE;u!==null&&(u.get(bn.ERROR_CORRECTION)!==void 0&&(f=pt.fromString(u.get(bn.ERROR_CORRECTION).toString())),u.get(bn.MARGIN)!==void 0&&(g=Number.parseInt(u.get(bn.MARGIN).toString(),10)));const y=R.encode(i,f,u);return this.renderResult(y,s,l,g)}writeToDom(i,s,l,u,f=null){typeof i=="string"&&(i=document.querySelector(i));const g=this.write(s,l,u,f);i&&i.appendChild(g)}renderResult(i,s,l,u){const f=i.getMatrix();if(f===null)throw new Oi;const g=f.getWidth(),y=f.getHeight(),x=g+u*2,T=y+u*2,b=Math.max(s,x),O=Math.max(l,T),L=Math.min(Math.floor(b/x),Math.floor(O/T)),z=Math.floor((b-g*L)/2),K=Math.floor((O-y*L)/2),Q=this.createSVGElement(b,O);for(let se=0,fe=K;se<y;se++,fe+=L)for(let Me=0,Oe=z;Me<g;Me++,Oe+=L)if(f.get(Me,se)===1){const be=this.createSvgRectElement(Oe,fe,L,L);Q.appendChild(be)}return Q}createSVGElement(i,s){const l=document.createElementNS(U.SVG_NS,"svg");return l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",s.toString()),l}createSvgRectElement(i,s,l,u){const f=document.createElementNS(U.SVG_NS,"rect");return f.setAttributeNS(null,"x",i.toString()),f.setAttributeNS(null,"y",s.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",u.toString()),f.setAttributeNS(null,"fill","#000000"),f}}U.QUIET_ZONE_SIZE=4,U.SVG_NS="http://www.w3.org/2000/svg";class re{encode(i,s,l,u,f){if(i.length===0)throw new M("Found empty contents");if(s!==ke.QR_CODE)throw new M("Can only encode QR_CODE, but got "+s);if(l<0||u<0)throw new M(`Requested dimensions are too small: ${l}x${u}`);let g=pt.L,y=re.QUIET_ZONE_SIZE;f!==null&&(f.get(bn.ERROR_CORRECTION)!==void 0&&(g=pt.fromString(f.get(bn.ERROR_CORRECTION).toString())),f.get(bn.MARGIN)!==void 0&&(y=Number.parseInt(f.get(bn.MARGIN).toString(),10)));const x=R.encode(i,g,f);return re.renderResult(x,l,u,y)}static renderResult(i,s,l,u){const f=i.getMatrix();if(f===null)throw new Oi;const g=f.getWidth(),y=f.getHeight(),x=g+u*2,T=y+u*2,b=Math.max(s,x),O=Math.max(l,T),L=Math.min(Math.floor(b/x),Math.floor(O/T)),z=Math.floor((b-g*L)/2),K=Math.floor((O-y*L)/2),Q=new Ae(b,O);for(let se=0,fe=K;se<y;se++,fe+=L)for(let Me=0,Oe=z;Me<g;Me++,Oe+=L)f.get(Me,se)===1&&Q.setRegion(Oe,fe,L,L);return Q}}re.QUIET_ZONE_SIZE=4;class de{encode(i,s,l,u,f){let g;if(s===ke.QR_CODE)g=new re;else throw new M("No encoder available for format "+s);return g.encode(i,s,l,u,f)}}class Pe extends Re{constructor(i,s,l,u,f,g,y,x){if(super(g,y),this.yuvData=i,this.dataWidth=s,this.dataHeight=l,this.left=u,this.top=f,u+g>s||f+y>l)throw new M("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(g,y)}getRow(i,s){if(i<0||i>=this.getHeight())throw new M("Requested row is outside the image: "+i);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(i+this.top)*this.dataWidth+this.left;return me.arraycopy(this.yuvData,u,s,0,l),s}getMatrix(){const i=this.getWidth(),s=this.getHeight();if(i===this.dataWidth&&s===this.dataHeight)return this.yuvData;const l=i*s,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return me.arraycopy(this.yuvData,f,u,0,l),u;for(let g=0;g<s;g++){const y=g*i;me.arraycopy(this.yuvData,f,u,y,i),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(i,s,l,u){return new Pe(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+s,l,u,!1)}renderThumbnail(){const i=this.getWidth()/Pe.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/Pe.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(i*s),u=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let g=0;g<s;g++){const y=g*i;for(let x=0;x<i;x++){const T=u[f+x*Pe.THUMBNAIL_SCALE_FACTOR]&255;l[y+x]=4278190080|T*65793}f+=this.dataWidth*Pe.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Pe.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Pe.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,s){const l=this.yuvData;for(let u=0,f=this.top*this.dataWidth+this.left;u<s;u++,f+=this.dataWidth){const g=f+i/2;for(let y=f,x=f+i-1;y<g;y++,x--){const T=l[y];l[y]=l[x],l[x]=T}}}invert(){return new Fe(this)}}Pe.THUMBNAIL_SCALE_FACTOR=2;class ct extends Re{constructor(i,s,l,u,f,g,y){if(super(s,l),this.dataWidth=u,this.dataHeight=f,this.left=g,this.top=y,i.BYTES_PER_ELEMENT===4){const x=s*l,T=new Uint8ClampedArray(x);for(let b=0;b<x;b++){const O=i[b],L=O>>16&255,z=O>>7&510,K=O&255;T[b]=(L+z+K)/4&255}this.luminances=T}else this.luminances=i;if(u===void 0&&(this.dataWidth=s),f===void 0&&(this.dataHeight=l),g===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+l>this.dataHeight)throw new M("Crop rectangle does not fit within image data.")}getRow(i,s){if(i<0||i>=this.getHeight())throw new M("Requested row is outside the image: "+i);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(i+this.top)*this.dataWidth+this.left;return me.arraycopy(this.luminances,u,s,0,l),s}getMatrix(){const i=this.getWidth(),s=this.getHeight();if(i===this.dataWidth&&s===this.dataHeight)return this.luminances;const l=i*s,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return me.arraycopy(this.luminances,f,u,0,l),u;for(let g=0;g<s;g++){const y=g*i;me.arraycopy(this.luminances,f,u,y,i),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(i,s,l,u){return new ct(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+i,this.top+s)}invert(){return new Fe(this)}}class In extends B{static forName(i){return this.getCharacterSetECIByName(i)}}class Vt{}Vt.ISO_8859_1=B.ISO8859_1;class hn{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class Xi{static singletonList(i){return[i]}static min(i,s){return i.sort(s)[0]}}class Fr{constructor(i){this.previous=i}getPrevious(){return this.previous}}class ci extends Fr{constructor(i,s,l){super(i),this.value=s,this.bitCount=l}appendTo(i,s){i.appendBits(this.value,this.bitCount)}add(i,s){return new ci(this,i,s)}addBinaryShift(i,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ci(this,i,s)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+pe.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Yi extends ci{constructor(i,s,l){super(i,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=l}appendTo(i,s){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):l===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(s[this.binaryShiftStart+l],8)}addBinaryShift(i,s){return new Yi(this,i,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Fs(N,i,s){return new Yi(N,i,s)}function jr(N,i,s){return new ci(N,i,s)}const va=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ps=0,sl=1,ir=2,nc=3,wr=4,vo=new ci(null,0,0),js=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Hf(N){for(let i of N)Le.fill(i,-1);return N[ps][wr]=0,N[sl][wr]=0,N[sl][ps]=28,N[nc][wr]=0,N[ir][wr]=0,N[ir][ps]=15,N}const Co=Hf(Le.createInt32Array(6,6));class Tr{constructor(i,s,l,u){this.token=i,this.mode=s,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,s){let l=this.bitCount,u=this.token;if(i!==this.mode){let g=js[this.mode][i];u=jr(u,g&65535,g>>16),l+=g>>16}let f=i===ir?4:5;return u=jr(u,s,f),new Tr(u,i,0,l+f)}shiftAndAppend(i,s){let l=this.token,u=this.mode===ir?4:5;return l=jr(l,Co[this.mode][i],u),l=jr(l,s,5),new Tr(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(i){let s=this.token,l=this.mode,u=this.bitCount;if(this.mode===wr||this.mode===ir){let y=js[l][ps];s=jr(s,y&65535,y>>16),u+=y>>16,l=ps}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new Tr(s,l,this.binaryShiftByteCount+1,u+f);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(i+1)),g}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Fs(s,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new Tr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let s=this.bitCount+(js[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?s+=Tr.calculateBinaryShiftCost(i)-Tr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(s+=10),s<=i.bitCount}toBitArray(i){let s=[];for(let u=this.endBinaryShift(i.length).token;u!==null;u=u.getPrevious())s.unshift(u);let l=new Ue;for(const u of s)u.appendTo(l,i);return l}toString(){return X.format("%s bits=%d bytes=%d",va[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}Tr.INITIAL_STATE=new Tr(vo,ps,0,0);function Iu(N){const i=X.getCharCode(" "),s=X.getCharCode("."),l=X.getCharCode(",");N[ps][i]=1;const u=X.getCharCode("Z"),f=X.getCharCode("A");for(let L=f;L<=u;L++)N[ps][L]=L-f+2;N[sl][i]=1;const g=X.getCharCode("z"),y=X.getCharCode("a");for(let L=y;L<=g;L++)N[sl][L]=L-y+2;N[ir][i]=1;const x=X.getCharCode("9"),T=X.getCharCode("0");for(let L=T;L<=x;L++)N[ir][L]=L-T+2;N[ir][l]=12,N[ir][s]=13;const b=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let L=0;L<b.length;L++)N[nc][X.getCharCode(b[L])]=L;const O=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let L=0;L<O.length;L++)X.getCharCode(O[L])>0&&(N[wr][X.getCharCode(O[L])]=L);return N}const So=Iu(Le.createInt32Array(5,256));class zs{constructor(i){this.text=i}encode(){const i=X.getCharCode(" "),s=X.getCharCode(`
`);let l=Xi.singletonList(Tr.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let g,y=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case X.getCharCode("\r"):g=y===s?2:0;break;case X.getCharCode("."):g=y===i?3:0;break;case X.getCharCode(","):g=y===i?4:0;break;case X.getCharCode(":"):g=y===i?5:0;break;default:g=0}g>0?(l=zs.updateStateListForPair(l,f,g),f++):l=this.updateStateListForChar(l,f)}return Xi.min(l,(f,g)=>f.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,s){const l=[];for(let u of i)this.updateStateForChar(u,s,l);return zs.simplifyStates(l)}updateStateForChar(i,s,l){let u=this.text[s]&255,f=So[i.getMode()][u]>0,g=null;for(let y=0;y<=wr;y++){let x=So[y][u];if(x>0){if(g==null&&(g=i.endBinaryShift(s)),!f||y===i.getMode()||y===ir){const T=g.latchAndAppend(y,x);l.push(T)}if(!f&&Co[i.getMode()][y]>=0){const T=g.shiftAndAppend(y,x);l.push(T)}}}if(i.getBinaryShiftByteCount()>0||So[i.getMode()][u]===0){let y=i.addBinaryShiftChar(s);l.push(y)}}static updateStateListForPair(i,s,l){const u=[];for(let f of i)this.updateStateForPair(f,s,l,u);return this.simplifyStates(u)}static updateStateForPair(i,s,l,u){let f=i.endBinaryShift(s);if(u.push(f.latchAndAppend(wr,l)),i.getMode()!==wr&&u.push(f.shiftAndAppend(wr,l)),l===3||l===4){let g=f.latchAndAppend(ir,16-l).latchAndAppend(ir,1);u.push(g)}if(i.getBinaryShiftByteCount()>0){let g=i.addBinaryShiftChar(s).addBinaryShiftChar(s+1);u.push(g)}}static simplifyStates(i){let s=[];for(const l of i){let u=!0;for(const f of s){if(f.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(f)&&(s=s.filter(g=>g!==f))}u&&s.push(l)}return s}}class Dt{constructor(){}static encodeBytes(i){return Dt.encode(i,Dt.DEFAULT_EC_PERCENT,Dt.DEFAULT_AZTEC_LAYERS)}static encode(i,s,l){let u=new zs(i).encode(),f=pe.truncDivision(u.getSize()*s,100)+11,g=u.getSize()+f,y,x,T,b,O;if(l!==Dt.DEFAULT_AZTEC_LAYERS){if(y=l<0,x=Math.abs(l),x>(y?Dt.MAX_NB_BITS_COMPACT:Dt.MAX_NB_BITS))throw new M(X.format("Illegal value %s for layers",l));T=Dt.totalBitsInLayer(x,y),b=Dt.WORD_SIZE[x];let be=T-T%b;if(O=Dt.stuffBits(u,b),O.getSize()+f>be)throw new M("Data to large for user specified layer");if(y&&O.getSize()>b*64)throw new M("Data to large for user specified layer")}else{b=0,O=null;for(let be=0;;be++){if(be>Dt.MAX_NB_BITS)throw new M("Data too large for an Aztec code");if(y=be<=3,x=y?be+1:be,T=Dt.totalBitsInLayer(x,y),g>T)continue;(O==null||b!==Dt.WORD_SIZE[x])&&(b=Dt.WORD_SIZE[x],O=Dt.stuffBits(u,b));let Et=T-T%b;if(!(y&&O.getSize()>b*64)&&O.getSize()+f<=Et)break}}let L=Dt.generateCheckWords(O,T,b),z=O.getSize()/b,K=Dt.generateModeMessage(y,x,z),Q=(y?11:14)+x*4,se=new Int32Array(Q),fe;if(y){fe=Q;for(let be=0;be<se.length;be++)se[be]=be}else{fe=Q+1+2*pe.truncDivision(pe.truncDivision(Q,2)-1,15);let be=pe.truncDivision(Q,2),Et=pe.truncDivision(fe,2);for(let ut=0;ut<be;ut++){let Bn=ut+pe.truncDivision(ut,15);se[be-ut-1]=Et-Bn-1,se[be+ut]=Et+Bn+1}}let Me=new Ae(fe);for(let be=0,Et=0;be<x;be++){let ut=(x-be)*4+(y?9:12);for(let Bn=0;Bn<ut;Bn++){let rr=Bn*2;for(let Ti=0;Ti<2;Ti++)L.get(Et+rr+Ti)&&Me.set(se[be*2+Ti],se[be*2+Bn]),L.get(Et+ut*2+rr+Ti)&&Me.set(se[be*2+Bn],se[Q-1-be*2-Ti]),L.get(Et+ut*4+rr+Ti)&&Me.set(se[Q-1-be*2-Ti],se[Q-1-be*2-Bn]),L.get(Et+ut*6+rr+Ti)&&Me.set(se[Q-1-be*2-Bn],se[be*2+Ti])}Et+=ut*8}if(Dt.drawModeMessage(Me,y,fe,K),y)Dt.drawBullsEye(Me,pe.truncDivision(fe,2),5);else{Dt.drawBullsEye(Me,pe.truncDivision(fe,2),7);for(let be=0,Et=0;be<pe.truncDivision(Q,2)-1;be+=15,Et+=16)for(let ut=pe.truncDivision(fe,2)&1;ut<fe;ut+=2)Me.set(pe.truncDivision(fe,2)-Et,ut),Me.set(pe.truncDivision(fe,2)+Et,ut),Me.set(ut,pe.truncDivision(fe,2)-Et),Me.set(ut,pe.truncDivision(fe,2)+Et)}let Oe=new hn;return Oe.setCompact(y),Oe.setSize(fe),Oe.setLayers(x),Oe.setCodeWords(z),Oe.setMatrix(Me),Oe}static drawBullsEye(i,s,l){for(let u=0;u<l;u+=2)for(let f=s-u;f<=s+u;f++)i.set(f,s-u),i.set(f,s+u),i.set(s-u,f),i.set(s+u,f);i.set(s-l,s-l),i.set(s-l+1,s-l),i.set(s-l,s-l+1),i.set(s+l,s-l),i.set(s+l,s-l+1),i.set(s+l,s+l-1)}static generateModeMessage(i,s,l){let u=new Ue;return i?(u.appendBits(s-1,2),u.appendBits(l-1,6),u=Dt.generateCheckWords(u,28,4)):(u.appendBits(s-1,5),u.appendBits(l-1,11),u=Dt.generateCheckWords(u,40,4)),u}static drawModeMessage(i,s,l,u){let f=pe.truncDivision(l,2);if(s)for(let g=0;g<7;g++){let y=f-3+g;u.get(g)&&i.set(y,f-5),u.get(g+7)&&i.set(f+5,y),u.get(20-g)&&i.set(y,f+5),u.get(27-g)&&i.set(f-5,y)}else for(let g=0;g<10;g++){let y=f-5+g+pe.truncDivision(g,5);u.get(g)&&i.set(y,f-7),u.get(g+10)&&i.set(f+7,y),u.get(29-g)&&i.set(y,f+7),u.get(39-g)&&i.set(f-7,y)}}static generateCheckWords(i,s,l){let u=i.getSize()/l,f=new Vr(Dt.getGF(l)),g=pe.truncDivision(s,l),y=Dt.bitsToWords(i,l,g);f.encode(y,g-u);let x=s%l,T=new Ue;T.appendBits(0,x);for(const b of Array.from(y))T.appendBits(b,l);return T}static bitsToWords(i,s,l){let u=new Int32Array(l),f,g;for(f=0,g=i.getSize()/s;f<g;f++){let y=0;for(let x=0;x<s;x++)y|=i.get(f*s+x)?1<<s-x-1:0;u[f]=y}return u}static getGF(i){switch(i){case 4:return Tt.AZTEC_PARAM;case 6:return Tt.AZTEC_DATA_6;case 8:return Tt.AZTEC_DATA_8;case 10:return Tt.AZTEC_DATA_10;case 12:return Tt.AZTEC_DATA_12;default:throw new M("Unsupported word size "+i)}}static stuffBits(i,s){let l=new Ue,u=i.getSize(),f=(1<<s)-2;for(let g=0;g<u;g+=s){let y=0;for(let x=0;x<s;x++)(g+x>=u||i.get(g+x))&&(y|=1<<s-1-x);(y&f)===f?(l.appendBits(y&f,s),g--):(y&f)===0?(l.appendBits(y|1,s),g--):l.appendBits(y,s)}return l}static totalBitsInLayer(i,s){return((s?88:112)+16*i)*i}}Dt.DEFAULT_EC_PERCENT=33,Dt.DEFAULT_AZTEC_LAYERS=0,Dt.MAX_NB_BITS=32,Dt.MAX_NB_BITS_COMPACT=4,Dt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class bo{encode(i,s,l,u){return this.encodeWithHints(i,s,l,u,null)}encodeWithHints(i,s,l,u,f){let g=Vt.ISO_8859_1,y=Dt.DEFAULT_EC_PERCENT,x=Dt.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(bn.CHARACTER_SET)&&(g=In.forName(f.get(bn.CHARACTER_SET).toString())),f.has(bn.ERROR_CORRECTION)&&(y=pe.parseInt(f.get(bn.ERROR_CORRECTION).toString())),f.has(bn.AZTEC_LAYERS)&&(x=pe.parseInt(f.get(bn.AZTEC_LAYERS).toString()))),bo.encodeLayers(i,s,l,u,g,y,x)}static encodeLayers(i,s,l,u,f,g,y){if(s!==ke.AZTEC)throw new M("Can only encode AZTEC, but got "+s);let x=Dt.encode(X.getBytes(i,f),g,y);return bo.renderResult(x,l,u)}static renderResult(i,s,l){let u=i.getMatrix();if(u==null)throw new Oi;let f=u.getWidth(),g=u.getHeight(),y=Math.max(s,f),x=Math.max(l,g),T=Math.min(y/f,x/g),b=(y-f*T)/2,O=(x-g*T)/2,L=new Ae(y,x);for(let z=0,K=O;z<g;z++,K+=T)for(let Q=0,se=b;Q<f;Q++,se+=T)u.get(Q,z)&&L.setRegion(se,K,T,T);return L}}n.AbstractExpandedDecoder=Tn,n.ArgumentException=D,n.ArithmeticException=Jr,n.AztecCode=hn,n.AztecCodeReader=Ns,n.AztecCodeWriter=bo,n.AztecDecoder=Gt,n.AztecDetector=yo,n.AztecDetectorResult=po,n.AztecEncoder=Dt,n.AztecHighLevelEncoder=zs,n.AztecPoint=ni,n.BarcodeFormat=ke,n.Binarizer=Ee,n.BinaryBitmap=G,n.BitArray=Ue,n.BitMatrix=Ae,n.BitSource=Cn,n.BrowserAztecCodeReader=tl,n.BrowserBarcodeReader=xo,n.BrowserCodeReader=Ce,n.BrowserDatamatrixCodeReader=Pr,n.BrowserMultiFormatReader=Br,n.BrowserPDF417Reader=il,n.BrowserQRCodeReader=rl,n.BrowserQRCodeSvgWriter=U,n.CharacterSetECI=B,n.ChecksumException=te,n.Code128Reader=Ne,n.Code39Reader=Xt,n.DataMatrixDecodedBitStreamParser=wi,n.DataMatrixReader=Mi,n.DecodeHintType=Ve,n.DecoderResult=Zt,n.DefaultGridSampler=pa,n.DetectorResult=ma,n.EAN13Reader=sn,n.EncodeHintType=bn,n.Exception=w,n.FormatException=V,n.GenericGF=Tt,n.GenericGFPoly=zn,n.GlobalHistogramBinarizer=ie,n.GridSampler=$r,n.GridSamplerInstance=gi,n.HTMLCanvasElementLuminanceSource=Ie,n.HybridBinarizer=ae,n.ITFReader=at,n.IllegalArgumentException=M,n.IllegalStateException=Oi,n.InvertedLuminanceSource=Fe,n.LuminanceSource=Re,n.MathUtils=tt,n.MultiFormatOneDReader=xi,n.MultiFormatReader=To,n.MultiFormatWriter=de,n.NotFoundException=ee,n.OneDReader=qt,n.PDF417DecodedBitStreamParser=he,n.PDF417DecoderErrorCorrection=_r,n.PDF417Reader=Sn,n.PDF417ResultMetadata=ns,n.PerspectiveTransform=di,n.PlanarYUVLuminanceSource=Pe,n.QRCodeByteMatrix=Us,n.QRCodeDataMask=Gn,n.QRCodeDecodedBitStreamParser=Jt,n.QRCodeDecoderErrorCorrectionLevel=pt,n.QRCodeDecoderFormatInformation=Dn,n.QRCodeEncoder=R,n.QRCodeEncoderQRCode=Ur,n.QRCodeMaskUtil=Ct,n.QRCodeMatrixUtil=p,n.QRCodeMode=Qe,n.QRCodeReader=Bi,n.QRCodeVersion=Xe,n.QRCodeWriter=re,n.RGBLuminanceSource=ct,n.RSS14Reader=Ht,n.RSSExpandedReader=ve,n.ReaderException=Vs,n.ReedSolomonDecoder=dr,n.ReedSolomonEncoder=Vr,n.ReedSolomonException=fi,n.Result=Be,n.ResultMetadataType=wt,n.ResultPoint=He,n.StringUtils=X,n.UnsupportedOperationException=Z,n.VideoInputDevice=q,n.WhiteRectangleDetector=pn,n.WriterException=It,n.ZXingArrays=Le,n.ZXingCharset=In,n.ZXingInteger=pe,n.ZXingStandardCharsets=Vt,n.ZXingStringBuilder=P,n.ZXingStringEncoding=W,n.ZXingSystem=me,n.createAbstractExpandedDecoder=Di,Object.defineProperty(n,"__esModule",{value:!0})}))})(Xc,Xc.exports)),Xc.exports}var xn=KI();const QI=yw(xn),ZI=pw({__proto__:null,default:QI},[xn]);var y_=(function(){function a(e,n,o){if(this.formatMap=new Map([[qe.QR_CODE,xn.BarcodeFormat.QR_CODE],[qe.AZTEC,xn.BarcodeFormat.AZTEC],[qe.CODABAR,xn.BarcodeFormat.CODABAR],[qe.CODE_39,xn.BarcodeFormat.CODE_39],[qe.CODE_93,xn.BarcodeFormat.CODE_93],[qe.CODE_128,xn.BarcodeFormat.CODE_128],[qe.DATA_MATRIX,xn.BarcodeFormat.DATA_MATRIX],[qe.MAXICODE,xn.BarcodeFormat.MAXICODE],[qe.ITF,xn.BarcodeFormat.ITF],[qe.EAN_13,xn.BarcodeFormat.EAN_13],[qe.EAN_8,xn.BarcodeFormat.EAN_8],[qe.PDF_417,xn.BarcodeFormat.PDF_417],[qe.RSS_14,xn.BarcodeFormat.RSS_14],[qe.RSS_EXPANDED,xn.BarcodeFormat.RSS_EXPANDED],[qe.UPC_A,xn.BarcodeFormat.UPC_A],[qe.UPC_E,xn.BarcodeFormat.UPC_E],[qe.UPC_EAN_EXTENSION,xn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ZI)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var h=this.createZXingFormats(e),m=new Map;m.set(xn.DecodeHintType.POSSIBLE_FORMATS,h),m.set(xn.DecodeHintType.TRY_HARDER,!1),this.hints=m}return a.prototype.decodeAsync=function(e){var n=this;return new Promise(function(o,h){try{o(n.decode(e))}catch(m){h(m)}})},a.prototype.decode=function(e){var n=new xn.MultiFormatReader(this.verbose,this.hints),o=new xn.HTMLCanvasElementLuminanceSource(e),h=new xn.BinaryBitmap(new xn.HybridBinarizer(o)),m=n.decode(h);return{text:m.text,format:Qx.create(this.toHtml5QrcodeSupportedFormats(m.format)),debugData:this.createDebugData()}},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,h){e.set(n,o)}),e},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createZXingFormats=function(e){for(var n=[],o=0,h=e;o<h.length;o++){var m=h[o];this.formatMap.has(m)?n.push(this.formatMap.get(m)):this.logger.logError("".concat(m," is not supported by")+"ZXingHtml5QrcodeShim")}return n},a.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},a})(),JI=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(E){E(m)})}return new(n||(n=Promise))(function(m,E){function v(D){try{w(o.next(D))}catch(M){E(M)}}function C(D){try{w(o.throw(D))}catch(M){E(M)}}function w(D){D.done?m(D.value):h(D.value).then(v,C)}w((o=o.apply(a,e||[])).next())})},$I=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,E;return E={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function v(w){return function(D){return C([w,D])}}function C(w){if(o)throw new TypeError("Generator is already executing.");for(;E&&(E=0,w[0]&&(n=0)),n;)try{if(o=1,h&&(m=w[0]&2?h.return:w[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,w[1])).done)return m;switch(h=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,h=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){n.label=w[1];break}if(w[0]===6&&n.label<m[1]){n.label=m[1],m=w;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(w);break}m[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(a,n)}catch(D){w=[6,D],h=0}finally{o=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},__=(function(){function a(e,n,o){if(this.formatMap=new Map([[qe.QR_CODE,"qr_code"],[qe.AZTEC,"aztec"],[qe.CODABAR,"codabar"],[qe.CODE_39,"code_39"],[qe.CODE_93,"code_93"],[qe.CODE_128,"code_128"],[qe.DATA_MATRIX,"data_matrix"],[qe.ITF,"itf"],[qe.EAN_13,"ean_13"],[qe.EAN_8,"ean_8"],[qe.PDF_417,"pdf417"],[qe.UPC_A,"upc_a"],[qe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!a.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var h=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(h),!this.detector)throw"BarcodeDetector detector not supported"}return a.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},a.prototype.decodeAsync=function(e){return JI(this,void 0,void 0,function(){var n,o;return $I(this,function(h){switch(h.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=h.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:Qx.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},a.prototype.selectLargestBarcode=function(e){for(var n=null,o=0,h=0,m=e;h<m.length;h++){var E=m[h],v=E.boundingBox.width*E.boundingBox.height;v>o&&(o=v,n=E)}if(!n)throw"No largest barcode found";return n},a.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],o=0,h=e;o<h.length;o++){var m=h[o];this.formatMap.has(m)?n.push(this.formatMap.get(m)):this.logger.warn("".concat(m," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,h){e.set(n,o)}),e},a.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},a})(),E_=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(E){E(m)})}return new(n||(n=Promise))(function(m,E){function v(D){try{w(o.next(D))}catch(M){E(M)}}function C(D){try{w(o.throw(D))}catch(M){E(M)}}function w(D){D.done?m(D.value):h(D.value).then(v,C)}w((o=o.apply(a,e||[])).next())})},x_=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,E;return E={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function v(w){return function(D){return C([w,D])}}function C(w){if(o)throw new TypeError("Generator is already executing.");for(;E&&(E=0,w[0]&&(n=0)),n;)try{if(o=1,h&&(m=w[0]&2?h.return:w[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,w[1])).done)return m;switch(h=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,h=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){n.label=w[1];break}if(w[0]===6&&n.label<m[1]){n.label=m[1],m=w;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(w);break}m[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(a,n)}catch(D){w=[6,D],h=0}finally{o=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},e4=(function(){function a(e,n,o,h){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&__.isSupported()?(this.primaryDecoder=new __(e,o,h),this.secondaryDecoder=new y_(e,o,h)):this.primaryDecoder=new y_(e,o,h)}return a.prototype.decodeAsync=function(e){return E_(this,void 0,void 0,function(){var n;return x_(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},a.prototype.decodeRobustlyAsync=function(e){return E_(this,void 0,void 0,function(){var n,o;return x_(this,function(h){switch(h.label){case 0:n=performance.now(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,h.sent()];case 3:if(o=h.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},a.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},a.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},a.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,o=this.executionResults;n<o.length;n++){var h=o[n];e+=h}var m=e/this.executionResults.length;console.log("".concat(m," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},a})(),wg=(function(){var a=function(e,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(o[m]=h[m])},a(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),xf=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(E){E(m)})}return new(n||(n=Promise))(function(m,E){function v(D){try{w(o.next(D))}catch(M){E(M)}}function C(D){try{w(o.throw(D))}catch(M){E(M)}}function w(D){D.done?m(D.value):h(D.value).then(v,C)}w((o=o.apply(a,e||[])).next())})},Af=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,E;return E={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function v(w){return function(D){return C([w,D])}}function C(w){if(o)throw new TypeError("Generator is already executing.");for(;E&&(E=0,w[0]&&(n=0)),n;)try{if(o=1,h&&(m=w[0]&2?h.return:w[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,w[1])).done)return m;switch(h=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,h=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){n.label=w[1];break}if(w[0]===6&&n.label<m[1]){n.label=m[1],m=w;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(w);break}m[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(a,n)}catch(D){w=[6,D],h=0}finally{o=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Jx=(function(){function a(e,n){this.name=e,this.track=n}return a.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},a.prototype.apply=function(e){var n={};n[this.name]=e;var o={advanced:[n]};return this.track.applyConstraints(o)},a.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},a})(),t4=(function(a){wg(e,a);function e(n,o){return a.call(this,n,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var o={};o[this.name]=n;var h={advanced:[o]};return this.track.applyConstraints(h)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(Jx),n4=(function(a){wg(e,a);function e(n){return a.call(this,"zoom",n)||this}return e})(t4),i4=(function(a){wg(e,a);function e(n){return a.call(this,"torch",n)||this}return e})(Jx),r4=(function(){function a(e){this.track=e}return a.prototype.zoomFeature=function(){return new n4(this.track)},a.prototype.torchFeature=function(){return new i4(this.track)},a})(),s4=(function(){function a(e,n,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return a.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},a.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=e.surface.clientWidth,h=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,h),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},a.create=function(e,n,o,h){return xf(this,void 0,void 0,function(){var m,E;return Af(this,function(v){switch(v.label){case 0:return m=new a(e,n,h),o.aspectRatio?(E={aspectRatio:o.aspectRatio},[4,m.getFirstTrackOrFail().applyConstraints(E)]):[3,2];case 1:v.sent(),v.label=2;case 2:return m.setupSurface(),[2,m]}})})},a.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},a.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},a.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},a.prototype.resume=function(e){this.failIfClosed();var n=this,o=function(){setTimeout(e,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},a.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},a.prototype.getSurface=function(){return this.failIfClosed(),this.surface},a.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},a.prototype.applyVideoConstraints=function(e){return xf(this,void 0,void 0,function(){return Af(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},a.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,o){var h=e.mediaStream.getVideoTracks(),m=h.length,E=0;e.mediaStream.getVideoTracks().forEach(function(v){e.mediaStream.removeTrack(v),v.stop(),++E,E>=m&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},a.prototype.getCapabilities=function(){return new r4(this.getFirstTrackOrFail())},a})(),a4=(function(){function a(e){this.mediaStream=e}return a.prototype.render=function(e,n,o){return xf(this,void 0,void 0,function(){return Af(this,function(h){return[2,s4.create(e,this.mediaStream,n,o)]})})},a.create=function(e){return xf(this,void 0,void 0,function(){var n,o;return Af(this,function(h){switch(h.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=h.sent(),[2,new a(o)]}})})},a})(),A_=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(E){E(m)})}return new(n||(n=Promise))(function(m,E){function v(D){try{w(o.next(D))}catch(M){E(M)}}function C(D){try{w(o.throw(D))}catch(M){E(M)}}function w(D){D.done?m(D.value):h(D.value).then(v,C)}w((o=o.apply(a,e||[])).next())})},w_=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,E;return E={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function v(w){return function(D){return C([w,D])}}function C(w){if(o)throw new TypeError("Generator is already executing.");for(;E&&(E=0,w[0]&&(n=0)),n;)try{if(o=1,h&&(m=w[0]&2?h.return:w[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,w[1])).done)return m;switch(h=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,h=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){n.label=w[1];break}if(w[0]===6&&n.label<m[1]){n.label=m[1],m=w;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(w);break}m[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(a,n)}catch(D){w=[6,D],h=0}finally{o=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},o4=(function(){function a(){}return a.failIfNotSupported=function(){return A_(this,void 0,void 0,function(){return w_(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new a]})})},a.prototype.create=function(e){return A_(this,void 0,void 0,function(){return w_(this,function(n){return[2,a4.create(e)]})})},a})(),l4=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(E){E(m)})}return new(n||(n=Promise))(function(m,E){function v(D){try{w(o.next(D))}catch(M){E(M)}}function C(D){try{w(o.throw(D))}catch(M){E(M)}}function w(D){D.done?m(D.value):h(D.value).then(v,C)}w((o=o.apply(a,e||[])).next())})},c4=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,E;return E={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function v(w){return function(D){return C([w,D])}}function C(w){if(o)throw new TypeError("Generator is already executing.");for(;E&&(E=0,w[0]&&(n=0)),n;)try{if(o=1,h&&(m=w[0]&2?h.return:w[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,w[1])).done)return m;switch(h=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,h=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){n.label=w[1];break}if(w[0]===6&&n.label<m[1]){n.label=m[1],m=w;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(w);break}m[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(a,n)}catch(D){w=[6,D],h=0}finally{o=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},u4=(function(){function a(){}return a.retrieve=function(){if(navigator.mediaDevices)return a.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?a.getCamerasFromMediaStreamTrack():a.rejectWithError()},a.rejectWithError=function(){var e=Bl.unableToQuerySupportedDevices();return a.isHttpsOrLocalhost()||(e=Bl.insecureContextCameraQueryError()),Promise.reject(e)},a.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},a.getCamerasFromMediaDevices=function(){return l4(this,void 0,void 0,function(){var e,n,o,h,m,E,v;return c4(this,function(C){switch(C.label){case 0:return e=function(w){for(var D=w.getVideoTracks(),M=0,G=D;M<G.length;M++){var te=G[M];te.enabled=!1,te.stop(),w.removeTrack(te)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=C.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=C.sent(),h=[],m=0,E=o;m<E.length;m++)v=E[m],v.kind==="videoinput"&&h.push({id:v.deviceId,label:v.label});return e(n),[2,h]}})})},a.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var o=function(m){for(var E=[],v=0,C=m;v<C.length;v++){var w=C[v];w.kind==="video"&&E.push({id:w.id,label:w.label})}e(E)},h=MediaStreamTrack;h.getSources(o)})},a})(),Fn;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.NOT_STARTED=1]="NOT_STARTED",a[a.SCANNING=2]="SCANNING",a[a.PAUSED=3]="PAUSED"})(Fn||(Fn={}));var h4=(function(){function a(){this.state=Fn.NOT_STARTED,this.onGoingTransactionNewState=Fn.UNKNOWN}return a.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},a.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},a.prototype.execute=function(){if(this.onGoingTransactionNewState===Fn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Fn.UNKNOWN,this.directTransition(e)},a.prototype.cancel=function(){if(this.onGoingTransactionNewState===Fn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Fn.UNKNOWN},a.prototype.getState=function(){return this.state},a.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Fn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},a.prototype.validateTransition=function(e){switch(this.state){case Fn.UNKNOWN:throw"Transition from unknown is not allowed";case Fn.NOT_STARTED:this.failIfNewStateIs(e,[Fn.PAUSED]);break;case Fn.SCANNING:break;case Fn.PAUSED:break}},a.prototype.failIfNewStateIs=function(e,n){for(var o=0,h=n;o<h.length;o++){var m=h[o];if(e===m)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},a})(),f4=(function(){function a(e){this.stateManager=e}return a.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},a.prototype.directTransition=function(e){this.stateManager.directTransition(e)},a.prototype.getState=function(){return this.stateManager.getState()},a.prototype.canScanFile=function(){return this.stateManager.getState()===Fn.NOT_STARTED},a.prototype.isScanning=function(){return this.stateManager.getState()!==Fn.NOT_STARTED},a.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Fn.SCANNING},a.prototype.isPaused=function(){return this.stateManager.getState()===Fn.PAUSED},a})(),d4=(function(){function a(){}return a.create=function(){return new f4(new h4)},a})(),g4=(function(){var a=function(e,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(o[m]=h[m])},a(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Nr=(function(a){g4(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(qI),m4=(function(){function a(e,n){this.logger=n,this.fps=Nr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Nr.DEFAULT_DISABLE_FLIP}return a.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Zx.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},a.prototype.isShadedBoxEnabled=function(){return!sa(this.qrbox)},a.create=function(e,n){return new a(e,n)},a})(),p4=(function(){function a(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new YI(this.verbose),this.qrcode=new e4(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=d4.create()}return a.prototype.start=function(e,n,o,h){var m=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var E;h?E=h:E=this.verbose?this.logger.log:function(){};var v=m4.create(n,this.logger);this.clearElement();var C=!1;v.videoConstraints&&(v.isMediaStreamConstraintsValid()?C=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=C,D=document.getElementById(this.elementId);D.clientWidth?D.clientWidth:Nr.DEFAULT_WIDTH,D.style.position="relative",this.shouldScan=!0,this.element=D;var M=this,G=this.stateManagerProxy.startTransition(Fn.SCANNING);return new Promise(function(te,Ee){var me=w?v.videoConstraints:M.createVideoConstraints(e);if(!me){G.cancel(),Ee("videoConstraints should be defined");return}var ye={};(!w||v.aspectRatio)&&(ye.aspectRatio=v.aspectRatio);var De={onRenderSurfaceReady:function(Le,pe){M.setupUi(Le,pe,v),M.isScanning=!0,M.foreverScan(v,o,E)}};o4.failIfNotSupported().then(function(Le){Le.create(me).then(function(pe){return pe.render(m.element,ye,De).then(function(Ue){M.renderedCamera=Ue,G.execute(),te(null)}).catch(function(Ue){G.cancel(),Ee(Ue)})}).catch(function(pe){G.cancel(),Ee(Bl.errorGettingUserMedia(pe))})}).catch(function(Le){G.cancel(),Ee(Bl.cameraStreamingNotSupported())})})},a.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Fn.PAUSED),this.showPausedState(),(sa(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},a.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Fn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},a.prototype.getState=function(){return this.stateManagerProxy.getState()},a.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Fn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var m=document.getElementById(Nr.SHADED_REGION_ELEMENT_ID);m&&e.element.removeChild(m)}},h=this;return this.renderedCamera.close().then(function(){return h.renderedCamera=null,h.element&&(h.element.removeChild(h.canvasElement),h.canvasElement=null),o(),h.qrRegion&&(h.qrRegion=null),h.context&&(h.context=null),n.execute(),h.hidePausedState(),h.isScanning=!1,Promise.resolve()})},a.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(o){return o.decodedText})},a.prototype.scanFileV2=function(e,n){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(sa(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(h,m){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var E=new Image;E.onload=function(){var v=E.width,C=E.height,w=document.getElementById(o.elementId),D=w.clientWidth?w.clientWidth:Nr.DEFAULT_WIDTH,M=Math.max(w.clientHeight?w.clientHeight:C,Nr.FILE_SCAN_MIN_HEIGHT),G=o.computeCanvasDrawConfig(v,C,D,M);if(n){var te=o.createCanvasElement(D,M,"qr-canvas-visible");te.style.display="inline-block",w.appendChild(te);var Ee=te.getContext("2d");if(!Ee)throw"Unable to get 2d context from canvas";Ee.canvas.width=D,Ee.canvas.height=M,Ee.drawImage(E,0,0,v,C,G.x,G.y,G.width,G.height)}var me=Nr.FILE_SCAN_HIDDEN_CANVAS_PADDING,ye=Math.max(E.width,G.width),De=Math.max(E.height,G.height),Le=ye+2*me,pe=De+2*me,Ue=o.createCanvasElement(Le,pe);w.appendChild(Ue);var nt=Ue.getContext("2d");if(!nt)throw"Unable to get 2d context from canvas";nt.canvas.width=Le,nt.canvas.height=pe,nt.drawImage(E,0,0,v,C,me,me,ye,De);try{o.qrcode.decodeRobustlyAsync(Ue).then(function(Ve){h(m_.createFromQrcodeResult(Ve))}).catch(m)}catch(Ve){m("QR code parse error, error = ".concat(Ve))}},E.onerror=m,E.onabort=m,E.onstalled=m,E.onsuspend=m,E.src=URL.createObjectURL(e)})},a.prototype.clear=function(){this.clearElement()},a.getCameras=function(){return u4.retrieve()},a.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},a.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},a.prototype.applyVideoConstraints=function(e){if(e){if(!Zx.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},a.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},a.prototype.getSupportedFormats=function(e){var n=[qe.QR_CODE,qe.AZTEC,qe.CODABAR,qe.CODE_39,qe.CODE_93,qe.CODE_128,qe.DATA_MATRIX,qe.MAXICODE,qe.ITF,qe.EAN_13,qe.EAN_8,qe.PDF_417,qe.RSS_14,qe.RSS_EXPANDED,qe.UPC_A,qe.UPC_E,qe.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],h=0,m=e.formatsToSupport;h<m.length;h++){var E=m[h];GI(E)?o.push(E):this.logger.warn("Invalid format: ".concat(E," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},a.prototype.getUseBarCodeDetectorIfSupported=function(e){if(sa(e))return!0;if(!sa(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(sa(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return sa(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},a.prototype.validateQrboxSize=function(e,n,o){var h=this,m=o.qrbox;this.validateQrboxConfig(m);var E=this.toQrdimensions(e,n,m),v=function(w){if(w<Nr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Nr.MIN_QR_BOX_SIZE,"px.")},C=function(w){return w>e&&(h.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=e),w};v(E.width),v(E.height),E.width=C(E.width)},a.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},a.prototype.toQrdimensions=function(e,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,n)}catch(h){throw new Error("qrbox config was passed as a function but it failed with unknown error"+h)}return o},a.prototype.setupUi=function(e,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,o);var h=sa(o.qrbox)?{width:e,height:n}:o.qrbox;this.validateQrboxConfig(h);var m=this.toQrdimensions(e,n,h);m.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var E=o.isShadedBoxEnabled()&&m.height<=n,v={x:0,y:0,width:e,height:n},C=E?this.getShadedRegionBounds(e,n,m):v,w=this.createCanvasElement(C.width,C.height),D={willReadFrequently:!0},M=w.getContext("2d",D);M.canvas.width=C.width,M.canvas.height=C.height,this.element.append(w),E&&this.possiblyInsertShadingElement(this.element,e,n,m),this.createScannerPausedUiElement(this.element),this.qrRegion=C,this.context=M,this.canvasElement=w},a.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Bl.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},a.prototype.scanContext=function(e,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(h){return e(h.text,m_.createFromQrcodeResult(h)),o.possiblyUpdateShaders(!0),!0}).catch(function(h){o.possiblyUpdateShaders(!1);var m=Bl.codeParseError(h);return n(m,XI.createFrom(m)),!1})},a.prototype.foreverScan=function(e,n,o){var h=this;if(this.shouldScan&&this.renderedCamera){var m=this.renderedCamera.getSurface(),E=m.videoWidth/m.clientWidth,v=m.videoHeight/m.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var C=this.qrRegion.width*E,w=this.qrRegion.height*v,D=this.qrRegion.x*E,M=this.qrRegion.y*v;this.context.drawImage(m,D,M,C,w,0,0,this.qrRegion.width,this.qrRegion.height);var G=function(){h.foreverScanTimeout=setTimeout(function(){h.foreverScan(e,n,o)},h.getTimeoutFps(e.fps))};this.scanContext(n,o).then(function(te){!te&&e.disableFlip!==!0?(h.context.translate(h.context.canvas.width,0),h.context.scale(-1,1),h.scanContext(n,o).finally(function(){G()})):G()}).catch(function(te){h.logger.logError("Error happend while scanning context",te),G()})}},a.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",o="deviceId",h={user:!0,environment:!0},m="exact",E=function(Ee){if(Ee in h)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(Ee,"'")},v=Object.keys(e);if(v.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(v.length," keys");var C=Object.keys(e)[0];if(C!==n&&C!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(C===n){var w=e.facingMode;if(typeof w=="string"){if(E(w))return{facingMode:w}}else if(typeof w=="object")if(m in w){if(E(w["".concat(m)]))return{facingMode:{exact:w["".concat(m)]}}}else throw"'facingMode' should be string or object with"+" ".concat(m," as key.");else{var D=typeof w;throw"Invalid type of 'facingMode' = ".concat(D)}}else{var M=e.deviceId;if(typeof M=="string")return{deviceId:M};if(typeof M=="object"){if(m in M)return{deviceId:{exact:M["".concat(m)]}};throw"'deviceId' should be string or object with"+" ".concat(m," as key.")}else{var G=typeof M;throw"Invalid type of 'deviceId' = ".concat(G)}}}var te=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(te)},a.prototype.computeCanvasDrawConfig=function(e,n,o,h){if(e<=o&&n<=h){var m=(o-e)/2,E=(h-n)/2;return{x:m,y:E,width:e,height:n}}else{var v=e,C=n;return e>o&&(n=o/e*n,e=o),n>h&&(e=h/n*e,n=h),this.logger.log("Image downsampled from "+"".concat(v,"X").concat(C)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,o,h)}},a.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},a.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Nr.BORDER_SHADER_MATCH_COLOR:Nr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},a.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},a.prototype.createCanvasElement=function(e,n,o){var h=e,m=n,E=document.createElement("canvas");return E.style.width="".concat(h,"px"),E.style.height="".concat(m,"px"),E.style.display="none",E.id=sa(o)?"qr-canvas":o,E},a.prototype.getShadedRegionBounds=function(e,n,o){if(o.width>e||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},a.prototype.possiblyInsertShadingElement=function(e,n,o,h){if(!(n-h.width<1||o-h.height<1)){var m=document.createElement("div");m.style.position="absolute";var E=(n-h.width)/2,v=(o-h.height)/2;if(m.style.borderLeft="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderRight="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderTop="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderBottom="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),m.style.boxSizing="border-box",m.style.top="0px",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.id="".concat(Nr.SHADED_REGION_ELEMENT_ID),n-h.width<11||o-h.height<11)this.hasBorderShaders=!1;else{var C=5,w=40;this.insertShaderBorders(m,w,C,-C,null,0,!0),this.insertShaderBorders(m,w,C,-C,null,0,!1),this.insertShaderBorders(m,w,C,null,-C,0,!0),this.insertShaderBorders(m,w,C,null,-C,0,!1),this.insertShaderBorders(m,C,w+C,-C,null,-C,!0),this.insertShaderBorders(m,C,w+C,null,-C,-C,!0),this.insertShaderBorders(m,C,w+C,-C,null,-C,!1),this.insertShaderBorders(m,C,w+C,null,-C,-C,!1),this.hasBorderShaders=!0}e.append(m)}},a.prototype.insertShaderBorders=function(e,n,o,h,m,E,v){var C=document.createElement("div");C.style.position="absolute",C.style.backgroundColor=Nr.BORDER_SHADER_DEFAULT_COLOR,C.style.width="".concat(n,"px"),C.style.height="".concat(o,"px"),h!==null&&(C.style.top="".concat(h,"px")),m!==null&&(C.style.bottom="".concat(m,"px")),v?C.style.left="".concat(E,"px"):C.style.right="".concat(E,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(C),e.appendChild(C)},a.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},a.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},a.prototype.getTimeoutFps=function(e){return 1e3/e},a})(),T_;(function(a){a[a.STATUS_DEFAULT=0]="STATUS_DEFAULT",a[a.STATUS_SUCCESS=1]="STATUS_SUCCESS",a[a.STATUS_WARNING=2]="STATUS_WARNING",a[a.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(T_||(T_={}));const Tg=({onScan:a,onClose:e})=>{const n=We.useRef(null),[o,h]=We.useState("");return We.useEffect(()=>{const m="barcode-scanner",E=async()=>{try{n.current=new p4(m),await n.current.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150},aspectRatio:1.777},C=>{a(C),v()},()=>{})}catch(C){console.error("Scanner error:",C),h("Ne mogu pristupiti kameri. Provjerite dozvole.")}},v=async()=>{if(n.current)try{await n.current.stop(),n.current.clear()}catch(C){console.error("Error stopping scanner:",C)}};return E(),()=>{v()}},[a]),H.jsx("div",{className:"scanner-overlay",children:H.jsxs("div",{className:"scanner-container",children:[H.jsxs("div",{className:"scanner-header",children:[H.jsx("h3",{children:"Skeniraj barkod"}),H.jsx("button",{className:"close-btn",onClick:e,children:""})]}),o?H.jsx("div",{className:"scanner-error",children:o}):H.jsx("div",{id:"barcode-scanner",className:"scanner-view"}),H.jsx("p",{className:"scanner-hint",children:"Usmjeri kameru na barkod lijeka"})]})})},y4=()=>{const{medicines:a,units:e,addMedicine:n,addStock:o,getMedicineByBarcode:h}=bu(),[m,E]=We.useState(!1),[v,C]=We.useState(""),[w,D]=We.useState(null),[M,G]=We.useState(!1),[te,Ee]=We.useState(""),[me,ye]=We.useState(""),[De,Le]=We.useState(""),[pe,Ue]=We.useState("tableta"),[nt,Ve]=We.useState("10"),[V,F]=We.useState(""),[B,Z]=We.useState(""),[W,X]=We.useState(!1),[P,Ae]=We.useState(""),[ee,ie]=We.useState(!1),ae=$=>{C($),E(!1);const Ce=h($);Ce?(D(Ce),Ee(Ce.name),Ue(Ce.unit),Ve(Ce.minQuantity.toString()),G(!1)):(D(null),G(!0),Ee(""))},Re=$=>{D($),Ee($.name),Ue($.unit),Ve($.minQuantity.toString()),Ae($.name),ie(!1),G(!1)},Fe=()=>{C(""),D(null),G(!0),Ee(""),Ae("")},Ie=P.length>=2?a.filter($=>$.name.toLowerCase().includes(P.toLowerCase())):[],q=async $=>{$.preventDefault(),F(""),Z(""),X(!0);try{let Ce=w?.id;if(!Ce){if(!te.trim())throw new Error("Unesite naziv lijeka");Ce=await n({name:te.trim(),barcode:v||null,unit:pe,minQuantity:parseInt(nt)||10})}const Be=parseInt(me);if(!Be||Be<=0)throw new Error("Unesite koliinu");if(!De)throw new Error("Unesite rok trajanja");const et=w?.name||te.trim();await o(Ce,et,Be,De),Z(`Dodato ${Be} ${pe} lijeka "${te}"`),ye(""),Le(""),C(""),D(null),Ee(""),Ae(""),G(!1)}catch(Ce){F(Ce instanceof Error?Ce.message:"Greka pri dodavanju")}finally{X(!1)}};return H.jsxs("div",{className:"stock-entry",children:[H.jsx("h2",{children:" Ulaz lijekova"}),V&&H.jsx("div",{className:"error-message",children:V}),B&&H.jsx("div",{className:"success-message",children:B}),H.jsxs("div",{className:"entry-actions",children:[H.jsx("button",{className:"scan-btn",onClick:()=>E(!0),children:" Skeniraj barkod"}),H.jsx("button",{className:"manual-btn",onClick:Fe,children:" Runi unos"})]}),v&&H.jsxs("div",{className:"scanned-barcode",children:[H.jsx("strong",{children:"Barkod:"})," ",v]}),!M&&!w&&H.jsxs("div",{className:"medicine-search",children:[H.jsx("label",{children:"Pretrai postojee lijekove"}),H.jsx("input",{type:"text",placeholder:"Unesite naziv lijeka...",value:P,onChange:$=>{Ae($.target.value),ie(!0)},onFocus:()=>ie(!0)}),ee&&Ie.length>0&&H.jsx("ul",{className:"suggestions-list",children:Ie.map($=>H.jsxs("li",{onClick:()=>Re($),children:[H.jsx("span",{className:"medicine-name",children:$.name}),H.jsx("span",{className:"medicine-unit",children:$.unit}),$.barcode&&H.jsx("span",{className:"medicine-barcode",children:$.barcode})]},$.id))})]}),w&&H.jsxs("div",{className:"selected-medicine",children:[H.jsx("h3",{children:w.name}),H.jsxs("p",{children:["Jedinica: ",w.unit]}),w.barcode&&H.jsxs("p",{children:["Barkod: ",w.barcode]}),H.jsx("button",{className:"change-btn",onClick:()=>{D(null),Ae("")},children:"Promijeni"})]}),M&&H.jsxs("div",{className:"new-medicine-form",children:[H.jsx("h3",{children:"Novi lijek"}),H.jsxs("div",{className:"form-group",children:[H.jsx("label",{children:"Naziv lijeka *"}),H.jsx("input",{type:"text",value:te,onChange:$=>Ee($.target.value),placeholder:"npr. Paracetamol 500mg",required:!0})]}),H.jsxs("div",{className:"form-row",children:[H.jsxs("div",{className:"form-group",children:[H.jsx("label",{children:"Mjerna jedinica"}),H.jsx("select",{value:pe,onChange:$=>Ue($.target.value),children:e.map($=>H.jsx("option",{value:$.name,children:$.name},$.id))})]}),H.jsxs("div",{className:"form-group",children:[H.jsx("label",{children:"Min. koliina"}),H.jsx("input",{type:"number",value:nt,onChange:$=>Ve($.target.value),min:"0"})]})]})]}),(w||M)&&H.jsxs("form",{onSubmit:q,className:"stock-form",children:[H.jsx("h3",{children:"Dodaj na stanje"}),H.jsxs("div",{className:"form-row",children:[H.jsxs("div",{className:"form-group",children:[H.jsx("label",{children:"Koliina *"}),H.jsx("input",{type:"number",value:me,onChange:$=>ye($.target.value),min:"1",placeholder:"0",required:!0})]}),H.jsxs("div",{className:"form-group",children:[H.jsx("label",{children:"Rok trajanja *"}),H.jsx("input",{type:"month",value:De,onChange:$=>Le($.target.value),required:!0})]})]}),H.jsx("button",{type:"submit",className:"submit-btn",disabled:W,children:W?"Dodavanje...":" Dodaj na stanje"})]}),m&&H.jsx(Tg,{onScan:ae,onClose:()=>E(!1)})]})},_4=()=>{const{medicines:a,stockBatches:e,getMedicineByBarcode:n,removeStock:o}=bu(),[h,m]=We.useState(!1),[E,v]=We.useState(null),[C,w]=We.useState(""),[D,M]=We.useState([]),[G,te]=We.useState(null),[Ee,me]=We.useState(""),[ye,De]=We.useState(""),[Le,pe]=We.useState(""),[Ue,nt]=We.useState(!1),[Ve,V]=We.useState(""),[F,B]=We.useState(!1),Z=new Map,W=new Map;for(const Ie of a)Z.set(Ie.id,Ie.name.toLowerCase().trim()),W.set(Ie.id,Ie.unit);const X=()=>{const Ie=new Map;for(const q of a){const $=q.name.toLowerCase().trim();Ie.has($)||Ie.set($,{name:q.name,unit:q.unit,batches:[],totalQuantity:0})}for(const q of e){if(q.quantity<=0)continue;const $=Z.get(q.medicineId);if($&&Ie.has($)){const Ce=Ie.get($);Ce.batches.push(q),Ce.totalQuantity+=q.quantity}}for(const q of Ie.values())q.batches.sort(($,Ce)=>$.expiryDate.localeCompare(Ce.expiryDate));return Array.from(Ie.values())},P=Ie=>{v(Ie.name),w(Ie.unit),M(Ie.batches),te(null),me(""),B(!1),V(Ie.name)},Ae=Ie=>{m(!1),De("");const q=n(Ie);if(q){const Ce=X().find(Be=>Be.name.toLowerCase().trim()===q.name.toLowerCase().trim());Ce&&P(Ce)}else De(`Lijek sa barkodom "${Ie}" nije pronaen u bazi`)},ee=Ve.length>=2?X().filter(Ie=>Ie.name.toLowerCase().includes(Ve.toLowerCase())):[],ie=async Ie=>{if(Ie.preventDefault(),De(""),pe(""),!G){De("Izaberite seriju lijeka");return}const q=parseInt(Ee);if(!q||q<=0){De("Unesite koliinu");return}if(q>G.quantity){De(`Dostupno samo ${G.quantity} ${C||"kom"}`);return}nt(!0);try{await o(G.id,q),pe(`Skinuto ${q} ${C||"kom"} lijeka "${E}"`),v(null),w(""),M([]),te(null),me(""),V("")}catch($){De($ instanceof Error?$.message:"Greka pri skidanju sa stanja")}finally{nt(!1)}},ae=Ie=>{const q=Ie.split("-");return q.length===2?`${q[1]}/${q[0]}`:`${q[1]}/${q[0]}`},Re=Ie=>{const q=new Date,$=`${q.getFullYear()}-${String(q.getMonth()+1).padStart(2,"0")}`;return Ie.substring(0,7)<$},Fe=Ie=>{const q=new Date,$=new Date(q.getFullYear(),q.getMonth()+1,1),Ce=Ie.substring(0,7),Be=`${q.getFullYear()}-${String(q.getMonth()+1).padStart(2,"0")}`,et=`${$.getFullYear()}-${String($.getMonth()+1).padStart(2,"0")}`;return Ce>=Be&&Ce<=et&&!Re(Ie)};return H.jsxs("div",{className:"stock-exit",children:[H.jsx("h2",{children:" Izlaz lijekova"}),ye&&H.jsx("div",{className:"error-message",children:ye}),Le&&H.jsx("div",{className:"success-message",children:Le}),H.jsx("div",{className:"exit-actions",children:H.jsx("button",{className:"scan-btn",onClick:()=>m(!0),children:" Skeniraj barkod"})}),!E&&H.jsxs("div",{className:"medicine-search",children:[H.jsx("label",{children:"Pretrai lijekove"}),H.jsx("input",{type:"text",placeholder:"Unesite naziv lijeka...",value:Ve,onChange:Ie=>{V(Ie.target.value),B(!0)},onFocus:()=>B(!0)}),F&&ee.length>0&&H.jsx("ul",{className:"suggestions-list",children:ee.map((Ie,q)=>H.jsxs("li",{onClick:()=>P(Ie),className:"suggestion-item-detailed",children:[H.jsxs("div",{className:"medicine-header",children:[H.jsx("span",{className:"medicine-name",children:Ie.name}),H.jsxs("span",{className:"medicine-qty",children:["Ukupno: ",Ie.totalQuantity," ",Ie.unit]})]}),Ie.batches.length>0&&H.jsx("div",{className:"medicine-batches-preview",children:Ie.batches.map(($,Ce)=>H.jsxs("span",{className:`batch-preview ${Re($.expiryDate)?"expired":""} ${Fe($.expiryDate)?"expiring":""}`,children:[$.quantity," ",Ie.unit," (rok: ",ae($.expiryDate),")"]},Ce))})]},q))})]}),E&&H.jsxs("div",{className:"selected-medicine",children:[H.jsx("h3",{children:E}),H.jsx("button",{className:"change-btn",onClick:()=>{v(null),w(""),M([]),te(null),V("")},children:"Promijeni"})]}),E&&D.length===0&&H.jsx("div",{className:"no-stock",children:"Nema ovog lijeka na stanju"}),D.length>0&&H.jsxs("div",{className:"batch-selection",children:[H.jsx("h3",{children:"Izaberi seriju"}),H.jsx("p",{className:"hint",children:"Preporueno: uzmi lijek sa najbliim rokom isteka"}),H.jsx("div",{className:"batch-list",children:D.map((Ie,q)=>H.jsxs("div",{className:`batch-item ${G?.id===Ie.id?"selected":""} ${Re(Ie.expiryDate)?"expired":""} ${Fe(Ie.expiryDate)?"expiring":""}`,onClick:()=>te(Ie),children:[H.jsxs("div",{className:"batch-info",children:[H.jsxs("span",{className:"batch-qty",children:[Ie.quantity," ",C]}),H.jsxs("span",{className:"batch-expiry",children:["Rok: ",ae(Ie.expiryDate),Re(Ie.expiryDate)&&H.jsx("span",{className:"badge expired",children:"ISTEKAO"}),Fe(Ie.expiryDate)&&H.jsx("span",{className:"badge warning",children:"ISTIE USKORO"})]})]}),q===0&&H.jsx("span",{className:"recommended",children:"Preporueno (FIFO)"})]},Ie.id))})]}),G&&H.jsxs("form",{onSubmit:ie,className:"exit-form",children:[H.jsxs("div",{className:"form-group",children:[H.jsxs("label",{children:["Koliina za skidanje (dostupno: ",G.quantity,")"]}),H.jsx("input",{type:"number",value:Ee,onChange:Ie=>me(Ie.target.value),min:"1",max:G.quantity,placeholder:"0",required:!0})]}),H.jsx("button",{type:"submit",className:"submit-btn",disabled:Ue,children:Ue?"Skidanje...":" Skini sa stanja"})]}),h&&H.jsx(Tg,{onScan:Ae,onClose:()=>m(!1)})]})},E4=()=>{const{getStockSummary:a,deleteMedicine:e,updateMedicine:n}=bu(),[o,h]=We.useState(""),[m,E]=We.useState(null),[v,C]=We.useState("all"),[w,D]=We.useState(null),[M,G]=We.useState(""),[te,Ee]=We.useState(""),[me,ye]=We.useState(!1),[De,Le]=We.useState(""),pe=a();let Ue=pe;v==="lowStock"?Ue=Ue.filter(P=>P.isLowStock):v==="expired"&&(Ue=Ue.filter(P=>P.hasExpired)),o&&(Ue=Ue.filter(P=>P.medicineName.toLowerCase().includes(o.toLowerCase())||P.barcode&&P.barcode.includes(o)));const nt=P=>{const Ae=P.split("-");return Ae.length===2?`${Ae[1]}/${Ae[0]}`:`${Ae[1]}/${Ae[0]}`},Ve=P=>{const Ae=new Date,ee=`${Ae.getFullYear()}-${String(Ae.getMonth()+1).padStart(2,"0")}`;return P.substring(0,7)<ee},V=P=>{const Ae=new Date,ee=new Date(Ae.getFullYear(),Ae.getMonth()+1,1),ie=P.substring(0,7),ae=`${Ae.getFullYear()}-${String(Ae.getMonth()+1).padStart(2,"0")}`,Re=`${ee.getFullYear()}-${String(ee.getMonth()+1).padStart(2,"0")}`;return ie>=ae&&ie<=Re&&!Ve(P)},F=async(P,Ae)=>{if(window.confirm(`Da li ste sigurni da elite obrisati "${Ae}" iz baze?`))try{await e(P)}catch{alert("Greka pri brisanju")}},B=(P,Ae,ee)=>{D(P),G(Ae||""),Ee(ee.toString()),Le("")},Z=()=>{D(null),G(""),Ee("")},W=P=>{G(P),ye(!1)},X=async P=>{try{await n(P,{barcode:M.trim()||null,minQuantity:parseInt(te)||10}),Le("Izmjene sauvane!"),setTimeout(()=>{D(null),Le("")},1500)}catch{alert("Greka pri uvanju")}};return H.jsxs("div",{className:"inventory",children:[H.jsx("h2",{children:" Magacin"}),H.jsx("div",{className:"inventory-search",children:H.jsx("input",{type:"text",placeholder:"Pretrai po nazivu ili barkodu...",value:o,onChange:P=>h(P.target.value)})}),H.jsxs("div",{className:"inventory-stats",children:[H.jsxs("div",{className:`stat clickable ${v==="all"?"active":""}`,onClick:()=>C("all"),children:[H.jsx("span",{className:"stat-value",children:pe.length}),H.jsx("span",{className:"stat-label",children:"Ukupno lijekova"})]}),H.jsxs("div",{className:`stat warning clickable ${v==="lowStock"?"active":""}`,onClick:()=>C("lowStock"),children:[H.jsx("span",{className:"stat-value",children:pe.filter(P=>P.isLowStock).length}),H.jsx("span",{className:"stat-label",children:"Niska zaliha"})]}),H.jsxs("div",{className:`stat danger clickable ${v==="expired"?"active":""}`,onClick:()=>C("expired"),children:[H.jsx("span",{className:"stat-value",children:pe.filter(P=>P.hasExpired).length}),H.jsx("span",{className:"stat-label",children:"Istekli"})]})]}),Ue.length===0?H.jsx("div",{className:"empty-state",children:o?"Nema rezultata pretrage":"Magacin je prazan"}):H.jsx("div",{className:"inventory-list",children:Ue.map(P=>H.jsxs("div",{className:`inventory-item ${P.isLowStock?"low-stock":""} ${P.hasExpired?"has-expired":""}`,children:[H.jsxs("div",{className:"item-header",onClick:()=>E(m===P.medicineId?null:P.medicineId),children:[H.jsxs("div",{className:"item-info",children:[H.jsx("h3",{children:P.medicineName}),H.jsxs("div",{className:"item-meta",children:[P.barcode&&H.jsx("span",{className:"barcode",children:P.barcode}),H.jsx("span",{className:"unit",children:P.unit})]})]}),H.jsxs("div",{className:"item-quantity",children:[H.jsx("span",{className:"qty",children:P.totalQuantity}),P.isLowStock&&H.jsx("span",{className:"badge warning",children:"NISKA ZALIHA"}),P.hasExpired&&H.jsx("span",{className:"badge danger",children:"ISTEKAO"}),P.hasExpiringSoon&&!P.hasExpired&&H.jsx("span",{className:"badge warning",children:"ISTIE"})]}),H.jsx("span",{className:"expand-icon",children:m===P.medicineId?"":""})]}),m===P.medicineId&&H.jsxs("div",{className:"item-details",children:[H.jsxs("div",{className:"detail-row",children:[H.jsx("span",{children:"Minimalna koliina:"}),H.jsxs("span",{children:[P.minQuantity," ",P.unit]})]}),P.batches.length>0&&H.jsxs("div",{className:"batches",children:[H.jsx("h4",{children:"Serije na stanju:"}),H.jsxs("table",{children:[H.jsx("thead",{children:H.jsxs("tr",{children:[H.jsx("th",{children:"Koliina"}),H.jsx("th",{children:"Rok trajanja"}),H.jsx("th",{children:"Datum ulaza"}),H.jsx("th",{children:"Status"})]})}),H.jsx("tbody",{children:P.batches.map(Ae=>H.jsxs("tr",{className:Ve(Ae.expiryDate)?"expired":V(Ae.expiryDate)?"expiring":"",children:[H.jsxs("td",{children:[Ae.quantity," ",P.unit]}),H.jsx("td",{children:nt(Ae.expiryDate)}),H.jsx("td",{children:nt(Ae.entryDate)}),H.jsxs("td",{children:[Ve(Ae.expiryDate)&&H.jsx("span",{className:"status expired",children:"Istekao"}),V(Ae.expiryDate)&&H.jsx("span",{className:"status warning",children:"Istie uskoro"}),!Ve(Ae.expiryDate)&&!V(Ae.expiryDate)&&H.jsx("span",{className:"status ok",children:"OK"})]})]},Ae.id))})]})]}),w===P.medicineId?H.jsxs("div",{className:"edit-form",children:[H.jsx("h4",{children:"Uredi lijek"}),De&&H.jsx("div",{className:"edit-success",children:De}),H.jsxs("div",{className:"edit-field",children:[H.jsx("label",{children:"Barkod"}),H.jsxs("div",{className:"barcode-input-row",children:[H.jsx("input",{type:"text",value:M,onChange:Ae=>G(Ae.target.value),placeholder:"Unesite ili skenirajte barkod"}),H.jsx("button",{type:"button",className:"scan-btn-small",onClick:()=>ye(!0),children:""})]})]}),H.jsxs("div",{className:"edit-field",children:[H.jsx("label",{children:"Minimalna koliina"}),H.jsx("input",{type:"number",value:te,onChange:Ae=>Ee(Ae.target.value),min:"0"})]}),H.jsxs("div",{className:"edit-buttons",children:[H.jsx("button",{className:"save-btn",onClick:()=>X(P.medicineId),children:" Sauvaj"}),H.jsx("button",{className:"cancel-btn",onClick:Z,children:" Otkai"})]})]}):H.jsxs("div",{className:"item-actions",children:[H.jsx("button",{className:"edit-btn",onClick:()=>B(P.medicineId,P.barcode,P.minQuantity),children:" Uredi lijek"}),H.jsx("button",{className:"delete-btn",onClick:()=>F(P.medicineId,P.medicineName),children:" Obrii lijek"})]})]})]},P.medicineId))}),me&&H.jsx(Tg,{onScan:W,onClose:()=>ye(!1)})]})},x4=()=>{const{getLowStockItems:a,getExpiringItems:e,getExpiredItems:n}=bu(),o=a(),h=e(30),m=n(),E=C=>{const[w,D,M]=C.split("-");return`${M}.${D}.${w}`},v=o.length+h.length+m.length;return H.jsxs("div",{className:"alerts",children:[H.jsx("h2",{children:" Upozorenja"}),v===0?H.jsxs("div",{className:"no-alerts",children:[H.jsx("span",{className:"icon",children:""}),H.jsx("p",{children:"Nema aktivnih upozorenja"})]}):H.jsxs("div",{className:"alerts-container",children:[m.length>0&&H.jsxs("div",{className:"alert-section danger",children:[H.jsxs("h3",{children:[" Istekli lijekovi (",m.length,")"]}),H.jsx("div",{className:"alert-list",children:m.map(C=>H.jsx("div",{className:"alert-item",children:H.jsxs("div",{className:"alert-info",children:[H.jsx("strong",{children:C.medicineName}),H.jsx("div",{className:"batches",children:C.batches.filter(w=>w.expiryDate<new Date().toISOString().split("T")[0]).map(w=>H.jsxs("span",{className:"batch",children:[w.quantity," ",C.unit," - istekao ",E(w.expiryDate)]},w.id))})]})},C.medicineId))})]}),h.length>0&&H.jsxs("div",{className:"alert-section warning",children:[H.jsxs("h3",{children:[" Istie uskoro (",h.length,")"]}),H.jsx("p",{className:"section-desc",children:"Lijekovi koji istiu u narednih 30 dana"}),H.jsx("div",{className:"alert-list",children:h.map(C=>H.jsx("div",{className:"alert-item",children:H.jsxs("div",{className:"alert-info",children:[H.jsx("strong",{children:C.medicineName}),H.jsx("div",{className:"batches",children:C.batches.filter(w=>{const D=new Date;D.setDate(D.getDate()+30);const M=new Date().toISOString().split("T")[0];return w.expiryDate<=D.toISOString().split("T")[0]&&w.expiryDate>=M}).map(w=>H.jsxs("span",{className:"batch",children:[w.quantity," ",C.unit," - istie ",E(w.expiryDate)]},w.id))})]})},C.medicineId))})]}),o.length>0&&H.jsxs("div",{className:"alert-section low-stock",children:[H.jsxs("h3",{children:[" Niska zaliha (",o.length,")"]}),H.jsx("p",{className:"section-desc",children:"Lijekovi ispod minimalne koliine"}),H.jsx("div",{className:"alert-list",children:o.map(C=>H.jsxs("div",{className:"alert-item",children:[H.jsxs("div",{className:"alert-info",children:[H.jsx("strong",{children:C.medicineName}),H.jsxs("span",{className:"stock-info",children:["Na stanju: ",C.totalQuantity," ",C.unit," (min: ",C.minQuantity,")"]})]}),H.jsx("div",{className:"alert-action",children:H.jsxs("span",{className:"needed",children:["Potrebno naruiti: ",C.minQuantity-C.totalQuantity," ",C.unit]})})]},C.medicineId))})]})]})]})},A4=()=>{const{units:a,addUnit:e,deleteUnit:n}=bu(),{isAdmin:o,users:h,addUser:m,deleteUser:E,currentUser:v}=Su(),[C,w]=We.useState(""),[D,M]=We.useState(""),[G,te]=We.useState(""),[Ee,me]=We.useState(""),[ye,De]=We.useState(""),[Le,pe]=We.useState(!1),Ue=async F=>{if(F.preventDefault(),me(""),De(""),!C.trim()){me("Unesite naziv jedinice");return}try{await e(C.trim()),De(`Dodana jedinica "${C}"`),w("")}catch(B){me(B instanceof Error?B.message:"Greka pri dodavanju")}},nt=async(F,B)=>{if(window.confirm(`Da li ste sigurni da elite obrisati jedinicu "${B}"?`))try{await n(F),De(`Obrisana jedinica "${B}"`)}catch{me("Greka pri brisanju")}},Ve=async F=>{if(F.preventDefault(),me(""),De(""),!D.trim()||!G.trim()){me("Unesite email i lozinku");return}if(G.length<6){me("Lozinka mora imati najmanje 6 karaktera");return}pe(!0);try{await m(D.trim(),G),De(`Korisnik "${D}" je dodat`),M(""),te("")}catch(B){me(B instanceof Error?B.message:"Greka pri dodavanju korisnika")}finally{pe(!1)}},V=async(F,B)=>{if(window.confirm(`Da li ste sigurni da elite ukloniti korisnika "${B}"?

Napomena: Korisnik vie nee moi pristupiti aplikaciji.`))try{await E(F),De(`Korisnik "${B}" je uklonjen`)}catch(Z){me(Z instanceof Error?Z.message:"Greka pri brisanju")}};return H.jsxs("div",{className:"settings",children:[H.jsx("h2",{children:" Postavke"}),Ee&&H.jsx("div",{className:"error-message",children:Ee}),ye&&H.jsx("div",{className:"success-message",children:ye}),o&&H.jsxs("div",{className:"settings-section",children:[H.jsx("h3",{children:" Upravljanje korisnicima"}),H.jsx("p",{className:"section-desc",children:"Dodajte ili uklonite korisnike koji imaju pristup aplikaciji"}),H.jsxs("form",{onSubmit:Ve,className:"add-user-form",children:[H.jsx("input",{type:"email",value:D,onChange:F=>M(F.target.value),placeholder:"Email novog korisnika"}),H.jsx("input",{type:"password",value:G,onChange:F=>te(F.target.value),placeholder:"Lozinka (min. 6 karaktera)"}),H.jsx("button",{type:"submit",disabled:Le,children:Le?"Dodavanje...":"+ Dodaj korisnika"})]}),H.jsx("div",{className:"users-list",children:h.map(F=>H.jsxs("div",{className:`user-item ${F.isAdmin?"admin":""}`,children:[H.jsxs("div",{className:"user-info",children:[H.jsx("span",{className:"user-email",children:F.email}),F.isAdmin&&H.jsx("span",{className:"admin-badge",children:"Admin"}),F.uid===v?.uid&&H.jsx("span",{className:"you-badge",children:"Vi"})]}),!F.isAdmin&&F.uid!==v?.uid&&H.jsx("button",{className:"delete-btn",onClick:()=>V(F.id,F.email),children:""})]},F.id))})]}),H.jsxs("div",{className:"settings-section",children:[H.jsx("h3",{children:" Mjerne jedinice"}),H.jsxs("form",{onSubmit:Ue,className:"add-unit-form",children:[H.jsx("input",{type:"text",value:C,onChange:F=>w(F.target.value),placeholder:"Nova mjerna jedinica..."}),H.jsx("button",{type:"submit",children:"+ Dodaj"})]}),H.jsx("div",{className:"units-list",children:a.map(F=>H.jsxs("div",{className:"unit-item",children:[H.jsx("span",{children:F.name}),H.jsx("button",{className:"delete-btn",onClick:()=>nt(F.id,F.name),children:""})]},F.id))})]})]})},w4=()=>{const{currentUser:a,loading:e}=Su(),[n,o]=We.useState("entry");return e?H.jsxs("div",{className:"loading-screen",children:[H.jsx("div",{className:"spinner"}),H.jsx("p",{children:"Uitavanje..."})]}):a?H.jsx(jI,{children:H.jsxs("div",{className:"app",children:[H.jsx(HI,{activeView:n,onViewChange:o}),H.jsxs("main",{className:"main-content",children:[n==="entry"&&H.jsx(y4,{}),n==="exit"&&H.jsx(_4,{}),n==="inventory"&&H.jsx(E4,{}),n==="alerts"&&H.jsx(x4,{}),n==="settings"&&H.jsx(A4,{})]})]})}):H.jsx(zI,{})},T4=()=>H.jsx(UI,{children:H.jsx(w4,{})});bw.createRoot(document.getElementById("root")).render(H.jsx(We.StrictMode,{children:H.jsx(T4,{})}));
