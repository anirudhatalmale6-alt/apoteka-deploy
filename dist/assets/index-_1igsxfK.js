function dw(a,e){for(var n=0;n<e.length;n++){const o=e[n];if(typeof o!="string"&&!Array.isArray(o)){for(const h in o)if(h!=="default"&&!(h in a)){const m=Object.getOwnPropertyDescriptor(o,h);m&&Object.defineProperty(a,h,m.get?m:{enumerable:!0,get:()=>o[h]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))o(h);new MutationObserver(h=>{for(const m of h)if(m.type==="childList")for(const E of m.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&o(E)}).observe(document,{childList:!0,subtree:!0});function n(h){const m={};return h.integrity&&(m.integrity=h.integrity),h.referrerPolicy&&(m.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?m.credentials="include":h.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(h){if(h.ep)return;h.ep=!0;const m=n(h);fetch(h.href,m)}})();var Sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gw(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var S1={exports:{}},kc={};var m2;function mw(){if(m2)return kc;m2=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(o,h,m){var E=null;if(m!==void 0&&(E=""+m),h.key!==void 0&&(E=""+h.key),"key"in h){m={};for(var C in h)C!=="key"&&(m[C]=h[C])}else m=h;return h=m.ref,{$$typeof:a,type:o,key:E,ref:h!==void 0?h:null,props:m}}return kc.Fragment=e,kc.jsx=n,kc.jsxs=n,kc}var p2;function pw(){return p2||(p2=1,S1.exports=mw()),S1.exports}var X=pw(),b1={exports:{}},ft={};var y2;function yw(){if(y2)return ft;y2=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),z=Symbol.iterator;function te(J){return J===null||typeof J!="object"?null:(J=z&&J[z]||J["@@iterator"],typeof J=="function"?J:null)}var _e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pe=Object.assign,ve={};function je(J,ae,Ie){this.props=J,this.context=ae,this.refs=ve,this.updater=Ie||_e}je.prototype.isReactComponent={},je.prototype.setState=function(J,ae){if(typeof J!="object"&&typeof J!="function"&&J!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,J,ae,"setState")},je.prototype.forceUpdate=function(J){this.updater.enqueueForceUpdate(this,J,"forceUpdate")};function Pe(){}Pe.prototype=je.prototype;function Ce(J,ae,Ie){this.props=J,this.context=ae,this.refs=ve,this.updater=Ie||_e}var Be=Ce.prototype=new Pe;Be.constructor=Ce,pe(Be,je.prototype),Be.isPureReactComponent=!0;var ct=Array.isArray;function ke(){}var V={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function B(J,ae,Ie){var De=Ie.ref;return{$$typeof:a,type:J,key:ae,ref:De!==void 0?De:null,props:Ie}}function ee(J,ae){return B(J.type,ae,J.props)}function G(J){return typeof J=="object"&&J!==null&&J.$$typeof===a}function q(J){var ae={"=":"=0",":":"=2"};return"$"+J.replace(/[=:]/g,function(Ie){return ae[Ie]})}var F=/\/+/g;function Ue(J,ae){return typeof J=="object"&&J!==null&&J.key!=null?q(""+J.key):ae.toString(36)}function Q(J){switch(J.status){case"fulfilled":return J.value;case"rejected":throw J.reason;default:switch(typeof J.status=="string"?J.then(ke,ke):(J.status="pending",J.then(function(ae){J.status==="pending"&&(J.status="fulfilled",J.value=ae)},function(ae){J.status==="pending"&&(J.status="rejected",J.reason=ae)})),J.status){case"fulfilled":return J.value;case"rejected":throw J.reason}}throw J}function K(J,ae,Ie,De,nt){var Oe=typeof J;(Oe==="undefined"||Oe==="boolean")&&(J=null);var At=!1;if(J===null)At=!0;else switch(Oe){case"bigint":case"string":case"number":At=!0;break;case"object":switch(J.$$typeof){case a:case e:At=!0;break;case D:return At=J._init,K(At(J._payload),ae,Ie,De,nt)}}if(At)return nt=nt(J),At=De===""?"."+Ue(J,0):De,ct(nt)?(Ie="",At!=null&&(Ie=At.replace(F,"$&/")+"/"),K(nt,ae,Ie,"",function(ur){return ur})):nt!=null&&(G(nt)&&(nt=ee(nt,Ie+(nt.key==null||J&&J.key===nt.key?"":(""+nt.key).replace(F,"$&/")+"/")+At)),ae.push(nt)),1;At=0;var wt=De===""?".":De+":";if(ct(J))for(var Zt=0;Zt<J.length;Zt++)De=J[Zt],Oe=wt+Ue(De,Zt),At+=K(De,ae,Ie,Oe,nt);else if(Zt=te(J),typeof Zt=="function")for(J=Zt.call(J),Zt=0;!(De=J.next()).done;)De=De.value,Oe=wt+Ue(De,Zt++),At+=K(De,ae,Ie,Oe,nt);else if(Oe==="object"){if(typeof J.then=="function")return K(Q(J),ae,Ie,De,nt);throw ae=String(J),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(J).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return At}function se(J,ae,Ie){if(J==null)return J;var De=[],nt=0;return K(J,De,"","",function(Oe){return ae.call(Ie,Oe,nt++)}),De}function Le(J){if(J._status===-1){var ae=J._result;ae=ae(),ae.then(function(Ie){(J._status===0||J._status===-1)&&(J._status=1,J._result=Ie)},function(Ie){(J._status===0||J._status===-1)&&(J._status=2,J._result=Ie)}),J._status===-1&&(J._status=0,J._result=ae)}if(J._status===1)return J._result.default;throw J._result}var ut=typeof reportError=="function"?reportError:function(J){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof J=="object"&&J!==null&&typeof J.message=="string"?String(J.message):String(J),error:J});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",J);return}console.error(J)},mt={map:se,forEach:function(J,ae,Ie){se(J,function(){ae.apply(this,arguments)},Ie)},count:function(J){var ae=0;return se(J,function(){ae++}),ae},toArray:function(J){return se(J,function(ae){return ae})||[]},only:function(J){if(!G(J))throw Error("React.Children.only expected to receive a single React element child.");return J}};return ft.Activity=M,ft.Children=mt,ft.Component=je,ft.Fragment=n,ft.Profiler=h,ft.PureComponent=Ce,ft.StrictMode=o,ft.Suspense=v,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,ft.__COMPILER_RUNTIME={__proto__:null,c:function(J){return V.H.useMemoCache(J)}},ft.cache=function(J){return function(){return J.apply(null,arguments)}},ft.cacheSignal=function(){return null},ft.cloneElement=function(J,ae,Ie){if(J==null)throw Error("The argument must be a React element, but you passed "+J+".");var De=pe({},J.props),nt=J.key;if(ae!=null)for(Oe in ae.key!==void 0&&(nt=""+ae.key),ae)!j.call(ae,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&ae.ref===void 0||(De[Oe]=ae[Oe]);var Oe=arguments.length-2;if(Oe===1)De.children=Ie;else if(1<Oe){for(var At=Array(Oe),wt=0;wt<Oe;wt++)At[wt]=arguments[wt+2];De.children=At}return B(J.type,nt,De)},ft.createContext=function(J){return J={$$typeof:E,_currentValue:J,_currentValue2:J,_threadCount:0,Provider:null,Consumer:null},J.Provider=J,J.Consumer={$$typeof:m,_context:J},J},ft.createElement=function(J,ae,Ie){var De,nt={},Oe=null;if(ae!=null)for(De in ae.key!==void 0&&(Oe=""+ae.key),ae)j.call(ae,De)&&De!=="key"&&De!=="__self"&&De!=="__source"&&(nt[De]=ae[De]);var At=arguments.length-2;if(At===1)nt.children=Ie;else if(1<At){for(var wt=Array(At),Zt=0;Zt<At;Zt++)wt[Zt]=arguments[Zt+2];nt.children=wt}if(J&&J.defaultProps)for(De in At=J.defaultProps,At)nt[De]===void 0&&(nt[De]=At[De]);return B(J,Oe,nt)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(J){return{$$typeof:C,render:J}},ft.isValidElement=G,ft.lazy=function(J){return{$$typeof:D,_payload:{_status:-1,_result:J},_init:Le}},ft.memo=function(J,ae){return{$$typeof:w,type:J,compare:ae===void 0?null:ae}},ft.startTransition=function(J){var ae=V.T,Ie={};V.T=Ie;try{var De=J(),nt=V.S;nt!==null&&nt(Ie,De),typeof De=="object"&&De!==null&&typeof De.then=="function"&&De.then(ke,ut)}catch(Oe){ut(Oe)}finally{ae!==null&&Ie.types!==null&&(ae.types=Ie.types),V.T=ae}},ft.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},ft.use=function(J){return V.H.use(J)},ft.useActionState=function(J,ae,Ie){return V.H.useActionState(J,ae,Ie)},ft.useCallback=function(J,ae){return V.H.useCallback(J,ae)},ft.useContext=function(J){return V.H.useContext(J)},ft.useDebugValue=function(){},ft.useDeferredValue=function(J,ae){return V.H.useDeferredValue(J,ae)},ft.useEffect=function(J,ae){return V.H.useEffect(J,ae)},ft.useEffectEvent=function(J){return V.H.useEffectEvent(J)},ft.useId=function(){return V.H.useId()},ft.useImperativeHandle=function(J,ae,Ie){return V.H.useImperativeHandle(J,ae,Ie)},ft.useInsertionEffect=function(J,ae){return V.H.useInsertionEffect(J,ae)},ft.useLayoutEffect=function(J,ae){return V.H.useLayoutEffect(J,ae)},ft.useMemo=function(J,ae){return V.H.useMemo(J,ae)},ft.useOptimistic=function(J,ae){return V.H.useOptimistic(J,ae)},ft.useReducer=function(J,ae,Ie){return V.H.useReducer(J,ae,Ie)},ft.useRef=function(J){return V.H.useRef(J)},ft.useState=function(J){return V.H.useState(J)},ft.useSyncExternalStore=function(J,ae,Ie){return V.H.useSyncExternalStore(J,ae,Ie)},ft.useTransition=function(){return V.H.useTransition()},ft.version="19.2.3",ft}var _2;function A0(){return _2||(_2=1,b1.exports=yw()),b1.exports}var tt=A0(),I1={exports:{}},Bc={},R1={exports:{}},N1={};var E2;function _w(){return E2||(E2=1,(function(a){function e(K,se){var Le=K.length;K.push(se);e:for(;0<Le;){var ut=Le-1>>>1,mt=K[ut];if(0<h(mt,se))K[ut]=se,K[Le]=mt,Le=ut;else break e}}function n(K){return K.length===0?null:K[0]}function o(K){if(K.length===0)return null;var se=K[0],Le=K.pop();if(Le!==se){K[0]=Le;e:for(var ut=0,mt=K.length,J=mt>>>1;ut<J;){var ae=2*(ut+1)-1,Ie=K[ae],De=ae+1,nt=K[De];if(0>h(Ie,Le))De<mt&&0>h(nt,Ie)?(K[ut]=nt,K[De]=Le,ut=De):(K[ut]=Ie,K[ae]=Le,ut=ae);else if(De<mt&&0>h(nt,Le))K[ut]=nt,K[De]=Le,ut=De;else break e}}return se}function h(K,se){var Le=K.sortIndex-se.sortIndex;return Le!==0?Le:K.id-se.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;a.unstable_now=function(){return m.now()}}else{var E=Date,C=E.now();a.unstable_now=function(){return E.now()-C}}var v=[],w=[],D=1,M=null,z=3,te=!1,_e=!1,pe=!1,ve=!1,je=typeof setTimeout=="function"?setTimeout:null,Pe=typeof clearTimeout=="function"?clearTimeout:null,Ce=typeof setImmediate<"u"?setImmediate:null;function Be(K){for(var se=n(w);se!==null;){if(se.callback===null)o(w);else if(se.startTime<=K)o(w),se.sortIndex=se.expirationTime,e(v,se);else break;se=n(w)}}function ct(K){if(pe=!1,Be(K),!_e)if(n(v)!==null)_e=!0,ke||(ke=!0,q());else{var se=n(w);se!==null&&Q(ct,se.startTime-K)}}var ke=!1,V=-1,j=5,B=-1;function ee(){return ve?!0:!(a.unstable_now()-B<j)}function G(){if(ve=!1,ke){var K=a.unstable_now();B=K;var se=!0;try{e:{_e=!1,pe&&(pe=!1,Pe(V),V=-1),te=!0;var Le=z;try{t:{for(Be(K),M=n(v);M!==null&&!(M.expirationTime>K&&ee());){var ut=M.callback;if(typeof ut=="function"){M.callback=null,z=M.priorityLevel;var mt=ut(M.expirationTime<=K);if(K=a.unstable_now(),typeof mt=="function"){M.callback=mt,Be(K),se=!0;break t}M===n(v)&&o(v),Be(K)}else o(v);M=n(v)}if(M!==null)se=!0;else{var J=n(w);J!==null&&Q(ct,J.startTime-K),se=!1}}break e}finally{M=null,z=Le,te=!1}se=void 0}}finally{se?q():ke=!1}}}var q;if(typeof Ce=="function")q=function(){Ce(G)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,Ue=F.port2;F.port1.onmessage=G,q=function(){Ue.postMessage(null)}}else q=function(){je(G,0)};function Q(K,se){V=je(function(){K(a.unstable_now())},se)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(K){K.callback=null},a.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<K?Math.floor(1e3/K):5},a.unstable_getCurrentPriorityLevel=function(){return z},a.unstable_next=function(K){switch(z){case 1:case 2:case 3:var se=3;break;default:se=z}var Le=z;z=se;try{return K()}finally{z=Le}},a.unstable_requestPaint=function(){ve=!0},a.unstable_runWithPriority=function(K,se){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Le=z;z=K;try{return se()}finally{z=Le}},a.unstable_scheduleCallback=function(K,se,Le){var ut=a.unstable_now();switch(typeof Le=="object"&&Le!==null?(Le=Le.delay,Le=typeof Le=="number"&&0<Le?ut+Le:ut):Le=ut,K){case 1:var mt=-1;break;case 2:mt=250;break;case 5:mt=1073741823;break;case 4:mt=1e4;break;default:mt=5e3}return mt=Le+mt,K={id:D++,callback:se,priorityLevel:K,startTime:Le,expirationTime:mt,sortIndex:-1},Le>ut?(K.sortIndex=Le,e(w,K),n(v)===null&&K===n(w)&&(pe?(Pe(V),V=-1):pe=!0,Q(ct,Le-ut))):(K.sortIndex=mt,e(v,K),_e||te||(_e=!0,ke||(ke=!0,q()))),K},a.unstable_shouldYield=ee,a.unstable_wrapCallback=function(K){var se=z;return function(){var Le=z;z=se;try{return K.apply(this,arguments)}finally{z=Le}}}})(N1)),N1}var x2;function Ew(){return x2||(x2=1,R1.exports=_w()),R1.exports}var O1={exports:{}},Vi={};var A2;function xw(){if(A2)return Vi;A2=1;var a=A0();function e(v){var w="https://react.dev/errors/"+v;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var D=2;D<arguments.length;D++)w+="&args[]="+encodeURIComponent(arguments[D])}return"Minified React error #"+v+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},h=Symbol.for("react.portal");function m(v,w,D){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:h,key:M==null?null:""+M,children:v,containerInfo:w,implementation:D}}var E=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function C(v,w){if(v==="font")return"";if(typeof w=="string")return w==="use-credentials"?w:""}return Vi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Vi.createPortal=function(v,w){var D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)throw Error(e(299));return m(v,w,null,D)},Vi.flushSync=function(v){var w=E.T,D=o.p;try{if(E.T=null,o.p=2,v)return v()}finally{E.T=w,o.p=D,o.d.f()}},Vi.preconnect=function(v,w){typeof v=="string"&&(w?(w=w.crossOrigin,w=typeof w=="string"?w==="use-credentials"?w:"":void 0):w=null,o.d.C(v,w))},Vi.prefetchDNS=function(v){typeof v=="string"&&o.d.D(v)},Vi.preinit=function(v,w){if(typeof v=="string"&&w&&typeof w.as=="string"){var D=w.as,M=C(D,w.crossOrigin),z=typeof w.integrity=="string"?w.integrity:void 0,te=typeof w.fetchPriority=="string"?w.fetchPriority:void 0;D==="style"?o.d.S(v,typeof w.precedence=="string"?w.precedence:void 0,{crossOrigin:M,integrity:z,fetchPriority:te}):D==="script"&&o.d.X(v,{crossOrigin:M,integrity:z,fetchPriority:te,nonce:typeof w.nonce=="string"?w.nonce:void 0})}},Vi.preinitModule=function(v,w){if(typeof v=="string")if(typeof w=="object"&&w!==null){if(w.as==null||w.as==="script"){var D=C(w.as,w.crossOrigin);o.d.M(v,{crossOrigin:D,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0})}}else w==null&&o.d.M(v)},Vi.preload=function(v,w){if(typeof v=="string"&&typeof w=="object"&&w!==null&&typeof w.as=="string"){var D=w.as,M=C(D,w.crossOrigin);o.d.L(v,D,{crossOrigin:M,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0,type:typeof w.type=="string"?w.type:void 0,fetchPriority:typeof w.fetchPriority=="string"?w.fetchPriority:void 0,referrerPolicy:typeof w.referrerPolicy=="string"?w.referrerPolicy:void 0,imageSrcSet:typeof w.imageSrcSet=="string"?w.imageSrcSet:void 0,imageSizes:typeof w.imageSizes=="string"?w.imageSizes:void 0,media:typeof w.media=="string"?w.media:void 0})}},Vi.preloadModule=function(v,w){if(typeof v=="string")if(w){var D=C(w.as,w.crossOrigin);o.d.m(v,{as:typeof w.as=="string"&&w.as!=="script"?w.as:void 0,crossOrigin:D,integrity:typeof w.integrity=="string"?w.integrity:void 0})}else o.d.m(v)},Vi.requestFormReset=function(v){o.d.r(v)},Vi.unstable_batchedUpdates=function(v,w){return v(w)},Vi.useFormState=function(v,w,D){return E.H.useFormState(v,w,D)},Vi.useFormStatus=function(){return E.H.useHostTransitionStatus()},Vi.version="19.2.3",Vi}var w2;function Aw(){if(w2)return O1.exports;w2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),O1.exports=xw(),O1.exports}var T2;function ww(){if(T2)return Bc;T2=1;var a=Ew(),e=A0(),n=Aw();function o(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var r=t,c=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(c=r.return),t=r.return;while(t)}return r.tag===3?c:null}function E(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function C(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function v(t){if(m(t)!==t)throw Error(o(188))}function w(t){var r=t.alternate;if(!r){if(r=m(t),r===null)throw Error(o(188));return r!==t?null:t}for(var c=t,d=r;;){var _=c.return;if(_===null)break;var A=_.alternate;if(A===null){if(d=_.return,d!==null){c=d;continue}break}if(_.child===A.child){for(A=_.child;A;){if(A===c)return v(_),t;if(A===d)return v(_),r;A=A.sibling}throw Error(o(188))}if(c.return!==d.return)c=_,d=A;else{for(var I=!1,L=_.child;L;){if(L===c){I=!0,c=_,d=A;break}if(L===d){I=!0,d=_,c=A;break}L=L.sibling}if(!I){for(L=A.child;L;){if(L===c){I=!0,c=A,d=_;break}if(L===d){I=!0,d=A,c=_;break}L=L.sibling}if(!I)throw Error(o(189))}}if(c.alternate!==d)throw Error(o(190))}if(c.tag!==3)throw Error(o(188));return c.stateNode.current===c?t:r}function D(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=D(t),r!==null)return r;t=t.sibling}return null}var M=Object.assign,z=Symbol.for("react.element"),te=Symbol.for("react.transitional.element"),_e=Symbol.for("react.portal"),pe=Symbol.for("react.fragment"),ve=Symbol.for("react.strict_mode"),je=Symbol.for("react.profiler"),Pe=Symbol.for("react.consumer"),Ce=Symbol.for("react.context"),Be=Symbol.for("react.forward_ref"),ct=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function q(t){return t===null||typeof t!="object"?null:(t=G&&t[G]||t["@@iterator"],typeof t=="function"?t:null)}var F=Symbol.for("react.client.reference");function Ue(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===F?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pe:return"Fragment";case je:return"Profiler";case ve:return"StrictMode";case ct:return"Suspense";case ke:return"SuspenseList";case B:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case _e:return"Portal";case Ce:return t.displayName||"Context";case Pe:return(t._context.displayName||"Context")+".Consumer";case Be:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return r=t.displayName||null,r!==null?r:Ue(t.type)||"Memo";case j:r=t._payload,t=t._init;try{return Ue(t(r))}catch{}}return null}var Q=Array.isArray,K=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Le={pending:!1,data:null,method:null,action:null},ut=[],mt=-1;function J(t){return{current:t}}function ae(t){0>mt||(t.current=ut[mt],ut[mt]=null,mt--)}function Ie(t,r){mt++,ut[mt]=t.current,t.current=r}var De=J(null),nt=J(null),Oe=J(null),At=J(null);function wt(t,r){switch(Ie(Oe,r),Ie(nt,t),Ie(De,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?Vp(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=Vp(r),t=Up(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ae(De),Ie(De,t)}function Zt(){ae(De),ae(nt),ae(Oe)}function ur(t){t.memoizedState!==null&&Ie(At,t);var r=De.current,c=Up(r,t.type);r!==c&&(Ie(nt,t),Ie(De,c))}function Fn(t){nt.current===t&&(ae(De),ae(nt)),At.current===t&&(ae(At),Dc._currentValue=Le)}var Qr,Tt;function fi(t){if(Qr===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);Qr=r&&r[1]||"",Tt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qr+t+Tt}var Oi=!1;function hr(t,r){if(!t||Oi)return"";Oi=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var Ee=function(){throw Error()};if(Object.defineProperty(Ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ee,[])}catch(ge){var ue=ge}Reflect.construct(t,[],Ee)}else{try{Ee.call()}catch(ge){ue=ge}t.call(Ee.prototype)}}else{try{throw Error()}catch(ge){ue=ge}(Ee=t())&&typeof Ee.catch=="function"&&Ee.catch(function(){})}}catch(ge){if(ge&&ue&&typeof ge.stack=="string")return[ge.stack,ue.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=d.DetermineComponentFrameRoot(),I=A[0],L=A[1];if(I&&L){var Y=I.split(`
`),ce=L.split(`
`);for(_=d=0;d<Y.length&&!Y[d].includes("DetermineComponentFrameRoot");)d++;for(;_<ce.length&&!ce[_].includes("DetermineComponentFrameRoot");)_++;if(d===Y.length||_===ce.length)for(d=Y.length-1,_=ce.length-1;1<=d&&0<=_&&Y[d]!==ce[_];)_--;for(;1<=d&&0<=_;d--,_--)if(Y[d]!==ce[_]){if(d!==1||_!==1)do if(d--,_--,0>_||Y[d]!==ce[_]){var me=`
`+Y[d].replace(" at new "," at ");return t.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",t.displayName)),me}while(1<=d&&0<=_);break}}}finally{Oi=!1,Error.prepareStackTrace=c}return(c=t?t.displayName||t.name:"")?fi(c):""}function Rn(t,r){switch(t.tag){case 26:case 27:case 5:return fi(t.type);case 16:return fi("Lazy");case 13:return t.child!==r&&r!==null?fi("Suspense Fallback"):fi("Suspense");case 19:return fi("SuspenseList");case 0:case 15:return hr(t.type,!1);case 11:return hr(t.type.render,!1);case 1:return hr(t.type,!0);case 31:return fi("Activity");default:return""}}function Gt(t){try{var r="",c=null;do r+=Rn(t,c),c=t,t=t.return;while(t);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Ze=Object.prototype.hasOwnProperty,An=a.unstable_scheduleCallback,Fe=a.unstable_cancelCallback,ha=a.unstable_shouldYield,mo=a.unstable_requestPaint,mn=a.unstable_now,Zr=a.unstable_getCurrentPriorityLevel,di=a.unstable_ImmediatePriority,fa=a.unstable_UserBlockingPriority,gi=a.unstable_NormalPriority,ni=a.unstable_LowPriority,po=a.unstable_IdlePriority,Is=a.log,$o=a.unstable_setDisableYieldValue,qt=null,Se=null;function Xt(t){if(typeof Is=="function"&&$o(t),Se&&typeof Se.setStrictMode=="function")try{Se.setStrictMode(qt,t)}catch{}}var it=Math.clz32?Math.clz32:da,cn=Math.log,Nr=Math.LN2;function da(t){return t>>>=0,t===0?32:31-(cn(t)/Nr|0)|0}var fr=256,xt=262144,sn=4194304;function dr(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function gr(t,r,c){var d=t.pendingLanes;if(d===0)return 0;var _=0,A=t.suspendedLanes,I=t.pingedLanes;t=t.warmLanes;var L=d&134217727;return L!==0?(d=L&~A,d!==0?_=dr(d):(I&=L,I!==0?_=dr(I):c||(c=L&~t,c!==0&&(_=dr(c))))):(L=d&~A,L!==0?_=dr(L):I!==0?_=dr(I):c||(c=d&~t,c!==0&&(_=dr(c)))),_===0?0:r!==0&&r!==_&&(r&A)===0&&(A=_&-_,c=r&-r,A>=c||A===32&&(c&4194048)!==0)?r:_}function Nn(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function yo(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zn(){var t=sn;return sn<<=1,(sn&62914560)===0&&(sn=4194304),t}function mi(t){for(var r=[],c=0;31>c;c++)r.push(t);return r}function Or(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Qi(t,r,c,d,_,A){var I=t.pendingLanes;t.pendingLanes=c,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=c,t.entangledLanes&=c,t.errorRecoveryDisabledLanes&=c,t.shellSuspendCounter=0;var L=t.entanglements,Y=t.expirationTimes,ce=t.hiddenUpdates;for(c=I&~c;0<c;){var me=31-it(c),Ee=1<<me;L[me]=0,Y[me]=-1;var ue=ce[me];if(ue!==null)for(ce[me]=null,me=0;me<ue.length;me++){var ge=ue[me];ge!==null&&(ge.lane&=-536870913)}c&=~Ee}d!==0&&Rs(t,d,0),A!==0&&_===0&&t.tag!==0&&(t.suspendedLanes|=A&~(I&~r))}function Rs(t,r,c){t.pendingLanes|=r,t.suspendedLanes&=~r;var d=31-it(r);t.entangledLanes|=r,t.entanglements[d]=t.entanglements[d]|1073741824|c&261930}function mr(t,r){var c=t.entangledLanes|=r;for(t=t.entanglements;c;){var d=31-it(c),_=1<<d;_&r|t[d]&r&&(t[d]|=r),c&=~_}}function Ns(t,r){var c=r&-r;return c=(c&42)!==0?1:Ln(c),(c&(t.suspendedLanes|r))!==0?0:c}function Ln(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function pi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function yi(){var t=se.p;return t!==0?t:(t=window.event,t===void 0?32:l2(t.type))}function Me(t,r){var c=se.p;try{return se.p=t,r()}finally{se.p=c}}var oi=Math.random().toString(36).slice(2),wn="__reactFiber$"+oi,jt="__reactProps$"+oi,_i="__reactContainer$"+oi,Jr="__reactEvents$"+oi,ga="__reactListeners$"+oi,Hi="__reactHandles$"+oi,el="__reactResources$"+oi,Dr="__reactMarker$"+oi;function Ei(t){delete t[wn],delete t[jt],delete t[Jr],delete t[ga],delete t[Hi]}function dn(t){var r=t[wn];if(r)return r;for(var c=t.parentNode;c;){if(r=c[_i]||c[wn]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(t=Xp(t);t!==null;){if(c=t[wn])return c;t=Xp(t)}return r}t=c,c=t.parentNode}return null}function St(t){if(t=t[wn]||t[_i]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Di(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(o(33))}function ii(t){var r=t[el];return r||(r=t[el]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Tn(t){t[Dr]=!0}var Ae=new Set,_o={};function Ht(t,r){xi(t,r),xi(t+"Capture",r)}function xi(t,r){for(_o[t]=r,t=0;t<r.length;t++)Ae.add(r[t])}var Eo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ot={},bt={};function _t(t){return Ze.call(bt,t)?!0:Ze.call(Ot,t)?!1:Eo.test(t)?bt[t]=!0:(Ot[t]=!0,!1)}function us(t,r,c){if(_t(r))if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+c)}}function Ai(t,r,c){if(c===null)t.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+c)}}function Cn(t,r,c,d){if(d===null)t.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(c);return}t.setAttributeNS(r,c,""+d)}}function Ct(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wi(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function xo(t,r,c){var d=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var _=d.get,A=d.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return _.call(this)},set:function(I){c=""+I,A.call(this,I)}}),Object.defineProperty(t,r,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(I){c=""+I},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function $e(t){if(!t._valueTracker){var r=wi(t)?"checked":"value";t._valueTracker=xo(t,r,""+t[r])}}function Mi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var c=r.getValue(),d="";return t&&(d=wi(t)?t.checked?"true":"false":t.value),t=d,t!==c?(r.setValue(t),!0):!1}function Mr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Zi=/[\n"\\]/g;function pt(t){return t.replace(Zi,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function On(t,r,c,d,_,A,I,L){t.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?t.type=I:t.removeAttribute("type"),r!=null?I==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+Ct(r)):t.value!==""+Ct(r)&&(t.value=""+Ct(r)):I!=="submit"&&I!=="reset"||t.removeAttribute("value"),r!=null?U(t,I,Ct(r)):c!=null?U(t,I,Ct(c)):d!=null&&t.removeAttribute("value"),_==null&&A!=null&&(t.defaultChecked=!!A),_!=null&&(t.checked=_&&typeof _!="function"&&typeof _!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?t.name=""+Ct(L):t.removeAttribute("name")}function oe(t,r,c,d,_,A,I,L){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(t.type=A),r!=null||c!=null){if(!(A!=="submit"&&A!=="reset"||r!=null)){$e(t);return}c=c!=null?""+Ct(c):"",r=r!=null?""+Ct(r):c,L||r===t.value||(t.value=r),t.defaultValue=r}d=d??_,d=typeof d!="function"&&typeof d!="symbol"&&!!d,t.checked=L?t.checked:!!d,t.defaultChecked=!!d,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(t.name=I),$e(t)}function U(t,r,c){r==="number"&&Mr(t.ownerDocument)===t||t.defaultValue===""+c||(t.defaultValue=""+c)}function Ge(t,r,c,d){if(t=t.options,r){r={};for(var _=0;_<c.length;_++)r["$"+c[_]]=!0;for(c=0;c<t.length;c++)_=r.hasOwnProperty("$"+t[c].value),t[c].selected!==_&&(t[c].selected=_),_&&d&&(t[c].defaultSelected=!0)}else{for(c=""+Ct(c),r=null,_=0;_<t.length;_++){if(t[_].value===c){t[_].selected=!0,d&&(t[_].defaultSelected=!0);return}r!==null||t[_].disabled||(r=t[_])}r!==null&&(r.selected=!0)}}function Dn(t,r,c){if(r!=null&&(r=""+Ct(r),r!==t.value&&(t.value=r),c==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=c!=null?""+Ct(c):""}function jn(t,r,c,d){if(r==null){if(d!=null){if(c!=null)throw Error(o(92));if(Q(d)){if(1<d.length)throw Error(o(93));d=d[0]}c=d}c==null&&(c=""),r=c}c=Ct(r),t.defaultValue=c,d=t.textContent,d===c&&d!==""&&d!==null&&(t.value=d),$e(t)}function Pi(t,r){if(r){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=r;return}}t.textContent=r}var ma=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function li(t,r,c){var d=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":d?t.setProperty(r,c):typeof c!="number"||c===0||ma.has(r)?r==="float"?t.cssFloat=c:t[r]=(""+c).trim():t[r]=c+"px"}function Ye(t,r,c){if(r!=null&&typeof r!="object")throw Error(o(62));if(t=t.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?t.setProperty(d,""):d==="float"?t.cssFloat="":t[d]="");for(var _ in r)d=r[_],r.hasOwnProperty(_)&&c[_]!==d&&li(t,_,d)}else for(var A in r)r.hasOwnProperty(A)&&li(t,A,r[A])}function Jt(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ao=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fs(t){return hs.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Li(){}var Os=null;function Ji(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var un=null,ki=null;function Bi(t){var r=St(t);if(r&&(t=r.stateNode)){var c=t[jt]||null;e:switch(t=r.stateNode,r.type){case"input":if(On(t,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+pt(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var d=c[r];if(d!==t&&d.form===t.form){var _=d[jt]||null;if(!_)throw Error(o(90));On(d,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(r=0;r<c.length;r++)d=c[r],d.form===t.form&&Mi(d)}break e;case"textarea":Dn(t,c.value,c.defaultValue);break e;case"select":r=c.value,r!=null&&Ge(t,!!c.multiple,r,!1)}}}var We=!1;function ds(t,r,c){if(We)return t(r,c);We=!0;try{var d=t(r);return d}finally{if(We=!1,(un!==null||ki!==null)&&(rh(),un&&(r=un,t=ki,ki=un=null,Bi(r),t)))for(r=0;r<t.length;r++)Bi(t[r])}}function Je(t,r){var c=t.stateNode;if(c===null)return null;var d=c[jt]||null;if(d===null)return null;c=d[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(t=t.type,d=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!d;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(o(231,r,typeof c));return c}var $t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ds=!1;if($t)try{var Yt={};Object.defineProperty(Yt,"passive",{get:function(){Ds=!0}}),window.addEventListener("test",Yt,Yt),window.removeEventListener("test",Yt,Yt)}catch{Ds=!1}var pr=null,yr=null,Ms=null;function $r(){if(Ms)return Ms;var t,r=yr,c=r.length,d,_="value"in pr?pr.value:pr.textContent,A=_.length;for(t=0;t<c&&r[t]===_[t];t++);var I=c-t;for(d=1;d<=I&&r[c-d]===_[A-d];d++);return Ms=_.slice(t,1<d?1-d:void 0)}function _r(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Gi(){return!0}function $i(){return!1}function Mn(t){function r(c,d,_,A,I){this._reactName=c,this._targetInst=_,this.type=d,this.nativeEvent=A,this.target=I,this.currentTarget=null;for(var L in t)t.hasOwnProperty(L)&&(c=t[L],this[L]=c?c(A):A[L]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Gi:$i,this.isPropagationStopped=$i,this}return M(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),r}var qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=Mn(qi),es=M({},qi,{view:0,detail:0}),pa=Mn(es),ts,ya,Pr,_a=M({},es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pr&&(Pr&&t.type==="mousemove"?(ts=t.screenX-Pr.screenX,ya=t.screenY-Pr.screenY):ya=ts=0,Pr=t),ts)},movementY:function(t){return"movementY"in t?t.movementY:ya}}),Ft=Mn(_a),gs=M({},_a,{dataTransfer:0}),Ps=Mn(gs),Er=M({},es,{relatedTarget:0}),Ls=Mn(Er),he=M({},qi,{animationName:0,elapsedTime:0,pseudoElement:0}),ht=Mn(he),vn=M({},qi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ks=Mn(vn),wo=M({},qi,{data:0}),Lr=Mn(wo),tl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ea={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ea[t])?!!r[t]:!1}function kr(){return Sn}var vt=M({},es,{key:function(t){if(t.key){var r=tl[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=_r(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(t){return t.type==="keypress"?_r(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_r(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bs=Mn(vt),Br=M({},_a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),It=Mn(Br),p=M({},es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr}),S=Mn(p),R=M({},qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),k=Mn(R),ie=M({},_a,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),de=Mn(ie),Ne=M({},qi,{newState:0,oldState:0}),at=Mn(Ne),bn=[9,13,27,32],Vt=$t&&"CompositionEvent"in window,hn=null;$t&&"documentMode"in document&&(hn=document.documentMode);var Xi=$t&&"TextEvent"in window&&!hn,Vr=$t&&(!Vt||hn&&8<hn&&11>=hn),ci=" ",Yi=!1;function Vs(t,r){switch(t){case"keyup":return bn.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xa=!1;function ms(t,r){switch(t){case"compositionend":return Ur(r);case"keypress":return r.which!==32?null:(Yi=!0,ci);case"textInput":return t=r.data,t===ci&&Yi?null:t;default:return null}}function il(t,r){if(xa)return t==="compositionend"||!Vt&&Vs(t,r)?(t=$r(),Ms=yr=pr=null,xa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Vr&&r.locale!=="ko"?null:r.data;default:return null}}var er={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nc(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!er[t.type]:r==="textarea"}function xr(t,r,c,d){un?ki?ki.push(d):ki=[d]:un=d,r=hh(r,"onChange"),0<r.length&&(c=new pn("onChange","change",null,c,d),t.push({event:c,listeners:r}))}var To=null,Us=null;function Uf(t){Dp(t,0)}function Co(t){var r=Di(t);if(Mi(r))return t}function Ar(t,r){if(t==="change")return r}var wu=!1;if($t){var vo;if($t){var Fs="oninput"in document;if(!Fs){var Dt=document.createElement("div");Dt.setAttribute("oninput","return;"),Fs=typeof Dt.oninput=="function"}vo=Fs}else vo=!1;wu=vo&&(!document.documentMode||9<document.documentMode)}function So(){To&&(To.detachEvent("onpropertychange",N),Us=To=null)}function N(t){if(t.propertyName==="value"&&Co(Us)){var r=[];xr(r,Us,t,Ji(t)),ds(Uf,r)}}function i(t,r,c){t==="focusin"?(So(),To=r,Us=c,To.attachEvent("onpropertychange",N)):t==="focusout"&&So()}function s(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Co(Us)}function l(t,r){if(t==="click")return Co(r)}function u(t,r){if(t==="input"||t==="change")return Co(r)}function f(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var g=typeof Object.is=="function"?Object.is:f;function y(t,r){if(g(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var c=Object.keys(t),d=Object.keys(r);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var _=c[d];if(!Ze.call(r,_)||!g(t[_],r[_]))return!1}return!0}function x(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function T(t,r){var c=x(t);t=0;for(var d;c;){if(c.nodeType===3){if(d=t+c.textContent.length,t<=r&&d>=r)return{node:c,offset:r-t};t=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=x(c)}}function b(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?b(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function O(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Mr(t.document);r instanceof t.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)t=r.contentWindow;else break;r=Mr(t.document)}return r}function P(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var H=$t&&"documentMode"in document&&11>=document.documentMode,W=null,Z=null,re=null,fe=!1;function Re(t,r,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;fe||W==null||W!==Mr(d)||(d=W,"selectionStart"in d&&P(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),re&&y(re,d)||(re=d,d=hh(Z,"onSelect"),0<d.length&&(r=new pn("onSelect","select",null,r,c),t.push({event:r,listeners:d}),r.target=W)))}function be(t,r){var c={};return c[t.toLowerCase()]=r.toLowerCase(),c["Webkit"+t]="webkit"+r,c["Moz"+t]="moz"+r,c}var Te={animationend:be("Animation","AnimationEnd"),animationiteration:be("Animation","AnimationIteration"),animationstart:be("Animation","AnimationStart"),transitionrun:be("Transition","TransitionRun"),transitionstart:be("Transition","TransitionStart"),transitioncancel:be("Transition","TransitionCancel"),transitionend:be("Transition","TransitionEnd")},Et={},ot={};$t&&(ot=document.createElement("div").style,"AnimationEvent"in window||(delete Te.animationend.animation,delete Te.animationiteration.animation,delete Te.animationstart.animation),"TransitionEvent"in window||delete Te.transitionend.transition);function kn(t){if(Et[t])return Et[t];if(!Te[t])return t;var r=Te[t],c;for(c in r)if(r.hasOwnProperty(c)&&c in ot)return Et[t]=r[c];return t}var tr=kn("animationend"),Ti=kn("animationiteration"),en=kn("animationstart"),ri=kn("transitionrun"),Wi=kn("transitionstart"),Aa=kn("transitioncancel"),zs=kn("transitionend"),Tu=new Map,ic="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ic.push("scrollEnd");function ns(t,r){Tu.set(t,r),Ht(r,[t])}var Cu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Fr=[],rl=0,Ff=0;function vu(){for(var t=rl,r=Ff=rl=0;r<t;){var c=Fr[r];Fr[r++]=null;var d=Fr[r];Fr[r++]=null;var _=Fr[r];Fr[r++]=null;var A=Fr[r];if(Fr[r++]=null,d!==null&&_!==null){var I=d.pending;I===null?_.next=_:(_.next=I.next,I.next=_),d.pending=_}A!==0&&dg(c,_,A)}}function Su(t,r,c,d){Fr[rl++]=t,Fr[rl++]=r,Fr[rl++]=c,Fr[rl++]=d,Ff|=d,t.lanes|=d,t=t.alternate,t!==null&&(t.lanes|=d)}function zf(t,r,c,d){return Su(t,r,c,d),bu(t)}function bo(t,r){return Su(t,null,null,r),bu(t)}function dg(t,r,c){t.lanes|=c;var d=t.alternate;d!==null&&(d.lanes|=c);for(var _=!1,A=t.return;A!==null;)A.childLanes|=c,d=A.alternate,d!==null&&(d.childLanes|=c),A.tag===22&&(t=A.stateNode,t===null||t._visibility&1||(_=!0)),t=A,A=A.return;return t.tag===3?(A=t.stateNode,_&&r!==null&&(_=31-it(c),t=A.hiddenUpdates,d=t[_],d===null?t[_]=[r]:d.push(r),r.lane=c|536870912),A):null}function bu(t){if(50<vc)throw vc=0,Qd=null,Error(o(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var sl={};function Qx(t,r,c,d){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(t,r,c,d){return new Qx(t,r,c,d)}function jf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function js(t,r){var c=t.alternate;return c===null?(c=wr(t.tag,r,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=r,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&65011712,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,r=t.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c.refCleanup=t.refCleanup,c}function gg(t,r){t.flags&=65011714;var c=t.alternate;return c===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=c.childLanes,t.lanes=c.lanes,t.child=c.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=c.memoizedProps,t.memoizedState=c.memoizedState,t.updateQueue=c.updateQueue,t.type=c.type,r=c.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Iu(t,r,c,d,_,A){var I=0;if(d=t,typeof t=="function")jf(t)&&(I=1);else if(typeof t=="string")I=tw(t,c,De.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case B:return t=wr(31,c,r,_),t.elementType=B,t.lanes=A,t;case pe:return Io(c.children,_,A,r);case ve:I=8,_|=24;break;case je:return t=wr(12,c,r,_|2),t.elementType=je,t.lanes=A,t;case ct:return t=wr(13,c,r,_),t.elementType=ct,t.lanes=A,t;case ke:return t=wr(19,c,r,_),t.elementType=ke,t.lanes=A,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ce:I=10;break e;case Pe:I=9;break e;case Be:I=11;break e;case V:I=14;break e;case j:I=16,d=null;break e}I=29,c=Error(o(130,t===null?"null":typeof t,"")),d=null}return r=wr(I,c,r,_),r.elementType=t,r.type=d,r.lanes=A,r}function Io(t,r,c,d){return t=wr(7,t,d,r),t.lanes=c,t}function Hf(t,r,c){return t=wr(6,t,null,r),t.lanes=c,t}function mg(t){var r=wr(18,null,null,0);return r.stateNode=t,r}function Gf(t,r,c){return r=wr(4,t.children!==null?t.children:[],t.key,r),r.lanes=c,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var pg=new WeakMap;function zr(t,r){if(typeof t=="object"&&t!==null){var c=pg.get(t);return c!==void 0?c:(r={value:t,source:r,stack:Gt(r)},pg.set(t,r),r)}return{value:t,source:r,stack:Gt(r)}}var al=[],ol=0,Ru=null,rc=0,jr=[],Hr=0,wa=null,ps=1,ys="";function Hs(t,r){al[ol++]=rc,al[ol++]=Ru,Ru=t,rc=r}function yg(t,r,c){jr[Hr++]=ps,jr[Hr++]=ys,jr[Hr++]=wa,wa=t;var d=ps;t=ys;var _=32-it(d)-1;d&=~(1<<_),c+=1;var A=32-it(r)+_;if(30<A){var I=_-_%5;A=(d&(1<<I)-1).toString(32),d>>=I,_-=I,ps=1<<32-it(r)+_|c<<_|d,ys=A+t}else ps=1<<A|c<<_|d,ys=t}function qf(t){t.return!==null&&(Hs(t,1),yg(t,1,0))}function Xf(t){for(;t===Ru;)Ru=al[--ol],al[ol]=null,rc=al[--ol],al[ol]=null;for(;t===wa;)wa=jr[--Hr],jr[Hr]=null,ys=jr[--Hr],jr[Hr]=null,ps=jr[--Hr],jr[Hr]=null}function _g(t,r){jr[Hr++]=ps,jr[Hr++]=ys,jr[Hr++]=wa,ps=r.id,ys=r.overflow,wa=t}var Ci=null,yn=null,Ut=!1,Ta=null,Gr=!1,Yf=Error(o(519));function Ca(t){var r=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw sc(zr(r,t)),Yf}function Eg(t){var r=t.stateNode,c=t.type,d=t.memoizedProps;switch(r[wn]=t,r[jt]=d,c){case"dialog":Nt("cancel",r),Nt("close",r);break;case"iframe":case"object":case"embed":Nt("load",r);break;case"video":case"audio":for(c=0;c<bc.length;c++)Nt(bc[c],r);break;case"source":Nt("error",r);break;case"img":case"image":case"link":Nt("error",r),Nt("load",r);break;case"details":Nt("toggle",r);break;case"input":Nt("invalid",r),oe(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Nt("invalid",r);break;case"textarea":Nt("invalid",r),jn(r,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||d.suppressHydrationWarning===!0||kp(r.textContent,c)?(d.popover!=null&&(Nt("beforetoggle",r),Nt("toggle",r)),d.onScroll!=null&&Nt("scroll",r),d.onScrollEnd!=null&&Nt("scrollend",r),d.onClick!=null&&(r.onclick=Li),r=!0):r=!1,r||Ca(t,!0)}function xg(t){for(Ci=t.return;Ci;)switch(Ci.tag){case 5:case 31:case 13:Gr=!1;return;case 27:case 3:Gr=!0;return;default:Ci=Ci.return}}function ll(t){if(t!==Ci)return!1;if(!Ut)return xg(t),Ut=!0,!1;var r=t.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=t.type,c=!(c!=="form"&&c!=="button")||h1(t.type,t.memoizedProps)),c=!c),c&&yn&&Ca(t),xg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));yn=qp(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));yn=qp(t)}else r===27?(r=yn,Va(t.type)?(t=p1,p1=null,yn=t):yn=r):yn=Ci?Xr(t.stateNode.nextSibling):null;return!0}function Ro(){yn=Ci=null,Ut=!1}function Wf(){var t=Ta;return t!==null&&(sr===null?sr=t:sr.push.apply(sr,t),Ta=null),t}function sc(t){Ta===null?Ta=[t]:Ta.push(t)}var Kf=J(null),No=null,Gs=null;function va(t,r,c){Ie(Kf,r._currentValue),r._currentValue=c}function qs(t){t._currentValue=Kf.current,ae(Kf)}function Qf(t,r,c){for(;t!==null;){var d=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),t===c)break;t=t.return}}function Zf(t,r,c,d){var _=t.child;for(_!==null&&(_.return=t);_!==null;){var A=_.dependencies;if(A!==null){var I=_.child;A=A.firstContext;e:for(;A!==null;){var L=A;A=_;for(var Y=0;Y<r.length;Y++)if(L.context===r[Y]){A.lanes|=c,L=A.alternate,L!==null&&(L.lanes|=c),Qf(A.return,c,t),d||(I=null);break e}A=L.next}}else if(_.tag===18){if(I=_.return,I===null)throw Error(o(341));I.lanes|=c,A=I.alternate,A!==null&&(A.lanes|=c),Qf(I,c,t),I=null}else I=_.child;if(I!==null)I.return=_;else for(I=_;I!==null;){if(I===t){I=null;break}if(_=I.sibling,_!==null){_.return=I.return,I=_;break}I=I.return}_=I}}function cl(t,r,c,d){t=null;for(var _=r,A=!1;_!==null;){if(!A){if((_.flags&524288)!==0)A=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var I=_.alternate;if(I===null)throw Error(o(387));if(I=I.memoizedProps,I!==null){var L=_.type;g(_.pendingProps.value,I.value)||(t!==null?t.push(L):t=[L])}}else if(_===At.current){if(I=_.alternate,I===null)throw Error(o(387));I.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(t!==null?t.push(Dc):t=[Dc])}_=_.return}t!==null&&Zf(r,t,c,d),r.flags|=262144}function Nu(t){for(t=t.firstContext;t!==null;){if(!g(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Oo(t){No=t,Gs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function vi(t){return Ag(No,t)}function Ou(t,r){return No===null&&Oo(t),Ag(t,r)}function Ag(t,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},Gs===null){if(t===null)throw Error(o(308));Gs=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else Gs=Gs.next=r;return c}var Zx=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(c,d){t.push(d)}};this.abort=function(){r.aborted=!0,t.forEach(function(c){return c()})}},Jx=a.unstable_scheduleCallback,$x=a.unstable_NormalPriority,Yn={$$typeof:Ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jf(){return{controller:new Zx,data:new Map,refCount:0}}function ac(t){t.refCount--,t.refCount===0&&Jx($x,function(){t.controller.abort()})}var oc=null,$f=0,ul=0,hl=null;function eA(t,r){if(oc===null){var c=oc=[];$f=0,ul=n1(),hl={status:"pending",value:void 0,then:function(d){c.push(d)}}}return $f++,r.then(wg,wg),r}function wg(){if(--$f===0&&oc!==null){hl!==null&&(hl.status="fulfilled");var t=oc;oc=null,ul=0,hl=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function tA(t,r){var c=[],d={status:"pending",value:null,reason:null,then:function(_){c.push(_)}};return t.then(function(){d.status="fulfilled",d.value=r;for(var _=0;_<c.length;_++)(0,c[_])(r)},function(_){for(d.status="rejected",d.reason=_,_=0;_<c.length;_++)(0,c[_])(void 0)}),d}var Tg=K.S;K.S=function(t,r){ap=mn(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&eA(t,r),Tg!==null&&Tg(t,r)};var Do=J(null);function ed(){var t=Do.current;return t!==null?t:fn.pooledCache}function Du(t,r){r===null?Ie(Do,Do.current):Ie(Do,r.pool)}function Cg(){var t=ed();return t===null?null:{parent:Yn._currentValue,pool:t}}var fl=Error(o(460)),td=Error(o(474)),Mu=Error(o(542)),Pu={then:function(){}};function vg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Sg(t,r,c){switch(c=t[c],c===void 0?t.push(r):c!==r&&(r.then(Li,Li),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Ig(t),t;default:if(typeof r.status=="string")r.then(Li,Li);else{if(t=fn,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=r,t.status="pending",t.then(function(d){if(r.status==="pending"){var _=r;_.status="fulfilled",_.value=d}},function(d){if(r.status==="pending"){var _=r;_.status="rejected",_.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Ig(t),t}throw Po=r,fl}}function Mo(t){try{var r=t._init;return r(t._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Po=c,fl):c}}var Po=null;function bg(){if(Po===null)throw Error(o(459));var t=Po;return Po=null,t}function Ig(t){if(t===fl||t===Mu)throw Error(o(483))}var dl=null,lc=0;function Lu(t){var r=lc;return lc+=1,dl===null&&(dl=[]),Sg(dl,t,r)}function cc(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function ku(t,r){throw r.$$typeof===z?Error(o(525)):(t=Object.prototype.toString.call(r),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Rg(t){function r(ne,$){if(t){var le=ne.deletions;le===null?(ne.deletions=[$],ne.flags|=16):le.push($)}}function c(ne,$){if(!t)return null;for(;$!==null;)r(ne,$),$=$.sibling;return null}function d(ne){for(var $=new Map;ne!==null;)ne.key!==null?$.set(ne.key,ne):$.set(ne.index,ne),ne=ne.sibling;return $}function _(ne,$){return ne=js(ne,$),ne.index=0,ne.sibling=null,ne}function A(ne,$,le){return ne.index=le,t?(le=ne.alternate,le!==null?(le=le.index,le<$?(ne.flags|=67108866,$):le):(ne.flags|=67108866,$)):(ne.flags|=1048576,$)}function I(ne){return t&&ne.alternate===null&&(ne.flags|=67108866),ne}function L(ne,$,le,ye){return $===null||$.tag!==6?($=Hf(le,ne.mode,ye),$.return=ne,$):($=_($,le),$.return=ne,$)}function Y(ne,$,le,ye){var Ke=le.type;return Ke===pe?me(ne,$,le.props.children,ye,le.key):$!==null&&($.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===j&&Mo(Ke)===$.type)?($=_($,le.props),cc($,le),$.return=ne,$):($=Iu(le.type,le.key,le.props,null,ne.mode,ye),cc($,le),$.return=ne,$)}function ce(ne,$,le,ye){return $===null||$.tag!==4||$.stateNode.containerInfo!==le.containerInfo||$.stateNode.implementation!==le.implementation?($=Gf(le,ne.mode,ye),$.return=ne,$):($=_($,le.children||[]),$.return=ne,$)}function me(ne,$,le,ye,Ke){return $===null||$.tag!==7?($=Io(le,ne.mode,ye,Ke),$.return=ne,$):($=_($,le),$.return=ne,$)}function Ee(ne,$,le){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Hf(""+$,ne.mode,le),$.return=ne,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case te:return le=Iu($.type,$.key,$.props,null,ne.mode,le),cc(le,$),le.return=ne,le;case _e:return $=Gf($,ne.mode,le),$.return=ne,$;case j:return $=Mo($),Ee(ne,$,le)}if(Q($)||q($))return $=Io($,ne.mode,le,null),$.return=ne,$;if(typeof $.then=="function")return Ee(ne,Lu($),le);if($.$$typeof===Ce)return Ee(ne,Ou(ne,$),le);ku(ne,$)}return null}function ue(ne,$,le,ye){var Ke=$!==null?$.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Ke!==null?null:L(ne,$,""+le,ye);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case te:return le.key===Ke?Y(ne,$,le,ye):null;case _e:return le.key===Ke?ce(ne,$,le,ye):null;case j:return le=Mo(le),ue(ne,$,le,ye)}if(Q(le)||q(le))return Ke!==null?null:me(ne,$,le,ye,null);if(typeof le.then=="function")return ue(ne,$,Lu(le),ye);if(le.$$typeof===Ce)return ue(ne,$,Ou(ne,le),ye);ku(ne,le)}return null}function ge(ne,$,le,ye,Ke){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ne=ne.get(le)||null,L($,ne,""+ye,Ke);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case te:return ne=ne.get(ye.key===null?le:ye.key)||null,Y($,ne,ye,Ke);case _e:return ne=ne.get(ye.key===null?le:ye.key)||null,ce($,ne,ye,Ke);case j:return ye=Mo(ye),ge(ne,$,le,ye,Ke)}if(Q(ye)||q(ye))return ne=ne.get(le)||null,me($,ne,ye,Ke,null);if(typeof ye.then=="function")return ge(ne,$,le,Lu(ye),Ke);if(ye.$$typeof===Ce)return ge(ne,$,le,Ou($,ye),Ke);ku($,ye)}return null}function qe(ne,$,le,ye){for(var Ke=null,Wt=null,Xe=$,yt=$=0,Pt=null;Xe!==null&&yt<le.length;yt++){Xe.index>yt?(Pt=Xe,Xe=null):Pt=Xe.sibling;var Kt=ue(ne,Xe,le[yt],ye);if(Kt===null){Xe===null&&(Xe=Pt);break}t&&Xe&&Kt.alternate===null&&r(ne,Xe),$=A(Kt,$,yt),Wt===null?Ke=Kt:Wt.sibling=Kt,Wt=Kt,Xe=Pt}if(yt===le.length)return c(ne,Xe),Ut&&Hs(ne,yt),Ke;if(Xe===null){for(;yt<le.length;yt++)Xe=Ee(ne,le[yt],ye),Xe!==null&&($=A(Xe,$,yt),Wt===null?Ke=Xe:Wt.sibling=Xe,Wt=Xe);return Ut&&Hs(ne,yt),Ke}for(Xe=d(Xe);yt<le.length;yt++)Pt=ge(Xe,ne,yt,le[yt],ye),Pt!==null&&(t&&Pt.alternate!==null&&Xe.delete(Pt.key===null?yt:Pt.key),$=A(Pt,$,yt),Wt===null?Ke=Pt:Wt.sibling=Pt,Wt=Pt);return t&&Xe.forEach(function(Ha){return r(ne,Ha)}),Ut&&Hs(ne,yt),Ke}function et(ne,$,le,ye){if(le==null)throw Error(o(151));for(var Ke=null,Wt=null,Xe=$,yt=$=0,Pt=null,Kt=le.next();Xe!==null&&!Kt.done;yt++,Kt=le.next()){Xe.index>yt?(Pt=Xe,Xe=null):Pt=Xe.sibling;var Ha=ue(ne,Xe,Kt.value,ye);if(Ha===null){Xe===null&&(Xe=Pt);break}t&&Xe&&Ha.alternate===null&&r(ne,Xe),$=A(Ha,$,yt),Wt===null?Ke=Ha:Wt.sibling=Ha,Wt=Ha,Xe=Pt}if(Kt.done)return c(ne,Xe),Ut&&Hs(ne,yt),Ke;if(Xe===null){for(;!Kt.done;yt++,Kt=le.next())Kt=Ee(ne,Kt.value,ye),Kt!==null&&($=A(Kt,$,yt),Wt===null?Ke=Kt:Wt.sibling=Kt,Wt=Kt);return Ut&&Hs(ne,yt),Ke}for(Xe=d(Xe);!Kt.done;yt++,Kt=le.next())Kt=ge(Xe,ne,yt,Kt.value,ye),Kt!==null&&(t&&Kt.alternate!==null&&Xe.delete(Kt.key===null?yt:Kt.key),$=A(Kt,$,yt),Wt===null?Ke=Kt:Wt.sibling=Kt,Wt=Kt);return t&&Xe.forEach(function(fw){return r(ne,fw)}),Ut&&Hs(ne,yt),Ke}function ln(ne,$,le,ye){if(typeof le=="object"&&le!==null&&le.type===pe&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case te:e:{for(var Ke=le.key;$!==null;){if($.key===Ke){if(Ke=le.type,Ke===pe){if($.tag===7){c(ne,$.sibling),ye=_($,le.props.children),ye.return=ne,ne=ye;break e}}else if($.elementType===Ke||typeof Ke=="object"&&Ke!==null&&Ke.$$typeof===j&&Mo(Ke)===$.type){c(ne,$.sibling),ye=_($,le.props),cc(ye,le),ye.return=ne,ne=ye;break e}c(ne,$);break}else r(ne,$);$=$.sibling}le.type===pe?(ye=Io(le.props.children,ne.mode,ye,le.key),ye.return=ne,ne=ye):(ye=Iu(le.type,le.key,le.props,null,ne.mode,ye),cc(ye,le),ye.return=ne,ne=ye)}return I(ne);case _e:e:{for(Ke=le.key;$!==null;){if($.key===Ke)if($.tag===4&&$.stateNode.containerInfo===le.containerInfo&&$.stateNode.implementation===le.implementation){c(ne,$.sibling),ye=_($,le.children||[]),ye.return=ne,ne=ye;break e}else{c(ne,$);break}else r(ne,$);$=$.sibling}ye=Gf(le,ne.mode,ye),ye.return=ne,ne=ye}return I(ne);case j:return le=Mo(le),ln(ne,$,le,ye)}if(Q(le))return qe(ne,$,le,ye);if(q(le)){if(Ke=q(le),typeof Ke!="function")throw Error(o(150));return le=Ke.call(le),et(ne,$,le,ye)}if(typeof le.then=="function")return ln(ne,$,Lu(le),ye);if(le.$$typeof===Ce)return ln(ne,$,Ou(ne,le),ye);ku(ne,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,$!==null&&$.tag===6?(c(ne,$.sibling),ye=_($,le),ye.return=ne,ne=ye):(c(ne,$),ye=Hf(le,ne.mode,ye),ye.return=ne,ne=ye),I(ne)):c(ne,$)}return function(ne,$,le,ye){try{lc=0;var Ke=ln(ne,$,le,ye);return dl=null,Ke}catch(Xe){if(Xe===fl||Xe===Mu)throw Xe;var Wt=wr(29,Xe,null,ne.mode);return Wt.lanes=ye,Wt.return=ne,Wt}}}var Lo=Rg(!0),Ng=Rg(!1),Sa=!1;function nd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function id(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ba(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ia(t,r,c){var d=t.updateQueue;if(d===null)return null;if(d=d.shared,(Qt&2)!==0){var _=d.pending;return _===null?r.next=r:(r.next=_.next,_.next=r),d.pending=r,r=bu(t),dg(t,null,c),r}return Su(t,d,r,c),bu(t)}function uc(t,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var d=r.lanes;d&=t.pendingLanes,c|=d,r.lanes=c,mr(t,c)}}function rd(t,r){var c=t.updateQueue,d=t.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var _=null,A=null;if(c=c.firstBaseUpdate,c!==null){do{var I={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};A===null?_=A=I:A=A.next=I,c=c.next}while(c!==null);A===null?_=A=r:A=A.next=r}else _=A=r;c={baseState:d.baseState,firstBaseUpdate:_,lastBaseUpdate:A,shared:d.shared,callbacks:d.callbacks},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=r:t.next=r,c.lastBaseUpdate=r}var sd=!1;function hc(){if(sd){var t=hl;if(t!==null)throw t}}function fc(t,r,c,d){sd=!1;var _=t.updateQueue;Sa=!1;var A=_.firstBaseUpdate,I=_.lastBaseUpdate,L=_.shared.pending;if(L!==null){_.shared.pending=null;var Y=L,ce=Y.next;Y.next=null,I===null?A=ce:I.next=ce,I=Y;var me=t.alternate;me!==null&&(me=me.updateQueue,L=me.lastBaseUpdate,L!==I&&(L===null?me.firstBaseUpdate=ce:L.next=ce,me.lastBaseUpdate=Y))}if(A!==null){var Ee=_.baseState;I=0,me=ce=Y=null,L=A;do{var ue=L.lane&-536870913,ge=ue!==L.lane;if(ge?(Mt&ue)===ue:(d&ue)===ue){ue!==0&&ue===ul&&(sd=!0),me!==null&&(me=me.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var qe=t,et=L;ue=r;var ln=c;switch(et.tag){case 1:if(qe=et.payload,typeof qe=="function"){Ee=qe.call(ln,Ee,ue);break e}Ee=qe;break e;case 3:qe.flags=qe.flags&-65537|128;case 0:if(qe=et.payload,ue=typeof qe=="function"?qe.call(ln,Ee,ue):qe,ue==null)break e;Ee=M({},Ee,ue);break e;case 2:Sa=!0}}ue=L.callback,ue!==null&&(t.flags|=64,ge&&(t.flags|=8192),ge=_.callbacks,ge===null?_.callbacks=[ue]:ge.push(ue))}else ge={lane:ue,tag:L.tag,payload:L.payload,callback:L.callback,next:null},me===null?(ce=me=ge,Y=Ee):me=me.next=ge,I|=ue;if(L=L.next,L===null){if(L=_.shared.pending,L===null)break;ge=L,L=ge.next,ge.next=null,_.lastBaseUpdate=ge,_.shared.pending=null}}while(!0);me===null&&(Y=Ee),_.baseState=Y,_.firstBaseUpdate=ce,_.lastBaseUpdate=me,A===null&&(_.shared.lanes=0),Ma|=I,t.lanes=I,t.memoizedState=Ee}}function Og(t,r){if(typeof t!="function")throw Error(o(191,t));t.call(r)}function Dg(t,r){var c=t.callbacks;if(c!==null)for(t.callbacks=null,t=0;t<c.length;t++)Og(c[t],r)}var gl=J(null),Bu=J(0);function Mg(t,r){t=ea,Ie(Bu,t),Ie(gl,r),ea=t|r.baseLanes}function ad(){Ie(Bu,ea),Ie(gl,gl.current)}function od(){ea=Bu.current,ae(gl),ae(Bu)}var Tr=J(null),qr=null;function Ra(t){var r=t.alternate;Ie(Hn,Hn.current&1),Ie(Tr,t),qr===null&&(r===null||gl.current!==null||r.memoizedState!==null)&&(qr=t)}function ld(t){Ie(Hn,Hn.current),Ie(Tr,t),qr===null&&(qr=t)}function Pg(t){t.tag===22?(Ie(Hn,Hn.current),Ie(Tr,t),qr===null&&(qr=t)):Na()}function Na(){Ie(Hn,Hn.current),Ie(Tr,Tr.current)}function Cr(t){ae(Tr),qr===t&&(qr=null),ae(Hn)}var Hn=J(0);function Vu(t){for(var r=t;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||g1(c)||m1(c)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Xs=0,gt=null,an=null,Wn=null,Uu=!1,ml=!1,ko=!1,Fu=0,dc=0,pl=null,nA=0;function Bn(){throw Error(o(321))}function cd(t,r){if(r===null)return!1;for(var c=0;c<r.length&&c<t.length;c++)if(!g(t[c],r[c]))return!1;return!0}function ud(t,r,c,d,_,A){return Xs=A,gt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,K.H=t===null||t.memoizedState===null?ym:vd,ko=!1,A=c(d,_),ko=!1,ml&&(A=kg(r,c,d,_)),Lg(t),A}function Lg(t){K.H=pc;var r=an!==null&&an.next!==null;if(Xs=0,Wn=an=gt=null,Uu=!1,dc=0,pl=null,r)throw Error(o(300));t===null||Kn||(t=t.dependencies,t!==null&&Nu(t)&&(Kn=!0))}function kg(t,r,c,d){gt=t;var _=0;do{if(ml&&(pl=null),dc=0,ml=!1,25<=_)throw Error(o(301));if(_+=1,Wn=an=null,t.updateQueue!=null){var A=t.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}K.H=_m,A=r(c,d)}while(ml);return A}function iA(){var t=K.H,r=t.useState()[0];return r=typeof r.then=="function"?gc(r):r,t=t.useState()[0],(an!==null?an.memoizedState:null)!==t&&(gt.flags|=1024),r}function hd(){var t=Fu!==0;return Fu=0,t}function fd(t,r,c){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~c}function dd(t){if(Uu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Uu=!1}Xs=0,Wn=an=gt=null,ml=!1,dc=Fu=0,pl=null}function Ki(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?gt.memoizedState=Wn=t:Wn=Wn.next=t,Wn}function Gn(){if(an===null){var t=gt.alternate;t=t!==null?t.memoizedState:null}else t=an.next;var r=Wn===null?gt.memoizedState:Wn.next;if(r!==null)Wn=r,an=t;else{if(t===null)throw gt.alternate===null?Error(o(467)):Error(o(310));an=t,t={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},Wn===null?gt.memoizedState=Wn=t:Wn=Wn.next=t}return Wn}function zu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function gc(t){var r=dc;return dc+=1,pl===null&&(pl=[]),t=Sg(pl,t,r),r=gt,(Wn===null?r.memoizedState:Wn.next)===null&&(r=r.alternate,K.H=r===null||r.memoizedState===null?ym:vd),t}function ju(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return gc(t);if(t.$$typeof===Ce)return vi(t)}throw Error(o(438,String(t)))}function gd(t){var r=null,c=gt.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var d=gt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(_){return _.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=zu(),gt.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(t),d=0;d<t;d++)c[d]=ee;return r.index++,c}function Ys(t,r){return typeof r=="function"?r(t):r}function Hu(t){var r=Gn();return md(r,an,t)}function md(t,r,c){var d=t.queue;if(d===null)throw Error(o(311));d.lastRenderedReducer=c;var _=t.baseQueue,A=d.pending;if(A!==null){if(_!==null){var I=_.next;_.next=A.next,A.next=I}r.baseQueue=_=A,d.pending=null}if(A=t.baseState,_===null)t.memoizedState=A;else{r=_.next;var L=I=null,Y=null,ce=r,me=!1;do{var Ee=ce.lane&-536870913;if(Ee!==ce.lane?(Mt&Ee)===Ee:(Xs&Ee)===Ee){var ue=ce.revertLane;if(ue===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null}),Ee===ul&&(me=!0);else if((Xs&ue)===ue){ce=ce.next,ue===ul&&(me=!0);continue}else Ee={lane:0,revertLane:ce.revertLane,gesture:null,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},Y===null?(L=Y=Ee,I=A):Y=Y.next=Ee,gt.lanes|=ue,Ma|=ue;Ee=ce.action,ko&&c(A,Ee),A=ce.hasEagerState?ce.eagerState:c(A,Ee)}else ue={lane:Ee,revertLane:ce.revertLane,gesture:ce.gesture,action:ce.action,hasEagerState:ce.hasEagerState,eagerState:ce.eagerState,next:null},Y===null?(L=Y=ue,I=A):Y=Y.next=ue,gt.lanes|=Ee,Ma|=Ee;ce=ce.next}while(ce!==null&&ce!==r);if(Y===null?I=A:Y.next=L,!g(A,t.memoizedState)&&(Kn=!0,me&&(c=hl,c!==null)))throw c;t.memoizedState=A,t.baseState=I,t.baseQueue=Y,d.lastRenderedState=A}return _===null&&(d.lanes=0),[t.memoizedState,d.dispatch]}function pd(t){var r=Gn(),c=r.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=t;var d=c.dispatch,_=c.pending,A=r.memoizedState;if(_!==null){c.pending=null;var I=_=_.next;do A=t(A,I.action),I=I.next;while(I!==_);g(A,r.memoizedState)||(Kn=!0),r.memoizedState=A,r.baseQueue===null&&(r.baseState=A),c.lastRenderedState=A}return[A,d]}function Bg(t,r,c){var d=gt,_=Gn(),A=Ut;if(A){if(c===void 0)throw Error(o(407));c=c()}else c=r();var I=!g((an||_).memoizedState,c);if(I&&(_.memoizedState=c,Kn=!0),_=_.queue,Ed(Fg.bind(null,d,_,t),[t]),_.getSnapshot!==r||I||Wn!==null&&Wn.memoizedState.tag&1){if(d.flags|=2048,yl(9,{destroy:void 0},Ug.bind(null,d,_,c,r),null),fn===null)throw Error(o(349));A||(Xs&127)!==0||Vg(d,r,c)}return c}function Vg(t,r,c){t.flags|=16384,t={getSnapshot:r,value:c},r=gt.updateQueue,r===null?(r=zu(),gt.updateQueue=r,r.stores=[t]):(c=r.stores,c===null?r.stores=[t]:c.push(t))}function Ug(t,r,c,d){r.value=c,r.getSnapshot=d,zg(r)&&jg(t)}function Fg(t,r,c){return c(function(){zg(r)&&jg(t)})}function zg(t){var r=t.getSnapshot;t=t.value;try{var c=r();return!g(t,c)}catch{return!0}}function jg(t){var r=bo(t,2);r!==null&&ar(r,t,2)}function yd(t){var r=Ki();if(typeof t=="function"){var c=t;if(t=c(),ko){Xt(!0);try{c()}finally{Xt(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:t},r}function Hg(t,r,c,d){return t.baseState=c,md(t,an,typeof d=="function"?d:Ys)}function rA(t,r,c,d,_){if(Xu(t))throw Error(o(485));if(t=r.action,t!==null){var A={payload:_,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){A.listeners.push(I)}};K.T!==null?c(!0):A.isTransition=!1,d(A),c=r.pending,c===null?(A.next=r.pending=A,Gg(r,A)):(A.next=c.next,r.pending=c.next=A)}}function Gg(t,r){var c=r.action,d=r.payload,_=t.state;if(r.isTransition){var A=K.T,I={};K.T=I;try{var L=c(_,d),Y=K.S;Y!==null&&Y(I,L),qg(t,r,L)}catch(ce){_d(t,r,ce)}finally{A!==null&&I.types!==null&&(A.types=I.types),K.T=A}}else try{A=c(_,d),qg(t,r,A)}catch(ce){_d(t,r,ce)}}function qg(t,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Xg(t,r,d)},function(d){return _d(t,r,d)}):Xg(t,r,c)}function Xg(t,r,c){r.status="fulfilled",r.value=c,Yg(r),t.state=c,r=t.pending,r!==null&&(c=r.next,c===r?t.pending=null:(c=c.next,r.next=c,Gg(t,c)))}function _d(t,r,c){var d=t.pending;if(t.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=c,Yg(r),r=r.next;while(r!==d)}t.action=null}function Yg(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Wg(t,r){return r}function Kg(t,r){if(Ut){var c=fn.formState;if(c!==null){e:{var d=gt;if(Ut){if(yn){t:{for(var _=yn,A=Gr;_.nodeType!==8;){if(!A){_=null;break t}if(_=Xr(_.nextSibling),_===null){_=null;break t}}A=_.data,_=A==="F!"||A==="F"?_:null}if(_){yn=Xr(_.nextSibling),d=_.data==="F!";break e}}Ca(d)}d=!1}d&&(r=c[0])}}return c=Ki(),c.memoizedState=c.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wg,lastRenderedState:r},c.queue=d,c=gm.bind(null,gt,d),d.dispatch=c,d=yd(!1),A=Cd.bind(null,gt,!1,d.queue),d=Ki(),_={state:r,dispatch:null,action:t,pending:null},d.queue=_,c=rA.bind(null,gt,_,A,c),_.dispatch=c,d.memoizedState=t,[r,c,!1]}function Qg(t){var r=Gn();return Zg(r,an,t)}function Zg(t,r,c){if(r=md(t,r,Wg)[0],t=Hu(Ys)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=gc(r)}catch(I){throw I===fl?Mu:I}else d=r;r=Gn();var _=r.queue,A=_.dispatch;return c!==r.memoizedState&&(gt.flags|=2048,yl(9,{destroy:void 0},sA.bind(null,_,c),null)),[d,A,t]}function sA(t,r){t.action=r}function Jg(t){var r=Gn(),c=an;if(c!==null)return Zg(r,c,t);Gn(),r=r.memoizedState,c=Gn();var d=c.queue.dispatch;return c.memoizedState=t,[r,d,!1]}function yl(t,r,c,d){return t={tag:t,create:c,deps:d,inst:r,next:null},r=gt.updateQueue,r===null&&(r=zu(),gt.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=t.next=t:(d=c.next,c.next=t,t.next=d,r.lastEffect=t),t}function $g(){return Gn().memoizedState}function Gu(t,r,c,d){var _=Ki();gt.flags|=t,_.memoizedState=yl(1|r,{destroy:void 0},c,d===void 0?null:d)}function qu(t,r,c,d){var _=Gn();d=d===void 0?null:d;var A=_.memoizedState.inst;an!==null&&d!==null&&cd(d,an.memoizedState.deps)?_.memoizedState=yl(r,A,c,d):(gt.flags|=t,_.memoizedState=yl(1|r,A,c,d))}function em(t,r){Gu(8390656,8,t,r)}function Ed(t,r){qu(2048,8,t,r)}function aA(t){gt.flags|=4;var r=gt.updateQueue;if(r===null)r=zu(),gt.updateQueue=r,r.events=[t];else{var c=r.events;c===null?r.events=[t]:c.push(t)}}function tm(t){var r=Gn().memoizedState;return aA({ref:r,nextImpl:t}),function(){if((Qt&2)!==0)throw Error(o(440));return r.impl.apply(void 0,arguments)}}function nm(t,r){return qu(4,2,t,r)}function im(t,r){return qu(4,4,t,r)}function rm(t,r){if(typeof r=="function"){t=t();var c=r(t);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function sm(t,r,c){c=c!=null?c.concat([t]):null,qu(4,4,rm.bind(null,r,t),c)}function xd(){}function am(t,r){var c=Gn();r=r===void 0?null:r;var d=c.memoizedState;return r!==null&&cd(r,d[1])?d[0]:(c.memoizedState=[t,r],t)}function om(t,r){var c=Gn();r=r===void 0?null:r;var d=c.memoizedState;if(r!==null&&cd(r,d[1]))return d[0];if(d=t(),ko){Xt(!0);try{t()}finally{Xt(!1)}}return c.memoizedState=[d,r],d}function Ad(t,r,c){return c===void 0||(Xs&1073741824)!==0&&(Mt&261930)===0?t.memoizedState=r:(t.memoizedState=c,t=lp(),gt.lanes|=t,Ma|=t,c)}function lm(t,r,c,d){return g(c,r)?c:gl.current!==null?(t=Ad(t,c,d),g(t,r)||(Kn=!0),t):(Xs&42)===0||(Xs&1073741824)!==0&&(Mt&261930)===0?(Kn=!0,t.memoizedState=c):(t=lp(),gt.lanes|=t,Ma|=t,r)}function cm(t,r,c,d,_){var A=se.p;se.p=A!==0&&8>A?A:8;var I=K.T,L={};K.T=L,Cd(t,!1,r,c);try{var Y=_(),ce=K.S;if(ce!==null&&ce(L,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var me=tA(Y,d);mc(t,r,me,br(t))}else mc(t,r,d,br(t))}catch(Ee){mc(t,r,{then:function(){},status:"rejected",reason:Ee},br())}finally{se.p=A,I!==null&&L.types!==null&&(I.types=L.types),K.T=I}}function oA(){}function wd(t,r,c,d){if(t.tag!==5)throw Error(o(476));var _=um(t).queue;cm(t,_,r,Le,c===null?oA:function(){return hm(t),c(d)})}function um(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:Le,baseState:Le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:Le},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:c},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function hm(t){var r=um(t);r.next===null&&(r=t.alternate.memoizedState),mc(t,r.next.queue,{},br())}function Td(){return vi(Dc)}function fm(){return Gn().memoizedState}function dm(){return Gn().memoizedState}function lA(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var c=br();t=ba(c);var d=Ia(r,t,c);d!==null&&(ar(d,r,c),uc(d,r,c)),r={cache:Jf()},t.payload=r;return}r=r.return}}function cA(t,r,c){var d=br();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Xu(t)?mm(r,c):(c=zf(t,r,c,d),c!==null&&(ar(c,t,d),pm(c,r,d)))}function gm(t,r,c){var d=br();mc(t,r,c,d)}function mc(t,r,c,d){var _={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Xu(t))mm(r,_);else{var A=t.alternate;if(t.lanes===0&&(A===null||A.lanes===0)&&(A=r.lastRenderedReducer,A!==null))try{var I=r.lastRenderedState,L=A(I,c);if(_.hasEagerState=!0,_.eagerState=L,g(L,I))return Su(t,r,_,0),fn===null&&vu(),!1}catch{}if(c=zf(t,r,_,d),c!==null)return ar(c,t,d),pm(c,r,d),!0}return!1}function Cd(t,r,c,d){if(d={lane:2,revertLane:n1(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Xu(t)){if(r)throw Error(o(479))}else r=zf(t,c,d,2),r!==null&&ar(r,t,2)}function Xu(t){var r=t.alternate;return t===gt||r!==null&&r===gt}function mm(t,r){ml=Uu=!0;var c=t.pending;c===null?r.next=r:(r.next=c.next,c.next=r),t.pending=r}function pm(t,r,c){if((c&4194048)!==0){var d=r.lanes;d&=t.pendingLanes,c|=d,r.lanes=c,mr(t,c)}}var pc={readContext:vi,use:ju,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useLayoutEffect:Bn,useInsertionEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useSyncExternalStore:Bn,useId:Bn,useHostTransitionStatus:Bn,useFormState:Bn,useActionState:Bn,useOptimistic:Bn,useMemoCache:Bn,useCacheRefresh:Bn};pc.useEffectEvent=Bn;var ym={readContext:vi,use:ju,useCallback:function(t,r){return Ki().memoizedState=[t,r===void 0?null:r],t},useContext:vi,useEffect:em,useImperativeHandle:function(t,r,c){c=c!=null?c.concat([t]):null,Gu(4194308,4,rm.bind(null,r,t),c)},useLayoutEffect:function(t,r){return Gu(4194308,4,t,r)},useInsertionEffect:function(t,r){Gu(4,2,t,r)},useMemo:function(t,r){var c=Ki();r=r===void 0?null:r;var d=t();if(ko){Xt(!0);try{t()}finally{Xt(!1)}}return c.memoizedState=[d,r],d},useReducer:function(t,r,c){var d=Ki();if(c!==void 0){var _=c(r);if(ko){Xt(!0);try{c(r)}finally{Xt(!1)}}}else _=r;return d.memoizedState=d.baseState=_,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:_},d.queue=t,t=t.dispatch=cA.bind(null,gt,t),[d.memoizedState,t]},useRef:function(t){var r=Ki();return t={current:t},r.memoizedState=t},useState:function(t){t=yd(t);var r=t.queue,c=gm.bind(null,gt,r);return r.dispatch=c,[t.memoizedState,c]},useDebugValue:xd,useDeferredValue:function(t,r){var c=Ki();return Ad(c,t,r)},useTransition:function(){var t=yd(!1);return t=cm.bind(null,gt,t.queue,!0,!1),Ki().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,c){var d=gt,_=Ki();if(Ut){if(c===void 0)throw Error(o(407));c=c()}else{if(c=r(),fn===null)throw Error(o(349));(Mt&127)!==0||Vg(d,r,c)}_.memoizedState=c;var A={value:c,getSnapshot:r};return _.queue=A,em(Fg.bind(null,d,A,t),[t]),d.flags|=2048,yl(9,{destroy:void 0},Ug.bind(null,d,A,c,r),null),c},useId:function(){var t=Ki(),r=fn.identifierPrefix;if(Ut){var c=ys,d=ps;c=(d&~(1<<32-it(d)-1)).toString(32)+c,r="_"+r+"R_"+c,c=Fu++,0<c&&(r+="H"+c.toString(32)),r+="_"}else c=nA++,r="_"+r+"r_"+c.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:Td,useFormState:Kg,useActionState:Kg,useOptimistic:function(t){var r=Ki();r.memoizedState=r.baseState=t;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Cd.bind(null,gt,!0,c),c.dispatch=r,[t,r]},useMemoCache:gd,useCacheRefresh:function(){return Ki().memoizedState=lA.bind(null,gt)},useEffectEvent:function(t){var r=Ki(),c={impl:t};return r.memoizedState=c,function(){if((Qt&2)!==0)throw Error(o(440));return c.impl.apply(void 0,arguments)}}},vd={readContext:vi,use:ju,useCallback:am,useContext:vi,useEffect:Ed,useImperativeHandle:sm,useInsertionEffect:nm,useLayoutEffect:im,useMemo:om,useReducer:Hu,useRef:$g,useState:function(){return Hu(Ys)},useDebugValue:xd,useDeferredValue:function(t,r){var c=Gn();return lm(c,an.memoizedState,t,r)},useTransition:function(){var t=Hu(Ys)[0],r=Gn().memoizedState;return[typeof t=="boolean"?t:gc(t),r]},useSyncExternalStore:Bg,useId:fm,useHostTransitionStatus:Td,useFormState:Qg,useActionState:Qg,useOptimistic:function(t,r){var c=Gn();return Hg(c,an,t,r)},useMemoCache:gd,useCacheRefresh:dm};vd.useEffectEvent=tm;var _m={readContext:vi,use:ju,useCallback:am,useContext:vi,useEffect:Ed,useImperativeHandle:sm,useInsertionEffect:nm,useLayoutEffect:im,useMemo:om,useReducer:pd,useRef:$g,useState:function(){return pd(Ys)},useDebugValue:xd,useDeferredValue:function(t,r){var c=Gn();return an===null?Ad(c,t,r):lm(c,an.memoizedState,t,r)},useTransition:function(){var t=pd(Ys)[0],r=Gn().memoizedState;return[typeof t=="boolean"?t:gc(t),r]},useSyncExternalStore:Bg,useId:fm,useHostTransitionStatus:Td,useFormState:Jg,useActionState:Jg,useOptimistic:function(t,r){var c=Gn();return an!==null?Hg(c,an,t,r):(c.baseState=t,[t,c.queue.dispatch])},useMemoCache:gd,useCacheRefresh:dm};_m.useEffectEvent=tm;function Sd(t,r,c,d){r=t.memoizedState,c=c(d,r),c=c==null?r:M({},r,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var bd={enqueueSetState:function(t,r,c){t=t._reactInternals;var d=br(),_=ba(d);_.payload=r,c!=null&&(_.callback=c),r=Ia(t,_,d),r!==null&&(ar(r,t,d),uc(r,t,d))},enqueueReplaceState:function(t,r,c){t=t._reactInternals;var d=br(),_=ba(d);_.tag=1,_.payload=r,c!=null&&(_.callback=c),r=Ia(t,_,d),r!==null&&(ar(r,t,d),uc(r,t,d))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var c=br(),d=ba(c);d.tag=2,r!=null&&(d.callback=r),r=Ia(t,d,c),r!==null&&(ar(r,t,c),uc(r,t,c))}};function Em(t,r,c,d,_,A,I){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(d,A,I):r.prototype&&r.prototype.isPureReactComponent?!y(c,d)||!y(_,A):!0}function xm(t,r,c,d){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,d),r.state!==t&&bd.enqueueReplaceState(r,r.state,null)}function Bo(t,r){var c=r;if("ref"in r){c={};for(var d in r)d!=="ref"&&(c[d]=r[d])}if(t=t.defaultProps){c===r&&(c=M({},c));for(var _ in t)c[_]===void 0&&(c[_]=t[_])}return c}function Am(t){Cu(t)}function wm(t){console.error(t)}function Tm(t){Cu(t)}function Yu(t,r){try{var c=t.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function Cm(t,r,c){try{var d=t.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Id(t,r,c){return c=ba(c),c.tag=3,c.payload={element:null},c.callback=function(){Yu(t,r)},c}function vm(t){return t=ba(t),t.tag=3,t}function Sm(t,r,c,d){var _=c.type.getDerivedStateFromError;if(typeof _=="function"){var A=d.value;t.payload=function(){return _(A)},t.callback=function(){Cm(r,c,d)}}var I=c.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(t.callback=function(){Cm(r,c,d),typeof _!="function"&&(Pa===null?Pa=new Set([this]):Pa.add(this));var L=d.stack;this.componentDidCatch(d.value,{componentStack:L!==null?L:""})})}function uA(t,r,c,d,_){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=c.alternate,r!==null&&cl(r,c,_,!0),c=Tr.current,c!==null){switch(c.tag){case 31:case 13:return qr===null?sh():c.alternate===null&&Vn===0&&(Vn=3),c.flags&=-257,c.flags|=65536,c.lanes=_,d===Pu?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([d]):r.add(d),$d(t,d,_)),!1;case 22:return c.flags|=65536,d===Pu?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([d]):c.add(d)),$d(t,d,_)),!1}throw Error(o(435,c.tag))}return $d(t,d,_),sh(),!1}if(Ut)return r=Tr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=_,d!==Yf&&(t=Error(o(422),{cause:d}),sc(zr(t,c)))):(d!==Yf&&(r=Error(o(423),{cause:d}),sc(zr(r,c))),t=t.current.alternate,t.flags|=65536,_&=-_,t.lanes|=_,d=zr(d,c),_=Id(t.stateNode,d,_),rd(t,_),Vn!==4&&(Vn=2)),!1;var A=Error(o(520),{cause:d});if(A=zr(A,c),Cc===null?Cc=[A]:Cc.push(A),Vn!==4&&(Vn=2),r===null)return!0;d=zr(d,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,t=_&-_,c.lanes|=t,t=Id(c.stateNode,d,t),rd(c,t),!1;case 1:if(r=c.type,A=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Pa===null||!Pa.has(A))))return c.flags|=65536,_&=-_,c.lanes|=_,_=vm(_),Sm(_,t,c,d),rd(c,_),!1}c=c.return}while(c!==null);return!1}var Rd=Error(o(461)),Kn=!1;function Si(t,r,c,d){r.child=t===null?Ng(r,null,c,d):Lo(r,t.child,c,d)}function bm(t,r,c,d,_){c=c.render;var A=r.ref;if("ref"in d){var I={};for(var L in d)L!=="ref"&&(I[L]=d[L])}else I=d;return Oo(r),d=ud(t,r,c,I,A,_),L=hd(),t!==null&&!Kn?(fd(t,r,_),Ws(t,r,_)):(Ut&&L&&qf(r),r.flags|=1,Si(t,r,d,_),r.child)}function Im(t,r,c,d,_){if(t===null){var A=c.type;return typeof A=="function"&&!jf(A)&&A.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=A,Rm(t,r,A,d,_)):(t=Iu(c.type,null,d,r,r.mode,_),t.ref=r.ref,t.return=r,r.child=t)}if(A=t.child,!Bd(t,_)){var I=A.memoizedProps;if(c=c.compare,c=c!==null?c:y,c(I,d)&&t.ref===r.ref)return Ws(t,r,_)}return r.flags|=1,t=js(A,d),t.ref=r.ref,t.return=r,r.child=t}function Rm(t,r,c,d,_){if(t!==null){var A=t.memoizedProps;if(y(A,d)&&t.ref===r.ref)if(Kn=!1,r.pendingProps=d=A,Bd(t,_))(t.flags&131072)!==0&&(Kn=!0);else return r.lanes=t.lanes,Ws(t,r,_)}return Nd(t,r,c,d,_)}function Nm(t,r,c,d){var _=d.children,A=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(A=A!==null?A.baseLanes|c:c,t!==null){for(d=r.child=t.child,_=0;d!==null;)_=_|d.lanes|d.childLanes,d=d.sibling;d=_&~A}else d=0,r.child=null;return Om(t,r,A,c,d)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&Du(r,A!==null?A.cachePool:null),A!==null?Mg(r,A):ad(),Pg(r);else return d=r.lanes=536870912,Om(t,r,A!==null?A.baseLanes|c:c,c,d)}else A!==null?(Du(r,A.cachePool),Mg(r,A),Na(),r.memoizedState=null):(t!==null&&Du(r,null),ad(),Na());return Si(t,r,_,c),r.child}function yc(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Om(t,r,c,d,_){var A=ed();return A=A===null?null:{parent:Yn._currentValue,pool:A},r.memoizedState={baseLanes:c,cachePool:A},t!==null&&Du(r,null),ad(),Pg(r),t!==null&&cl(t,r,d,!0),r.childLanes=_,null}function Wu(t,r){return r=Qu({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Dm(t,r,c){return Lo(r,t.child,null,c),t=Wu(r,r.pendingProps),t.flags|=2,Cr(r),r.memoizedState=null,t}function hA(t,r,c){var d=r.pendingProps,_=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Ut){if(d.mode==="hidden")return t=Wu(r,d),r.lanes=536870912,yc(null,t);if(ld(r),(t=yn)?(t=Gp(t,Gr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:wa!==null?{id:ps,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},c=mg(t),c.return=r,r.child=c,Ci=r,yn=null)):t=null,t===null)throw Ca(r);return r.lanes=536870912,null}return Wu(r,d)}var A=t.memoizedState;if(A!==null){var I=A.dehydrated;if(ld(r),_)if(r.flags&256)r.flags&=-257,r=Dm(t,r,c);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(o(558));else if(Kn||cl(t,r,c,!1),_=(c&t.childLanes)!==0,Kn||_){if(d=fn,d!==null&&(I=Ns(d,c),I!==0&&I!==A.retryLane))throw A.retryLane=I,bo(t,I),ar(d,t,I),Rd;sh(),r=Dm(t,r,c)}else t=A.treeContext,yn=Xr(I.nextSibling),Ci=r,Ut=!0,Ta=null,Gr=!1,t!==null&&_g(r,t),r=Wu(r,d),r.flags|=4096;return r}return t=js(t.child,{mode:d.mode,children:d.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Ku(t,r){var c=r.ref;if(c===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(o(284));(t===null||t.ref!==c)&&(r.flags|=4194816)}}function Nd(t,r,c,d,_){return Oo(r),c=ud(t,r,c,d,void 0,_),d=hd(),t!==null&&!Kn?(fd(t,r,_),Ws(t,r,_)):(Ut&&d&&qf(r),r.flags|=1,Si(t,r,c,_),r.child)}function Mm(t,r,c,d,_,A){return Oo(r),r.updateQueue=null,c=kg(r,d,c,_),Lg(t),d=hd(),t!==null&&!Kn?(fd(t,r,A),Ws(t,r,A)):(Ut&&d&&qf(r),r.flags|=1,Si(t,r,c,A),r.child)}function Pm(t,r,c,d,_){if(Oo(r),r.stateNode===null){var A=sl,I=c.contextType;typeof I=="object"&&I!==null&&(A=vi(I)),A=new c(d,A),r.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=bd,r.stateNode=A,A._reactInternals=r,A=r.stateNode,A.props=d,A.state=r.memoizedState,A.refs={},nd(r),I=c.contextType,A.context=typeof I=="object"&&I!==null?vi(I):sl,A.state=r.memoizedState,I=c.getDerivedStateFromProps,typeof I=="function"&&(Sd(r,c,I,d),A.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(I=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),I!==A.state&&bd.enqueueReplaceState(A,A.state,null),fc(r,d,A,_),hc(),A.state=r.memoizedState),typeof A.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(t===null){A=r.stateNode;var L=r.memoizedProps,Y=Bo(c,L);A.props=Y;var ce=A.context,me=c.contextType;I=sl,typeof me=="object"&&me!==null&&(I=vi(me));var Ee=c.getDerivedStateFromProps;me=typeof Ee=="function"||typeof A.getSnapshotBeforeUpdate=="function",L=r.pendingProps!==L,me||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(L||ce!==I)&&xm(r,A,d,I),Sa=!1;var ue=r.memoizedState;A.state=ue,fc(r,d,A,_),hc(),ce=r.memoizedState,L||ue!==ce||Sa?(typeof Ee=="function"&&(Sd(r,c,Ee,d),ce=r.memoizedState),(Y=Sa||Em(r,c,Y,d,ue,ce,I))?(me||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(r.flags|=4194308)):(typeof A.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=ce),A.props=d,A.state=ce,A.context=I,d=Y):(typeof A.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{A=r.stateNode,id(t,r),I=r.memoizedProps,me=Bo(c,I),A.props=me,Ee=r.pendingProps,ue=A.context,ce=c.contextType,Y=sl,typeof ce=="object"&&ce!==null&&(Y=vi(ce)),L=c.getDerivedStateFromProps,(ce=typeof L=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(I!==Ee||ue!==Y)&&xm(r,A,d,Y),Sa=!1,ue=r.memoizedState,A.state=ue,fc(r,d,A,_),hc();var ge=r.memoizedState;I!==Ee||ue!==ge||Sa||t!==null&&t.dependencies!==null&&Nu(t.dependencies)?(typeof L=="function"&&(Sd(r,c,L,d),ge=r.memoizedState),(me=Sa||Em(r,c,me,d,ue,ge,Y)||t!==null&&t.dependencies!==null&&Nu(t.dependencies))?(ce||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(d,ge,Y),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(d,ge,Y)),typeof A.componentDidUpdate=="function"&&(r.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof A.componentDidUpdate!="function"||I===t.memoizedProps&&ue===t.memoizedState||(r.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||I===t.memoizedProps&&ue===t.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=ge),A.props=d,A.state=ge,A.context=Y,d=me):(typeof A.componentDidUpdate!="function"||I===t.memoizedProps&&ue===t.memoizedState||(r.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||I===t.memoizedProps&&ue===t.memoizedState||(r.flags|=1024),d=!1)}return A=d,Ku(t,r),d=(r.flags&128)!==0,A||d?(A=r.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:A.render(),r.flags|=1,t!==null&&d?(r.child=Lo(r,t.child,null,_),r.child=Lo(r,null,c,_)):Si(t,r,c,_),r.memoizedState=A.state,t=r.child):t=Ws(t,r,_),t}function Lm(t,r,c,d){return Ro(),r.flags|=256,Si(t,r,c,d),r.child}var Od={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dd(t){return{baseLanes:t,cachePool:Cg()}}function Md(t,r,c){return t=t!==null?t.childLanes&~c:0,r&&(t|=Sr),t}function km(t,r,c){var d=r.pendingProps,_=!1,A=(r.flags&128)!==0,I;if((I=A)||(I=t!==null&&t.memoizedState===null?!1:(Hn.current&2)!==0),I&&(_=!0,r.flags&=-129),I=(r.flags&32)!==0,r.flags&=-33,t===null){if(Ut){if(_?Ra(r):Na(),(t=yn)?(t=Gp(t,Gr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:wa!==null?{id:ps,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},c=mg(t),c.return=r,r.child=c,Ci=r,yn=null)):t=null,t===null)throw Ca(r);return m1(t)?r.lanes=32:r.lanes=536870912,null}var L=d.children;return d=d.fallback,_?(Na(),_=r.mode,L=Qu({mode:"hidden",children:L},_),d=Io(d,_,c,null),L.return=r,d.return=r,L.sibling=d,r.child=L,d=r.child,d.memoizedState=Dd(c),d.childLanes=Md(t,I,c),r.memoizedState=Od,yc(null,d)):(Ra(r),Pd(r,L))}var Y=t.memoizedState;if(Y!==null&&(L=Y.dehydrated,L!==null)){if(A)r.flags&256?(Ra(r),r.flags&=-257,r=Ld(t,r,c)):r.memoizedState!==null?(Na(),r.child=t.child,r.flags|=128,r=null):(Na(),L=d.fallback,_=r.mode,d=Qu({mode:"visible",children:d.children},_),L=Io(L,_,c,null),L.flags|=2,d.return=r,L.return=r,d.sibling=L,r.child=d,Lo(r,t.child,null,c),d=r.child,d.memoizedState=Dd(c),d.childLanes=Md(t,I,c),r.memoizedState=Od,r=yc(null,d));else if(Ra(r),m1(L)){if(I=L.nextSibling&&L.nextSibling.dataset,I)var ce=I.dgst;I=ce,d=Error(o(419)),d.stack="",d.digest=I,sc({value:d,source:null,stack:null}),r=Ld(t,r,c)}else if(Kn||cl(t,r,c,!1),I=(c&t.childLanes)!==0,Kn||I){if(I=fn,I!==null&&(d=Ns(I,c),d!==0&&d!==Y.retryLane))throw Y.retryLane=d,bo(t,d),ar(I,t,d),Rd;g1(L)||sh(),r=Ld(t,r,c)}else g1(L)?(r.flags|=192,r.child=t.child,r=null):(t=Y.treeContext,yn=Xr(L.nextSibling),Ci=r,Ut=!0,Ta=null,Gr=!1,t!==null&&_g(r,t),r=Pd(r,d.children),r.flags|=4096);return r}return _?(Na(),L=d.fallback,_=r.mode,Y=t.child,ce=Y.sibling,d=js(Y,{mode:"hidden",children:d.children}),d.subtreeFlags=Y.subtreeFlags&65011712,ce!==null?L=js(ce,L):(L=Io(L,_,c,null),L.flags|=2),L.return=r,d.return=r,d.sibling=L,r.child=d,yc(null,d),d=r.child,L=t.child.memoizedState,L===null?L=Dd(c):(_=L.cachePool,_!==null?(Y=Yn._currentValue,_=_.parent!==Y?{parent:Y,pool:Y}:_):_=Cg(),L={baseLanes:L.baseLanes|c,cachePool:_}),d.memoizedState=L,d.childLanes=Md(t,I,c),r.memoizedState=Od,yc(t.child,d)):(Ra(r),c=t.child,t=c.sibling,c=js(c,{mode:"visible",children:d.children}),c.return=r,c.sibling=null,t!==null&&(I=r.deletions,I===null?(r.deletions=[t],r.flags|=16):I.push(t)),r.child=c,r.memoizedState=null,c)}function Pd(t,r){return r=Qu({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Qu(t,r){return t=wr(22,t,null,r),t.lanes=0,t}function Ld(t,r,c){return Lo(r,t.child,null,c),t=Pd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Bm(t,r,c){t.lanes|=r;var d=t.alternate;d!==null&&(d.lanes|=r),Qf(t.return,r,c)}function kd(t,r,c,d,_,A){var I=t.memoizedState;I===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:_,treeForkCount:A}:(I.isBackwards=r,I.rendering=null,I.renderingStartTime=0,I.last=d,I.tail=c,I.tailMode=_,I.treeForkCount=A)}function Vm(t,r,c){var d=r.pendingProps,_=d.revealOrder,A=d.tail;d=d.children;var I=Hn.current,L=(I&2)!==0;if(L?(I=I&1|2,r.flags|=128):I&=1,Ie(Hn,I),Si(t,r,d,c),d=Ut?rc:0,!L&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bm(t,c,r);else if(t.tag===19)Bm(t,c,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(_){case"forwards":for(c=r.child,_=null;c!==null;)t=c.alternate,t!==null&&Vu(t)===null&&(_=c),c=c.sibling;c=_,c===null?(_=r.child,r.child=null):(_=c.sibling,c.sibling=null),kd(r,!1,_,c,A,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,_=r.child,r.child=null;_!==null;){if(t=_.alternate,t!==null&&Vu(t)===null){r.child=_;break}t=_.sibling,_.sibling=c,c=_,_=t}kd(r,!0,c,null,A,d);break;case"together":kd(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function Ws(t,r,c){if(t!==null&&(r.dependencies=t.dependencies),Ma|=r.lanes,(c&r.childLanes)===0)if(t!==null){if(cl(t,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(o(153));if(r.child!==null){for(t=r.child,c=js(t,t.pendingProps),r.child=c,c.return=r;t.sibling!==null;)t=t.sibling,c=c.sibling=js(t,t.pendingProps),c.return=r;c.sibling=null}return r.child}function Bd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&Nu(t)))}function fA(t,r,c){switch(r.tag){case 3:wt(r,r.stateNode.containerInfo),va(r,Yn,t.memoizedState.cache),Ro();break;case 27:case 5:ur(r);break;case 4:wt(r,r.stateNode.containerInfo);break;case 10:va(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,ld(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(Ra(r),r.flags|=128,null):(c&r.child.childLanes)!==0?km(t,r,c):(Ra(r),t=Ws(t,r,c),t!==null?t.sibling:null);Ra(r);break;case 19:var _=(t.flags&128)!==0;if(d=(c&r.childLanes)!==0,d||(cl(t,r,c,!1),d=(c&r.childLanes)!==0),_){if(d)return Vm(t,r,c);r.flags|=128}if(_=r.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Ie(Hn,Hn.current),d)break;return null;case 22:return r.lanes=0,Nm(t,r,c,r.pendingProps);case 24:va(r,Yn,t.memoizedState.cache)}return Ws(t,r,c)}function Um(t,r,c){if(t!==null)if(t.memoizedProps!==r.pendingProps)Kn=!0;else{if(!Bd(t,c)&&(r.flags&128)===0)return Kn=!1,fA(t,r,c);Kn=(t.flags&131072)!==0}else Kn=!1,Ut&&(r.flags&1048576)!==0&&yg(r,rc,r.index);switch(r.lanes=0,r.tag){case 16:e:{var d=r.pendingProps;if(t=Mo(r.elementType),r.type=t,typeof t=="function")jf(t)?(d=Bo(t,d),r.tag=1,r=Pm(null,r,t,d,c)):(r.tag=0,r=Nd(null,r,t,d,c));else{if(t!=null){var _=t.$$typeof;if(_===Be){r.tag=11,r=bm(null,r,t,d,c);break e}else if(_===V){r.tag=14,r=Im(null,r,t,d,c);break e}}throw r=Ue(t)||t,Error(o(306,r,""))}}return r;case 0:return Nd(t,r,r.type,r.pendingProps,c);case 1:return d=r.type,_=Bo(d,r.pendingProps),Pm(t,r,d,_,c);case 3:e:{if(wt(r,r.stateNode.containerInfo),t===null)throw Error(o(387));d=r.pendingProps;var A=r.memoizedState;_=A.element,id(t,r),fc(r,d,null,c);var I=r.memoizedState;if(d=I.cache,va(r,Yn,d),d!==A.cache&&Zf(r,[Yn],c,!0),hc(),d=I.element,A.isDehydrated)if(A={element:d,isDehydrated:!1,cache:I.cache},r.updateQueue.baseState=A,r.memoizedState=A,r.flags&256){r=Lm(t,r,d,c);break e}else if(d!==_){_=zr(Error(o(424)),r),sc(_),r=Lm(t,r,d,c);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,yn=Xr(t.firstChild),Ci=r,Ut=!0,Ta=null,Gr=!0,c=Ng(r,null,d,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ro(),d===_){r=Ws(t,r,c);break e}Si(t,r,d,c)}r=r.child}return r;case 26:return Ku(t,r),t===null?(c=Qp(r.type,null,r.pendingProps,null))?r.memoizedState=c:Ut||(c=r.type,t=r.pendingProps,d=fh(Oe.current).createElement(c),d[wn]=r,d[jt]=t,bi(d,c,t),Tn(d),r.stateNode=d):r.memoizedState=Qp(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return ur(r),t===null&&Ut&&(d=r.stateNode=Yp(r.type,r.pendingProps,Oe.current),Ci=r,Gr=!0,_=yn,Va(r.type)?(p1=_,yn=Xr(d.firstChild)):yn=_),Si(t,r,r.pendingProps.children,c),Ku(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Ut&&((_=d=yn)&&(d=jA(d,r.type,r.pendingProps,Gr),d!==null?(r.stateNode=d,Ci=r,yn=Xr(d.firstChild),Gr=!1,_=!0):_=!1),_||Ca(r)),ur(r),_=r.type,A=r.pendingProps,I=t!==null?t.memoizedProps:null,d=A.children,h1(_,A)?d=null:I!==null&&h1(_,I)&&(r.flags|=32),r.memoizedState!==null&&(_=ud(t,r,iA,null,null,c),Dc._currentValue=_),Ku(t,r),Si(t,r,d,c),r.child;case 6:return t===null&&Ut&&((t=c=yn)&&(c=HA(c,r.pendingProps,Gr),c!==null?(r.stateNode=c,Ci=r,yn=null,t=!0):t=!1),t||Ca(r)),null;case 13:return km(t,r,c);case 4:return wt(r,r.stateNode.containerInfo),d=r.pendingProps,t===null?r.child=Lo(r,null,d,c):Si(t,r,d,c),r.child;case 11:return bm(t,r,r.type,r.pendingProps,c);case 7:return Si(t,r,r.pendingProps,c),r.child;case 8:return Si(t,r,r.pendingProps.children,c),r.child;case 12:return Si(t,r,r.pendingProps.children,c),r.child;case 10:return d=r.pendingProps,va(r,r.type,d.value),Si(t,r,d.children,c),r.child;case 9:return _=r.type._context,d=r.pendingProps.children,Oo(r),_=vi(_),d=d(_),r.flags|=1,Si(t,r,d,c),r.child;case 14:return Im(t,r,r.type,r.pendingProps,c);case 15:return Rm(t,r,r.type,r.pendingProps,c);case 19:return Vm(t,r,c);case 31:return hA(t,r,c);case 22:return Nm(t,r,c,r.pendingProps);case 24:return Oo(r),d=vi(Yn),t===null?(_=ed(),_===null&&(_=fn,A=Jf(),_.pooledCache=A,A.refCount++,A!==null&&(_.pooledCacheLanes|=c),_=A),r.memoizedState={parent:d,cache:_},nd(r),va(r,Yn,_)):((t.lanes&c)!==0&&(id(t,r),fc(r,null,null,c),hc()),_=t.memoizedState,A=r.memoizedState,_.parent!==d?(_={parent:d,cache:d},r.memoizedState=_,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=_),va(r,Yn,d)):(d=A.cache,va(r,Yn,d),d!==_.cache&&Zf(r,[Yn],c,!0))),Si(t,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(o(156,r.tag))}function Ks(t){t.flags|=4}function Vd(t,r,c,d,_){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(_&335544128)===_)if(t.stateNode.complete)t.flags|=8192;else if(fp())t.flags|=8192;else throw Po=Pu,td}else t.flags&=-16777217}function Fm(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!t2(r))if(fp())t.flags|=8192;else throw Po=Pu,td}function Zu(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?zn():536870912,t.lanes|=r,Al|=r)}function _c(t,r){if(!Ut)switch(t.tailMode){case"hidden":r=t.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:d.sibling=null}}function _n(t){var r=t.alternate!==null&&t.alternate.child===t.child,c=0,d=0;if(r)for(var _=t.child;_!==null;)c|=_.lanes|_.childLanes,d|=_.subtreeFlags&65011712,d|=_.flags&65011712,_.return=t,_=_.sibling;else for(_=t.child;_!==null;)c|=_.lanes|_.childLanes,d|=_.subtreeFlags,d|=_.flags,_.return=t,_=_.sibling;return t.subtreeFlags|=d,t.childLanes=c,r}function dA(t,r,c){var d=r.pendingProps;switch(Xf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _n(r),null;case 1:return _n(r),null;case 3:return c=r.stateNode,d=null,t!==null&&(d=t.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),qs(Yn),Zt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(ll(r)?Ks(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Wf())),_n(r),null;case 26:var _=r.type,A=r.memoizedState;return t===null?(Ks(r),A!==null?(_n(r),Fm(r,A)):(_n(r),Vd(r,_,null,d,c))):A?A!==t.memoizedState?(Ks(r),_n(r),Fm(r,A)):(_n(r),r.flags&=-16777217):(t=t.memoizedProps,t!==d&&Ks(r),_n(r),Vd(r,_,t,d,c)),null;case 27:if(Fn(r),c=Oe.current,_=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==d&&Ks(r);else{if(!d){if(r.stateNode===null)throw Error(o(166));return _n(r),null}t=De.current,ll(r)?Eg(r):(t=Yp(_,d,c),r.stateNode=t,Ks(r))}return _n(r),null;case 5:if(Fn(r),_=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==d&&Ks(r);else{if(!d){if(r.stateNode===null)throw Error(o(166));return _n(r),null}if(A=De.current,ll(r))Eg(r);else{var I=fh(Oe.current);switch(A){case 1:A=I.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:A=I.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":A=I.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":A=I.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":A=I.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof d.is=="string"?I.createElement("select",{is:d.is}):I.createElement("select"),d.multiple?A.multiple=!0:d.size&&(A.size=d.size);break;default:A=typeof d.is=="string"?I.createElement(_,{is:d.is}):I.createElement(_)}}A[wn]=r,A[jt]=d;e:for(I=r.child;I!==null;){if(I.tag===5||I.tag===6)A.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===r)break e;for(;I.sibling===null;){if(I.return===null||I.return===r)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}r.stateNode=A;e:switch(bi(A,_,d),_){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Ks(r)}}return _n(r),Vd(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,c),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==d&&Ks(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(o(166));if(t=Oe.current,ll(r)){if(t=r.stateNode,c=r.memoizedProps,d=null,_=Ci,_!==null)switch(_.tag){case 27:case 5:d=_.memoizedProps}t[wn]=r,t=!!(t.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||kp(t.nodeValue,c)),t||Ca(r,!0)}else t=fh(t).createTextNode(d),t[wn]=r,r.stateNode=t}return _n(r),null;case 31:if(c=r.memoizedState,t===null||t.memoizedState!==null){if(d=ll(r),c!==null){if(t===null){if(!d)throw Error(o(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[wn]=r}else Ro(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;_n(r),t=!1}else c=Wf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),t=!0;if(!t)return r.flags&256?(Cr(r),r):(Cr(r),null);if((r.flags&128)!==0)throw Error(o(558))}return _n(r),null;case 13:if(d=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_=ll(r),d!==null&&d.dehydrated!==null){if(t===null){if(!_)throw Error(o(318));if(_=r.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(o(317));_[wn]=r}else Ro(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;_n(r),_=!1}else _=Wf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=_),_=!0;if(!_)return r.flags&256?(Cr(r),r):(Cr(r),null)}return Cr(r),(r.flags&128)!==0?(r.lanes=c,r):(c=d!==null,t=t!==null&&t.memoizedState!==null,c&&(d=r.child,_=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(_=d.alternate.memoizedState.cachePool.pool),A=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(A=d.memoizedState.cachePool.pool),A!==_&&(d.flags|=2048)),c!==t&&c&&(r.child.flags|=8192),Zu(r,r.updateQueue),_n(r),null);case 4:return Zt(),t===null&&a1(r.stateNode.containerInfo),_n(r),null;case 10:return qs(r.type),_n(r),null;case 19:if(ae(Hn),d=r.memoizedState,d===null)return _n(r),null;if(_=(r.flags&128)!==0,A=d.rendering,A===null)if(_)_c(d,!1);else{if(Vn!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(A=Vu(t),A!==null){for(r.flags|=128,_c(d,!1),t=A.updateQueue,r.updateQueue=t,Zu(r,t),r.subtreeFlags=0,t=c,c=r.child;c!==null;)gg(c,t),c=c.sibling;return Ie(Hn,Hn.current&1|2),Ut&&Hs(r,d.treeForkCount),r.child}t=t.sibling}d.tail!==null&&mn()>nh&&(r.flags|=128,_=!0,_c(d,!1),r.lanes=4194304)}else{if(!_)if(t=Vu(A),t!==null){if(r.flags|=128,_=!0,t=t.updateQueue,r.updateQueue=t,Zu(r,t),_c(d,!0),d.tail===null&&d.tailMode==="hidden"&&!A.alternate&&!Ut)return _n(r),null}else 2*mn()-d.renderingStartTime>nh&&c!==536870912&&(r.flags|=128,_=!0,_c(d,!1),r.lanes=4194304);d.isBackwards?(A.sibling=r.child,r.child=A):(t=d.last,t!==null?t.sibling=A:r.child=A,d.last=A)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=mn(),t.sibling=null,c=Hn.current,Ie(Hn,_?c&1|2:c&1),Ut&&Hs(r,d.treeForkCount),t):(_n(r),null);case 22:case 23:return Cr(r),od(),d=r.memoizedState!==null,t!==null?t.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(c&536870912)!==0&&(r.flags&128)===0&&(_n(r),r.subtreeFlags&6&&(r.flags|=8192)):_n(r),c=r.updateQueue,c!==null&&Zu(r,c.retryQueue),c=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==c&&(r.flags|=2048),t!==null&&ae(Do),null;case 24:return c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),qs(Yn),_n(r),null;case 25:return null;case 30:return null}throw Error(o(156,r.tag))}function gA(t,r){switch(Xf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return qs(Yn),Zt(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Fn(r),null;case 31:if(r.memoizedState!==null){if(Cr(r),r.alternate===null)throw Error(o(340));Ro()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Cr(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(o(340));Ro()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return ae(Hn),null;case 4:return Zt(),null;case 10:return qs(r.type),null;case 22:case 23:return Cr(r),od(),t!==null&&ae(Do),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return qs(Yn),null;case 25:return null;default:return null}}function zm(t,r){switch(Xf(r),r.tag){case 3:qs(Yn),Zt();break;case 26:case 27:case 5:Fn(r);break;case 4:Zt();break;case 31:r.memoizedState!==null&&Cr(r);break;case 13:Cr(r);break;case 19:ae(Hn);break;case 10:qs(r.type);break;case 22:case 23:Cr(r),od(),t!==null&&ae(Do);break;case 24:qs(Yn)}}function Ec(t,r){try{var c=r.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var _=d.next;c=_;do{if((c.tag&t)===t){d=void 0;var A=c.create,I=c.inst;d=A(),I.destroy=d}c=c.next}while(c!==_)}}catch(L){rn(r,r.return,L)}}function Oa(t,r,c){try{var d=r.updateQueue,_=d!==null?d.lastEffect:null;if(_!==null){var A=_.next;d=A;do{if((d.tag&t)===t){var I=d.inst,L=I.destroy;if(L!==void 0){I.destroy=void 0,_=r;var Y=c,ce=L;try{ce()}catch(me){rn(_,Y,me)}}}d=d.next}while(d!==A)}}catch(me){rn(r,r.return,me)}}function jm(t){var r=t.updateQueue;if(r!==null){var c=t.stateNode;try{Dg(r,c)}catch(d){rn(t,t.return,d)}}}function Hm(t,r,c){c.props=Bo(t.type,t.memoizedProps),c.state=t.memoizedState;try{c.componentWillUnmount()}catch(d){rn(t,r,d)}}function xc(t,r){try{var c=t.ref;if(c!==null){switch(t.tag){case 26:case 27:case 5:var d=t.stateNode;break;case 30:d=t.stateNode;break;default:d=t.stateNode}typeof c=="function"?t.refCleanup=c(d):c.current=d}}catch(_){rn(t,r,_)}}function _s(t,r){var c=t.ref,d=t.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(_){rn(t,r,_)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(_){rn(t,r,_)}else c.current=null}function Gm(t){var r=t.type,c=t.memoizedProps,d=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(_){rn(t,t.return,_)}}function Ud(t,r,c){try{var d=t.stateNode;kA(d,t.type,c,r),d[jt]=r}catch(_){rn(t,t.return,_)}}function qm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Va(t.type)||t.tag===4}function Fd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Va(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zd(t,r,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(t,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(t),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=Li));else if(d!==4&&(d===27&&Va(t.type)&&(c=t.stateNode,r=null),t=t.child,t!==null))for(zd(t,r,c),t=t.sibling;t!==null;)zd(t,r,c),t=t.sibling}function Ju(t,r,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,r?c.insertBefore(t,r):c.appendChild(t);else if(d!==4&&(d===27&&Va(t.type)&&(c=t.stateNode),t=t.child,t!==null))for(Ju(t,r,c),t=t.sibling;t!==null;)Ju(t,r,c),t=t.sibling}function Xm(t){var r=t.stateNode,c=t.memoizedProps;try{for(var d=t.type,_=r.attributes;_.length;)r.removeAttributeNode(_[0]);bi(r,d,c),r[wn]=t,r[jt]=c}catch(A){rn(t,t.return,A)}}var Qs=!1,Qn=!1,jd=!1,Ym=typeof WeakSet=="function"?WeakSet:Set,ui=null;function mA(t,r){if(t=t.containerInfo,c1=Eh,t=O(t),P(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var _=d.anchorOffset,A=d.focusNode;d=d.focusOffset;try{c.nodeType,A.nodeType}catch{c=null;break e}var I=0,L=-1,Y=-1,ce=0,me=0,Ee=t,ue=null;t:for(;;){for(var ge;Ee!==c||_!==0&&Ee.nodeType!==3||(L=I+_),Ee!==A||d!==0&&Ee.nodeType!==3||(Y=I+d),Ee.nodeType===3&&(I+=Ee.nodeValue.length),(ge=Ee.firstChild)!==null;)ue=Ee,Ee=ge;for(;;){if(Ee===t)break t;if(ue===c&&++ce===_&&(L=I),ue===A&&++me===d&&(Y=I),(ge=Ee.nextSibling)!==null)break;Ee=ue,ue=Ee.parentNode}Ee=ge}c=L===-1||Y===-1?null:{start:L,end:Y}}else c=null}c=c||{start:0,end:0}}else c=null;for(u1={focusedElem:t,selectionRange:c},Eh=!1,ui=r;ui!==null;)if(r=ui,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,ui=t;else for(;ui!==null;){switch(r=ui,A=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(c=0;c<t.length;c++)_=t[c],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&A!==null){t=void 0,c=r,_=A.memoizedProps,A=A.memoizedState,d=c.stateNode;try{var qe=Bo(c.type,_);t=d.getSnapshotBeforeUpdate(qe,A),d.__reactInternalSnapshotBeforeUpdate=t}catch(et){rn(c,c.return,et)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,c=t.nodeType,c===9)d1(t);else if(c===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":d1(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=r.sibling,t!==null){t.return=r.return,ui=t;break}ui=r.return}}function Wm(t,r,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Js(t,c),d&4&&Ec(5,c);break;case 1:if(Js(t,c),d&4)if(t=c.stateNode,r===null)try{t.componentDidMount()}catch(I){rn(c,c.return,I)}else{var _=Bo(c.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(_,r,t.__reactInternalSnapshotBeforeUpdate)}catch(I){rn(c,c.return,I)}}d&64&&jm(c),d&512&&xc(c,c.return);break;case 3:if(Js(t,c),d&64&&(t=c.updateQueue,t!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{Dg(t,r)}catch(I){rn(c,c.return,I)}}break;case 27:r===null&&d&4&&Xm(c);case 26:case 5:Js(t,c),r===null&&d&4&&Gm(c),d&512&&xc(c,c.return);break;case 12:Js(t,c);break;case 31:Js(t,c),d&4&&Zm(t,c);break;case 13:Js(t,c),d&4&&Jm(t,c),d&64&&(t=c.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(c=CA.bind(null,c),GA(t,c))));break;case 22:if(d=c.memoizedState!==null||Qs,!d){r=r!==null&&r.memoizedState!==null||Qn,_=Qs;var A=Qn;Qs=d,(Qn=r)&&!A?$s(t,c,(c.subtreeFlags&8772)!==0):Js(t,c),Qs=_,Qn=A}break;case 30:break;default:Js(t,c)}}function Km(t){var r=t.alternate;r!==null&&(t.alternate=null,Km(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Ei(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var In=null,nr=!1;function Zs(t,r,c){for(c=c.child;c!==null;)Qm(t,r,c),c=c.sibling}function Qm(t,r,c){if(Se&&typeof Se.onCommitFiberUnmount=="function")try{Se.onCommitFiberUnmount(qt,c)}catch{}switch(c.tag){case 26:Qn||_s(c,r),Zs(t,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Qn||_s(c,r);var d=In,_=nr;Va(c.type)&&(In=c.stateNode,nr=!1),Zs(t,r,c),Rc(c.stateNode),In=d,nr=_;break;case 5:Qn||_s(c,r);case 6:if(d=In,_=nr,In=null,Zs(t,r,c),In=d,nr=_,In!==null)if(nr)try{(In.nodeType===9?In.body:In.nodeName==="HTML"?In.ownerDocument.body:In).removeChild(c.stateNode)}catch(A){rn(c,r,A)}else try{In.removeChild(c.stateNode)}catch(A){rn(c,r,A)}break;case 18:In!==null&&(nr?(t=In,jp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,c.stateNode),Rl(t)):jp(In,c.stateNode));break;case 4:d=In,_=nr,In=c.stateNode.containerInfo,nr=!0,Zs(t,r,c),In=d,nr=_;break;case 0:case 11:case 14:case 15:Oa(2,c,r),Qn||Oa(4,c,r),Zs(t,r,c);break;case 1:Qn||(_s(c,r),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Hm(c,r,d)),Zs(t,r,c);break;case 21:Zs(t,r,c);break;case 22:Qn=(d=Qn)||c.memoizedState!==null,Zs(t,r,c),Qn=d;break;default:Zs(t,r,c)}}function Zm(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Rl(t)}catch(c){rn(r,r.return,c)}}}function Jm(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Rl(t)}catch(c){rn(r,r.return,c)}}function pA(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Ym),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Ym),r;default:throw Error(o(435,t.tag))}}function $u(t,r){var c=pA(t);r.forEach(function(d){if(!c.has(d)){c.add(d);var _=vA.bind(null,t,d);d.then(_,_)}})}function ir(t,r){var c=r.deletions;if(c!==null)for(var d=0;d<c.length;d++){var _=c[d],A=t,I=r,L=I;e:for(;L!==null;){switch(L.tag){case 27:if(Va(L.type)){In=L.stateNode,nr=!1;break e}break;case 5:In=L.stateNode,nr=!1;break e;case 3:case 4:In=L.stateNode.containerInfo,nr=!0;break e}L=L.return}if(In===null)throw Error(o(160));Qm(A,I,_),In=null,nr=!1,A=_.alternate,A!==null&&(A.return=null),_.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)$m(r,t),r=r.sibling}var is=null;function $m(t,r){var c=t.alternate,d=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ir(r,t),rr(t),d&4&&(Oa(3,t,t.return),Ec(3,t),Oa(5,t,t.return));break;case 1:ir(r,t),rr(t),d&512&&(Qn||c===null||_s(c,c.return)),d&64&&Qs&&(t=t.updateQueue,t!==null&&(d=t.callbacks,d!==null&&(c=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var _=is;if(ir(r,t),rr(t),d&512&&(Qn||c===null||_s(c,c.return)),d&4){var A=c!==null?c.memoizedState:null;if(d=t.memoizedState,c===null)if(d===null)if(t.stateNode===null){e:{d=t.type,c=t.memoizedProps,_=_.ownerDocument||_;t:switch(d){case"title":A=_.getElementsByTagName("title")[0],(!A||A[Dr]||A[wn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=_.createElement(d),_.head.insertBefore(A,_.querySelector("head > title"))),bi(A,d,c),A[wn]=t,Tn(A),d=A;break e;case"link":var I=$p("link","href",_).get(d+(c.href||""));if(I){for(var L=0;L<I.length;L++)if(A=I[L],A.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&A.getAttribute("rel")===(c.rel==null?null:c.rel)&&A.getAttribute("title")===(c.title==null?null:c.title)&&A.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){I.splice(L,1);break t}}A=_.createElement(d),bi(A,d,c),_.head.appendChild(A);break;case"meta":if(I=$p("meta","content",_).get(d+(c.content||""))){for(L=0;L<I.length;L++)if(A=I[L],A.getAttribute("content")===(c.content==null?null:""+c.content)&&A.getAttribute("name")===(c.name==null?null:c.name)&&A.getAttribute("property")===(c.property==null?null:c.property)&&A.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&A.getAttribute("charset")===(c.charSet==null?null:c.charSet)){I.splice(L,1);break t}}A=_.createElement(d),bi(A,d,c),_.head.appendChild(A);break;default:throw Error(o(468,d))}A[wn]=t,Tn(A),d=A}t.stateNode=d}else e2(_,t.type,t.stateNode);else t.stateNode=Jp(_,d,t.memoizedProps);else A!==d?(A===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):A.count--,d===null?e2(_,t.type,t.stateNode):Jp(_,d,t.memoizedProps)):d===null&&t.stateNode!==null&&Ud(t,t.memoizedProps,c.memoizedProps)}break;case 27:ir(r,t),rr(t),d&512&&(Qn||c===null||_s(c,c.return)),c!==null&&d&4&&Ud(t,t.memoizedProps,c.memoizedProps);break;case 5:if(ir(r,t),rr(t),d&512&&(Qn||c===null||_s(c,c.return)),t.flags&32){_=t.stateNode;try{Pi(_,"")}catch(qe){rn(t,t.return,qe)}}d&4&&t.stateNode!=null&&(_=t.memoizedProps,Ud(t,_,c!==null?c.memoizedProps:_)),d&1024&&(jd=!0);break;case 6:if(ir(r,t),rr(t),d&4){if(t.stateNode===null)throw Error(o(162));d=t.memoizedProps,c=t.stateNode;try{c.nodeValue=d}catch(qe){rn(t,t.return,qe)}}break;case 3:if(mh=null,_=is,is=dh(r.containerInfo),ir(r,t),is=_,rr(t),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Rl(r.containerInfo)}catch(qe){rn(t,t.return,qe)}jd&&(jd=!1,ep(t));break;case 4:d=is,is=dh(t.stateNode.containerInfo),ir(r,t),rr(t),is=d;break;case 12:ir(r,t),rr(t);break;case 31:ir(r,t),rr(t),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,$u(t,d)));break;case 13:ir(r,t),rr(t),t.child.flags&8192&&t.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(th=mn()),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,$u(t,d)));break;case 22:_=t.memoizedState!==null;var Y=c!==null&&c.memoizedState!==null,ce=Qs,me=Qn;if(Qs=ce||_,Qn=me||Y,ir(r,t),Qn=me,Qs=ce,rr(t),d&8192)e:for(r=t.stateNode,r._visibility=_?r._visibility&-2:r._visibility|1,_&&(c===null||Y||Qs||Qn||Vo(t)),c=null,r=t;;){if(r.tag===5||r.tag===26){if(c===null){Y=c=r;try{if(A=Y.stateNode,_)I=A.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{L=Y.stateNode;var Ee=Y.memoizedProps.style,ue=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null;L.style.display=ue==null||typeof ue=="boolean"?"":(""+ue).trim()}}catch(qe){rn(Y,Y.return,qe)}}}else if(r.tag===6){if(c===null){Y=r;try{Y.stateNode.nodeValue=_?"":Y.memoizedProps}catch(qe){rn(Y,Y.return,qe)}}}else if(r.tag===18){if(c===null){Y=r;try{var ge=Y.stateNode;_?Hp(ge,!0):Hp(Y.stateNode,!1)}catch(qe){rn(Y,Y.return,qe)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=t.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,$u(t,c))));break;case 19:ir(r,t),rr(t),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,$u(t,d)));break;case 30:break;case 21:break;default:ir(r,t),rr(t)}}function rr(t){var r=t.flags;if(r&2){try{for(var c,d=t.return;d!==null;){if(qm(d)){c=d;break}d=d.return}if(c==null)throw Error(o(160));switch(c.tag){case 27:var _=c.stateNode,A=Fd(t);Ju(t,A,_);break;case 5:var I=c.stateNode;c.flags&32&&(Pi(I,""),c.flags&=-33);var L=Fd(t);Ju(t,L,I);break;case 3:case 4:var Y=c.stateNode.containerInfo,ce=Fd(t);zd(t,ce,Y);break;default:throw Error(o(161))}}catch(me){rn(t,t.return,me)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function ep(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;ep(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Js(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Wm(t,r.alternate,r),r=r.sibling}function Vo(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Oa(4,r,r.return),Vo(r);break;case 1:_s(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&Hm(r,r.return,c),Vo(r);break;case 27:Rc(r.stateNode);case 26:case 5:_s(r,r.return),Vo(r);break;case 22:r.memoizedState===null&&Vo(r);break;case 30:Vo(r);break;default:Vo(r)}t=t.sibling}}function $s(t,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,_=t,A=r,I=A.flags;switch(A.tag){case 0:case 11:case 15:$s(_,A,c),Ec(4,A);break;case 1:if($s(_,A,c),d=A,_=d.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(ce){rn(d,d.return,ce)}if(d=A,_=d.updateQueue,_!==null){var L=d.stateNode;try{var Y=_.shared.hiddenCallbacks;if(Y!==null)for(_.shared.hiddenCallbacks=null,_=0;_<Y.length;_++)Og(Y[_],L)}catch(ce){rn(d,d.return,ce)}}c&&I&64&&jm(A),xc(A,A.return);break;case 27:Xm(A);case 26:case 5:$s(_,A,c),c&&d===null&&I&4&&Gm(A),xc(A,A.return);break;case 12:$s(_,A,c);break;case 31:$s(_,A,c),c&&I&4&&Zm(_,A);break;case 13:$s(_,A,c),c&&I&4&&Jm(_,A);break;case 22:A.memoizedState===null&&$s(_,A,c),xc(A,A.return);break;case 30:break;default:$s(_,A,c)}r=r.sibling}}function Hd(t,r){var c=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==c&&(t!=null&&t.refCount++,c!=null&&ac(c))}function Gd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ac(t))}function rs(t,r,c,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)tp(t,r,c,d),r=r.sibling}function tp(t,r,c,d){var _=r.flags;switch(r.tag){case 0:case 11:case 15:rs(t,r,c,d),_&2048&&Ec(9,r);break;case 1:rs(t,r,c,d);break;case 3:rs(t,r,c,d),_&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&ac(t)));break;case 12:if(_&2048){rs(t,r,c,d),t=r.stateNode;try{var A=r.memoizedProps,I=A.id,L=A.onPostCommit;typeof L=="function"&&L(I,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(Y){rn(r,r.return,Y)}}else rs(t,r,c,d);break;case 31:rs(t,r,c,d);break;case 13:rs(t,r,c,d);break;case 23:break;case 22:A=r.stateNode,I=r.alternate,r.memoizedState!==null?A._visibility&2?rs(t,r,c,d):Ac(t,r):A._visibility&2?rs(t,r,c,d):(A._visibility|=2,_l(t,r,c,d,(r.subtreeFlags&10256)!==0||!1)),_&2048&&Hd(I,r);break;case 24:rs(t,r,c,d),_&2048&&Gd(r.alternate,r);break;default:rs(t,r,c,d)}}function _l(t,r,c,d,_){for(_=_&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var A=t,I=r,L=c,Y=d,ce=I.flags;switch(I.tag){case 0:case 11:case 15:_l(A,I,L,Y,_),Ec(8,I);break;case 23:break;case 22:var me=I.stateNode;I.memoizedState!==null?me._visibility&2?_l(A,I,L,Y,_):Ac(A,I):(me._visibility|=2,_l(A,I,L,Y,_)),_&&ce&2048&&Hd(I.alternate,I);break;case 24:_l(A,I,L,Y,_),_&&ce&2048&&Gd(I.alternate,I);break;default:_l(A,I,L,Y,_)}r=r.sibling}}function Ac(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=t,d=r,_=d.flags;switch(d.tag){case 22:Ac(c,d),_&2048&&Hd(d.alternate,d);break;case 24:Ac(c,d),_&2048&&Gd(d.alternate,d);break;default:Ac(c,d)}r=r.sibling}}var wc=8192;function El(t,r,c){if(t.subtreeFlags&wc)for(t=t.child;t!==null;)np(t,r,c),t=t.sibling}function np(t,r,c){switch(t.tag){case 26:El(t,r,c),t.flags&wc&&t.memoizedState!==null&&nw(c,is,t.memoizedState,t.memoizedProps);break;case 5:El(t,r,c);break;case 3:case 4:var d=is;is=dh(t.stateNode.containerInfo),El(t,r,c),is=d;break;case 22:t.memoizedState===null&&(d=t.alternate,d!==null&&d.memoizedState!==null?(d=wc,wc=16777216,El(t,r,c),wc=d):El(t,r,c));break;default:El(t,r,c)}}function ip(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Tc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];ui=d,sp(d,t)}ip(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)rp(t),t=t.sibling}function rp(t){switch(t.tag){case 0:case 11:case 15:Tc(t),t.flags&2048&&Oa(9,t,t.return);break;case 3:Tc(t);break;case 12:Tc(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,eh(t)):Tc(t);break;default:Tc(t)}}function eh(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];ui=d,sp(d,t)}ip(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Oa(8,r,r.return),eh(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,eh(r));break;default:eh(r)}t=t.sibling}}function sp(t,r){for(;ui!==null;){var c=ui;switch(c.tag){case 0:case 11:case 15:Oa(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ac(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,ui=d;else e:for(c=t;ui!==null;){d=ui;var _=d.sibling,A=d.return;if(Km(d),d===c){ui=null;break e}if(_!==null){_.return=A,ui=_;break e}ui=A}}}var yA={getCacheForType:function(t){var r=vi(Yn),c=r.data.get(t);return c===void 0&&(c=t(),r.data.set(t,c)),c},cacheSignal:function(){return vi(Yn).controller.signal}},_A=typeof WeakMap=="function"?WeakMap:Map,Qt=0,fn=null,Rt=null,Mt=0,nn=0,vr=null,Da=!1,xl=!1,qd=!1,ea=0,Vn=0,Ma=0,Uo=0,Xd=0,Sr=0,Al=0,Cc=null,sr=null,Yd=!1,th=0,ap=0,nh=1/0,ih=null,Pa=null,si=0,La=null,wl=null,ta=0,Wd=0,Kd=null,op=null,vc=0,Qd=null;function br(){return(Qt&2)!==0&&Mt!==0?Mt&-Mt:K.T!==null?n1():yi()}function lp(){if(Sr===0)if((Mt&536870912)===0||Ut){var t=xt;xt<<=1,(xt&3932160)===0&&(xt=262144),Sr=t}else Sr=536870912;return t=Tr.current,t!==null&&(t.flags|=32),Sr}function ar(t,r,c){(t===fn&&(nn===2||nn===9)||t.cancelPendingCommit!==null)&&(Tl(t,0),ka(t,Mt,Sr,!1)),Or(t,c),((Qt&2)===0||t!==fn)&&(t===fn&&((Qt&2)===0&&(Uo|=c),Vn===4&&ka(t,Mt,Sr,!1)),Es(t))}function cp(t,r,c){if((Qt&6)!==0)throw Error(o(327));var d=!c&&(r&127)===0&&(r&t.expiredLanes)===0||Nn(t,r),_=d?AA(t,r):Jd(t,r,!0),A=d;do{if(_===0){xl&&!d&&ka(t,r,0,!1);break}else{if(c=t.current.alternate,A&&!EA(c)){_=Jd(t,r,!1),A=!1;continue}if(_===2){if(A=r,t.errorRecoveryDisabledLanes&A)var I=0;else I=t.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){r=I;e:{var L=t;_=Cc;var Y=L.current.memoizedState.isDehydrated;if(Y&&(Tl(L,I).flags|=256),I=Jd(L,I,!1),I!==2){if(qd&&!Y){L.errorRecoveryDisabledLanes|=A,Uo|=A,_=4;break e}A=sr,sr=_,A!==null&&(sr===null?sr=A:sr.push.apply(sr,A))}_=I}if(A=!1,_!==2)continue}}if(_===1){Tl(t,0),ka(t,r,0,!0);break}e:{switch(d=t,A=_,A){case 0:case 1:throw Error(o(345));case 4:if((r&4194048)!==r)break;case 6:ka(d,r,Sr,!Da);break e;case 2:sr=null;break;case 3:case 5:break;default:throw Error(o(329))}if((r&62914560)===r&&(_=th+300-mn(),10<_)){if(ka(d,r,Sr,!Da),gr(d,0,!0)!==0)break e;ta=r,d.timeoutHandle=Fp(up.bind(null,d,c,sr,ih,Yd,r,Sr,Uo,Al,Da,A,"Throttled",-0,0),_);break e}up(d,c,sr,ih,Yd,r,Sr,Uo,Al,Da,A,null,-0,0)}}break}while(!0);Es(t)}function up(t,r,c,d,_,A,I,L,Y,ce,me,Ee,ue,ge){if(t.timeoutHandle=-1,Ee=r.subtreeFlags,Ee&8192||(Ee&16785408)===16785408){Ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Li},np(r,A,Ee);var qe=(A&62914560)===A?th-mn():(A&4194048)===A?ap-mn():0;if(qe=iw(Ee,qe),qe!==null){ta=A,t.cancelPendingCommit=qe(_p.bind(null,t,r,A,c,d,_,I,L,Y,me,Ee,null,ue,ge)),ka(t,A,I,!ce);return}}_p(t,r,A,c,d,_,I,L,Y)}function EA(t){for(var r=t;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var _=c[d],A=_.getSnapshot;_=_.value;try{if(!g(A(),_))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ka(t,r,c,d){r&=~Xd,r&=~Uo,t.suspendedLanes|=r,t.pingedLanes&=~r,d&&(t.warmLanes|=r),d=t.expirationTimes;for(var _=r;0<_;){var A=31-it(_),I=1<<A;d[A]=-1,_&=~I}c!==0&&Rs(t,c,r)}function rh(){return(Qt&6)===0?(Sc(0),!1):!0}function Zd(){if(Rt!==null){if(nn===0)var t=Rt.return;else t=Rt,Gs=No=null,dd(t),dl=null,lc=0,t=Rt;for(;t!==null;)zm(t.alternate,t),t=t.return;Rt=null}}function Tl(t,r){var c=t.timeoutHandle;c!==-1&&(t.timeoutHandle=-1,UA(c)),c=t.cancelPendingCommit,c!==null&&(t.cancelPendingCommit=null,c()),ta=0,Zd(),fn=t,Rt=c=js(t.current,null),Mt=r,nn=0,vr=null,Da=!1,xl=Nn(t,r),qd=!1,Al=Sr=Xd=Uo=Ma=Vn=0,sr=Cc=null,Yd=!1,(r&8)!==0&&(r|=r&32);var d=t.entangledLanes;if(d!==0)for(t=t.entanglements,d&=r;0<d;){var _=31-it(d),A=1<<_;r|=t[_],d&=~A}return ea=r,vu(),c}function hp(t,r){gt=null,K.H=pc,r===fl||r===Mu?(r=bg(),nn=3):r===td?(r=bg(),nn=4):nn=r===Rd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,vr=r,Rt===null&&(Vn=1,Yu(t,zr(r,t.current)))}function fp(){var t=Tr.current;return t===null?!0:(Mt&4194048)===Mt?qr===null:(Mt&62914560)===Mt||(Mt&536870912)!==0?t===qr:!1}function dp(){var t=K.H;return K.H=pc,t===null?pc:t}function gp(){var t=K.A;return K.A=yA,t}function sh(){Vn=4,Da||(Mt&4194048)!==Mt&&Tr.current!==null||(xl=!0),(Ma&134217727)===0&&(Uo&134217727)===0||fn===null||ka(fn,Mt,Sr,!1)}function Jd(t,r,c){var d=Qt;Qt|=2;var _=dp(),A=gp();(fn!==t||Mt!==r)&&(ih=null,Tl(t,r)),r=!1;var I=Vn;e:do try{if(nn!==0&&Rt!==null){var L=Rt,Y=vr;switch(nn){case 8:Zd(),I=6;break e;case 3:case 2:case 9:case 6:Tr.current===null&&(r=!0);var ce=nn;if(nn=0,vr=null,Cl(t,L,Y,ce),c&&xl){I=0;break e}break;default:ce=nn,nn=0,vr=null,Cl(t,L,Y,ce)}}xA(),I=Vn;break}catch(me){hp(t,me)}while(!0);return r&&t.shellSuspendCounter++,Gs=No=null,Qt=d,K.H=_,K.A=A,Rt===null&&(fn=null,Mt=0,vu()),I}function xA(){for(;Rt!==null;)mp(Rt)}function AA(t,r){var c=Qt;Qt|=2;var d=dp(),_=gp();fn!==t||Mt!==r?(ih=null,nh=mn()+500,Tl(t,r)):xl=Nn(t,r);e:do try{if(nn!==0&&Rt!==null){r=Rt;var A=vr;t:switch(nn){case 1:nn=0,vr=null,Cl(t,r,A,1);break;case 2:case 9:if(vg(A)){nn=0,vr=null,pp(r);break}r=function(){nn!==2&&nn!==9||fn!==t||(nn=7),Es(t)},A.then(r,r);break e;case 3:nn=7;break e;case 4:nn=5;break e;case 7:vg(A)?(nn=0,vr=null,pp(r)):(nn=0,vr=null,Cl(t,r,A,7));break;case 5:var I=null;switch(Rt.tag){case 26:I=Rt.memoizedState;case 5:case 27:var L=Rt;if(I?t2(I):L.stateNode.complete){nn=0,vr=null;var Y=L.sibling;if(Y!==null)Rt=Y;else{var ce=L.return;ce!==null?(Rt=ce,ah(ce)):Rt=null}break t}}nn=0,vr=null,Cl(t,r,A,5);break;case 6:nn=0,vr=null,Cl(t,r,A,6);break;case 8:Zd(),Vn=6;break e;default:throw Error(o(462))}}wA();break}catch(me){hp(t,me)}while(!0);return Gs=No=null,K.H=d,K.A=_,Qt=c,Rt!==null?0:(fn=null,Mt=0,vu(),Vn)}function wA(){for(;Rt!==null&&!ha();)mp(Rt)}function mp(t){var r=Um(t.alternate,t,ea);t.memoizedProps=t.pendingProps,r===null?ah(t):Rt=r}function pp(t){var r=t,c=r.alternate;switch(r.tag){case 15:case 0:r=Mm(c,r,r.pendingProps,r.type,void 0,Mt);break;case 11:r=Mm(c,r,r.pendingProps,r.type.render,r.ref,Mt);break;case 5:dd(r);default:zm(c,r),r=Rt=gg(r,ea),r=Um(c,r,ea)}t.memoizedProps=t.pendingProps,r===null?ah(t):Rt=r}function Cl(t,r,c,d){Gs=No=null,dd(r),dl=null,lc=0;var _=r.return;try{if(uA(t,_,r,c,Mt)){Vn=1,Yu(t,zr(c,t.current)),Rt=null;return}}catch(A){if(_!==null)throw Rt=_,A;Vn=1,Yu(t,zr(c,t.current)),Rt=null;return}r.flags&32768?(Ut||d===1?t=!0:xl||(Mt&536870912)!==0?t=!1:(Da=t=!0,(d===2||d===9||d===3||d===6)&&(d=Tr.current,d!==null&&d.tag===13&&(d.flags|=16384))),yp(r,t)):ah(r)}function ah(t){var r=t;do{if((r.flags&32768)!==0){yp(r,Da);return}t=r.return;var c=dA(r.alternate,r,ea);if(c!==null){Rt=c;return}if(r=r.sibling,r!==null){Rt=r;return}Rt=r=t}while(r!==null);Vn===0&&(Vn=5)}function yp(t,r){do{var c=gA(t.alternate,t);if(c!==null){c.flags&=32767,Rt=c;return}if(c=t.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(t=t.sibling,t!==null)){Rt=t;return}Rt=t=c}while(t!==null);Vn=6,Rt=null}function _p(t,r,c,d,_,A,I,L,Y){t.cancelPendingCommit=null;do oh();while(si!==0);if((Qt&6)!==0)throw Error(o(327));if(r!==null){if(r===t.current)throw Error(o(177));if(A=r.lanes|r.childLanes,A|=Ff,Qi(t,c,A,I,L,Y),t===fn&&(Rt=fn=null,Mt=0),wl=r,La=t,ta=c,Wd=A,Kd=_,op=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,SA(gi,function(){return Tp(),null})):(t.callbackNode=null,t.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=K.T,K.T=null,_=se.p,se.p=2,I=Qt,Qt|=4;try{mA(t,r,c)}finally{Qt=I,se.p=_,K.T=d}}si=1,Ep(),xp(),Ap()}}function Ep(){if(si===1){si=0;var t=La,r=wl,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=K.T,K.T=null;var d=se.p;se.p=2;var _=Qt;Qt|=4;try{$m(r,t);var A=u1,I=O(t.containerInfo),L=A.focusedElem,Y=A.selectionRange;if(I!==L&&L&&L.ownerDocument&&b(L.ownerDocument.documentElement,L)){if(Y!==null&&P(L)){var ce=Y.start,me=Y.end;if(me===void 0&&(me=ce),"selectionStart"in L)L.selectionStart=ce,L.selectionEnd=Math.min(me,L.value.length);else{var Ee=L.ownerDocument||document,ue=Ee&&Ee.defaultView||window;if(ue.getSelection){var ge=ue.getSelection(),qe=L.textContent.length,et=Math.min(Y.start,qe),ln=Y.end===void 0?et:Math.min(Y.end,qe);!ge.extend&&et>ln&&(I=ln,ln=et,et=I);var ne=T(L,et),$=T(L,ln);if(ne&&$&&(ge.rangeCount!==1||ge.anchorNode!==ne.node||ge.anchorOffset!==ne.offset||ge.focusNode!==$.node||ge.focusOffset!==$.offset)){var le=Ee.createRange();le.setStart(ne.node,ne.offset),ge.removeAllRanges(),et>ln?(ge.addRange(le),ge.extend($.node,$.offset)):(le.setEnd($.node,$.offset),ge.addRange(le))}}}}for(Ee=[],ge=L;ge=ge.parentNode;)ge.nodeType===1&&Ee.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<Ee.length;L++){var ye=Ee[L];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}Eh=!!c1,u1=c1=null}finally{Qt=_,se.p=d,K.T=c}}t.current=r,si=2}}function xp(){if(si===2){si=0;var t=La,r=wl,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=K.T,K.T=null;var d=se.p;se.p=2;var _=Qt;Qt|=4;try{Wm(t,r.alternate,r)}finally{Qt=_,se.p=d,K.T=c}}si=3}}function Ap(){if(si===4||si===3){si=0,mo();var t=La,r=wl,c=ta,d=op;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?si=5:(si=0,wl=La=null,wp(t,t.pendingLanes));var _=t.pendingLanes;if(_===0&&(Pa=null),pi(c),r=r.stateNode,Se&&typeof Se.onCommitFiberRoot=="function")try{Se.onCommitFiberRoot(qt,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=K.T,_=se.p,se.p=2,K.T=null;try{for(var A=t.onRecoverableError,I=0;I<d.length;I++){var L=d[I];A(L.value,{componentStack:L.stack})}}finally{K.T=r,se.p=_}}(ta&3)!==0&&oh(),Es(t),_=t.pendingLanes,(c&261930)!==0&&(_&42)!==0?t===Qd?vc++:(vc=0,Qd=t):vc=0,Sc(0)}}function wp(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,ac(r)))}function oh(){return Ep(),xp(),Ap(),Tp()}function Tp(){if(si!==5)return!1;var t=La,r=Wd;Wd=0;var c=pi(ta),d=K.T,_=se.p;try{se.p=32>c?32:c,K.T=null,c=Kd,Kd=null;var A=La,I=ta;if(si=0,wl=La=null,ta=0,(Qt&6)!==0)throw Error(o(331));var L=Qt;if(Qt|=4,rp(A.current),tp(A,A.current,I,c),Qt=L,Sc(0,!1),Se&&typeof Se.onPostCommitFiberRoot=="function")try{Se.onPostCommitFiberRoot(qt,A)}catch{}return!0}finally{se.p=_,K.T=d,wp(t,r)}}function Cp(t,r,c){r=zr(c,r),r=Id(t.stateNode,r,2),t=Ia(t,r,2),t!==null&&(Or(t,2),Es(t))}function rn(t,r,c){if(t.tag===3)Cp(t,t,c);else for(;r!==null;){if(r.tag===3){Cp(r,t,c);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Pa===null||!Pa.has(d))){t=zr(c,t),c=vm(2),d=Ia(r,c,2),d!==null&&(Sm(c,d,r,t),Or(d,2),Es(d));break}}r=r.return}}function $d(t,r,c){var d=t.pingCache;if(d===null){d=t.pingCache=new _A;var _=new Set;d.set(r,_)}else _=d.get(r),_===void 0&&(_=new Set,d.set(r,_));_.has(c)||(qd=!0,_.add(c),t=TA.bind(null,t,r,c),r.then(t,t))}function TA(t,r,c){var d=t.pingCache;d!==null&&d.delete(r),t.pingedLanes|=t.suspendedLanes&c,t.warmLanes&=~c,fn===t&&(Mt&c)===c&&(Vn===4||Vn===3&&(Mt&62914560)===Mt&&300>mn()-th?(Qt&2)===0&&Tl(t,0):Xd|=c,Al===Mt&&(Al=0)),Es(t)}function vp(t,r){r===0&&(r=zn()),t=bo(t,r),t!==null&&(Or(t,r),Es(t))}function CA(t){var r=t.memoizedState,c=0;r!==null&&(c=r.retryLane),vp(t,c)}function vA(t,r){var c=0;switch(t.tag){case 31:case 13:var d=t.stateNode,_=t.memoizedState;_!==null&&(c=_.retryLane);break;case 19:d=t.stateNode;break;case 22:d=t.stateNode._retryCache;break;default:throw Error(o(314))}d!==null&&d.delete(r),vp(t,c)}function SA(t,r){return An(t,r)}var lh=null,vl=null,e1=!1,ch=!1,t1=!1,Ba=0;function Es(t){t!==vl&&t.next===null&&(vl===null?lh=vl=t:vl=vl.next=t),ch=!0,e1||(e1=!0,IA())}function Sc(t,r){if(!t1&&ch){t1=!0;do for(var c=!1,d=lh;d!==null;){if(t!==0){var _=d.pendingLanes;if(_===0)var A=0;else{var I=d.suspendedLanes,L=d.pingedLanes;A=(1<<31-it(42|t)+1)-1,A&=_&~(I&~L),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(c=!0,Rp(d,A))}else A=Mt,A=gr(d,d===fn?A:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(A&3)===0||Nn(d,A)||(c=!0,Rp(d,A));d=d.next}while(c);t1=!1}}function bA(){Sp()}function Sp(){ch=e1=!1;var t=0;Ba!==0&&VA()&&(t=Ba);for(var r=mn(),c=null,d=lh;d!==null;){var _=d.next,A=bp(d,r);A===0?(d.next=null,c===null?lh=_:c.next=_,_===null&&(vl=c)):(c=d,(t!==0||(A&3)!==0)&&(ch=!0)),d=_}si!==0&&si!==5||Sc(t),Ba!==0&&(Ba=0)}function bp(t,r){for(var c=t.suspendedLanes,d=t.pingedLanes,_=t.expirationTimes,A=t.pendingLanes&-62914561;0<A;){var I=31-it(A),L=1<<I,Y=_[I];Y===-1?((L&c)===0||(L&d)!==0)&&(_[I]=yo(L,r)):Y<=r&&(t.expiredLanes|=L),A&=~L}if(r=fn,c=Mt,c=gr(t,t===r?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),d=t.callbackNode,c===0||t===r&&(nn===2||nn===9)||t.cancelPendingCommit!==null)return d!==null&&d!==null&&Fe(d),t.callbackNode=null,t.callbackPriority=0;if((c&3)===0||Nn(t,c)){if(r=c&-c,r===t.callbackPriority)return r;switch(d!==null&&Fe(d),pi(c)){case 2:case 8:c=fa;break;case 32:c=gi;break;case 268435456:c=po;break;default:c=gi}return d=Ip.bind(null,t),c=An(c,d),t.callbackPriority=r,t.callbackNode=c,r}return d!==null&&d!==null&&Fe(d),t.callbackPriority=2,t.callbackNode=null,2}function Ip(t,r){if(si!==0&&si!==5)return t.callbackNode=null,t.callbackPriority=0,null;var c=t.callbackNode;if(oh()&&t.callbackNode!==c)return null;var d=Mt;return d=gr(t,t===fn?d:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),d===0?null:(cp(t,d,r),bp(t,mn()),t.callbackNode!=null&&t.callbackNode===c?Ip.bind(null,t):null)}function Rp(t,r){if(oh())return null;cp(t,r,!0)}function IA(){FA(function(){(Qt&6)!==0?An(di,bA):Sp()})}function n1(){if(Ba===0){var t=ul;t===0&&(t=fr,fr<<=1,(fr&261888)===0&&(fr=256)),Ba=t}return Ba}function Np(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:fs(""+t)}function Op(t,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,t.id&&c.setAttribute("form",t.id),r.parentNode.insertBefore(c,r),t=new FormData(t),c.parentNode.removeChild(c),t}function RA(t,r,c,d,_){if(r==="submit"&&c&&c.stateNode===_){var A=Np((_[jt]||null).action),I=d.submitter;I&&(r=(r=I[jt]||null)?Np(r.formAction):I.getAttribute("formAction"),r!==null&&(A=r,I=null));var L=new pn("action","action",null,d,_);t.push({event:L,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ba!==0){var Y=I?Op(_,I):new FormData(_);wd(c,{pending:!0,data:Y,method:_.method,action:A},null,Y)}}else typeof A=="function"&&(L.preventDefault(),Y=I?Op(_,I):new FormData(_),wd(c,{pending:!0,data:Y,method:_.method,action:A},A,Y))},currentTarget:_}]})}}for(var i1=0;i1<ic.length;i1++){var r1=ic[i1],NA=r1.toLowerCase(),OA=r1[0].toUpperCase()+r1.slice(1);ns(NA,"on"+OA)}ns(tr,"onAnimationEnd"),ns(Ti,"onAnimationIteration"),ns(en,"onAnimationStart"),ns("dblclick","onDoubleClick"),ns("focusin","onFocus"),ns("focusout","onBlur"),ns(ri,"onTransitionRun"),ns(Wi,"onTransitionStart"),ns(Aa,"onTransitionCancel"),ns(zs,"onTransitionEnd"),xi("onMouseEnter",["mouseout","mouseover"]),xi("onMouseLeave",["mouseout","mouseover"]),xi("onPointerEnter",["pointerout","pointerover"]),xi("onPointerLeave",["pointerout","pointerover"]),Ht("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ht("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ht("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ht("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ht("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ht("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(bc));function Dp(t,r){r=(r&4)!==0;for(var c=0;c<t.length;c++){var d=t[c],_=d.event;d=d.listeners;e:{var A=void 0;if(r)for(var I=d.length-1;0<=I;I--){var L=d[I],Y=L.instance,ce=L.currentTarget;if(L=L.listener,Y!==A&&_.isPropagationStopped())break e;A=L,_.currentTarget=ce;try{A(_)}catch(me){Cu(me)}_.currentTarget=null,A=Y}else for(I=0;I<d.length;I++){if(L=d[I],Y=L.instance,ce=L.currentTarget,L=L.listener,Y!==A&&_.isPropagationStopped())break e;A=L,_.currentTarget=ce;try{A(_)}catch(me){Cu(me)}_.currentTarget=null,A=Y}}}}function Nt(t,r){var c=r[Jr];c===void 0&&(c=r[Jr]=new Set);var d=t+"__bubble";c.has(d)||(Mp(r,t,2,!1),c.add(d))}function s1(t,r,c){var d=0;r&&(d|=4),Mp(c,t,d,r)}var uh="_reactListening"+Math.random().toString(36).slice(2);function a1(t){if(!t[uh]){t[uh]=!0,Ae.forEach(function(c){c!=="selectionchange"&&(DA.has(c)||s1(c,!1,t),s1(c,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[uh]||(r[uh]=!0,s1("selectionchange",!1,r))}}function Mp(t,r,c,d){switch(l2(r)){case 2:var _=aw;break;case 8:_=ow;break;default:_=A1}c=_.bind(null,r,c,t),_=void 0,!Ds||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(_=!0),d?_!==void 0?t.addEventListener(r,c,{capture:!0,passive:_}):t.addEventListener(r,c,!0):_!==void 0?t.addEventListener(r,c,{passive:_}):t.addEventListener(r,c,!1)}function o1(t,r,c,d,_){var A=d;if((r&1)===0&&(r&2)===0&&d!==null)e:for(;;){if(d===null)return;var I=d.tag;if(I===3||I===4){var L=d.stateNode.containerInfo;if(L===_)break;if(I===4)for(I=d.return;I!==null;){var Y=I.tag;if((Y===3||Y===4)&&I.stateNode.containerInfo===_)return;I=I.return}for(;L!==null;){if(I=dn(L),I===null)return;if(Y=I.tag,Y===5||Y===6||Y===26||Y===27){d=A=I;continue e}L=L.parentNode}}d=d.return}ds(function(){var ce=A,me=Ji(c),Ee=[];e:{var ue=Tu.get(t);if(ue!==void 0){var ge=pn,qe=t;switch(t){case"keypress":if(_r(c)===0)break e;case"keydown":case"keyup":ge=Bs;break;case"focusin":qe="focus",ge=Ls;break;case"focusout":qe="blur",ge=Ls;break;case"beforeblur":case"afterblur":ge=Ls;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Ft;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Ps;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=S;break;case tr:case Ti:case en:ge=ht;break;case zs:ge=k;break;case"scroll":case"scrollend":ge=pa;break;case"wheel":ge=de;break;case"copy":case"cut":case"paste":ge=ks;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=It;break;case"toggle":case"beforetoggle":ge=at}var et=(r&4)!==0,ln=!et&&(t==="scroll"||t==="scrollend"),ne=et?ue!==null?ue+"Capture":null:ue;et=[];for(var $=ce,le;$!==null;){var ye=$;if(le=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||le===null||ne===null||(ye=Je($,ne),ye!=null&&et.push(Ic($,ye,le))),ln)break;$=$.return}0<et.length&&(ue=new ge(ue,qe,null,c,me),Ee.push({event:ue,listeners:et}))}}if((r&7)===0){e:{if(ue=t==="mouseover"||t==="pointerover",ge=t==="mouseout"||t==="pointerout",ue&&c!==Os&&(qe=c.relatedTarget||c.fromElement)&&(dn(qe)||qe[_i]))break e;if((ge||ue)&&(ue=me.window===me?me:(ue=me.ownerDocument)?ue.defaultView||ue.parentWindow:window,ge?(qe=c.relatedTarget||c.toElement,ge=ce,qe=qe?dn(qe):null,qe!==null&&(ln=m(qe),et=qe.tag,qe!==ln||et!==5&&et!==27&&et!==6)&&(qe=null)):(ge=null,qe=ce),ge!==qe)){if(et=Ft,ye="onMouseLeave",ne="onMouseEnter",$="mouse",(t==="pointerout"||t==="pointerover")&&(et=It,ye="onPointerLeave",ne="onPointerEnter",$="pointer"),ln=ge==null?ue:Di(ge),le=qe==null?ue:Di(qe),ue=new et(ye,$+"leave",ge,c,me),ue.target=ln,ue.relatedTarget=le,ye=null,dn(me)===ce&&(et=new et(ne,$+"enter",qe,c,me),et.target=le,et.relatedTarget=ln,ye=et),ln=ye,ge&&qe)t:{for(et=MA,ne=ge,$=qe,le=0,ye=ne;ye;ye=et(ye))le++;ye=0;for(var Ke=$;Ke;Ke=et(Ke))ye++;for(;0<le-ye;)ne=et(ne),le--;for(;0<ye-le;)$=et($),ye--;for(;le--;){if(ne===$||$!==null&&ne===$.alternate){et=ne;break t}ne=et(ne),$=et($)}et=null}else et=null;ge!==null&&Pp(Ee,ue,ge,et,!1),qe!==null&&ln!==null&&Pp(Ee,ln,qe,et,!0)}}e:{if(ue=ce?Di(ce):window,ge=ue.nodeName&&ue.nodeName.toLowerCase(),ge==="select"||ge==="input"&&ue.type==="file")var Wt=Ar;else if(nc(ue))if(wu)Wt=u;else{Wt=s;var Xe=i}else ge=ue.nodeName,!ge||ge.toLowerCase()!=="input"||ue.type!=="checkbox"&&ue.type!=="radio"?ce&&Jt(ce.elementType)&&(Wt=Ar):Wt=l;if(Wt&&(Wt=Wt(t,ce))){xr(Ee,Wt,c,me);break e}Xe&&Xe(t,ue,ce),t==="focusout"&&ce&&ue.type==="number"&&ce.memoizedProps.value!=null&&U(ue,"number",ue.value)}switch(Xe=ce?Di(ce):window,t){case"focusin":(nc(Xe)||Xe.contentEditable==="true")&&(W=Xe,Z=ce,re=null);break;case"focusout":re=Z=W=null;break;case"mousedown":fe=!0;break;case"contextmenu":case"mouseup":case"dragend":fe=!1,Re(Ee,c,me);break;case"selectionchange":if(H)break;case"keydown":case"keyup":Re(Ee,c,me)}var yt;if(Vt)e:{switch(t){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else xa?Vs(t,c)&&(Pt="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(Pt="onCompositionStart");Pt&&(Vr&&c.locale!=="ko"&&(xa||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&xa&&(yt=$r()):(pr=me,yr="value"in pr?pr.value:pr.textContent,xa=!0)),Xe=hh(ce,Pt),0<Xe.length&&(Pt=new Lr(Pt,t,null,c,me),Ee.push({event:Pt,listeners:Xe}),yt?Pt.data=yt:(yt=Ur(c),yt!==null&&(Pt.data=yt)))),(yt=Xi?ms(t,c):il(t,c))&&(Pt=hh(ce,"onBeforeInput"),0<Pt.length&&(Xe=new Lr("onBeforeInput","beforeinput",null,c,me),Ee.push({event:Xe,listeners:Pt}),Xe.data=yt)),RA(Ee,t,ce,c,me)}Dp(Ee,r)})}function Ic(t,r,c){return{instance:t,listener:r,currentTarget:c}}function hh(t,r){for(var c=r+"Capture",d=[];t!==null;){var _=t,A=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||A===null||(_=Je(t,c),_!=null&&d.unshift(Ic(t,_,A)),_=Je(t,r),_!=null&&d.push(Ic(t,_,A))),t.tag===3)return d;t=t.return}return[]}function MA(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Pp(t,r,c,d,_){for(var A=r._reactName,I=[];c!==null&&c!==d;){var L=c,Y=L.alternate,ce=L.stateNode;if(L=L.tag,Y!==null&&Y===d)break;L!==5&&L!==26&&L!==27||ce===null||(Y=ce,_?(ce=Je(c,A),ce!=null&&I.unshift(Ic(c,ce,Y))):_||(ce=Je(c,A),ce!=null&&I.push(Ic(c,ce,Y)))),c=c.return}I.length!==0&&t.push({event:r,listeners:I})}var PA=/\r\n?/g,LA=/\u0000|\uFFFD/g;function Lp(t){return(typeof t=="string"?t:""+t).replace(PA,`
`).replace(LA,"")}function kp(t,r){return r=Lp(r),Lp(t)===r}function on(t,r,c,d,_,A){switch(c){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||Pi(t,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&Pi(t,""+d);break;case"className":Ai(t,"class",d);break;case"tabIndex":Ai(t,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Ai(t,c,d);break;case"style":Ye(t,d,A);break;case"data":if(r!=="object"){Ai(t,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||c!=="href")){t.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){t.removeAttribute(c);break}d=fs(""+d),t.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){t.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(c==="formAction"?(r!=="input"&&on(t,r,"name",_.name,_,null),on(t,r,"formEncType",_.formEncType,_,null),on(t,r,"formMethod",_.formMethod,_,null),on(t,r,"formTarget",_.formTarget,_,null)):(on(t,r,"encType",_.encType,_,null),on(t,r,"method",_.method,_,null),on(t,r,"target",_.target,_,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){t.removeAttribute(c);break}d=fs(""+d),t.setAttribute(c,d);break;case"onClick":d!=null&&(t.onclick=Li);break;case"onScroll":d!=null&&Nt("scroll",t);break;case"onScrollEnd":d!=null&&Nt("scrollend",t);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(c=d.__html,c!=null){if(_.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"multiple":t.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":t.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){t.removeAttribute("xlink:href");break}c=fs(""+d),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,""+d):t.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,""):t.removeAttribute(c);break;case"capture":case"download":d===!0?t.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,d):t.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?t.setAttribute(c,d):t.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?t.removeAttribute(c):t.setAttribute(c,d);break;case"popover":Nt("beforetoggle",t),Nt("toggle",t),us(t,"popover",d);break;case"xlinkActuate":Cn(t,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Cn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Cn(t,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Cn(t,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Cn(t,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Cn(t,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Cn(t,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Cn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Cn(t,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":us(t,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Ao.get(c)||c,us(t,c,d))}}function l1(t,r,c,d,_,A){switch(c){case"style":Ye(t,d,A);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(c=d.__html,c!=null){if(_.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"children":typeof d=="string"?Pi(t,d):(typeof d=="number"||typeof d=="bigint")&&Pi(t,""+d);break;case"onScroll":d!=null&&Nt("scroll",t);break;case"onScrollEnd":d!=null&&Nt("scrollend",t);break;case"onClick":d!=null&&(t.onclick=Li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_o.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(_=c.endsWith("Capture"),r=c.slice(2,_?c.length-7:void 0),A=t[jt]||null,A=A!=null?A[c]:null,typeof A=="function"&&t.removeEventListener(r,A,_),typeof d=="function")){typeof A!="function"&&A!==null&&(c in t?t[c]=null:t.hasAttribute(c)&&t.removeAttribute(c)),t.addEventListener(r,d,_);break e}c in t?t[c]=d:d===!0?t.setAttribute(c,""):us(t,c,d)}}}function bi(t,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",t),Nt("load",t);var d=!1,_=!1,A;for(A in c)if(c.hasOwnProperty(A)){var I=c[A];if(I!=null)switch(A){case"src":d=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:on(t,r,A,I,c,null)}}_&&on(t,r,"srcSet",c.srcSet,c,null),d&&on(t,r,"src",c.src,c,null);return;case"input":Nt("invalid",t);var L=A=I=_=null,Y=null,ce=null;for(d in c)if(c.hasOwnProperty(d)){var me=c[d];if(me!=null)switch(d){case"name":_=me;break;case"type":I=me;break;case"checked":Y=me;break;case"defaultChecked":ce=me;break;case"value":A=me;break;case"defaultValue":L=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(o(137,r));break;default:on(t,r,d,me,c,null)}}oe(t,A,L,Y,ce,I,_,!1);return;case"select":Nt("invalid",t),d=I=A=null;for(_ in c)if(c.hasOwnProperty(_)&&(L=c[_],L!=null))switch(_){case"value":A=L;break;case"defaultValue":I=L;break;case"multiple":d=L;default:on(t,r,_,L,c,null)}r=A,c=I,t.multiple=!!d,r!=null?Ge(t,!!d,r,!1):c!=null&&Ge(t,!!d,c,!0);return;case"textarea":Nt("invalid",t),A=_=d=null;for(I in c)if(c.hasOwnProperty(I)&&(L=c[I],L!=null))switch(I){case"value":d=L;break;case"defaultValue":_=L;break;case"children":A=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(o(91));break;default:on(t,r,I,L,c,null)}jn(t,d,_,A);return;case"option":for(Y in c)c.hasOwnProperty(Y)&&(d=c[Y],d!=null)&&(Y==="selected"?t.selected=d&&typeof d!="function"&&typeof d!="symbol":on(t,r,Y,d,c,null));return;case"dialog":Nt("beforetoggle",t),Nt("toggle",t),Nt("cancel",t),Nt("close",t);break;case"iframe":case"object":Nt("load",t);break;case"video":case"audio":for(d=0;d<bc.length;d++)Nt(bc[d],t);break;case"image":Nt("error",t),Nt("load",t);break;case"details":Nt("toggle",t);break;case"embed":case"source":case"link":Nt("error",t),Nt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ce in c)if(c.hasOwnProperty(ce)&&(d=c[ce],d!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,r));default:on(t,r,ce,d,c,null)}return;default:if(Jt(r)){for(me in c)c.hasOwnProperty(me)&&(d=c[me],d!==void 0&&l1(t,r,me,d,c,void 0));return}}for(L in c)c.hasOwnProperty(L)&&(d=c[L],d!=null&&on(t,r,L,d,c,null))}function kA(t,r,c,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,A=null,I=null,L=null,Y=null,ce=null,me=null;for(ge in c){var Ee=c[ge];if(c.hasOwnProperty(ge)&&Ee!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":Y=Ee;default:d.hasOwnProperty(ge)||on(t,r,ge,null,d,Ee)}}for(var ue in d){var ge=d[ue];if(Ee=c[ue],d.hasOwnProperty(ue)&&(ge!=null||Ee!=null))switch(ue){case"type":A=ge;break;case"name":_=ge;break;case"checked":ce=ge;break;case"defaultChecked":me=ge;break;case"value":I=ge;break;case"defaultValue":L=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(o(137,r));break;default:ge!==Ee&&on(t,r,ue,ge,d,Ee)}}On(t,I,L,Y,ce,me,A,_);return;case"select":ge=I=L=ue=null;for(A in c)if(Y=c[A],c.hasOwnProperty(A)&&Y!=null)switch(A){case"value":break;case"multiple":ge=Y;default:d.hasOwnProperty(A)||on(t,r,A,null,d,Y)}for(_ in d)if(A=d[_],Y=c[_],d.hasOwnProperty(_)&&(A!=null||Y!=null))switch(_){case"value":ue=A;break;case"defaultValue":L=A;break;case"multiple":I=A;default:A!==Y&&on(t,r,_,A,d,Y)}r=L,c=I,d=ge,ue!=null?Ge(t,!!c,ue,!1):!!d!=!!c&&(r!=null?Ge(t,!!c,r,!0):Ge(t,!!c,c?[]:"",!1));return;case"textarea":ge=ue=null;for(L in c)if(_=c[L],c.hasOwnProperty(L)&&_!=null&&!d.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:on(t,r,L,null,d,_)}for(I in d)if(_=d[I],A=c[I],d.hasOwnProperty(I)&&(_!=null||A!=null))switch(I){case"value":ue=_;break;case"defaultValue":ge=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(o(91));break;default:_!==A&&on(t,r,I,_,d,A)}Dn(t,ue,ge);return;case"option":for(var qe in c)ue=c[qe],c.hasOwnProperty(qe)&&ue!=null&&!d.hasOwnProperty(qe)&&(qe==="selected"?t.selected=!1:on(t,r,qe,null,d,ue));for(Y in d)ue=d[Y],ge=c[Y],d.hasOwnProperty(Y)&&ue!==ge&&(ue!=null||ge!=null)&&(Y==="selected"?t.selected=ue&&typeof ue!="function"&&typeof ue!="symbol":on(t,r,Y,ue,d,ge));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var et in c)ue=c[et],c.hasOwnProperty(et)&&ue!=null&&!d.hasOwnProperty(et)&&on(t,r,et,null,d,ue);for(ce in d)if(ue=d[ce],ge=c[ce],d.hasOwnProperty(ce)&&ue!==ge&&(ue!=null||ge!=null))switch(ce){case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(o(137,r));break;default:on(t,r,ce,ue,d,ge)}return;default:if(Jt(r)){for(var ln in c)ue=c[ln],c.hasOwnProperty(ln)&&ue!==void 0&&!d.hasOwnProperty(ln)&&l1(t,r,ln,void 0,d,ue);for(me in d)ue=d[me],ge=c[me],!d.hasOwnProperty(me)||ue===ge||ue===void 0&&ge===void 0||l1(t,r,me,ue,d,ge);return}}for(var ne in c)ue=c[ne],c.hasOwnProperty(ne)&&ue!=null&&!d.hasOwnProperty(ne)&&on(t,r,ne,null,d,ue);for(Ee in d)ue=d[Ee],ge=c[Ee],!d.hasOwnProperty(Ee)||ue===ge||ue==null&&ge==null||on(t,r,Ee,ue,d,ge)}function Bp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function BA(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var _=c[d],A=_.transferSize,I=_.initiatorType,L=_.duration;if(A&&L&&Bp(I)){for(I=0,L=_.responseEnd,d+=1;d<c.length;d++){var Y=c[d],ce=Y.startTime;if(ce>L)break;var me=Y.transferSize,Ee=Y.initiatorType;me&&Bp(Ee)&&(Y=Y.responseEnd,I+=me*(Y<L?1:(L-ce)/(Y-ce)))}if(--d,r+=8*(A+I)/(_.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var c1=null,u1=null;function fh(t){return t.nodeType===9?t:t.ownerDocument}function Vp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Up(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function h1(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var f1=null;function VA(){var t=window.event;return t&&t.type==="popstate"?t===f1?!1:(f1=t,!0):(f1=null,!1)}var Fp=typeof setTimeout=="function"?setTimeout:void 0,UA=typeof clearTimeout=="function"?clearTimeout:void 0,zp=typeof Promise=="function"?Promise:void 0,FA=typeof queueMicrotask=="function"?queueMicrotask:typeof zp<"u"?function(t){return zp.resolve(null).then(t).catch(zA)}:Fp;function zA(t){setTimeout(function(){throw t})}function Va(t){return t==="head"}function jp(t,r){var c=r,d=0;do{var _=c.nextSibling;if(t.removeChild(c),_&&_.nodeType===8)if(c=_.data,c==="/$"||c==="/&"){if(d===0){t.removeChild(_),Rl(r);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Rc(t.ownerDocument.documentElement);else if(c==="head"){c=t.ownerDocument.head,Rc(c);for(var A=c.firstChild;A;){var I=A.nextSibling,L=A.nodeName;A[Dr]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&A.rel.toLowerCase()==="stylesheet"||c.removeChild(A),A=I}}else c==="body"&&Rc(t.ownerDocument.body);c=_}while(c);Rl(r)}function Hp(t,r){var c=t;t=0;do{var d=c.nextSibling;if(c.nodeType===1?r?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(r?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(t===0)break;t--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||t++;c=d}while(c)}function d1(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":d1(c),Ei(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}t.removeChild(c)}}function jA(t,r,c,d){for(;t.nodeType===1;){var _=c;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(d){if(!t[Dr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(A=t.getAttribute("rel"),A==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(A!==_.rel||t.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||t.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||t.getAttribute("title")!==(_.title==null?null:_.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(A=t.getAttribute("src"),(A!==(_.src==null?null:_.src)||t.getAttribute("type")!==(_.type==null?null:_.type)||t.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&A&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var A=_.name==null?null:""+_.name;if(_.type==="hidden"&&t.getAttribute("name")===A)return t}else return t;if(t=Xr(t.nextSibling),t===null)break}return null}function HA(t,r,c){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!c||(t=Xr(t.nextSibling),t===null))return null;return t}function Gp(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Xr(t.nextSibling),t===null))return null;return t}function g1(t){return t.data==="$?"||t.data==="$~"}function m1(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function GA(t,r){var c=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||c.readyState!=="loading")r();else{var d=function(){r(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),t._reactRetry=d}}function Xr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var p1=null;function qp(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"||c==="/&"){if(r===0)return Xr(t.nextSibling);r--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||r++}t=t.nextSibling}return null}function Xp(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(r===0)return t;r--}else c!=="/$"&&c!=="/&"||r++}t=t.previousSibling}return null}function Yp(t,r,c){switch(r=fh(c),t){case"html":if(t=r.documentElement,!t)throw Error(o(452));return t;case"head":if(t=r.head,!t)throw Error(o(453));return t;case"body":if(t=r.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Rc(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);Ei(t)}var Yr=new Map,Wp=new Set;function dh(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var na=se.d;se.d={f:qA,r:XA,D:YA,C:WA,L:KA,m:QA,X:JA,S:ZA,M:$A};function qA(){var t=na.f(),r=rh();return t||r}function XA(t){var r=St(t);r!==null&&r.tag===5&&r.type==="form"?hm(r):na.r(t)}var Sl=typeof document>"u"?null:document;function Kp(t,r,c){var d=Sl;if(d&&typeof r=="string"&&r){var _=pt(r);_='link[rel="'+t+'"][href="'+_+'"]',typeof c=="string"&&(_+='[crossorigin="'+c+'"]'),Wp.has(_)||(Wp.add(_),t={rel:t,crossOrigin:c,href:r},d.querySelector(_)===null&&(r=d.createElement("link"),bi(r,"link",t),Tn(r),d.head.appendChild(r)))}}function YA(t){na.D(t),Kp("dns-prefetch",t,null)}function WA(t,r){na.C(t,r),Kp("preconnect",t,r)}function KA(t,r,c){na.L(t,r,c);var d=Sl;if(d&&t&&r){var _='link[rel="preload"][as="'+pt(r)+'"]';r==="image"&&c&&c.imageSrcSet?(_+='[imagesrcset="'+pt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(_+='[imagesizes="'+pt(c.imageSizes)+'"]')):_+='[href="'+pt(t)+'"]';var A=_;switch(r){case"style":A=bl(t);break;case"script":A=Il(t)}Yr.has(A)||(t=M({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:t,as:r},c),Yr.set(A,t),d.querySelector(_)!==null||r==="style"&&d.querySelector(Nc(A))||r==="script"&&d.querySelector(Oc(A))||(r=d.createElement("link"),bi(r,"link",t),Tn(r),d.head.appendChild(r)))}}function QA(t,r){na.m(t,r);var c=Sl;if(c&&t){var d=r&&typeof r.as=="string"?r.as:"script",_='link[rel="modulepreload"][as="'+pt(d)+'"][href="'+pt(t)+'"]',A=_;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Il(t)}if(!Yr.has(A)&&(t=M({rel:"modulepreload",href:t},r),Yr.set(A,t),c.querySelector(_)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Oc(A)))return}d=c.createElement("link"),bi(d,"link",t),Tn(d),c.head.appendChild(d)}}}function ZA(t,r,c){na.S(t,r,c);var d=Sl;if(d&&t){var _=ii(d).hoistableStyles,A=bl(t);r=r||"default";var I=_.get(A);if(!I){var L={loading:0,preload:null};if(I=d.querySelector(Nc(A)))L.loading=5;else{t=M({rel:"stylesheet",href:t,"data-precedence":r},c),(c=Yr.get(A))&&y1(t,c);var Y=I=d.createElement("link");Tn(Y),bi(Y,"link",t),Y._p=new Promise(function(ce,me){Y.onload=ce,Y.onerror=me}),Y.addEventListener("load",function(){L.loading|=1}),Y.addEventListener("error",function(){L.loading|=2}),L.loading|=4,gh(I,r,d)}I={type:"stylesheet",instance:I,count:1,state:L},_.set(A,I)}}}function JA(t,r){na.X(t,r);var c=Sl;if(c&&t){var d=ii(c).hoistableScripts,_=Il(t),A=d.get(_);A||(A=c.querySelector(Oc(_)),A||(t=M({src:t,async:!0},r),(r=Yr.get(_))&&_1(t,r),A=c.createElement("script"),Tn(A),bi(A,"link",t),c.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},d.set(_,A))}}function $A(t,r){na.M(t,r);var c=Sl;if(c&&t){var d=ii(c).hoistableScripts,_=Il(t),A=d.get(_);A||(A=c.querySelector(Oc(_)),A||(t=M({src:t,async:!0,type:"module"},r),(r=Yr.get(_))&&_1(t,r),A=c.createElement("script"),Tn(A),bi(A,"link",t),c.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},d.set(_,A))}}function Qp(t,r,c,d){var _=(_=Oe.current)?dh(_):null;if(!_)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=bl(c.href),c=ii(_).hoistableStyles,d=c.get(r),d||(d={type:"style",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){t=bl(c.href);var A=ii(_).hoistableStyles,I=A.get(t);if(I||(_=_.ownerDocument||_,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(t,I),(A=_.querySelector(Nc(t)))&&!A._p&&(I.instance=A,I.state.loading=5),Yr.has(t)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Yr.set(t,c),A||ew(_,t,c,I.state))),r&&d===null)throw Error(o(528,""));return I}if(r&&d!==null)throw Error(o(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Il(c),c=ii(_).hoistableScripts,d=c.get(r),d||(d={type:"script",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function bl(t){return'href="'+pt(t)+'"'}function Nc(t){return'link[rel="stylesheet"]['+t+"]"}function Zp(t){return M({},t,{"data-precedence":t.precedence,precedence:null})}function ew(t,r,c,d){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=t.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),bi(r,"link",c),Tn(r),t.head.appendChild(r))}function Il(t){return'[src="'+pt(t)+'"]'}function Oc(t){return"script[async]"+t}function Jp(t,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var d=t.querySelector('style[data-href~="'+pt(c.href)+'"]');if(d)return r.instance=d,Tn(d),d;var _=M({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(t.ownerDocument||t).createElement("style"),Tn(d),bi(d,"style",_),gh(d,c.precedence,t),r.instance=d;case"stylesheet":_=bl(c.href);var A=t.querySelector(Nc(_));if(A)return r.state.loading|=4,r.instance=A,Tn(A),A;d=Zp(c),(_=Yr.get(_))&&y1(d,_),A=(t.ownerDocument||t).createElement("link"),Tn(A);var I=A;return I._p=new Promise(function(L,Y){I.onload=L,I.onerror=Y}),bi(A,"link",d),r.state.loading|=4,gh(A,c.precedence,t),r.instance=A;case"script":return A=Il(c.src),(_=t.querySelector(Oc(A)))?(r.instance=_,Tn(_),_):(d=c,(_=Yr.get(A))&&(d=M({},c),_1(d,_)),t=t.ownerDocument||t,_=t.createElement("script"),Tn(_),bi(_,"link",d),t.head.appendChild(_),r.instance=_);case"void":return null;default:throw Error(o(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,gh(d,c.precedence,t));return r.instance}function gh(t,r,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=d.length?d[d.length-1]:null,A=_,I=0;I<d.length;I++){var L=d[I];if(L.dataset.precedence===r)A=L;else if(A!==_)break}A?A.parentNode.insertBefore(t,A.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(t,r.firstChild))}function y1(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function _1(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var mh=null;function $p(t,r,c){if(mh===null){var d=new Map,_=mh=new Map;_.set(c,d)}else _=mh,d=_.get(c),d||(d=new Map,_.set(c,d));if(d.has(t))return d;for(d.set(t,null),c=c.getElementsByTagName(t),_=0;_<c.length;_++){var A=c[_];if(!(A[Dr]||A[wn]||t==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var I=A.getAttribute(r)||"";I=t+I;var L=d.get(I);L?L.push(A):d.set(I,[A])}}return d}function e2(t,r,c){t=t.ownerDocument||t,t.head.insertBefore(c,r==="title"?t.querySelector("head > title"):null)}function tw(t,r,c){if(c===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function t2(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function nw(t,r,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var _=bl(d.href),A=r.querySelector(Nc(_));if(A){r=A._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=ph.bind(t),r.then(t,t)),c.state.loading|=4,c.instance=A,Tn(A);return}A=r.ownerDocument||r,d=Zp(d),(_=Yr.get(_))&&y1(d,_),A=A.createElement("link"),Tn(A);var I=A;I._p=new Promise(function(L,Y){I.onload=L,I.onerror=Y}),bi(A,"link",d),c.instance=A}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(c,r),(r=c.state.preload)&&(c.state.loading&3)===0&&(t.count++,c=ph.bind(t),r.addEventListener("load",c),r.addEventListener("error",c))}}var E1=0;function iw(t,r){return t.stylesheets&&t.count===0&&_h(t,t.stylesheets),0<t.count||0<t.imgCount?function(c){var d=setTimeout(function(){if(t.stylesheets&&_h(t,t.stylesheets),t.unsuspend){var A=t.unsuspend;t.unsuspend=null,A()}},6e4+r);0<t.imgBytes&&E1===0&&(E1=62500*BA());var _=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&_h(t,t.stylesheets),t.unsuspend)){var A=t.unsuspend;t.unsuspend=null,A()}},(t.imgBytes>E1?50:800)+r);return t.unsuspend=c,function(){t.unsuspend=null,clearTimeout(d),clearTimeout(_)}}:null}function ph(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_h(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var yh=null;function _h(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,yh=new Map,r.forEach(rw,t),yh=null,ph.call(t))}function rw(t,r){if(!(r.state.loading&4)){var c=yh.get(t);if(c)var d=c.get(null);else{c=new Map,yh.set(t,c);for(var _=t.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<_.length;A++){var I=_[A];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(c.set(I.dataset.precedence,I),d=I)}d&&c.set(null,d)}_=r.instance,I=_.getAttribute("data-precedence"),A=c.get(I)||d,A===d&&c.set(null,_),c.set(I,_),this.count++,d=ph.bind(this),_.addEventListener("load",d),_.addEventListener("error",d),A?A.parentNode.insertBefore(_,A.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(_,t.firstChild)),r.state.loading|=4}}var Dc={$$typeof:Ce,Provider:null,Consumer:null,_currentValue:Le,_currentValue2:Le,_threadCount:0};function sw(t,r,c,d,_,A,I,L,Y){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mi(0),this.hiddenUpdates=mi(null),this.identifierPrefix=d,this.onUncaughtError=_,this.onCaughtError=A,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function n2(t,r,c,d,_,A,I,L,Y,ce,me,Ee){return t=new sw(t,r,c,I,Y,ce,me,Ee,L),r=1,A===!0&&(r|=24),A=wr(3,null,null,r),t.current=A,A.stateNode=t,r=Jf(),r.refCount++,t.pooledCache=r,r.refCount++,A.memoizedState={element:d,isDehydrated:c,cache:r},nd(A),t}function i2(t){return t?(t=sl,t):sl}function r2(t,r,c,d,_,A){_=i2(_),d.context===null?d.context=_:d.pendingContext=_,d=ba(r),d.payload={element:c},A=A===void 0?null:A,A!==null&&(d.callback=A),c=Ia(t,d,r),c!==null&&(ar(c,t,r),uc(c,t,r))}function s2(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<r?c:r}}function x1(t,r){s2(t,r),(t=t.alternate)&&s2(t,r)}function a2(t){if(t.tag===13||t.tag===31){var r=bo(t,67108864);r!==null&&ar(r,t,67108864),x1(t,67108864)}}function o2(t){if(t.tag===13||t.tag===31){var r=br();r=Ln(r);var c=bo(t,r);c!==null&&ar(c,t,r),x1(t,r)}}var Eh=!0;function aw(t,r,c,d){var _=K.T;K.T=null;var A=se.p;try{se.p=2,A1(t,r,c,d)}finally{se.p=A,K.T=_}}function ow(t,r,c,d){var _=K.T;K.T=null;var A=se.p;try{se.p=8,A1(t,r,c,d)}finally{se.p=A,K.T=_}}function A1(t,r,c,d){if(Eh){var _=w1(d);if(_===null)o1(t,r,d,xh,c),c2(t,d);else if(cw(_,t,r,c,d))d.stopPropagation();else if(c2(t,d),r&4&&-1<lw.indexOf(t)){for(;_!==null;){var A=St(_);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var I=dr(A.pendingLanes);if(I!==0){var L=A;for(L.pendingLanes|=2,L.entangledLanes|=2;I;){var Y=1<<31-it(I);L.entanglements[1]|=Y,I&=~Y}Es(A),(Qt&6)===0&&(nh=mn()+500,Sc(0))}}break;case 31:case 13:L=bo(A,2),L!==null&&ar(L,A,2),rh(),x1(A,2)}if(A=w1(d),A===null&&o1(t,r,d,xh,c),A===_)break;_=A}_!==null&&d.stopPropagation()}else o1(t,r,d,null,c)}}function w1(t){return t=Ji(t),T1(t)}var xh=null;function T1(t){if(xh=null,t=dn(t),t!==null){var r=m(t);if(r===null)t=null;else{var c=r.tag;if(c===13){if(t=E(r),t!==null)return t;t=null}else if(c===31){if(t=C(r),t!==null)return t;t=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return xh=t,null}function l2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zr()){case di:return 2;case fa:return 8;case gi:case ni:return 32;case po:return 268435456;default:return 32}default:return 32}}var C1=!1,Ua=null,Fa=null,za=null,Mc=new Map,Pc=new Map,ja=[],lw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c2(t,r){switch(t){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":Fa=null;break;case"mouseover":case"mouseout":za=null;break;case"pointerover":case"pointerout":Mc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(r.pointerId)}}function Lc(t,r,c,d,_,A){return t===null||t.nativeEvent!==A?(t={blockedOn:r,domEventName:c,eventSystemFlags:d,nativeEvent:A,targetContainers:[_]},r!==null&&(r=St(r),r!==null&&a2(r)),t):(t.eventSystemFlags|=d,r=t.targetContainers,_!==null&&r.indexOf(_)===-1&&r.push(_),t)}function cw(t,r,c,d,_){switch(r){case"focusin":return Ua=Lc(Ua,t,r,c,d,_),!0;case"dragenter":return Fa=Lc(Fa,t,r,c,d,_),!0;case"mouseover":return za=Lc(za,t,r,c,d,_),!0;case"pointerover":var A=_.pointerId;return Mc.set(A,Lc(Mc.get(A)||null,t,r,c,d,_)),!0;case"gotpointercapture":return A=_.pointerId,Pc.set(A,Lc(Pc.get(A)||null,t,r,c,d,_)),!0}return!1}function u2(t){var r=dn(t.target);if(r!==null){var c=m(r);if(c!==null){if(r=c.tag,r===13){if(r=E(c),r!==null){t.blockedOn=r,Me(t.priority,function(){o2(c)});return}}else if(r===31){if(r=C(c),r!==null){t.blockedOn=r,Me(t.priority,function(){o2(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ah(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var c=w1(t.nativeEvent);if(c===null){c=t.nativeEvent;var d=new c.constructor(c.type,c);Os=d,c.target.dispatchEvent(d),Os=null}else return r=St(c),r!==null&&a2(r),t.blockedOn=c,!1;r.shift()}return!0}function h2(t,r,c){Ah(t)&&c.delete(r)}function uw(){C1=!1,Ua!==null&&Ah(Ua)&&(Ua=null),Fa!==null&&Ah(Fa)&&(Fa=null),za!==null&&Ah(za)&&(za=null),Mc.forEach(h2),Pc.forEach(h2)}function wh(t,r){t.blockedOn===r&&(t.blockedOn=null,C1||(C1=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,uw)))}var Th=null;function f2(t){Th!==t&&(Th=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Th===t&&(Th=null);for(var r=0;r<t.length;r+=3){var c=t[r],d=t[r+1],_=t[r+2];if(typeof d!="function"){if(T1(d||c)===null)continue;break}var A=St(c);A!==null&&(t.splice(r,3),r-=3,wd(A,{pending:!0,data:_,method:c.method,action:d},d,_))}}))}function Rl(t){function r(Y){return wh(Y,t)}Ua!==null&&wh(Ua,t),Fa!==null&&wh(Fa,t),za!==null&&wh(za,t),Mc.forEach(r),Pc.forEach(r);for(var c=0;c<ja.length;c++){var d=ja[c];d.blockedOn===t&&(d.blockedOn=null)}for(;0<ja.length&&(c=ja[0],c.blockedOn===null);)u2(c),c.blockedOn===null&&ja.shift();if(c=(t.ownerDocument||t).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var _=c[d],A=c[d+1],I=_[jt]||null;if(typeof A=="function")I||f2(c);else if(I){var L=null;if(A&&A.hasAttribute("formAction")){if(_=A,I=A[jt]||null)L=I.formAction;else if(T1(_)!==null)continue}else L=I.action;typeof L=="function"?c[d+1]=L:(c.splice(d,3),d-=3),f2(c)}}}function d2(){function t(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(I){return _=I})},focusReset:"manual",scroll:"manual"})}function r(){_!==null&&(_(),_=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,_=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),_!==null&&(_(),_=null)}}}function v1(t){this._internalRoot=t}Ch.prototype.render=v1.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(o(409));var c=r.current,d=br();r2(c,d,t,r,null,null)},Ch.prototype.unmount=v1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;r2(t.current,2,null,t,null,null),rh(),r[_i]=null}};function Ch(t){this._internalRoot=t}Ch.prototype.unstable_scheduleHydration=function(t){if(t){var r=yi();t={blockedOn:null,target:t,priority:r};for(var c=0;c<ja.length&&r!==0&&r<ja[c].priority;c++);ja.splice(c,0,t),c===0&&u2(t)}};var g2=e.version;if(g2!=="19.2.3")throw Error(o(527,g2,"19.2.3"));se.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=w(r),t=t!==null?D(t):null,t=t===null?null:t.stateNode,t};var hw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vh.isDisabled&&vh.supportsFiber)try{qt=vh.inject(hw),Se=vh}catch{}}return Bc.createRoot=function(t,r){if(!h(t))throw Error(o(299));var c=!1,d="",_=Am,A=wm,I=Tm;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(_=r.onUncaughtError),r.onCaughtError!==void 0&&(A=r.onCaughtError),r.onRecoverableError!==void 0&&(I=r.onRecoverableError)),r=n2(t,1,!1,null,null,c,d,null,_,A,I,d2),t[_i]=r.current,a1(t),new v1(r)},Bc.hydrateRoot=function(t,r,c){if(!h(t))throw Error(o(299));var d=!1,_="",A=Am,I=wm,L=Tm,Y=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(_=c.identifierPrefix),c.onUncaughtError!==void 0&&(A=c.onUncaughtError),c.onCaughtError!==void 0&&(I=c.onCaughtError),c.onRecoverableError!==void 0&&(L=c.onRecoverableError),c.formState!==void 0&&(Y=c.formState)),r=n2(t,1,!0,r,c??null,d,_,Y,A,I,L,d2),r.context=i2(null),c=r.current,d=br(),d=Ln(d),_=ba(d),_.callback=null,Ia(c,_,d),c=d,r.current.lanes=c,Or(r,c),Es(r),t[_i]=r.current,a1(t),new Ch(r)},Bc.version="19.2.3",Bc}var C2;function Tw(){if(C2)return I1.exports;C2=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),I1.exports=ww(),I1.exports}var Cw=Tw();const vw=()=>{};var v2={};const p_=function(a){const e=[];let n=0;for(let o=0;o<a.length;o++){let h=a.charCodeAt(o);h<128?e[n++]=h:h<2048?(e[n++]=h>>6|192,e[n++]=h&63|128):(h&64512)===55296&&o+1<a.length&&(a.charCodeAt(o+1)&64512)===56320?(h=65536+((h&1023)<<10)+(a.charCodeAt(++o)&1023),e[n++]=h>>18|240,e[n++]=h>>12&63|128,e[n++]=h>>6&63|128,e[n++]=h&63|128):(e[n++]=h>>12|224,e[n++]=h>>6&63|128,e[n++]=h&63|128)}return e},Sw=function(a){const e=[];let n=0,o=0;for(;n<a.length;){const h=a[n++];if(h<128)e[o++]=String.fromCharCode(h);else if(h>191&&h<224){const m=a[n++];e[o++]=String.fromCharCode((h&31)<<6|m&63)}else if(h>239&&h<365){const m=a[n++],E=a[n++],C=a[n++],v=((h&7)<<18|(m&63)<<12|(E&63)<<6|C&63)-65536;e[o++]=String.fromCharCode(55296+(v>>10)),e[o++]=String.fromCharCode(56320+(v&1023))}else{const m=a[n++],E=a[n++];e[o++]=String.fromCharCode((h&15)<<12|(m&63)<<6|E&63)}}return e.join("")},y_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let h=0;h<a.length;h+=3){const m=a[h],E=h+1<a.length,C=E?a[h+1]:0,v=h+2<a.length,w=v?a[h+2]:0,D=m>>2,M=(m&3)<<4|C>>4;let z=(C&15)<<2|w>>6,te=w&63;v||(te=64,E||(z=64)),o.push(n[D],n[M],n[z],n[te])}return o.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(p_(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):Sw(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let h=0;h<a.length;){const m=n[a.charAt(h++)],C=h<a.length?n[a.charAt(h)]:0;++h;const w=h<a.length?n[a.charAt(h)]:64;++h;const M=h<a.length?n[a.charAt(h)]:64;if(++h,m==null||C==null||w==null||M==null)throw new bw;const z=m<<2|C>>4;if(o.push(z),w!==64){const te=C<<4&240|w>>2;if(o.push(te),M!==64){const _e=w<<6&192|M;o.push(_e)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class bw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Iw=function(a){const e=p_(a);return y_.encodeByteArray(e,!0)},Gh=function(a){return Iw(a).replace(/\./g,"")},__=function(a){try{return y_.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Rw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Nw=()=>Rw().__FIREBASE_DEFAULTS__,Ow=()=>{if(typeof process>"u"||typeof v2>"u")return;const a=v2.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},Dw=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&__(a[1]);return e&&JSON.parse(e)},gf=()=>{try{return vw()||Nw()||Ow()||Dw()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},E_=a=>gf()?.emulatorHosts?.[a],Mw=a=>{const e=E_(a);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),o]:[e.substring(0,n),o]},x_=()=>gf()?.config,A_=a=>gf()?.[`_${a}`];class Pw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,o)=>{n?this.reject(n):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,o))}}}function Wl(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function w_(a){return(await fetch(a,{credentials:"include"})).ok}function Lw(a,e){if(a.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},o=e||"demo-project",h=a.iat||0,m=a.sub||a.user_id;if(!m)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const E={iss:`https://securetoken.google.com/${o}`,aud:o,iat:h,exp:h+3600,auth_time:h,sub:m,user_id:m,firebase:{sign_in_provider:"custom",identities:{}},...a};return[Gh(JSON.stringify(n)),Gh(JSON.stringify(E)),""].join(".")}const Yc={};function kw(){const a={prod:[],emulator:[]};for(const e of Object.keys(Yc))Yc[e]?a.emulator.push(e):a.prod.push(e);return a}function Bw(a){let e=document.getElementById(a),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",a),n=!0),{created:n,element:e}}let S2=!1;function T_(a,e){if(typeof window>"u"||typeof document>"u"||!Wl(window.location.host)||Yc[a]===e||Yc[a]||S2)return;Yc[a]=e;function n(z){return`__firebase__banner__${z}`}const o="__firebase__banner",m=kw().prod.length>0;function E(){const z=document.getElementById(o);z&&z.remove()}function C(z){z.style.display="flex",z.style.background="#7faaf0",z.style.position="fixed",z.style.bottom="5px",z.style.left="5px",z.style.padding=".5em",z.style.borderRadius="5px",z.style.alignItems="center"}function v(z,te){z.setAttribute("width","24"),z.setAttribute("id",te),z.setAttribute("height","24"),z.setAttribute("viewBox","0 0 24 24"),z.setAttribute("fill","none"),z.style.marginLeft="-6px"}function w(){const z=document.createElement("span");return z.style.cursor="pointer",z.style.marginLeft="16px",z.style.fontSize="24px",z.innerHTML=" &times;",z.onclick=()=>{S2=!0,E()},z}function D(z,te){z.setAttribute("id",te),z.innerText="Learn more",z.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",z.setAttribute("target","__blank"),z.style.paddingLeft="5px",z.style.textDecoration="underline"}function M(){const z=Bw(o),te=n("text"),_e=document.getElementById(te)||document.createElement("span"),pe=n("learnmore"),ve=document.getElementById(pe)||document.createElement("a"),je=n("preprendIcon"),Pe=document.getElementById(je)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(z.created){const Ce=z.element;C(Ce),D(ve,pe);const Be=w();v(Pe,je),Ce.append(Pe,_e,ve,Be),document.body.appendChild(Ce)}m?(_e.innerText="Preview backend disconnected.",Pe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Pe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_e.innerText="Preview backend running in this workspace."),_e.setAttribute("id",te)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",M):M()}function ji(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ji())}function Uw(){const a=gf()?.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Fw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zw(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function jw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Hw(){const a=ji();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function Gw(){return!Uw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qw(){try{return typeof indexedDB=="object"}catch{return!1}}function Xw(){return new Promise((a,e)=>{try{let n=!0;const o="validate-browser-context-for-indexeddb-analytics-module",h=self.indexedDB.open(o);h.onsuccess=()=>{h.result.close(),n||self.indexedDB.deleteDatabase(o),a(!0)},h.onupgradeneeded=()=>{n=!1},h.onerror=()=>{e(h.error?.message||"")}}catch(n){e(n)}})}const Yw="FirebaseError";class ua extends Error{constructor(e,n,o){super(n),this.code=e,this.customData=o,this.name=Yw,Object.setPrototypeOf(this,ua.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lu.prototype.create)}}class lu{constructor(e,n,o){this.service=e,this.serviceName=n,this.errors=o}create(e,...n){const o=n[0]||{},h=`${this.service}/${e}`,m=this.errors[e],E=m?Ww(m,o):"Error",C=`${this.serviceName}: ${E} (${h}).`;return new ua(h,C,o)}}function Ww(a,e){return a.replace(Kw,(n,o)=>{const h=e[o];return h!=null?String(h):`<${o}?>`})}const Kw=/\{\$([^}]+)}/g;function Qw(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function Go(a,e){if(a===e)return!0;const n=Object.keys(a),o=Object.keys(e);for(const h of n){if(!o.includes(h))return!1;const m=a[h],E=e[h];if(b2(m)&&b2(E)){if(!Go(m,E))return!1}else if(m!==E)return!1}for(const h of o)if(!n.includes(h))return!1;return!0}function b2(a){return a!==null&&typeof a=="object"}function cu(a){const e=[];for(const[n,o]of Object.entries(a))Array.isArray(o)?o.forEach(h=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(h))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function Fc(a){const e={};return a.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[h,m]=o.split("=");e[decodeURIComponent(h)]=decodeURIComponent(m)}}),e}function zc(a){const e=a.indexOf("?");if(!e)return"";const n=a.indexOf("#",e);return a.substring(e,n>0?n:void 0)}function Zw(a,e){const n=new Jw(a,e);return n.subscribe.bind(n)}class Jw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,o){let h;if(e===void 0&&n===void 0&&o===void 0)throw new Error("Missing Observer.");$w(e,["next","error","complete"])?h=e:h={next:e,error:n,complete:o},h.next===void 0&&(h.next=D1),h.error===void 0&&(h.error=D1),h.complete===void 0&&(h.complete=D1);const m=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?h.error(this.finalError):h.complete()}catch{}}),this.observers.push(h),m}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $w(a,e){if(typeof a!="object"||a===null)return!1;for(const n of e)if(n in a&&typeof a[n]=="function")return!0;return!1}function D1(){}function Xn(a){return a&&a._delegate?a._delegate:a}class qo{constructor(e,n,o){this.name=e,this.instanceFactory=n,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Fo="[DEFAULT]";class eT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const o=new Pw;if(this.instancesDeferred.set(n,o),this.isInitialized(n)||this.shouldAutoInitialize())try{const h=this.getOrInitializeService({instanceIdentifier:n});h&&o.resolve(h)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),o=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(h){if(o)return null;throw h}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nT(e))try{this.getOrInitializeService({instanceIdentifier:Fo})}catch{}for(const[n,o]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(n);try{const m=this.getOrInitializeService({instanceIdentifier:h});o.resolve(m)}catch{}}}}clearInstance(e=Fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fo){return this.instances.has(e)}getOptions(e=Fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const h=this.getOrInitializeService({instanceIdentifier:o,options:n});for(const[m,E]of this.instancesDeferred.entries()){const C=this.normalizeInstanceIdentifier(m);o===C&&E.resolve(h)}return h}onInit(e,n){const o=this.normalizeInstanceIdentifier(n),h=this.onInitCallbacks.get(o)??new Set;h.add(e),this.onInitCallbacks.set(o,h);const m=this.instances.get(o);return m&&e(m,o),()=>{h.delete(e)}}invokeOnInitCallbacks(e,n){const o=this.onInitCallbacks.get(n);if(o)for(const h of o)try{h(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:tT(e),options:n}),this.instances.set(e,o),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Fo){return this.component?this.component.multipleInstances?e:Fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tT(a){return a===Fo?void 0:a}function nT(a){return a.instantiationMode==="EAGER"}class iT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Lt;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(Lt||(Lt={}));const rT={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},sT=Lt.INFO,aT={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},oT=(a,e,...n)=>{if(e<a.logLevel)return;const o=new Date().toISOString(),h=aT[e];if(h)console[h](`[${o}]  ${a.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class w0{constructor(e){this.name=e,this._logLevel=sT,this._logHandler=oT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...e),this._logHandler(this,Lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...e),this._logHandler(this,Lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...e),this._logHandler(this,Lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...e),this._logHandler(this,Lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...e),this._logHandler(this,Lt.ERROR,...e)}}const lT=(a,e)=>e.some(n=>a instanceof n);let I2,R2;function cT(){return I2||(I2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uT(){return R2||(R2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C_=new WeakMap,Y1=new WeakMap,v_=new WeakMap,M1=new WeakMap,T0=new WeakMap;function hT(a){const e=new Promise((n,o)=>{const h=()=>{a.removeEventListener("success",m),a.removeEventListener("error",E)},m=()=>{n(Za(a.result)),h()},E=()=>{o(a.error),h()};a.addEventListener("success",m),a.addEventListener("error",E)});return e.then(n=>{n instanceof IDBCursor&&C_.set(n,a)}).catch(()=>{}),T0.set(e,a),e}function fT(a){if(Y1.has(a))return;const e=new Promise((n,o)=>{const h=()=>{a.removeEventListener("complete",m),a.removeEventListener("error",E),a.removeEventListener("abort",E)},m=()=>{n(),h()},E=()=>{o(a.error||new DOMException("AbortError","AbortError")),h()};a.addEventListener("complete",m),a.addEventListener("error",E),a.addEventListener("abort",E)});Y1.set(a,e)}let W1={get(a,e,n){if(a instanceof IDBTransaction){if(e==="done")return Y1.get(a);if(e==="objectStoreNames")return a.objectStoreNames||v_.get(a);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Za(a[e])},set(a,e,n){return a[e]=n,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function dT(a){W1=a(W1)}function gT(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const o=a.call(P1(this),e,...n);return v_.set(o,e.sort?e.sort():[e]),Za(o)}:uT().includes(a)?function(...e){return a.apply(P1(this),e),Za(C_.get(this))}:function(...e){return Za(a.apply(P1(this),e))}}function mT(a){return typeof a=="function"?gT(a):(a instanceof IDBTransaction&&fT(a),lT(a,cT())?new Proxy(a,W1):a)}function Za(a){if(a instanceof IDBRequest)return hT(a);if(M1.has(a))return M1.get(a);const e=mT(a);return e!==a&&(M1.set(a,e),T0.set(e,a)),e}const P1=a=>T0.get(a);function pT(a,e,{blocked:n,upgrade:o,blocking:h,terminated:m}={}){const E=indexedDB.open(a,e),C=Za(E);return o&&E.addEventListener("upgradeneeded",v=>{o(Za(E.result),v.oldVersion,v.newVersion,Za(E.transaction),v)}),n&&E.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),C.then(v=>{m&&v.addEventListener("close",()=>m()),h&&v.addEventListener("versionchange",w=>h(w.oldVersion,w.newVersion,w))}).catch(()=>{}),C}const yT=["get","getKey","getAll","getAllKeys","count"],_T=["put","add","delete","clear"],L1=new Map;function N2(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(L1.get(e))return L1.get(e);const n=e.replace(/FromIndex$/,""),o=e!==n,h=_T.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(h||yT.includes(n)))return;const m=async function(E,...C){const v=this.transaction(E,h?"readwrite":"readonly");let w=v.store;return o&&(w=w.index(C.shift())),(await Promise.all([w[n](...C),h&&v.done]))[0]};return L1.set(e,m),m}dT(a=>({...a,get:(e,n,o)=>N2(e,n)||a.get(e,n,o),has:(e,n)=>!!N2(e,n)||a.has(e,n)}));class ET{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xT(n)){const o=n.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(n=>n).join(" ")}}function xT(a){return a.getComponent()?.type==="VERSION"}const K1="@firebase/app",O2="0.14.6";const aa=new w0("@firebase/app"),AT="@firebase/app-compat",wT="@firebase/analytics-compat",TT="@firebase/analytics",CT="@firebase/app-check-compat",vT="@firebase/app-check",ST="@firebase/auth",bT="@firebase/auth-compat",IT="@firebase/database",RT="@firebase/data-connect",NT="@firebase/database-compat",OT="@firebase/functions",DT="@firebase/functions-compat",MT="@firebase/installations",PT="@firebase/installations-compat",LT="@firebase/messaging",kT="@firebase/messaging-compat",BT="@firebase/performance",VT="@firebase/performance-compat",UT="@firebase/remote-config",FT="@firebase/remote-config-compat",zT="@firebase/storage",jT="@firebase/storage-compat",HT="@firebase/firestore",GT="@firebase/ai",qT="@firebase/firestore-compat",XT="firebase",YT="12.6.0";const Q1="[DEFAULT]",WT={[K1]:"fire-core",[AT]:"fire-core-compat",[TT]:"fire-analytics",[wT]:"fire-analytics-compat",[vT]:"fire-app-check",[CT]:"fire-app-check-compat",[ST]:"fire-auth",[bT]:"fire-auth-compat",[IT]:"fire-rtdb",[RT]:"fire-data-connect",[NT]:"fire-rtdb-compat",[OT]:"fire-fn",[DT]:"fire-fn-compat",[MT]:"fire-iid",[PT]:"fire-iid-compat",[LT]:"fire-fcm",[kT]:"fire-fcm-compat",[BT]:"fire-perf",[VT]:"fire-perf-compat",[UT]:"fire-rc",[FT]:"fire-rc-compat",[zT]:"fire-gcs",[jT]:"fire-gcs-compat",[HT]:"fire-fst",[qT]:"fire-fst-compat",[GT]:"fire-vertex","fire-js":"fire-js",[XT]:"fire-js-all"};const qh=new Map,KT=new Map,Z1=new Map;function D2(a,e){try{a.container.addComponent(e)}catch(n){aa.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,n)}}function Fl(a){const e=a.name;if(Z1.has(e))return aa.debug(`There were multiple attempts to register component ${e}.`),!1;Z1.set(e,a);for(const n of qh.values())D2(n,a);for(const n of KT.values())D2(n,a);return!0}function C0(a,e){const n=a.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),a.container.getProvider(e)}function ss(a){return a==null?!1:a.settings!==void 0}const QT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ja=new lu("app","Firebase",QT);class ZT{constructor(e,n,o){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new qo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ja.create("app-deleted",{appName:this._name})}}const Kl=YT;function S_(a,e={}){let n=a;typeof e!="object"&&(e={name:e});const o={name:Q1,automaticDataCollectionEnabled:!0,...e},h=o.name;if(typeof h!="string"||!h)throw Ja.create("bad-app-name",{appName:String(h)});if(n||(n=x_()),!n)throw Ja.create("no-options");const m=qh.get(h);if(m){if(Go(n,m.options)&&Go(o,m.config))return m;throw Ja.create("duplicate-app",{appName:h})}const E=new iT(h);for(const v of Z1.values())E.addComponent(v);const C=new ZT(n,o,E);return qh.set(h,C),C}function b_(a=Q1){const e=qh.get(a);if(!e&&a===Q1&&x_())return S_();if(!e)throw Ja.create("no-app",{appName:a});return e}function $a(a,e,n){let o=WT[a]??a;n&&(o+=`-${n}`);const h=o.match(/\s|\//),m=e.match(/\s|\//);if(h||m){const E=[`Unable to register library "${o}" with version "${e}":`];h&&E.push(`library name "${o}" contains illegal characters (whitespace or "/")`),h&&m&&E.push("and"),m&&E.push(`version name "${e}" contains illegal characters (whitespace or "/")`),aa.warn(E.join(" "));return}Fl(new qo(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const JT="firebase-heartbeat-database",$T=1,$c="firebase-heartbeat-store";let k1=null;function I_(){return k1||(k1=pT(JT,$T,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore($c)}catch(n){console.warn(n)}}}}).catch(a=>{throw Ja.create("idb-open",{originalErrorMessage:a.message})})),k1}async function e3(a){try{const n=(await I_()).transaction($c),o=await n.objectStore($c).get(R_(a));return await n.done,o}catch(e){if(e instanceof ua)aa.warn(e.message);else{const n=Ja.create("idb-get",{originalErrorMessage:e?.message});aa.warn(n.message)}}}async function M2(a,e){try{const o=(await I_()).transaction($c,"readwrite");await o.objectStore($c).put(e,R_(a)),await o.done}catch(n){if(n instanceof ua)aa.warn(n.message);else{const o=Ja.create("idb-set",{originalErrorMessage:n?.message});aa.warn(o.message)}}}function R_(a){return`${a.name}!${a.options.appId}`}const t3=1024,n3=30;class i3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new s3(n),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=P2();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(h=>h.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:n}),this._heartbeatsCache.heartbeats.length>n3){const h=a3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){aa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=P2(),{heartbeatsToSend:n,unsentEntries:o}=r3(this._heartbeatsCache.heartbeats),h=Gh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(e){return aa.warn(e),""}}}function P2(){return new Date().toISOString().substring(0,10)}function r3(a,e=t3){const n=[];let o=a.slice();for(const h of a){const m=n.find(E=>E.agent===h.agent);if(m){if(m.dates.push(h.date),L2(n)>e){m.dates.pop();break}}else if(n.push({agent:h.agent,dates:[h.date]}),L2(n)>e){n.pop();break}o=o.slice(1)}return{heartbeatsToSend:n,unsentEntries:o}}class s3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qw()?Xw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await e3(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return M2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return M2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function L2(a){return Gh(JSON.stringify({version:2,heartbeats:a})).length}function a3(a){if(a.length===0)return-1;let e=0,n=a[0].date;for(let o=1;o<a.length;o++)a[o].date<n&&(n=a[o].date,e=o);return e}function o3(a){Fl(new qo("platform-logger",e=>new ET(e),"PRIVATE")),Fl(new qo("heartbeat",e=>new i3(e),"PRIVATE")),$a(K1,O2,a),$a(K1,O2,"esm2020"),$a("fire-js","")}o3("");function N_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l3=N_,O_=new lu("auth","Firebase",N_());const Xh=new w0("@firebase/auth");function c3(a,...e){Xh.logLevel<=Lt.WARN&&Xh.warn(`Auth (${Kl}): ${a}`,...e)}function Ph(a,...e){Xh.logLevel<=Lt.ERROR&&Xh.error(`Auth (${Kl}): ${a}`,...e)}function ls(a,...e){throw v0(a,...e)}function As(a,...e){return v0(a,...e)}function D_(a,e,n){const o={...l3(),[e]:n};return new lu("auth","Firebase",o).create(e,{appName:a.name})}function eo(a){return D_(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function v0(a,...e){if(typeof a!="string"){const n=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=a.name),a._errorFactory.create(n,...o)}return O_.create(a,...e)}function rt(a,e,...n){if(!a)throw v0(e,...n)}function ra(a){const e="INTERNAL ASSERTION FAILED: "+a;throw Ph(e),new Error(e)}function oa(a,e){a||ra(e)}function J1(){return typeof self<"u"&&self.location?.href||""}function u3(){return k2()==="http:"||k2()==="https:"}function k2(){return typeof self<"u"&&self.location?.protocol||null}function h3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(u3()||zw()||"connection"in navigator)?navigator.onLine:!0}function f3(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}class uu{constructor(e,n){this.shortDelay=e,this.longDelay=n,oa(n>e,"Short delay should be less than long delay!"),this.isMobile=Vw()||jw()}get(){return h3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function S0(a,e){oa(a.emulator,"Emulator should always be set here");const{url:n}=a.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class M_{static initialize(e,n,o){this.fetchImpl=e,n&&(this.headersImpl=n),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ra("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ra("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ra("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const d3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const g3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],m3=new uu(3e4,6e4);function Ko(a,e){return a.tenantId&&!e.tenantId?{...e,tenantId:a.tenantId}:e}async function ho(a,e,n,o,h={}){return P_(a,h,async()=>{let m={},E={};o&&(e==="GET"?E=o:m={body:JSON.stringify(o)});const C=cu({key:a.config.apiKey,...E}).slice(1),v=await a._getAdditionalHeaders();v["Content-Type"]="application/json",a.languageCode&&(v["X-Firebase-Locale"]=a.languageCode);const w={method:e,headers:v,...m};return Fw()||(w.referrerPolicy="no-referrer"),a.emulatorConfig&&Wl(a.emulatorConfig.host)&&(w.credentials="include"),M_.fetch()(await L_(a,a.config.apiHost,n,C),w)})}async function P_(a,e,n){a._canInitEmulator=!1;const o={...d3,...e};try{const h=new y3(a),m=await Promise.race([n(),h.promise]);h.clearNetworkTimeout();const E=await m.json();if("needConfirmation"in E)throw bh(a,"account-exists-with-different-credential",E);if(m.ok&&!("errorMessage"in E))return E;{const C=m.ok?E.errorMessage:E.error.message,[v,w]=C.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw bh(a,"credential-already-in-use",E);if(v==="EMAIL_EXISTS")throw bh(a,"email-already-in-use",E);if(v==="USER_DISABLED")throw bh(a,"user-disabled",E);const D=o[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(w)throw D_(a,D,w);ls(a,D)}}catch(h){if(h instanceof ua)throw h;ls(a,"network-request-failed",{message:String(h)})}}async function mf(a,e,n,o,h={}){const m=await ho(a,e,n,o,h);return"mfaPendingCredential"in m&&ls(a,"multi-factor-auth-required",{_serverResponse:m}),m}async function L_(a,e,n,o){const h=`${e}${n}?${o}`,m=a,E=m.config.emulator?S0(a.config,h):`${a.config.apiScheme}://${h}`;return g3.includes(n)&&(await m._persistenceManagerAvailable,m._getPersistenceType()==="COOKIE")?m._getPersistence()._getFinalTarget(E).toString():E}function p3(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class y3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,o)=>{this.timer=setTimeout(()=>o(As(this.auth,"network-request-failed")),m3.get())})}}function bh(a,e,n){const o={appName:a.name};n.email&&(o.email=n.email),n.phoneNumber&&(o.phoneNumber=n.phoneNumber);const h=As(a,e,o);return h.customData._tokenResponse=n,h}function B2(a){return a!==void 0&&a.enterprise!==void 0}class _3{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return p3(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function E3(a,e){return ho(a,"GET","/v2/recaptchaConfig",Ko(a,e))}async function x3(a,e){return ho(a,"POST","/v1/accounts:delete",e)}async function Yh(a,e){return ho(a,"POST","/v1/accounts:lookup",e)}function Wc(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function A3(a,e=!1){const n=Xn(a),o=await n.getIdToken(e),h=b0(o);rt(h&&h.exp&&h.auth_time&&h.iat,n.auth,"internal-error");const m=typeof h.firebase=="object"?h.firebase:void 0,E=m?.sign_in_provider;return{claims:h,token:o,authTime:Wc(B1(h.auth_time)),issuedAtTime:Wc(B1(h.iat)),expirationTime:Wc(B1(h.exp)),signInProvider:E||null,signInSecondFactor:m?.sign_in_second_factor||null}}function B1(a){return Number(a)*1e3}function b0(a){const[e,n,o]=a.split(".");if(e===void 0||n===void 0||o===void 0)return Ph("JWT malformed, contained fewer than 3 sections"),null;try{const h=__(n);return h?JSON.parse(h):(Ph("Failed to decode base64 JWT payload"),null)}catch(h){return Ph("Caught error parsing JWT payload as JSON",h?.toString()),null}}function V2(a){const e=b0(a);return rt(e,"internal-error"),rt(typeof e.exp<"u","internal-error"),rt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function eu(a,e,n=!1){if(n)return e;try{return await e}catch(o){throw o instanceof ua&&w3(o)&&a.auth.currentUser===a&&await a.auth.signOut(),o}}function w3({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}class T3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class $1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wc(this.lastLoginAt),this.creationTime=Wc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Wh(a){const e=a.auth,n=await a.getIdToken(),o=await eu(a,Yh(e,{idToken:n}));rt(o?.users.length,e,"internal-error");const h=o.users[0];a._notifyReloadListener(h);const m=h.providerUserInfo?.length?k_(h.providerUserInfo):[],E=v3(a.providerData,m),C=a.isAnonymous,v=!(a.email&&h.passwordHash)&&!E?.length,w=C?v:!1,D={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:E,metadata:new $1(h.createdAt,h.lastLoginAt),isAnonymous:w};Object.assign(a,D)}async function C3(a){const e=Xn(a);await Wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function v3(a,e){return[...a.filter(o=>!e.some(h=>h.providerId===o.providerId)),...e]}function k_(a){return a.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function S3(a,e){const n=await P_(a,{},async()=>{const o=cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:h,apiKey:m}=a.config,E=await L_(a,h,"/v1/token",`key=${m}`),C=await a._getAdditionalHeaders();C["Content-Type"]="application/x-www-form-urlencoded";const v={method:"POST",headers:C,body:o};return a.emulatorConfig&&Wl(a.emulatorConfig.host)&&(v.credentials="include"),M_.fetch()(E,v)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function b3(a,e){return ho(a,"POST","/v2/accounts:revokeToken",Ko(a,e))}class kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){rt(e.idToken,"internal-error"),rt(typeof e.idToken<"u","internal-error"),rt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):V2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){rt(e.length!==0,"internal-error");const n=V2(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(rt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:o,refreshToken:h,expiresIn:m}=await S3(e,n);this.updateTokensAndExpiration(o,h,Number(m))}updateTokensAndExpiration(e,n,o){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,n){const{refreshToken:o,accessToken:h,expirationTime:m}=n,E=new kl;return o&&(rt(typeof o=="string","internal-error",{appName:e}),E.refreshToken=o),h&&(rt(typeof h=="string","internal-error",{appName:e}),E.accessToken=h),m&&(rt(typeof m=="number","internal-error",{appName:e}),E.expirationTime=m),E}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kl,this.toJSON())}_performRefresh(){return ra("not implemented")}}function Ga(a,e){rt(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class as{constructor({uid:e,auth:n,stsTokenManager:o,...h}){this.providerId="firebase",this.proactiveRefresh=new T3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=h.displayName||null,this.email=h.email||null,this.emailVerified=h.emailVerified||!1,this.phoneNumber=h.phoneNumber||null,this.photoURL=h.photoURL||null,this.isAnonymous=h.isAnonymous||!1,this.tenantId=h.tenantId||null,this.providerData=h.providerData?[...h.providerData]:[],this.metadata=new $1(h.createdAt||void 0,h.lastLoginAt||void 0)}async getIdToken(e){const n=await eu(this,this.stsTokenManager.getToken(this.auth,e));return rt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return A3(this,e)}reload(){return C3(this)}_assign(e){this!==e&&(rt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new as({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),n&&await Wh(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ss(this.auth.app))return Promise.reject(eo(this.auth));const e=await this.getIdToken();return await eu(this,x3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const o=n.displayName??void 0,h=n.email??void 0,m=n.phoneNumber??void 0,E=n.photoURL??void 0,C=n.tenantId??void 0,v=n._redirectEventId??void 0,w=n.createdAt??void 0,D=n.lastLoginAt??void 0,{uid:M,emailVerified:z,isAnonymous:te,providerData:_e,stsTokenManager:pe}=n;rt(M&&pe,e,"internal-error");const ve=kl.fromJSON(this.name,pe);rt(typeof M=="string",e,"internal-error"),Ga(o,e.name),Ga(h,e.name),rt(typeof z=="boolean",e,"internal-error"),rt(typeof te=="boolean",e,"internal-error"),Ga(m,e.name),Ga(E,e.name),Ga(C,e.name),Ga(v,e.name),Ga(w,e.name),Ga(D,e.name);const je=new as({uid:M,auth:e,email:h,emailVerified:z,displayName:o,isAnonymous:te,photoURL:E,phoneNumber:m,tenantId:C,stsTokenManager:ve,createdAt:w,lastLoginAt:D});return _e&&Array.isArray(_e)&&(je.providerData=_e.map(Pe=>({...Pe}))),v&&(je._redirectEventId=v),je}static async _fromIdTokenResponse(e,n,o=!1){const h=new kl;h.updateFromServerResponse(n);const m=new as({uid:n.localId,auth:e,stsTokenManager:h,isAnonymous:o});return await Wh(m),m}static async _fromGetAccountInfoResponse(e,n,o){const h=n.users[0];rt(h.localId!==void 0,"internal-error");const m=h.providerUserInfo!==void 0?k_(h.providerUserInfo):[],E=!(h.email&&h.passwordHash)&&!m?.length,C=new kl;C.updateFromIdToken(o);const v=new as({uid:h.localId,auth:e,stsTokenManager:C,isAnonymous:E}),w={uid:h.localId,displayName:h.displayName||null,photoURL:h.photoUrl||null,email:h.email||null,emailVerified:h.emailVerified||!1,phoneNumber:h.phoneNumber||null,tenantId:h.tenantId||null,providerData:m,metadata:new $1(h.createdAt,h.lastLoginAt),isAnonymous:!(h.email&&h.passwordHash)&&!m?.length};return Object.assign(v,w),v}}const U2=new Map;function sa(a){oa(a instanceof Function,"Expected a class definition");let e=U2.get(a);return e?(oa(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,U2.set(a,e),e)}class B_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}B_.type="NONE";const F2=B_;function Lh(a,e,n){return`firebase:${a}:${e}:${n}`}class Bl{constructor(e,n,o){this.persistence=e,this.auth=n,this.userKey=o;const{config:h,name:m}=this.auth;this.fullUserKey=Lh(this.userKey,h.apiKey,m),this.fullPersistenceKey=Lh("persistence",h.apiKey,m),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Yh(this.auth,{idToken:e}).catch(()=>{});return n?as._fromGetAccountInfoResponse(this.auth,n,e):null}return as._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,o="authUser"){if(!n.length)return new Bl(sa(F2),e,o);const h=(await Promise.all(n.map(async w=>{if(await w._isAvailable())return w}))).filter(w=>w);let m=h[0]||sa(F2);const E=Lh(o,e.config.apiKey,e.name);let C=null;for(const w of n)try{const D=await w._get(E);if(D){let M;if(typeof D=="string"){const z=await Yh(e,{idToken:D}).catch(()=>{});if(!z)break;M=await as._fromGetAccountInfoResponse(e,z,D)}else M=as._fromJSON(e,D);w!==m&&(C=M),m=w;break}}catch{}const v=h.filter(w=>w._shouldAllowMigration);return!m._shouldAllowMigration||!v.length?new Bl(m,e,o):(m=v[0],C&&await m._set(E,C.toJSON()),await Promise.all(n.map(async w=>{if(w!==m)try{await w._remove(E)}catch{}})),new Bl(m,e,o))}}function z2(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(z_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(V_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(H_(e))return"Blackberry";if(G_(e))return"Webos";if(U_(e))return"Safari";if((e.includes("chrome/")||F_(e))&&!e.includes("edge/"))return"Chrome";if(j_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=a.match(n);if(o?.length===2)return o[1]}return"Other"}function V_(a=ji()){return/firefox\//i.test(a)}function U_(a=ji()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function F_(a=ji()){return/crios\//i.test(a)}function z_(a=ji()){return/iemobile/i.test(a)}function j_(a=ji()){return/android/i.test(a)}function H_(a=ji()){return/blackberry/i.test(a)}function G_(a=ji()){return/webos/i.test(a)}function I0(a=ji()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function I3(a=ji()){return I0(a)&&!!window.navigator?.standalone}function R3(){return Hw()&&document.documentMode===10}function q_(a=ji()){return I0(a)||j_(a)||G_(a)||H_(a)||/windows phone/i.test(a)||z_(a)}function X_(a,e=[]){let n;switch(a){case"Browser":n=z2(ji());break;case"Worker":n=`${z2(ji())}-${a}`;break;default:n=a}const o=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Kl}/${o}`}class N3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const o=m=>new Promise((E,C)=>{try{const v=e(m);E(v)}catch(v){C(v)}});o.onAbort=n,this.queue.push(o);const h=this.queue.length-1;return()=>{this.queue[h]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const o of this.queue)await o(e),o.onAbort&&n.push(o.onAbort)}catch(o){n.reverse();for(const h of n)try{h()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o?.message})}}}async function O3(a,e={}){return ho(a,"GET","/v2/passwordPolicy",Ko(a,e))}const D3=6;class M3{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??D3,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const o=this.customStrengthOptions.minPasswordLength,h=this.customStrengthOptions.maxPasswordLength;o&&(n.meetsMinPasswordLength=e.length>=o),h&&(n.meetsMaxPasswordLength=e.length<=h)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let o;for(let h=0;h<e.length;h++)o=e.charAt(h),this.updatePasswordCharacterOptionsStatuses(n,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,n,o,h,m){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=h)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=m))}}class P3{constructor(e,n,o,h){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=o,this.config=h,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j2(this),this.idTokenSubscription=new j2(this),this.beforeStateQueue=new N3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=h.sdkClientVersion,this._persistenceManagerAvailable=new Promise(m=>this._resolvePersistenceManagerAvailable=m)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=sa(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Bl.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Yh(this,{idToken:e}),o=await as._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(o)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ss(this.app)){const m=this.app.settings.authIdToken;return m?new Promise(E=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(m).then(E,E))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let o=n,h=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const m=this.redirectUser?._redirectEventId,E=o?._redirectEventId,C=await this.tryRedirectSignIn(e);(!m||m===E)&&C?.user&&(o=C.user,h=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(h)try{await this.beforeStateQueue.runMiddleware(o)}catch(m){o=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(m))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return rt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Wh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=f3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ss(this.app))return Promise.reject(eo(this));const n=e?Xn(e):null;return n&&rt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&rt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ss(this.app)?Promise.reject(eo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ss(this.app)?Promise.reject(eo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await O3(this),n=new M3(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lu("auth","Firebase",e())}onAuthStateChanged(e,n,o){return this.registerStateListener(this.authStateSubscription,e,n,o)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,o){return this.registerStateListener(this.idTokenSubscription,e,n,o)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(o.tenantId=this.tenantId),await b3(this,o)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const o=await this.getOrInitRedirectPersistenceManager(n);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&sa(e)||this._popupRedirectResolver;rt(n,this,"argument-error"),this.redirectPersistenceManager=await Bl.create(this,[sa(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,o,h){if(this._deleted)return()=>{};const m=typeof n=="function"?n:n.next.bind(n);let E=!1;const C=this._isInitialized?Promise.resolve():this._initializationPromise;if(rt(C,this,"internal-error"),C.then(()=>{E||m(this.currentUser)}),typeof n=="function"){const v=e.addObserver(n,o,h);return()=>{E=!0,v()}}else{const v=e.addObserver(n);return()=>{E=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=X_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const o=await this._getAppCheckToken();return o&&(e["X-Firebase-AppCheck"]=o),e}async _getAppCheckToken(){if(ss(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&c3(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ql(a){return Xn(a)}class j2{constructor(e){this.auth=e,this.observer=null,this.addObserver=Zw(n=>this.observer=n)}get next(){return rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let pf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function L3(a){pf=a}function Y_(a){return pf.loadJS(a)}function k3(){return pf.recaptchaEnterpriseScript}function B3(){return pf.gapiScript}function V3(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class U3{constructor(){this.enterprise=new F3}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class F3{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const z3="recaptcha-enterprise",W_="NO_RECAPTCHA";class j3{constructor(e){this.type=z3,this.auth=Ql(e)}async verify(e="verify",n=!1){async function o(m){if(!n){if(m.tenantId==null&&m._agentRecaptchaConfig!=null)return m._agentRecaptchaConfig.siteKey;if(m.tenantId!=null&&m._tenantRecaptchaConfigs[m.tenantId]!==void 0)return m._tenantRecaptchaConfigs[m.tenantId].siteKey}return new Promise(async(E,C)=>{E3(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(v=>{if(v.recaptchaKey===void 0)C(new Error("recaptcha Enterprise site key undefined"));else{const w=new _3(v);return m.tenantId==null?m._agentRecaptchaConfig=w:m._tenantRecaptchaConfigs[m.tenantId]=w,E(w.siteKey)}}).catch(v=>{C(v)})})}function h(m,E,C){const v=window.grecaptcha;B2(v)?v.enterprise.ready(()=>{v.enterprise.execute(m,{action:e}).then(w=>{E(w)}).catch(()=>{E(W_)})}):C(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new U3().execute("siteKey",{action:"verify"}):new Promise((m,E)=>{o(this.auth).then(C=>{if(!n&&B2(window.grecaptcha))h(C,m,E);else{if(typeof window>"u"){E(new Error("RecaptchaVerifier is only supported in browser"));return}let v=k3();v.length!==0&&(v+=C),Y_(v).then(()=>{h(C,m,E)}).catch(w=>{E(w)})}}).catch(C=>{E(C)})})}}async function H2(a,e,n,o=!1,h=!1){const m=new j3(a);let E;if(h)E=W_;else try{E=await m.verify(n)}catch{E=await m.verify(n,!0)}const C={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in C){const v=C.phoneEnrollmentInfo.phoneNumber,w=C.phoneEnrollmentInfo.recaptchaToken;Object.assign(C,{phoneEnrollmentInfo:{phoneNumber:v,recaptchaToken:w,captchaResponse:E,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in C){const v=C.phoneSignInInfo.recaptchaToken;Object.assign(C,{phoneSignInInfo:{recaptchaToken:v,captchaResponse:E,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return C}return o?Object.assign(C,{captchaResp:E}):Object.assign(C,{captchaResponse:E}),Object.assign(C,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(C,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),C}async function G2(a,e,n,o,h){if(a._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const m=await H2(a,e,n,n==="getOobCode");return o(a,m)}else return o(a,e).catch(async m=>{if(m.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const E=await H2(a,e,n,n==="getOobCode");return o(a,E)}else return Promise.reject(m)})}function H3(a,e){const n=C0(a,"auth");if(n.isInitialized()){const h=n.getImmediate(),m=n.getOptions();if(Go(m,e??{}))return h;ls(h,"already-initialized")}return n.initialize({options:e})}function G3(a,e){const n=e?.persistence||[],o=(Array.isArray(n)?n:[n]).map(sa);e?.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(o,e?.popupRedirectResolver)}function q3(a,e,n){const o=Ql(a);rt(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const h=!1,m=K_(e),{host:E,port:C}=X3(e),v=C===null?"":`:${C}`,w={url:`${m}//${E}${v}/`},D=Object.freeze({host:E,port:C,protocol:m.replace(":",""),options:Object.freeze({disableWarnings:h})});if(!o._canInitEmulator){rt(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),rt(Go(w,o.config.emulator)&&Go(D,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=w,o.emulatorConfig=D,o.settings.appVerificationDisabledForTesting=!0,Wl(E)?(w_(`${m}//${E}${v}`),T_("Auth",!0)):Y3()}function K_(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function X3(a){const e=K_(a),n=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!n)return{host:"",port:null};const o=n[2].split("@").pop()||"",h=/^(\[[^\]]+\])(:|$)/.exec(o);if(h){const m=h[1];return{host:m,port:q2(o.substr(m.length+1))}}else{const[m,E]=o.split(":");return{host:m,port:q2(E)}}}function q2(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function Y3(){function a(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}class R0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ra("not implemented")}_getIdTokenResponse(e){return ra("not implemented")}_linkToIdToken(e,n){return ra("not implemented")}_getReauthenticationResolver(e){return ra("not implemented")}}async function W3(a,e){return ho(a,"POST","/v1/accounts:signUp",e)}async function K3(a,e){return mf(a,"POST","/v1/accounts:signInWithPassword",Ko(a,e))}async function Q3(a,e){return mf(a,"POST","/v1/accounts:signInWithEmailLink",Ko(a,e))}async function Z3(a,e){return mf(a,"POST","/v1/accounts:signInWithEmailLink",Ko(a,e))}class tu extends R0{constructor(e,n,o,h=null){super("password",o),this._email=e,this._password=n,this._tenantId=h}static _fromEmailAndPassword(e,n){return new tu(e,n,"password")}static _fromEmailAndCode(e,n,o=null){return new tu(e,n,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return G2(e,n,"signInWithPassword",K3);case"emailLink":return Q3(e,{email:this._email,oobCode:this._password});default:ls(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const o={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return G2(e,o,"signUpPassword",W3);case"emailLink":return Z3(e,{idToken:n,email:this._email,oobCode:this._password});default:ls(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Vl(a,e){return mf(a,"POST","/v1/accounts:signInWithIdp",Ko(a,e))}const J3="http://localhost";class Xo extends R0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ls("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:h,...m}=n;if(!o||!h)return null;const E=new Xo(o,h);return E.idToken=m.idToken||void 0,E.accessToken=m.accessToken||void 0,E.secret=m.secret,E.nonce=m.nonce,E.pendingToken=m.pendingToken||null,E}_getIdTokenResponse(e){const n=this.buildRequest();return Vl(e,n)}_linkToIdToken(e,n){const o=this.buildRequest();return o.idToken=n,Vl(e,o)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Vl(e,n)}buildRequest(){const e={requestUri:J3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=cu(n)}return e}}function $3(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eC(a){const e=Fc(zc(a)).link,n=e?Fc(zc(e)).deep_link_id:null,o=Fc(zc(a)).deep_link_id;return(o?Fc(zc(o)).link:null)||o||n||e||a}class N0{constructor(e){const n=Fc(zc(e)),o=n.apiKey??null,h=n.oobCode??null,m=$3(n.mode??null);rt(o&&h&&m,"argument-error"),this.apiKey=o,this.operation=m,this.code=h,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=eC(e);try{return new N0(n)}catch{return null}}}class Zl{constructor(){this.providerId=Zl.PROVIDER_ID}static credential(e,n){return tu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const o=N0.parseLink(n);return rt(o,"argument-error"),tu._fromEmailAndCode(e,o.code,o.tenantId)}}Zl.PROVIDER_ID="password";Zl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Q_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class hu extends Q_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Xa extends hu{constructor(){super("facebook.com")}static credential(e){return Xo._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xa.credential(e.oauthAccessToken)}catch{return null}}}Xa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xa.PROVIDER_ID="facebook.com";class Ya extends hu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Xo._fromParams({providerId:Ya.PROVIDER_ID,signInMethod:Ya.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ya.credentialFromTaggedObject(e)}static credentialFromError(e){return Ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:o}=e;if(!n&&!o)return null;try{return Ya.credential(n,o)}catch{return null}}}Ya.GOOGLE_SIGN_IN_METHOD="google.com";Ya.PROVIDER_ID="google.com";class Wa extends hu{constructor(){super("github.com")}static credential(e){return Xo._fromParams({providerId:Wa.PROVIDER_ID,signInMethod:Wa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wa.credentialFromTaggedObject(e)}static credentialFromError(e){return Wa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wa.credential(e.oauthAccessToken)}catch{return null}}}Wa.GITHUB_SIGN_IN_METHOD="github.com";Wa.PROVIDER_ID="github.com";class Ka extends hu{constructor(){super("twitter.com")}static credential(e,n){return Xo._fromParams({providerId:Ka.PROVIDER_ID,signInMethod:Ka.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ka.credentialFromTaggedObject(e)}static credentialFromError(e){return Ka.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:o}=e;if(!n||!o)return null;try{return Ka.credential(n,o)}catch{return null}}}Ka.TWITTER_SIGN_IN_METHOD="twitter.com";Ka.PROVIDER_ID="twitter.com";class zl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,o,h=!1){const m=await as._fromIdTokenResponse(e,o,h),E=X2(o);return new zl({user:m,providerId:E,_tokenResponse:o,operationType:n})}static async _forOperation(e,n,o){await e._updateTokensIfNecessary(o,!0);const h=X2(o);return new zl({user:e,providerId:h,_tokenResponse:o,operationType:n})}}function X2(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}class Kh extends ua{constructor(e,n,o,h){super(n.code,n.message),this.operationType=o,this.user=h,Object.setPrototypeOf(this,Kh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,n,o,h){return new Kh(e,n,o,h)}}function Z_(a,e,n,o){return(e==="reauthenticate"?n._getReauthenticationResolver(a):n._getIdTokenResponse(a)).catch(m=>{throw m.code==="auth/multi-factor-auth-required"?Kh._fromErrorAndOperation(a,m,e,o):m})}async function tC(a,e,n=!1){const o=await eu(a,e._linkToIdToken(a.auth,await a.getIdToken()),n);return zl._forOperation(a,"link",o)}async function nC(a,e,n=!1){const{auth:o}=a;if(ss(o.app))return Promise.reject(eo(o));const h="reauthenticate";try{const m=await eu(a,Z_(o,h,e,a),n);rt(m.idToken,o,"internal-error");const E=b0(m.idToken);rt(E,o,"internal-error");const{sub:C}=E;return rt(a.uid===C,o,"user-mismatch"),zl._forOperation(a,h,m)}catch(m){throw m?.code==="auth/user-not-found"&&ls(o,"user-mismatch"),m}}async function J_(a,e,n=!1){if(ss(a.app))return Promise.reject(eo(a));const o="signIn",h=await Z_(a,o,e),m=await zl._fromIdTokenResponse(a,o,h);return n||await a._updateCurrentUser(m.user),m}async function iC(a,e){return J_(Ql(a),e)}async function rC(a){const e=Ql(a);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function sC(a,e,n){return ss(a.app)?Promise.reject(eo(a)):iC(Xn(a),Zl.credential(e,n)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&rC(a),o})}function aC(a,e,n,o){return Xn(a).onIdTokenChanged(e,n,o)}function oC(a,e,n){return Xn(a).beforeAuthStateChanged(e,n)}function lC(a,e,n,o){return Xn(a).onAuthStateChanged(e,n,o)}function cC(a){return Xn(a).signOut()}const Qh="__sak";class $_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qh,"1"),this.storage.removeItem(Qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const uC=1e3,hC=10;class eE extends $_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=q_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const o=this.storage.getItem(n),h=this.localCache[n];o!==h&&e(n,h,o)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((E,C,v)=>{this.notifyListeners(E,v)});return}const o=e.key;n?this.detachListener():this.stopPolling();const h=()=>{const E=this.storage.getItem(o);!n&&this.localCache[o]===E||this.notifyListeners(o,E)},m=this.storage.getItem(o);R3()&&m!==e.newValue&&e.newValue!==e.oldValue?setTimeout(h,hC):h()}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const h of Array.from(o))h(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:o}),!0)})},uC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}eE.type="LOCAL";const fC=eE;class tE extends $_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tE.type="SESSION";const nE=tE;function dC(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class yf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(h=>h.isListeningto(e));if(n)return n;const o=new yf(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:o,eventType:h,data:m}=n.data,E=this.handlersMap[h];if(!E?.size)return;n.ports[0].postMessage({status:"ack",eventId:o,eventType:h});const C=Array.from(E).map(async w=>w(n.origin,m)),v=await dC(C);n.ports[0].postMessage({status:"done",eventId:o,eventType:h,response:v})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yf.receivers=[];function O0(a="",e=10){let n="";for(let o=0;o<e;o++)n+=Math.floor(Math.random()*10);return a+n}class gC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,o=50){const h=typeof MessageChannel<"u"?new MessageChannel:null;if(!h)throw new Error("connection_unavailable");let m,E;return new Promise((C,v)=>{const w=O0("",20);h.port1.start();const D=setTimeout(()=>{v(new Error("unsupported_event"))},o);E={messageChannel:h,onMessage(M){const z=M;if(z.data.eventId===w)switch(z.data.status){case"ack":clearTimeout(D),m=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(m),C(z.data.response);break;default:clearTimeout(D),clearTimeout(m),v(new Error("invalid_response"));break}}},this.handlers.add(E),h.port1.addEventListener("message",E.onMessage),this.target.postMessage({eventType:e,eventId:w,data:n},[h.port2])}).finally(()=>{E&&this.removeMessageHandler(E)})}}function ws(){return window}function mC(a){ws().location.href=a}function iE(){return typeof ws().WorkerGlobalScope<"u"&&typeof ws().importScripts=="function"}async function pC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yC(){return navigator?.serviceWorker?.controller||null}function _C(){return iE()?self:null}const rE="firebaseLocalStorageDb",EC=1,Zh="firebaseLocalStorage",sE="fbase_key";class fu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _f(a,e){return a.transaction([Zh],e?"readwrite":"readonly").objectStore(Zh)}function xC(){const a=indexedDB.deleteDatabase(rE);return new fu(a).toPromise()}function e0(){const a=indexedDB.open(rE,EC);return new Promise((e,n)=>{a.addEventListener("error",()=>{n(a.error)}),a.addEventListener("upgradeneeded",()=>{const o=a.result;try{o.createObjectStore(Zh,{keyPath:sE})}catch(h){n(h)}}),a.addEventListener("success",async()=>{const o=a.result;o.objectStoreNames.contains(Zh)?e(o):(o.close(),await xC(),e(await e0()))})})}async function Y2(a,e,n){const o=_f(a,!0).put({[sE]:e,value:n});return new fu(o).toPromise()}async function AC(a,e){const n=_f(a,!1).get(e),o=await new fu(n).toPromise();return o===void 0?null:o.value}function W2(a,e){const n=_f(a,!0).delete(e);return new fu(n).toPromise()}const wC=800,TC=3;class aE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await e0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(n++>TC)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yf._getInstance(_C()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await pC(),!this.activeServiceWorker)return;this.sender=new gC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await e0();return await Y2(e,Qh,"1"),await W2(e,Qh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(o=>Y2(o,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(o=>AC(o,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>W2(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(h=>{const m=_f(h,!1).getAll();return new fu(m).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],o=new Set;if(e.length!==0)for(const{fbase_key:h,value:m}of e)o.add(h),JSON.stringify(this.localCache[h])!==JSON.stringify(m)&&(this.notifyListeners(h,m),n.push(h));for(const h of Object.keys(this.localCache))this.localCache[h]&&!o.has(h)&&(this.notifyListeners(h,null),n.push(h));return n}notifyListeners(e,n){this.localCache[e]=n;const o=this.listeners[e];if(o)for(const h of Array.from(o))h(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aE.type="LOCAL";const CC=aE;new uu(3e4,6e4);function vC(a,e){return e?sa(e):(rt(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}class D0 extends R0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Vl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Vl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Vl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function SC(a){return J_(a.auth,new D0(a),a.bypassAuthState)}function bC(a){const{auth:e,user:n}=a;return rt(n,e,"internal-error"),nC(n,new D0(a),a.bypassAuthState)}async function IC(a){const{auth:e,user:n}=a;return rt(n,e,"internal-error"),tC(n,new D0(a),a.bypassAuthState)}class oE{constructor(e,n,o,h,m=!1){this.auth=e,this.resolver=o,this.user=h,this.bypassAuthState=m,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:o,postBody:h,tenantId:m,error:E,type:C}=e;if(E){this.reject(E);return}const v={auth:this.auth,requestUri:n,sessionId:o,tenantId:m||void 0,postBody:h||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(C)(v))}catch(w){this.reject(w)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SC;case"linkViaPopup":case"linkViaRedirect":return IC;case"reauthViaPopup":case"reauthViaRedirect":return bC;default:ls(this.auth,"internal-error")}}resolve(e){oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const RC=new uu(2e3,1e4);class Pl extends oE{constructor(e,n,o,h,m){super(e,n,h,m),this.provider=o,this.authWindow=null,this.pollId=null,Pl.currentPopupAction&&Pl.currentPopupAction.cancel(),Pl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return rt(e,this.auth,"internal-error"),e}async onExecution(){oa(this.filter.length===1,"Popup operations only handle one event");const e=O0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(As(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(As(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pl.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(As(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RC.get())};e()}}Pl.currentPopupAction=null;const NC="pendingRedirect",kh=new Map;class OC extends oE{constructor(e,n,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,o),this.eventId=null}async execute(){let e=kh.get(this.auth._key());if(!e){try{const o=await DC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(n){e=()=>Promise.reject(n)}kh.set(this.auth._key(),e)}return this.bypassAuthState||kh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DC(a,e){const n=LC(e),o=PC(a);if(!await o._isAvailable())return!1;const h=await o._get(n)==="true";return await o._remove(n),h}function MC(a,e){kh.set(a._key(),e)}function PC(a){return sa(a._redirectPersistence)}function LC(a){return Lh(NC,a.config.apiKey,a.name)}async function kC(a,e,n=!1){if(ss(a.app))return Promise.reject(eo(a));const o=Ql(a),h=vC(o,e),E=await new OC(o,h,n).execute();return E&&!n&&(delete E.user._redirectEventId,await o._persistUserIfCurrent(E.user),await o._setRedirectUser(null,e)),E}const BC=600*1e3;class VC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(n=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!lE(e)){const o=e.error.code?.split("auth/")[1]||"internal-error";n.onError(As(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const o=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BC&&this.cachedEventUids.clear(),this.cachedEventUids.has(K2(e))}saveEventToCache(e){this.cachedEventUids.add(K2(e)),this.lastProcessedEventTime=Date.now()}}function K2(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function lE({type:a,error:e}){return a==="unknown"&&e?.code==="auth/no-auth-event"}function UC(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lE(a);default:return!1}}async function FC(a,e={}){return ho(a,"GET","/v1/projects",e)}const zC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jC=/^https?/;async function HC(a){if(a.config.emulator)return;const{authorizedDomains:e}=await FC(a);for(const n of e)try{if(GC(n))return}catch{}ls(a,"unauthorized-domain")}function GC(a){const e=J1(),{protocol:n,hostname:o}=new URL(e);if(a.startsWith("chrome-extension://")){const E=new URL(a);return E.hostname===""&&o===""?n==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&E.hostname===o}if(!jC.test(n))return!1;if(zC.test(a))return o===a;const h=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+h+"|"+h+")$","i").test(o)}const qC=new uu(3e4,6e4);function Q2(){const a=ws().___jsl;if(a?.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let n=0;n<a.CP.length;n++)a.CP[n]=null}}function XC(a){return new Promise((e,n)=>{function o(){Q2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Q2(),n(As(a,"network-request-failed"))},timeout:qC.get()})}if(ws().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ws().gapi?.load)o();else{const h=V3("iframefcb");return ws()[h]=()=>{gapi.load?o():n(As(a,"network-request-failed"))},Y_(`${B3()}?onload=${h}`).catch(m=>n(m))}}).catch(e=>{throw Bh=null,e})}let Bh=null;function YC(a){return Bh=Bh||XC(a),Bh}const WC=new uu(5e3,15e3),KC="__/auth/iframe",QC="emulator/auth/iframe",ZC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $C(a){const e=a.config;rt(e.authDomain,a,"auth-domain-config-required");const n=e.emulator?S0(e,QC):`https://${a.config.authDomain}/${KC}`,o={apiKey:e.apiKey,appName:a.name,v:Kl},h=JC.get(a.config.apiHost);h&&(o.eid=h);const m=a._getFrameworks();return m.length&&(o.fw=m.join(",")),`${n}?${cu(o).slice(1)}`}async function ev(a){const e=await YC(a),n=ws().gapi;return rt(n,a,"internal-error"),e.open({where:document.body,url:$C(a),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZC,dontclear:!0},o=>new Promise(async(h,m)=>{await o.restyle({setHideOnLeave:!1});const E=As(a,"network-request-failed"),C=ws().setTimeout(()=>{m(E)},WC.get());function v(){ws().clearTimeout(C),h(o)}o.ping(v).then(v,()=>{m(E)})}))}const tv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nv=500,iv=600,rv="_blank",sv="http://localhost";class Z2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function av(a,e,n,o=nv,h=iv){const m=Math.max((window.screen.availHeight-h)/2,0).toString(),E=Math.max((window.screen.availWidth-o)/2,0).toString();let C="";const v={...tv,width:o.toString(),height:h.toString(),top:m,left:E},w=ji().toLowerCase();n&&(C=F_(w)?rv:n),V_(w)&&(e=e||sv,v.scrollbars="yes");const D=Object.entries(v).reduce((z,[te,_e])=>`${z}${te}=${_e},`,"");if(I3(w)&&C!=="_self")return ov(e||"",C),new Z2(null);const M=window.open(e||"",C,D);rt(M,a,"popup-blocked");try{M.focus()}catch{}return new Z2(M)}function ov(a,e){const n=document.createElement("a");n.href=a,n.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(o)}const lv="__/auth/handler",cv="emulator/auth/handler",uv=encodeURIComponent("fac");async function J2(a,e,n,o,h,m){rt(a.config.authDomain,a,"auth-domain-config-required"),rt(a.config.apiKey,a,"invalid-api-key");const E={apiKey:a.config.apiKey,appName:a.name,authType:n,redirectUrl:o,v:Kl,eventId:h};if(e instanceof Q_){e.setDefaultLanguage(a.languageCode),E.providerId=e.providerId||"",Qw(e.getCustomParameters())||(E.customParameters=JSON.stringify(e.getCustomParameters()));for(const[D,M]of Object.entries({}))E[D]=M}if(e instanceof hu){const D=e.getScopes().filter(M=>M!=="");D.length>0&&(E.scopes=D.join(","))}a.tenantId&&(E.tid=a.tenantId);const C=E;for(const D of Object.keys(C))C[D]===void 0&&delete C[D];const v=await a._getAppCheckToken(),w=v?`#${uv}=${encodeURIComponent(v)}`:"";return`${hv(a)}?${cu(C).slice(1)}${w}`}function hv({config:a}){return a.emulator?S0(a,cv):`https://${a.authDomain}/${lv}`}const V1="webStorageSupport";class fv{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nE,this._completeRedirectFn=kC,this._overrideRedirectResult=MC}async _openPopup(e,n,o,h){oa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const m=await J2(e,n,o,J1(),h);return av(e,m,O0())}async _openRedirect(e,n,o,h){await this._originValidation(e);const m=await J2(e,n,o,J1(),h);return mC(m),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:h,promise:m}=this.eventManagers[n];return h?Promise.resolve(h):(oa(m,"If manager is not set, promise should be"),m)}const o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch(()=>{delete this.eventManagers[n]}),o}async initAndGetManager(e){const n=await ev(e),o=new VC(e);return n.register("authEvent",h=>(rt(h?.authEvent,e,"invalid-auth-event"),{status:o.onEvent(h.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=n,o}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(V1,{type:V1},h=>{const m=h?.[0]?.[V1];m!==void 0&&n(!!m),ls(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return q_()||U_()||I0()}}const dv=fv;var $2="@firebase/auth",ey="1.12.0";class gv{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(o=>{e(o?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function mv(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pv(a){Fl(new qo("auth",(e,{options:n})=>{const o=e.getProvider("app").getImmediate(),h=e.getProvider("heartbeat"),m=e.getProvider("app-check-internal"),{apiKey:E,authDomain:C}=o.options;rt(E&&!E.includes(":"),"invalid-api-key",{appName:o.name});const v={apiKey:E,authDomain:C,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:X_(a)},w=new P3(o,h,m,v);return G3(w,n),w},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,o)=>{e.getProvider("auth-internal").initialize()})),Fl(new qo("auth-internal",e=>{const n=Ql(e.getProvider("auth").getImmediate());return(o=>new gv(o))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),$a($2,ey,mv(a)),$a($2,ey,"esm2020")}const yv=300,_v=A_("authIdTokenMaxAge")||yv;let ty=null;const Ev=a=>async e=>{const n=e&&await e.getIdTokenResult(),o=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(o&&o>_v)return;const h=n?.token;ty!==h&&(ty=h,await fetch(a,{method:h?"POST":"DELETE",headers:h?{Authorization:`Bearer ${h}`}:{}}))};function xv(a=b_()){const e=C0(a,"auth");if(e.isInitialized())return e.getImmediate();const n=H3(a,{popupRedirectResolver:dv,persistence:[CC,fC,nE]}),o=A_("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const m=new URL(o,location.origin);if(location.origin===m.origin){const E=Ev(m.toString());oC(n,E,()=>E(n.currentUser)),aC(n,C=>E(C))}}const h=E_("auth");return h&&q3(n,`http://${h}`),n}function Av(){return document.getElementsByTagName("head")?.[0]??document}L3({loadJS(a){return new Promise((e,n)=>{const o=document.createElement("script");o.setAttribute("src",a),o.onload=e,o.onerror=h=>{const m=As("internal-error");m.customData=h,n(m)},o.type="text/javascript",o.charset="UTF-8",Av().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pv("Browser");var wv="firebase",Tv="12.7.0";$a(wv,Tv,"app");var ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var to,cE;(function(){var a;function e(V,j){function B(){}B.prototype=j.prototype,V.F=j.prototype,V.prototype=new B,V.prototype.constructor=V,V.D=function(ee,G,q){for(var F=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)F[Ue-2]=arguments[Ue];return j.prototype[G].apply(ee,F)}}function n(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,n),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function h(V,j,B){B||(B=0);const ee=Array(16);if(typeof j=="string")for(var G=0;G<16;++G)ee[G]=j.charCodeAt(B++)|j.charCodeAt(B++)<<8|j.charCodeAt(B++)<<16|j.charCodeAt(B++)<<24;else for(G=0;G<16;++G)ee[G]=j[B++]|j[B++]<<8|j[B++]<<16|j[B++]<<24;j=V.g[0],B=V.g[1],G=V.g[2];let q=V.g[3],F;F=j+(q^B&(G^q))+ee[0]+3614090360&4294967295,j=B+(F<<7&4294967295|F>>>25),F=q+(G^j&(B^G))+ee[1]+3905402710&4294967295,q=j+(F<<12&4294967295|F>>>20),F=G+(B^q&(j^B))+ee[2]+606105819&4294967295,G=q+(F<<17&4294967295|F>>>15),F=B+(j^G&(q^j))+ee[3]+3250441966&4294967295,B=G+(F<<22&4294967295|F>>>10),F=j+(q^B&(G^q))+ee[4]+4118548399&4294967295,j=B+(F<<7&4294967295|F>>>25),F=q+(G^j&(B^G))+ee[5]+1200080426&4294967295,q=j+(F<<12&4294967295|F>>>20),F=G+(B^q&(j^B))+ee[6]+2821735955&4294967295,G=q+(F<<17&4294967295|F>>>15),F=B+(j^G&(q^j))+ee[7]+4249261313&4294967295,B=G+(F<<22&4294967295|F>>>10),F=j+(q^B&(G^q))+ee[8]+1770035416&4294967295,j=B+(F<<7&4294967295|F>>>25),F=q+(G^j&(B^G))+ee[9]+2336552879&4294967295,q=j+(F<<12&4294967295|F>>>20),F=G+(B^q&(j^B))+ee[10]+4294925233&4294967295,G=q+(F<<17&4294967295|F>>>15),F=B+(j^G&(q^j))+ee[11]+2304563134&4294967295,B=G+(F<<22&4294967295|F>>>10),F=j+(q^B&(G^q))+ee[12]+1804603682&4294967295,j=B+(F<<7&4294967295|F>>>25),F=q+(G^j&(B^G))+ee[13]+4254626195&4294967295,q=j+(F<<12&4294967295|F>>>20),F=G+(B^q&(j^B))+ee[14]+2792965006&4294967295,G=q+(F<<17&4294967295|F>>>15),F=B+(j^G&(q^j))+ee[15]+1236535329&4294967295,B=G+(F<<22&4294967295|F>>>10),F=j+(G^q&(B^G))+ee[1]+4129170786&4294967295,j=B+(F<<5&4294967295|F>>>27),F=q+(B^G&(j^B))+ee[6]+3225465664&4294967295,q=j+(F<<9&4294967295|F>>>23),F=G+(j^B&(q^j))+ee[11]+643717713&4294967295,G=q+(F<<14&4294967295|F>>>18),F=B+(q^j&(G^q))+ee[0]+3921069994&4294967295,B=G+(F<<20&4294967295|F>>>12),F=j+(G^q&(B^G))+ee[5]+3593408605&4294967295,j=B+(F<<5&4294967295|F>>>27),F=q+(B^G&(j^B))+ee[10]+38016083&4294967295,q=j+(F<<9&4294967295|F>>>23),F=G+(j^B&(q^j))+ee[15]+3634488961&4294967295,G=q+(F<<14&4294967295|F>>>18),F=B+(q^j&(G^q))+ee[4]+3889429448&4294967295,B=G+(F<<20&4294967295|F>>>12),F=j+(G^q&(B^G))+ee[9]+568446438&4294967295,j=B+(F<<5&4294967295|F>>>27),F=q+(B^G&(j^B))+ee[14]+3275163606&4294967295,q=j+(F<<9&4294967295|F>>>23),F=G+(j^B&(q^j))+ee[3]+4107603335&4294967295,G=q+(F<<14&4294967295|F>>>18),F=B+(q^j&(G^q))+ee[8]+1163531501&4294967295,B=G+(F<<20&4294967295|F>>>12),F=j+(G^q&(B^G))+ee[13]+2850285829&4294967295,j=B+(F<<5&4294967295|F>>>27),F=q+(B^G&(j^B))+ee[2]+4243563512&4294967295,q=j+(F<<9&4294967295|F>>>23),F=G+(j^B&(q^j))+ee[7]+1735328473&4294967295,G=q+(F<<14&4294967295|F>>>18),F=B+(q^j&(G^q))+ee[12]+2368359562&4294967295,B=G+(F<<20&4294967295|F>>>12),F=j+(B^G^q)+ee[5]+4294588738&4294967295,j=B+(F<<4&4294967295|F>>>28),F=q+(j^B^G)+ee[8]+2272392833&4294967295,q=j+(F<<11&4294967295|F>>>21),F=G+(q^j^B)+ee[11]+1839030562&4294967295,G=q+(F<<16&4294967295|F>>>16),F=B+(G^q^j)+ee[14]+4259657740&4294967295,B=G+(F<<23&4294967295|F>>>9),F=j+(B^G^q)+ee[1]+2763975236&4294967295,j=B+(F<<4&4294967295|F>>>28),F=q+(j^B^G)+ee[4]+1272893353&4294967295,q=j+(F<<11&4294967295|F>>>21),F=G+(q^j^B)+ee[7]+4139469664&4294967295,G=q+(F<<16&4294967295|F>>>16),F=B+(G^q^j)+ee[10]+3200236656&4294967295,B=G+(F<<23&4294967295|F>>>9),F=j+(B^G^q)+ee[13]+681279174&4294967295,j=B+(F<<4&4294967295|F>>>28),F=q+(j^B^G)+ee[0]+3936430074&4294967295,q=j+(F<<11&4294967295|F>>>21),F=G+(q^j^B)+ee[3]+3572445317&4294967295,G=q+(F<<16&4294967295|F>>>16),F=B+(G^q^j)+ee[6]+76029189&4294967295,B=G+(F<<23&4294967295|F>>>9),F=j+(B^G^q)+ee[9]+3654602809&4294967295,j=B+(F<<4&4294967295|F>>>28),F=q+(j^B^G)+ee[12]+3873151461&4294967295,q=j+(F<<11&4294967295|F>>>21),F=G+(q^j^B)+ee[15]+530742520&4294967295,G=q+(F<<16&4294967295|F>>>16),F=B+(G^q^j)+ee[2]+3299628645&4294967295,B=G+(F<<23&4294967295|F>>>9),F=j+(G^(B|~q))+ee[0]+4096336452&4294967295,j=B+(F<<6&4294967295|F>>>26),F=q+(B^(j|~G))+ee[7]+1126891415&4294967295,q=j+(F<<10&4294967295|F>>>22),F=G+(j^(q|~B))+ee[14]+2878612391&4294967295,G=q+(F<<15&4294967295|F>>>17),F=B+(q^(G|~j))+ee[5]+4237533241&4294967295,B=G+(F<<21&4294967295|F>>>11),F=j+(G^(B|~q))+ee[12]+1700485571&4294967295,j=B+(F<<6&4294967295|F>>>26),F=q+(B^(j|~G))+ee[3]+2399980690&4294967295,q=j+(F<<10&4294967295|F>>>22),F=G+(j^(q|~B))+ee[10]+4293915773&4294967295,G=q+(F<<15&4294967295|F>>>17),F=B+(q^(G|~j))+ee[1]+2240044497&4294967295,B=G+(F<<21&4294967295|F>>>11),F=j+(G^(B|~q))+ee[8]+1873313359&4294967295,j=B+(F<<6&4294967295|F>>>26),F=q+(B^(j|~G))+ee[15]+4264355552&4294967295,q=j+(F<<10&4294967295|F>>>22),F=G+(j^(q|~B))+ee[6]+2734768916&4294967295,G=q+(F<<15&4294967295|F>>>17),F=B+(q^(G|~j))+ee[13]+1309151649&4294967295,B=G+(F<<21&4294967295|F>>>11),F=j+(G^(B|~q))+ee[4]+4149444226&4294967295,j=B+(F<<6&4294967295|F>>>26),F=q+(B^(j|~G))+ee[11]+3174756917&4294967295,q=j+(F<<10&4294967295|F>>>22),F=G+(j^(q|~B))+ee[2]+718787259&4294967295,G=q+(F<<15&4294967295|F>>>17),F=B+(q^(G|~j))+ee[9]+3951481745&4294967295,V.g[0]=V.g[0]+j&4294967295,V.g[1]=V.g[1]+(G+(F<<21&4294967295|F>>>11))&4294967295,V.g[2]=V.g[2]+G&4294967295,V.g[3]=V.g[3]+q&4294967295}o.prototype.v=function(V,j){j===void 0&&(j=V.length);const B=j-this.blockSize,ee=this.C;let G=this.h,q=0;for(;q<j;){if(G==0)for(;q<=B;)h(this,V,q),q+=this.blockSize;if(typeof V=="string"){for(;q<j;)if(ee[G++]=V.charCodeAt(q++),G==this.blockSize){h(this,ee),G=0;break}}else for(;q<j;)if(ee[G++]=V[q++],G==this.blockSize){h(this,ee),G=0;break}}this.h=G,this.o+=j},o.prototype.A=function(){var V=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);V[0]=128;for(var j=1;j<V.length-8;++j)V[j]=0;j=this.o*8;for(var B=V.length-8;B<V.length;++B)V[B]=j&255,j/=256;for(this.v(V),V=Array(16),j=0,B=0;B<4;++B)for(let ee=0;ee<32;ee+=8)V[j++]=this.g[B]>>>ee&255;return V};function m(V,j){var B=C;return Object.prototype.hasOwnProperty.call(B,V)?B[V]:B[V]=j(V)}function E(V,j){this.h=j;const B=[];let ee=!0;for(let G=V.length-1;G>=0;G--){const q=V[G]|0;ee&&q==j||(B[G]=q,ee=!1)}this.g=B}var C={};function v(V){return-128<=V&&V<128?m(V,function(j){return new E([j|0],j<0?-1:0)}):new E([V|0],V<0?-1:0)}function w(V){if(isNaN(V)||!isFinite(V))return M;if(V<0)return ve(w(-V));const j=[];let B=1;for(let ee=0;V>=B;ee++)j[ee]=V/B|0,B*=4294967296;return new E(j,0)}function D(V,j){if(V.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(V.charAt(0)=="-")return ve(D(V.substring(1),j));if(V.indexOf("-")>=0)throw Error('number format error: interior "-" character');const B=w(Math.pow(j,8));let ee=M;for(let q=0;q<V.length;q+=8){var G=Math.min(8,V.length-q);const F=parseInt(V.substring(q,q+G),j);G<8?(G=w(Math.pow(j,G)),ee=ee.j(G).add(w(F))):(ee=ee.j(B),ee=ee.add(w(F)))}return ee}var M=v(0),z=v(1),te=v(16777216);a=E.prototype,a.m=function(){if(pe(this))return-ve(this).m();let V=0,j=1;for(let B=0;B<this.g.length;B++){const ee=this.i(B);V+=(ee>=0?ee:4294967296+ee)*j,j*=4294967296}return V},a.toString=function(V){if(V=V||10,V<2||36<V)throw Error("radix out of range: "+V);if(_e(this))return"0";if(pe(this))return"-"+ve(this).toString(V);const j=w(Math.pow(V,6));var B=this;let ee="";for(;;){const G=Be(B,j).g;B=je(B,G.j(j));let q=((B.g.length>0?B.g[0]:B.h)>>>0).toString(V);if(B=G,_e(B))return q+ee;for(;q.length<6;)q="0"+q;ee=q+ee}},a.i=function(V){return V<0?0:V<this.g.length?this.g[V]:this.h};function _e(V){if(V.h!=0)return!1;for(let j=0;j<V.g.length;j++)if(V.g[j]!=0)return!1;return!0}function pe(V){return V.h==-1}a.l=function(V){return V=je(this,V),pe(V)?-1:_e(V)?0:1};function ve(V){const j=V.g.length,B=[];for(let ee=0;ee<j;ee++)B[ee]=~V.g[ee];return new E(B,~V.h).add(z)}a.abs=function(){return pe(this)?ve(this):this},a.add=function(V){const j=Math.max(this.g.length,V.g.length),B=[];let ee=0;for(let G=0;G<=j;G++){let q=ee+(this.i(G)&65535)+(V.i(G)&65535),F=(q>>>16)+(this.i(G)>>>16)+(V.i(G)>>>16);ee=F>>>16,q&=65535,F&=65535,B[G]=F<<16|q}return new E(B,B[B.length-1]&-2147483648?-1:0)};function je(V,j){return V.add(ve(j))}a.j=function(V){if(_e(this)||_e(V))return M;if(pe(this))return pe(V)?ve(this).j(ve(V)):ve(ve(this).j(V));if(pe(V))return ve(this.j(ve(V)));if(this.l(te)<0&&V.l(te)<0)return w(this.m()*V.m());const j=this.g.length+V.g.length,B=[];for(var ee=0;ee<2*j;ee++)B[ee]=0;for(ee=0;ee<this.g.length;ee++)for(let G=0;G<V.g.length;G++){const q=this.i(ee)>>>16,F=this.i(ee)&65535,Ue=V.i(G)>>>16,Q=V.i(G)&65535;B[2*ee+2*G]+=F*Q,Pe(B,2*ee+2*G),B[2*ee+2*G+1]+=q*Q,Pe(B,2*ee+2*G+1),B[2*ee+2*G+1]+=F*Ue,Pe(B,2*ee+2*G+1),B[2*ee+2*G+2]+=q*Ue,Pe(B,2*ee+2*G+2)}for(V=0;V<j;V++)B[V]=B[2*V+1]<<16|B[2*V];for(V=j;V<2*j;V++)B[V]=0;return new E(B,0)};function Pe(V,j){for(;(V[j]&65535)!=V[j];)V[j+1]+=V[j]>>>16,V[j]&=65535,j++}function Ce(V,j){this.g=V,this.h=j}function Be(V,j){if(_e(j))throw Error("division by zero");if(_e(V))return new Ce(M,M);if(pe(V))return j=Be(ve(V),j),new Ce(ve(j.g),ve(j.h));if(pe(j))return j=Be(V,ve(j)),new Ce(ve(j.g),j.h);if(V.g.length>30){if(pe(V)||pe(j))throw Error("slowDivide_ only works with positive integers.");for(var B=z,ee=j;ee.l(V)<=0;)B=ct(B),ee=ct(ee);var G=ke(B,1),q=ke(ee,1);for(ee=ke(ee,2),B=ke(B,2);!_e(ee);){var F=q.add(ee);F.l(V)<=0&&(G=G.add(B),q=F),ee=ke(ee,1),B=ke(B,1)}return j=je(V,G.j(j)),new Ce(G,j)}for(G=M;V.l(j)>=0;){for(B=Math.max(1,Math.floor(V.m()/j.m())),ee=Math.ceil(Math.log(B)/Math.LN2),ee=ee<=48?1:Math.pow(2,ee-48),q=w(B),F=q.j(j);pe(F)||F.l(V)>0;)B-=ee,q=w(B),F=q.j(j);_e(q)&&(q=z),G=G.add(q),V=je(V,F)}return new Ce(G,V)}a.B=function(V){return Be(this,V).h},a.and=function(V){const j=Math.max(this.g.length,V.g.length),B=[];for(let ee=0;ee<j;ee++)B[ee]=this.i(ee)&V.i(ee);return new E(B,this.h&V.h)},a.or=function(V){const j=Math.max(this.g.length,V.g.length),B=[];for(let ee=0;ee<j;ee++)B[ee]=this.i(ee)|V.i(ee);return new E(B,this.h|V.h)},a.xor=function(V){const j=Math.max(this.g.length,V.g.length),B=[];for(let ee=0;ee<j;ee++)B[ee]=this.i(ee)^V.i(ee);return new E(B,this.h^V.h)};function ct(V){const j=V.g.length+1,B=[];for(let ee=0;ee<j;ee++)B[ee]=V.i(ee)<<1|V.i(ee-1)>>>31;return new E(B,V.h)}function ke(V,j){const B=j>>5;j%=32;const ee=V.g.length-B,G=[];for(let q=0;q<ee;q++)G[q]=j>0?V.i(q+B)>>>j|V.i(q+B+1)<<32-j:V.i(q+B);return new E(G,V.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,cE=o,E.prototype.add=E.prototype.add,E.prototype.multiply=E.prototype.j,E.prototype.modulo=E.prototype.B,E.prototype.compare=E.prototype.l,E.prototype.toNumber=E.prototype.m,E.prototype.toString=E.prototype.toString,E.prototype.getBits=E.prototype.i,E.fromNumber=w,E.fromString=D,to=E}).apply(typeof ny<"u"?ny:typeof self<"u"?self:typeof window<"u"?window:{});var Ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var uE,jc,hE,Vh,t0,fE,dE,gE;(function(){var a,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ih=="object"&&Ih];for(var S=0;S<p.length;++S){var R=p[S];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var o=n(this);function h(p,S){if(S)e:{var R=o;p=p.split(".");for(var k=0;k<p.length-1;k++){var ie=p[k];if(!(ie in R))break e;R=R[ie]}p=p[p.length-1],k=R[p],S=S(k),S!=k&&S!=null&&e(R,p,{configurable:!0,writable:!0,value:S})}}h("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),h("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),h("Object.entries",function(p){return p||function(S){var R=[],k;for(k in S)Object.prototype.hasOwnProperty.call(S,k)&&R.push([k,S[k]]);return R}});var m=m||{},E=this||self;function C(p){var S=typeof p;return S=="object"&&p!=null||S=="function"}function v(p,S,R){return p.call.apply(p.bind,arguments)}function w(p,S,R){return w=v,w.apply(null,arguments)}function D(p,S){var R=Array.prototype.slice.call(arguments,1);return function(){var k=R.slice();return k.push.apply(k,arguments),p.apply(this,k)}}function M(p,S){function R(){}R.prototype=S.prototype,p.Z=S.prototype,p.prototype=new R,p.prototype.constructor=p,p.Ob=function(k,ie,de){for(var Ne=Array(arguments.length-2),at=2;at<arguments.length;at++)Ne[at-2]=arguments[at];return S.prototype[ie].apply(k,Ne)}}var z=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function te(p){const S=p.length;if(S>0){const R=Array(S);for(let k=0;k<S;k++)R[k]=p[k];return R}return[]}function _e(p,S){for(let k=1;k<arguments.length;k++){const ie=arguments[k];var R=typeof ie;if(R=R!="object"?R:ie?Array.isArray(ie)?"array":R:"null",R=="array"||R=="object"&&typeof ie.length=="number"){R=p.length||0;const de=ie.length||0;p.length=R+de;for(let Ne=0;Ne<de;Ne++)p[R+Ne]=ie[Ne]}else p.push(ie)}}class pe{constructor(S,R){this.i=S,this.j=R,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function ve(p){E.setTimeout(()=>{throw p},0)}function je(){var p=V;let S=null;return p.g&&(S=p.g,p.g=p.g.next,p.g||(p.h=null),S.next=null),S}class Pe{constructor(){this.h=this.g=null}add(S,R){const k=Ce.get();k.set(S,R),this.h?this.h.next=k:this.g=k,this.h=k}}var Ce=new pe(()=>new Be,p=>p.reset());class Be{constructor(){this.next=this.g=this.h=null}set(S,R){this.h=S,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let ct,ke=!1,V=new Pe,j=()=>{const p=Promise.resolve(void 0);ct=()=>{p.then(B)}};function B(){for(var p;p=je();){try{p.h.call(p.g)}catch(R){ve(R)}var S=Ce;S.j(p),S.h<100&&(S.h++,p.next=S.g,S.g=p)}ke=!1}function ee(){this.u=this.u,this.C=this.C}ee.prototype.u=!1,ee.prototype.dispose=function(){this.u||(this.u=!0,this.N())},ee.prototype[Symbol.dispose]=function(){this.dispose()},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(p,S){this.type=p,this.g=this.target=S,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!E.addEventListener||!Object.defineProperty)return!1;var p=!1,S=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const R=()=>{};E.addEventListener("test",R,S),E.removeEventListener("test",R,S)}catch{}return p})();function F(p){return/^[\s\xa0]*$/.test(p)}function Ue(p,S){G.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,S)}M(Ue,G),Ue.prototype.init=function(p,S){const R=this.type=p.type,k=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=S,S=p.relatedTarget,S||(R=="mouseover"?S=p.fromElement:R=="mouseout"&&(S=p.toElement)),this.relatedTarget=S,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&Ue.Z.h.call(this)},Ue.prototype.h=function(){Ue.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),K=0;function se(p,S,R,k,ie){this.listener=p,this.proxy=null,this.src=S,this.type=R,this.capture=!!k,this.ha=ie,this.key=++K,this.da=this.fa=!1}function Le(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ut(p,S,R){for(const k in p)S.call(R,p[k],k,p)}function mt(p,S){for(const R in p)S.call(void 0,p[R],R,p)}function J(p){const S={};for(const R in p)S[R]=p[R];return S}const ae="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ie(p,S){let R,k;for(let ie=1;ie<arguments.length;ie++){k=arguments[ie];for(R in k)p[R]=k[R];for(let de=0;de<ae.length;de++)R=ae[de],Object.prototype.hasOwnProperty.call(k,R)&&(p[R]=k[R])}}function De(p){this.src=p,this.g={},this.h=0}De.prototype.add=function(p,S,R,k,ie){const de=p.toString();p=this.g[de],p||(p=this.g[de]=[],this.h++);const Ne=Oe(p,S,k,ie);return Ne>-1?(S=p[Ne],R||(S.fa=!1)):(S=new se(S,this.src,de,!!k,ie),S.fa=R,p.push(S)),S};function nt(p,S){const R=S.type;if(R in p.g){var k=p.g[R],ie=Array.prototype.indexOf.call(k,S,void 0),de;(de=ie>=0)&&Array.prototype.splice.call(k,ie,1),de&&(Le(S),p.g[R].length==0&&(delete p.g[R],p.h--))}}function Oe(p,S,R,k){for(let ie=0;ie<p.length;++ie){const de=p[ie];if(!de.da&&de.listener==S&&de.capture==!!R&&de.ha==k)return ie}return-1}var At="closure_lm_"+(Math.random()*1e6|0),wt={};function Zt(p,S,R,k,ie){if(Array.isArray(S)){for(let de=0;de<S.length;de++)Zt(p,S[de],R,k,ie);return null}return R=Gt(R),p&&p[Q]?p.J(S,R,C(k)?!!k.capture:!1,ie):ur(p,S,R,!1,k,ie)}function ur(p,S,R,k,ie,de){if(!S)throw Error("Invalid event type");const Ne=C(ie)?!!ie.capture:!!ie;let at=hr(p);if(at||(p[At]=at=new De(p)),R=at.add(S,R,k,Ne,de),R.proxy)return R;if(k=Fn(),R.proxy=k,k.src=p,k.listener=R,p.addEventListener)q||(ie=Ne),ie===void 0&&(ie=!1),p.addEventListener(S.toString(),k,ie);else if(p.attachEvent)p.attachEvent(fi(S.toString()),k);else if(p.addListener&&p.removeListener)p.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Fn(){function p(R){return S.call(p.src,p.listener,R)}const S=Oi;return p}function Qr(p,S,R,k,ie){if(Array.isArray(S))for(var de=0;de<S.length;de++)Qr(p,S[de],R,k,ie);else k=C(k)?!!k.capture:!!k,R=Gt(R),p&&p[Q]?(p=p.i,de=String(S).toString(),de in p.g&&(S=p.g[de],R=Oe(S,R,k,ie),R>-1&&(Le(S[R]),Array.prototype.splice.call(S,R,1),S.length==0&&(delete p.g[de],p.h--)))):p&&(p=hr(p))&&(S=p.g[S.toString()],p=-1,S&&(p=Oe(S,R,k,ie)),(R=p>-1?S[p]:null)&&Tt(R))}function Tt(p){if(typeof p!="number"&&p&&!p.da){var S=p.src;if(S&&S[Q])nt(S.i,p);else{var R=p.type,k=p.proxy;S.removeEventListener?S.removeEventListener(R,k,p.capture):S.detachEvent?S.detachEvent(fi(R),k):S.addListener&&S.removeListener&&S.removeListener(k),(R=hr(S))?(nt(R,p),R.h==0&&(R.src=null,S[At]=null)):Le(p)}}}function fi(p){return p in wt?wt[p]:wt[p]="on"+p}function Oi(p,S){if(p.da)p=!0;else{S=new Ue(S,this);const R=p.listener,k=p.ha||p.src;p.fa&&Tt(p),p=R.call(k,S)}return p}function hr(p){return p=p[At],p instanceof De?p:null}var Rn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Gt(p){return typeof p=="function"?p:(p[Rn]||(p[Rn]=function(S){return p.handleEvent(S)}),p[Rn])}function Ze(){ee.call(this),this.i=new De(this),this.M=this,this.G=null}M(Ze,ee),Ze.prototype[Q]=!0,Ze.prototype.removeEventListener=function(p,S,R,k){Qr(this,p,S,R,k)};function An(p,S){var R,k=p.G;if(k)for(R=[];k;k=k.G)R.push(k);if(p=p.M,k=S.type||S,typeof S=="string")S=new G(S,p);else if(S instanceof G)S.target=S.target||p;else{var ie=S;S=new G(k,p),Ie(S,ie)}ie=!0;let de,Ne;if(R)for(Ne=R.length-1;Ne>=0;Ne--)de=S.g=R[Ne],ie=Fe(de,k,!0,S)&&ie;if(de=S.g=p,ie=Fe(de,k,!0,S)&&ie,ie=Fe(de,k,!1,S)&&ie,R)for(Ne=0;Ne<R.length;Ne++)de=S.g=R[Ne],ie=Fe(de,k,!1,S)&&ie}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var p=this.i;for(const S in p.g){const R=p.g[S];for(let k=0;k<R.length;k++)Le(R[k]);delete p.g[S],p.h--}}this.G=null},Ze.prototype.J=function(p,S,R,k){return this.i.add(String(p),S,!1,R,k)},Ze.prototype.K=function(p,S,R,k){return this.i.add(String(p),S,!0,R,k)};function Fe(p,S,R,k){if(S=p.i.g[String(S)],!S)return!0;S=S.concat();let ie=!0;for(let de=0;de<S.length;++de){const Ne=S[de];if(Ne&&!Ne.da&&Ne.capture==R){const at=Ne.listener,bn=Ne.ha||Ne.src;Ne.fa&&nt(p.i,Ne),ie=at.call(bn,k)!==!1&&ie}}return ie&&!k.defaultPrevented}function ha(p,S){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=w(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:E.setTimeout(p,S||0)}function mo(p){p.g=ha(()=>{p.g=null,p.i&&(p.i=!1,mo(p))},p.l);const S=p.h;p.h=null,p.m.apply(null,S)}class mn extends ee{constructor(S,R){super(),this.m=S,this.l=R,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:mo(this)}N(){super.N(),this.g&&(E.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(p){ee.call(this),this.h=p,this.g={}}M(Zr,ee);var di=[];function fa(p){ut(p.g,function(S,R){this.g.hasOwnProperty(R)&&Tt(S)},p),p.g={}}Zr.prototype.N=function(){Zr.Z.N.call(this),fa(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gi=E.JSON.stringify,ni=E.JSON.parse,po=class{stringify(p){return E.JSON.stringify(p,void 0)}parse(p){return E.JSON.parse(p,void 0)}};function Is(){}function $o(){}var qt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Se(){G.call(this,"d")}M(Se,G);function Xt(){G.call(this,"c")}M(Xt,G);var it={},cn=null;function Nr(){return cn=cn||new Ze}it.Ia="serverreachability";function da(p){G.call(this,it.Ia,p)}M(da,G);function fr(p){const S=Nr();An(S,new da(S))}it.STAT_EVENT="statevent";function xt(p,S){G.call(this,it.STAT_EVENT,p),this.stat=S}M(xt,G);function sn(p){const S=Nr();An(S,new xt(S,p))}it.Ja="timingevent";function dr(p,S){G.call(this,it.Ja,p),this.size=S}M(dr,G);function gr(p,S){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return E.setTimeout(function(){p()},S)}function Nn(){this.g=!0}Nn.prototype.ua=function(){this.g=!1};function yo(p,S,R,k,ie,de){p.info(function(){if(p.g)if(de){var Ne="",at=de.split("&");for(let Vt=0;Vt<at.length;Vt++){var bn=at[Vt].split("=");if(bn.length>1){const hn=bn[0];bn=bn[1];const Xi=hn.split("_");Ne=Xi.length>=2&&Xi[1]=="type"?Ne+(hn+"="+bn+"&"):Ne+(hn+"=redacted&")}}}else Ne=null;else Ne=de;return"XMLHTTP REQ ("+k+") [attempt "+ie+"]: "+S+`
`+R+`
`+Ne})}function zn(p,S,R,k,ie,de,Ne){p.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+ie+"]: "+S+`
`+R+`
`+de+" "+Ne})}function mi(p,S,R,k){p.info(function(){return"XMLHTTP TEXT ("+S+"): "+Qi(p,R)+(k?" "+k:"")})}function Or(p,S){p.info(function(){return"TIMEOUT: "+S})}Nn.prototype.info=function(){};function Qi(p,S){if(!p.g)return S;if(!S)return null;try{const de=JSON.parse(S);if(de){for(p=0;p<de.length;p++)if(Array.isArray(de[p])){var R=de[p];if(!(R.length<2)){var k=R[1];if(Array.isArray(k)&&!(k.length<1)){var ie=k[0];if(ie!="noop"&&ie!="stop"&&ie!="close")for(let Ne=1;Ne<k.length;Ne++)k[Ne]=""}}}}return gi(de)}catch{return S}}var Rs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mr={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ns;function Ln(){}M(Ln,Is),Ln.prototype.g=function(){return new XMLHttpRequest},Ns=new Ln;function pi(p){return encodeURIComponent(String(p))}function yi(p){var S=1;p=p.split(":");const R=[];for(;S>0&&p.length;)R.push(p.shift()),S--;return p.length&&R.push(p.join(":")),R}function Me(p,S,R,k){this.j=p,this.i=S,this.l=R,this.S=k||1,this.V=new Zr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new oi}function oi(){this.i=null,this.g="",this.h=!1}var wn={},jt={};function _i(p,S,R){p.M=1,p.A=Mi(Cn(S)),p.u=R,p.R=!0,Jr(p,null)}function Jr(p,S){p.F=Date.now(),Dr(p),p.B=Cn(p.A);var R=p.B,k=p.S;Array.isArray(k)||(k=[String(k)]),Jt(R.i,"t",k),p.C=0,R=p.j.L,p.h=new oi,p.g=Ea(p.j,R?S:null,!p.u),p.P>0&&(p.O=new mn(w(p.Y,p,p.g),p.P)),S=p.V,R=p.g,k=p.ba;var ie="readystatechange";Array.isArray(ie)||(ie&&(di[0]=ie.toString()),ie=di);for(let de=0;de<ie.length;de++){const Ne=Zt(R,ie[de],k||S.handleEvent,!1,S.h||S);if(!Ne)break;S.g[Ne.key]=Ne}S=p.J?J(p.J):{},p.u?(p.v||(p.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,S)):(p.v="GET",p.g.ea(p.B,p.v,null,S)),fr(),yo(p.i,p.v,p.B,p.l,p.S,p.u)}Me.prototype.ba=function(p){p=p.target;const S=this.O;S&&$i(p)==3?S.j():this.Y(p)},Me.prototype.Y=function(p){try{if(p==this.g)e:{const at=$i(this.g),bn=this.g.ya(),Vt=this.g.ca();if(!(at<3)&&(at!=3||this.g&&(this.h.h||this.g.la()||Mn(this.g)))){this.K||at!=4||bn==7||(bn==8||Vt<=0?fr(3):fr(2)),dn(this);var S=this.g.ca();this.X=S;var R=ga(this);if(this.o=S==200,zn(this.i,this.v,this.B,this.l,this.S,at,S),this.o){if(this.U&&!this.L){t:{if(this.g){var k,ie=this.g;if((k=ie.g?ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(k)){var de=k;break t}}de=null}if(p=de)mi(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ii(this,p);else{this.o=!1,this.m=3,sn(12),Di(this),St(this);break e}}if(this.R){p=!0;let hn;for(;!this.K&&this.C<R.length;)if(hn=el(this,R),hn==jt){at==4&&(this.m=4,sn(14),p=!1),mi(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==wn){this.m=4,sn(15),mi(this.i,this.l,R,"[Invalid Chunk]"),p=!1;break}else mi(this.i,this.l,hn,null),ii(this,hn);if(Hi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||R.length!=0||this.h.h||(this.m=1,sn(16),p=!1),this.o=this.o&&p,!p)mi(this.i,this.l,R,"[Invalid Chunked Response]"),Di(this),St(this);else if(R.length>0&&!this.W){this.W=!0;var Ne=this.j;Ne.g==this&&Ne.aa&&!Ne.P&&(Ne.j.info("Great, no buffering proxy detected. Bytes received: "+R.length),he(Ne),Ne.P=!0,sn(11))}}else mi(this.i,this.l,R,null),ii(this,R);at==4&&Di(this),this.o&&!this.K&&(at==4?ks(this.j,this):(this.o=!1,Dr(this)))}else qi(this.g),S==400&&R.indexOf("Unknown SID")>0?(this.m=3,sn(12)):(this.m=0,sn(13)),Di(this),St(this)}}}catch{}};function ga(p){if(!Hi(p))return p.g.la();const S=Mn(p.g);if(S==="")return"";let R="";const k=S.length,ie=$i(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return Di(p),St(p),"";p.h.i=new E.TextDecoder}for(let de=0;de<k;de++)p.h.h=!0,R+=p.h.i.decode(S[de],{stream:!(ie&&de==k-1)});return S.length=0,p.h.g+=R,p.C=0,p.h.g}function Hi(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function el(p,S){var R=p.C,k=S.indexOf(`
`,R);return k==-1?jt:(R=Number(S.substring(R,k)),isNaN(R)?wn:(k+=1,k+R>S.length?jt:(S=S.slice(k,k+R),p.C=k+R,S)))}Me.prototype.cancel=function(){this.K=!0,Di(this)};function Dr(p){p.T=Date.now()+p.H,Ei(p,p.H)}function Ei(p,S){if(p.D!=null)throw Error("WatchDog timer not null");p.D=gr(w(p.aa,p),S)}function dn(p){p.D&&(E.clearTimeout(p.D),p.D=null)}Me.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Or(this.i,this.B),this.M!=2&&(fr(),sn(17)),Di(this),this.m=2,St(this)):Ei(this,this.T-p)};function St(p){p.j.I==0||p.K||ks(p.j,p)}function Di(p){dn(p);var S=p.O;S&&typeof S.dispose=="function"&&S.dispose(),p.O=null,fa(p.V),p.g&&(S=p.g,p.g=null,S.abort(),S.dispose())}function ii(p,S){try{var R=p.j;if(R.I!=0&&(R.g==p||xi(R.h,p))){if(!p.L&&xi(R.h,p)&&R.I==3){try{var k=R.Ba.g.parse(S)}catch{k=null}if(Array.isArray(k)&&k.length==3){var ie=k;if(ie[0]==0){e:if(!R.v){if(R.g)if(R.g.F+3e3<p.F)vn(R),ts(R);else break e;Ls(R),sn(18)}}else R.xa=ie[1],0<R.xa-R.K&&ie[2]<37500&&R.F&&R.A==0&&!R.C&&(R.C=gr(w(R.Va,R),6e3));Ht(R.h)<=1&&R.ta&&(R.ta=void 0)}else Lr(R,11)}else if((p.L||R.g==p)&&vn(R),!F(S))for(ie=R.Ba.g.parse(S),S=0;S<ie.length;S++){let Vt=ie[S];const hn=Vt[0];if(!(hn<=R.K))if(R.K=hn,Vt=Vt[1],R.I==2)if(Vt[0]=="c"){R.M=Vt[1],R.ba=Vt[2];const Xi=Vt[3];Xi!=null&&(R.ka=Xi,R.j.info("VER="+R.ka));const Vr=Vt[4];Vr!=null&&(R.za=Vr,R.j.info("SVER="+R.za));const ci=Vt[5];ci!=null&&typeof ci=="number"&&ci>0&&(k=1.5*ci,R.O=k,R.j.info("backChannelRequestTimeoutMs_="+k)),k=R;const Yi=p.g;if(Yi){const Vs=Yi.g?Yi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vs){var de=k.h;de.g||Vs.indexOf("spdy")==-1&&Vs.indexOf("quic")==-1&&Vs.indexOf("h2")==-1||(de.j=de.l,de.g=new Set,de.h&&(Eo(de,de.h),de.h=null))}if(k.G){const Ur=Yi.g?Yi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ur&&(k.wa=Ur,$e(k.J,k.G,Ur))}}R.I=3,R.l&&R.l.ra(),R.aa&&(R.T=Date.now()-p.F,R.j.info("Handshake RTT: "+R.T+"ms")),k=R;var Ne=p;if(k.na=nl(k,k.L?k.ba:null,k.W),Ne.L){Ot(k.h,Ne);var at=Ne,bn=k.O;bn&&(at.H=bn),at.D&&(dn(at),Dr(at)),k.g=Ne}else Er(k);R.i.length>0&&Pr(R)}else Vt[0]!="stop"&&Vt[0]!="close"||Lr(R,7);else R.I==3&&(Vt[0]=="stop"||Vt[0]=="close"?Vt[0]=="stop"?Lr(R,7):pa(R):Vt[0]!="noop"&&R.l&&R.l.qa(Vt),R.A=0)}}fr(4)}catch{}}var Tn=class{constructor(p,S){this.g=p,this.map=S}};function Ae(p){this.l=p||10,E.PerformanceNavigationTiming?(p=E.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(E.chrome&&E.chrome.loadTimes&&E.chrome.loadTimes()&&E.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _o(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Ht(p){return p.h?1:p.g?p.g.size:0}function xi(p,S){return p.h?p.h==S:p.g?p.g.has(S):!1}function Eo(p,S){p.g?p.g.add(S):p.h=S}function Ot(p,S){p.h&&p.h==S?p.h=null:p.g&&p.g.has(S)&&p.g.delete(S)}Ae.prototype.cancel=function(){if(this.i=bt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function bt(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let S=p.i;for(const R of p.g.values())S=S.concat(R.G);return S}return te(p.i)}var _t=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function us(p,S){if(p){p=p.split("&");for(let R=0;R<p.length;R++){const k=p[R].indexOf("=");let ie,de=null;k>=0?(ie=p[R].substring(0,k),de=p[R].substring(k+1)):ie=p[R],S(ie,de?decodeURIComponent(de.replace(/\+/g," ")):"")}}}function Ai(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;p instanceof Ai?(this.l=p.l,Ct(this,p.j),this.o=p.o,this.g=p.g,wi(this,p.u),this.h=p.h,xo(this,Ao(p.i)),this.m=p.m):p&&(S=String(p).match(_t))?(this.l=!1,Ct(this,S[1]||"",!0),this.o=Mr(S[2]||""),this.g=Mr(S[3]||"",!0),wi(this,S[4]),this.h=Mr(S[5]||"",!0),xo(this,S[6]||"",!0),this.m=Mr(S[7]||"")):(this.l=!1,this.i=new jn(null,this.l))}Ai.prototype.toString=function(){const p=[];var S=this.j;S&&p.push(Zi(S,On,!0),":");var R=this.g;return(R||S=="file")&&(p.push("//"),(S=this.o)&&p.push(Zi(S,On,!0),"@"),p.push(pi(R).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.u,R!=null&&p.push(":",String(R))),(R=this.h)&&(this.g&&R.charAt(0)!="/"&&p.push("/"),p.push(Zi(R,R.charAt(0)=="/"?U:oe,!0))),(R=this.i.toString())&&p.push("?",R),(R=this.m)&&p.push("#",Zi(R,Dn)),p.join("")},Ai.prototype.resolve=function(p){const S=Cn(this);let R=!!p.j;R?Ct(S,p.j):R=!!p.o,R?S.o=p.o:R=!!p.g,R?S.g=p.g:R=p.u!=null;var k=p.h;if(R)wi(S,p.u);else if(R=!!p.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var ie=S.h.lastIndexOf("/");ie!=-1&&(k=S.h.slice(0,ie+1)+k)}if(ie=k,ie==".."||ie==".")k="";else if(ie.indexOf("./")!=-1||ie.indexOf("/.")!=-1){k=ie.lastIndexOf("/",0)==0,ie=ie.split("/");const de=[];for(let Ne=0;Ne<ie.length;){const at=ie[Ne++];at=="."?k&&Ne==ie.length&&de.push(""):at==".."?((de.length>1||de.length==1&&de[0]!="")&&de.pop(),k&&Ne==ie.length&&de.push("")):(de.push(at),k=!0)}k=de.join("/")}else k=ie}return R?S.h=k:R=p.i.toString()!=="",R?xo(S,Ao(p.i)):R=!!p.m,R&&(S.m=p.m),S};function Cn(p){return new Ai(p)}function Ct(p,S,R){p.j=R?Mr(S,!0):S,p.j&&(p.j=p.j.replace(/:$/,""))}function wi(p,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);p.u=S}else p.u=null}function xo(p,S,R){S instanceof jn?(p.i=S,fs(p.i,p.l)):(R||(S=Zi(S,Ge)),p.i=new jn(S,p.l))}function $e(p,S,R){p.i.set(S,R)}function Mi(p){return $e(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Mr(p,S){return p?S?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Zi(p,S,R){return typeof p=="string"?(p=encodeURI(p).replace(S,pt),R&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function pt(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var On=/[#\/\?@]/g,oe=/[#\?:]/g,U=/[#\?]/g,Ge=/[#\?@]/g,Dn=/#/g;function jn(p,S){this.h=this.g=null,this.i=p||null,this.j=!!S}function Pi(p){p.g||(p.g=new Map,p.h=0,p.i&&us(p.i,function(S,R){p.add(decodeURIComponent(S.replace(/\+/g," ")),R)}))}a=jn.prototype,a.add=function(p,S){Pi(this),this.i=null,p=hs(this,p);let R=this.g.get(p);return R||this.g.set(p,R=[]),R.push(S),this.h+=1,this};function ma(p,S){Pi(p),S=hs(p,S),p.g.has(S)&&(p.i=null,p.h-=p.g.get(S).length,p.g.delete(S))}function li(p,S){return Pi(p),S=hs(p,S),p.g.has(S)}a.forEach=function(p,S){Pi(this),this.g.forEach(function(R,k){R.forEach(function(ie){p.call(S,ie,k,this)},this)},this)};function Ye(p,S){Pi(p);let R=[];if(typeof S=="string")li(p,S)&&(R=R.concat(p.g.get(hs(p,S))));else for(p=Array.from(p.g.values()),S=0;S<p.length;S++)R=R.concat(p[S]);return R}a.set=function(p,S){return Pi(this),this.i=null,p=hs(this,p),li(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[S]),this.h+=1,this},a.get=function(p,S){return p?(p=Ye(this,p),p.length>0?String(p[0]):S):S};function Jt(p,S,R){ma(p,S),R.length>0&&(p.i=null,p.g.set(hs(p,S),te(R)),p.h+=R.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],S=Array.from(this.g.keys());for(let k=0;k<S.length;k++){var R=S[k];const ie=pi(R);R=Ye(this,R);for(let de=0;de<R.length;de++){let Ne=ie;R[de]!==""&&(Ne+="="+pi(R[de])),p.push(Ne)}}return this.i=p.join("&")};function Ao(p){const S=new jn;return S.i=p.i,p.g&&(S.g=new Map(p.g),S.h=p.h),S}function hs(p,S){return S=String(S),p.j&&(S=S.toLowerCase()),S}function fs(p,S){S&&!p.j&&(Pi(p),p.i=null,p.g.forEach(function(R,k){const ie=k.toLowerCase();k!=ie&&(ma(this,k),Jt(this,ie,R))},p)),p.j=S}function Li(p,S){const R=new Nn;if(E.Image){const k=new Image;k.onload=D(Ji,R,"TestLoadImage: loaded",!0,S,k),k.onerror=D(Ji,R,"TestLoadImage: error",!1,S,k),k.onabort=D(Ji,R,"TestLoadImage: abort",!1,S,k),k.ontimeout=D(Ji,R,"TestLoadImage: timeout",!1,S,k),E.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=p}else S(!1)}function Os(p,S){const R=new Nn,k=new AbortController,ie=setTimeout(()=>{k.abort(),Ji(R,"TestPingServer: timeout",!1,S)},1e4);fetch(p,{signal:k.signal}).then(de=>{clearTimeout(ie),de.ok?Ji(R,"TestPingServer: ok",!0,S):Ji(R,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(ie),Ji(R,"TestPingServer: error",!1,S)})}function Ji(p,S,R,k,ie){try{ie&&(ie.onload=null,ie.onerror=null,ie.onabort=null,ie.ontimeout=null),k(R)}catch{}}function un(){this.g=new po}function ki(p){this.i=p.Sb||null,this.h=p.ab||!1}M(ki,Is),ki.prototype.g=function(){return new Bi(this.i,this.h)};function Bi(p,S){Ze.call(this),this.H=p,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}M(Bi,Ze),a=Bi.prototype,a.open=function(p,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=S,this.readyState=1,Je(this)},a.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(S.body=p),(this.H||E).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ds(this)),this.readyState=0},a.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Je(this)),this.g&&(this.readyState=3,Je(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof E.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;We(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function We(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}a.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var S=p.value?p.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!p.done}))&&(this.response=this.responseText+=S)}p.done?ds(this):Je(this),this.readyState==3&&We(this)}},a.Oa=function(p){this.g&&(this.response=this.responseText=p,ds(this))},a.Na=function(p){this.g&&(this.response=p,ds(this))},a.ga=function(){this.g&&ds(this)};function ds(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Je(p)}a.setRequestHeader=function(p,S){this.A.append(p,S)},a.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],S=this.h.entries();for(var R=S.next();!R.done;)R=R.value,p.push(R[0]+": "+R[1]),R=S.next();return p.join(`\r
`)};function Je(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function $t(p){let S="";return ut(p,function(R,k){S+=k,S+=":",S+=R,S+=`\r
`}),S}function Ds(p,S,R){e:{for(k in R){var k=!1;break e}k=!0}k||(R=$t(R),typeof p=="string"?R!=null&&pi(R):$e(p,S,R))}function Yt(p){Ze.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}M(Yt,Ze);var pr=/^https?$/i,yr=["POST","PUT"];a=Yt.prototype,a.Fa=function(p){this.H=p},a.ea=function(p,S,R,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);S=S?S.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ns.g(),this.g.onreadystatechange=z(w(this.Ca,this));try{this.B=!0,this.g.open(S,String(p),!0),this.B=!1}catch(de){Ms(this,de);return}if(p=R||"",R=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var ie in k)R.set(ie,k[ie]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const de of k.keys())R.set(de,k.get(de));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(R.keys()).find(de=>de.toLowerCase()=="content-type"),ie=E.FormData&&p instanceof E.FormData,!(Array.prototype.indexOf.call(yr,S,void 0)>=0)||k||ie||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[de,Ne]of R)this.g.setRequestHeader(de,Ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(de){Ms(this,de)}};function Ms(p,S){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=S,p.o=5,$r(p),Gi(p)}function $r(p){p.A||(p.A=!0,An(p,"complete"),An(p,"error"))}a.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,An(this,"complete"),An(this,"abort"),Gi(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),Yt.Z.N.call(this)},a.Ca=function(){this.u||(this.B||this.v||this.j?_r(this):this.Xa())},a.Xa=function(){_r(this)};function _r(p){if(p.h&&typeof m<"u"){if(p.v&&$i(p)==4)setTimeout(p.Ca.bind(p),0);else if(An(p,"readystatechange"),$i(p)==4){p.h=!1;try{const de=p.ca();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var R;if(!(R=S)){var k;if(k=de===0){let Ne=String(p.D).match(_t)[1]||null;!Ne&&E.self&&E.self.location&&(Ne=E.self.location.protocol.slice(0,-1)),k=!pr.test(Ne?Ne.toLowerCase():"")}R=k}if(R)An(p,"complete"),An(p,"success");else{p.o=6;try{var ie=$i(p)>2?p.g.statusText:""}catch{ie=""}p.l=ie+" ["+p.ca()+"]",$r(p)}}finally{Gi(p)}}}}function Gi(p,S){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const R=p.g;p.g=null,S||An(p,"ready");try{R.onreadystatechange=null}catch{}}}a.isActive=function(){return!!this.g};function $i(p){return p.g?p.g.readyState:0}a.ca=function(){try{return $i(this)>2?this.g.status:-1}catch{return-1}},a.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.La=function(p){if(this.g){var S=this.g.responseText;return p&&S.indexOf(p)==0&&(S=S.substring(p.length)),ni(S)}};function Mn(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function qi(p){const S={};p=(p.g&&$i(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<p.length;k++){if(F(p[k]))continue;var R=yi(p[k]);const ie=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const de=S[ie]||[];S[ie]=de,de.push(R)}mt(S,function(k){return k.join(", ")})}a.ya=function(){return this.o},a.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pn(p,S,R){return R&&R.internalChannelParams&&R.internalChannelParams[p]||S}function es(p){this.za=0,this.i=[],this.j=new Nn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pn("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pn("baseRetryDelayMs",5e3,p),this.Za=pn("retryDelaySeedMs",1e4,p),this.Ta=pn("forwardChannelMaxRetries",2,p),this.va=pn("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Ae(p&&p.concurrentRequestLimit),this.Ba=new un,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}a=es.prototype,a.ka=8,a.I=1,a.connect=function(p,S,R,k){sn(0),this.W=p,this.H=S||{},R&&k!==void 0&&(this.H.OSID=R,this.H.OAID=k),this.F=this.X,this.J=nl(this,null,this.W),Pr(this)};function pa(p){if(ya(p),p.I==3){var S=p.V++,R=Cn(p.J);if($e(R,"SID",p.M),$e(R,"RID",S),$e(R,"TYPE","terminate"),gs(p,R),S=new Me(p,p.j,S),S.M=2,S.A=Mi(Cn(R)),R=!1,E.navigator&&E.navigator.sendBeacon)try{R=E.navigator.sendBeacon(S.A.toString(),"")}catch{}!R&&E.Image&&(new Image().src=S.A,R=!0),R||(S.g=Ea(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Dr(S)}tl(p)}function ts(p){p.g&&(he(p),p.g.cancel(),p.g=null)}function ya(p){ts(p),p.v&&(E.clearTimeout(p.v),p.v=null),vn(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&E.clearTimeout(p.m),p.m=null)}function Pr(p){if(!_o(p.h)&&!p.m){p.m=!0;var S=p.Ea;ct||j(),ke||(ct(),ke=!0),V.add(S,p),p.D=0}}function _a(p,S){return Ht(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=S.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=gr(w(p.Ea,p,S),wo(p,p.D)),p.D++,!0)}a.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const ie=new Me(this,this.j,p);let de=this.o;if(this.U&&(de?(de=J(de),Ie(de,this.U)):de=this.U),this.u!==null||this.R||(ie.J=de,de=null),this.S)e:{for(var S=0,R=0;R<this.i.length;R++){t:{var k=this.i[R];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(S+=k,S>4096){S=R;break e}if(S===4096||R===this.i.length-1){S=R+1;break e}}S=1e3}else S=1e3;S=Ps(this,ie,S),R=Cn(this.J),$e(R,"RID",p),$e(R,"CVER",22),this.G&&$e(R,"X-HTTP-Session-Id",this.G),gs(this,R),de&&(this.R?S="headers="+pi($t(de))+"&"+S:this.u&&Ds(R,this.u,de)),Eo(this.h,ie),this.Ra&&$e(R,"TYPE","init"),this.S?($e(R,"$req",S),$e(R,"SID","null"),ie.U=!0,_i(ie,R,null)):_i(ie,R,S),this.I=2}}else this.I==3&&(p?Ft(this,p):this.i.length==0||_o(this.h)||Ft(this))};function Ft(p,S){var R;S?R=S.l:R=p.V++;const k=Cn(p.J);$e(k,"SID",p.M),$e(k,"RID",R),$e(k,"AID",p.K),gs(p,k),p.u&&p.o&&Ds(k,p.u,p.o),R=new Me(p,p.j,R,p.D+1),p.u===null&&(R.J=p.o),S&&(p.i=S.G.concat(p.i)),S=Ps(p,R,1e3),R.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Eo(p.h,R),_i(R,k,S)}function gs(p,S){p.H&&ut(p.H,function(R,k){$e(S,k,R)}),p.l&&ut({},function(R,k){$e(S,k,R)})}function Ps(p,S,R){R=Math.min(p.i.length,R);const k=p.l?w(p.l.Ka,p.l,p):null;e:{var ie=p.i;let at=-1;for(;;){const bn=["count="+R];at==-1?R>0?(at=ie[0].g,bn.push("ofs="+at)):at=0:bn.push("ofs="+at);let Vt=!0;for(let hn=0;hn<R;hn++){var de=ie[hn].g;const Xi=ie[hn].map;if(de-=at,de<0)at=Math.max(0,ie[hn].g-100),Vt=!1;else try{de="req"+de+"_"||"";try{var Ne=Xi instanceof Map?Xi:Object.entries(Xi);for(const[Vr,ci]of Ne){let Yi=ci;C(ci)&&(Yi=gi(ci)),bn.push(de+Vr+"="+encodeURIComponent(Yi))}}catch(Vr){throw bn.push(de+"type="+encodeURIComponent("_badmap")),Vr}}catch{k&&k(Xi)}}if(Vt){Ne=bn.join("&");break e}}Ne=void 0}return p=p.i.splice(0,R),S.G=p,Ne}function Er(p){if(!p.g&&!p.v){p.Y=1;var S=p.Da;ct||j(),ke||(ct(),ke=!0),V.add(S,p),p.A=0}}function Ls(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=gr(w(p.Da,p),wo(p,p.A)),p.A++,!0)}a.Da=function(){if(this.v=null,ht(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=gr(w(this.Wa,this),p)}},a.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,sn(10),ts(this),ht(this))};function he(p){p.B!=null&&(E.clearTimeout(p.B),p.B=null)}function ht(p){p.g=new Me(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var S=Cn(p.na);$e(S,"RID","rpc"),$e(S,"SID",p.M),$e(S,"AID",p.K),$e(S,"CI",p.F?"0":"1"),!p.F&&p.ia&&$e(S,"TO",p.ia),$e(S,"TYPE","xmlhttp"),gs(p,S),p.u&&p.o&&Ds(S,p.u,p.o),p.O&&(p.g.H=p.O);var R=p.g;p=p.ba,R.M=1,R.A=Mi(Cn(S)),R.u=null,R.R=!0,Jr(R,p)}a.Va=function(){this.C!=null&&(this.C=null,ts(this),Ls(this),sn(19))};function vn(p){p.C!=null&&(E.clearTimeout(p.C),p.C=null)}function ks(p,S){var R=null;if(p.g==S){vn(p),he(p),p.g=null;var k=2}else if(xi(p.h,S))R=S.G,Ot(p.h,S),k=1;else return;if(p.I!=0){if(S.o)if(k==1){R=S.u?S.u.length:0,S=Date.now()-S.F;var ie=p.D;k=Nr(),An(k,new dr(k,R)),Pr(p)}else Er(p);else if(ie=S.m,ie==3||ie==0&&S.X>0||!(k==1&&_a(p,S)||k==2&&Ls(p)))switch(R&&R.length>0&&(S=p.h,S.i=S.i.concat(R)),ie){case 1:Lr(p,5);break;case 4:Lr(p,10);break;case 3:Lr(p,6);break;default:Lr(p,2)}}}function wo(p,S){let R=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(R*=2),R*S}function Lr(p,S){if(p.j.info("Error code "+S),S==2){var R=w(p.bb,p),k=p.Ua;const ie=!k;k=new Ai(k||"//www.google.com/images/cleardot.gif"),E.location&&E.location.protocol=="http"||Ct(k,"https"),Mi(k),ie?Li(k.toString(),R):Os(k.toString(),R)}else sn(2);p.I=0,p.l&&p.l.pa(S),tl(p),ya(p)}a.bb=function(p){p?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function tl(p){if(p.I=0,p.ja=[],p.l){const S=bt(p.h);(S.length!=0||p.i.length!=0)&&(_e(p.ja,S),_e(p.ja,p.i),p.h.i.length=0,te(p.i),p.i.length=0),p.l.oa()}}function nl(p,S,R){var k=R instanceof Ai?Cn(R):new Ai(R);if(k.g!="")S&&(k.g=S+"."+k.g),wi(k,k.u);else{var ie=E.location;k=ie.protocol,S=S?S+"."+ie.hostname:ie.hostname,ie=+ie.port;const de=new Ai(null);k&&Ct(de,k),S&&(de.g=S),ie&&wi(de,ie),R&&(de.h=R),k=de}return R=p.G,S=p.wa,R&&S&&$e(k,R,S),$e(k,"VER",p.ka),gs(p,k),k}function Ea(p,S,R){if(S&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=p.Aa&&!p.ma?new Yt(new ki({ab:R})):new Yt(p.ma),S.Fa(p.L),S}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sn(){}a=Sn.prototype,a.ra=function(){},a.qa=function(){},a.pa=function(){},a.oa=function(){},a.isActive=function(){return!0},a.Ka=function(){};function kr(){}kr.prototype.g=function(p,S){return new vt(p,S)};function vt(p,S){Ze.call(this),this.g=new es(S),this.l=p,this.h=S&&S.messageUrlParams||null,p=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(p?p["X-WebChannel-Content-Type"]=S.messageContentType:p={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(p?p["X-WebChannel-Client-Profile"]=S.sa:p={"X-WebChannel-Client-Profile":S.sa}),this.g.U=p,(p=S&&S.Qb)&&!F(p)&&(this.g.u=p),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!F(S)&&(this.g.G=S,p=this.h,p!==null&&S in p&&(p=this.h,S in p&&delete p[S])),this.j=new It(this)}M(vt,Ze),vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},vt.prototype.close=function(){pa(this.g)},vt.prototype.o=function(p){var S=this.g;if(typeof p=="string"){var R={};R.__data__=p,p=R}else this.v&&(R={},R.__data__=gi(p),p=R);S.i.push(new Tn(S.Ya++,p)),S.I==3&&Pr(S)},vt.prototype.N=function(){this.g.l=null,delete this.j,pa(this.g),delete this.g,vt.Z.N.call(this)};function Bs(p){Se.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var S=p.__sm__;if(S){e:{for(const R in S){p=R;break e}p=void 0}(this.i=p)&&(p=this.i,S=S!==null&&p in S?S[p]:void 0),this.data=S}else this.data=p}M(Bs,Se);function Br(){Xt.call(this),this.status=1}M(Br,Xt);function It(p){this.g=p}M(It,Sn),It.prototype.ra=function(){An(this.g,"a")},It.prototype.qa=function(p){An(this.g,new Bs(p))},It.prototype.pa=function(p){An(this.g,new Br)},It.prototype.oa=function(){An(this.g,"b")},kr.prototype.createWebChannel=kr.prototype.g,vt.prototype.send=vt.prototype.o,vt.prototype.open=vt.prototype.m,vt.prototype.close=vt.prototype.close,gE=function(){return new kr},dE=function(){return Nr()},fE=it,t0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Rs.NO_ERROR=0,Rs.TIMEOUT=8,Rs.HTTP_ERROR=6,Vh=Rs,mr.COMPLETE="complete",hE=mr,$o.EventType=qt,qt.OPEN="a",qt.CLOSE="b",qt.ERROR="c",qt.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,jc=$o,Yt.prototype.listenOnce=Yt.prototype.K,Yt.prototype.getLastError=Yt.prototype.Ha,Yt.prototype.getLastErrorCode=Yt.prototype.ya,Yt.prototype.getStatus=Yt.prototype.ca,Yt.prototype.getResponseJson=Yt.prototype.La,Yt.prototype.getResponseText=Yt.prototype.la,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Fa,uE=Yt}).apply(typeof Ih<"u"?Ih:typeof self<"u"?self:typeof window<"u"?window:{});const iy="@firebase/firestore",ry="4.9.3";class Fi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fi.UNAUTHENTICATED=new Fi(null),Fi.GOOGLE_CREDENTIALS=new Fi("google-credentials-uid"),Fi.FIRST_PARTY=new Fi("first-party-uid"),Fi.MOCK_USER=new Fi("mock-user");let Jl="12.7.0";const Yo=new w0("@firebase/firestore");function Nl(){return Yo.logLevel}function ze(a,...e){if(Yo.logLevel<=Lt.DEBUG){const n=e.map(M0);Yo.debug(`Firestore (${Jl}): ${a}`,...n)}}function la(a,...e){if(Yo.logLevel<=Lt.ERROR){const n=e.map(M0);Yo.error(`Firestore (${Jl}): ${a}`,...n)}}function jl(a,...e){if(Yo.logLevel<=Lt.WARN){const n=e.map(M0);Yo.warn(`Firestore (${Jl}): ${a}`,...n)}}function M0(a){if(typeof a=="string")return a;try{return(function(n){return JSON.stringify(n)})(a)}catch{return a}}function st(a,e,n){let o="Unexpected state";typeof e=="string"?o=e:n=e,mE(a,o,n)}function mE(a,e,n){let o=`FIRESTORE (${Jl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${a.toString(16)})`;if(n!==void 0)try{o+=" CONTEXT: "+JSON.stringify(n)}catch{o+=" CONTEXT: "+n}throw la(o),new Error(o)}function tn(a,e,n,o){let h="Unexpected state";typeof n=="string"?h=n:o=n,a||mE(e,h,o)}function dt(a,e){return a}const xe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends ua{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class no{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class pE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Cv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Fi.UNAUTHENTICATED)))}shutdown(){}}class vv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Sv{constructor(e){this.t=e,this.currentUser=Fi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){tn(this.o===void 0,42304);let o=this.i;const h=v=>this.i!==o?(o=this.i,n(v)):Promise.resolve();let m=new no;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new no,e.enqueueRetryable((()=>h(this.currentUser)))};const E=()=>{const v=m;e.enqueueRetryable((async()=>{await v.promise,await h(this.currentUser)}))},C=v=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),E())};this.t.onInit((v=>C(v))),setTimeout((()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?C(v):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),m.resolve(),m=new no)}}),0),E()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((o=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(tn(typeof o.accessToken=="string",31837,{l:o}),new pE(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tn(e===null||typeof e=="string",2055,{h:e}),new Fi(e)}}class bv{constructor(e,n,o){this.P=e,this.T=n,this.I=o,this.type="FirstParty",this.user=Fi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Iv{constructor(e,n,o){this.P=e,this.T=n,this.I=o}getToken(){return Promise.resolve(new bv(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Fi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class sy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rv{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ss(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){tn(this.o===void 0,3512);const o=m=>{m.error!=null&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const E=m.token!==this.m;return this.m=m.token,ze("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?n(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable((()=>o(m)))};const h=m=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((m=>h(m))),setTimeout((()=>{if(!this.appCheck){const m=this.V.getImmediate({optional:!0});m?h(m):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new sy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(tn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sy(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Nv(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let o=0;o<a;o++)n[o]=Math.floor(256*Math.random());return n}class P0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const h=Nv(40);for(let m=0;m<h.length;++m)o.length<20&&h[m]<n&&(o+=e.charAt(h[m]%62))}return o}}function kt(a,e){return a<e?-1:a>e?1:0}function n0(a,e){const n=Math.min(a.length,e.length);for(let o=0;o<n;o++){const h=a.charAt(o),m=e.charAt(o);if(h!==m)return U1(h)===U1(m)?kt(h,m):U1(h)?1:-1}return kt(a.length,e.length)}const Ov=55296,Dv=57343;function U1(a){const e=a.charCodeAt(0);return e>=Ov&&e<=Dv}function Hl(a,e,n){return a.length===e.length&&a.every(((o,h)=>n(o,e[h])))}const ay="__name__";class xs{constructor(e,n,o){n===void 0?n=0:n>e.length&&st(637,{offset:n,range:e.length}),o===void 0?o=e.length-n:o>e.length-n&&st(1746,{length:o,range:e.length-n}),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return xs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xs?e.forEach((o=>{n.push(o)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let h=0;h<o;h++){const m=xs.compareSegments(e.get(h),n.get(h));if(m!==0)return m}return kt(e.length,n.length)}static compareSegments(e,n){const o=xs.isNumericId(e),h=xs.isNumericId(n);return o&&!h?-1:!o&&h?1:o&&h?xs.extractNumericId(e).compare(xs.extractNumericId(n)):n0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return to.fromString(e.substring(4,e.length-2))}}class gn extends xs{construct(e,n,o){return new gn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new Ve(xe.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter((h=>h.length>0)))}return new gn(n)}static emptyPath(){return new gn([])}}const Mv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ri extends xs{construct(e,n,o){return new Ri(e,n,o)}static isValidIdentifier(e){return Mv.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ri.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ay}static keyField(){return new Ri([ay])}static fromServerFormat(e){const n=[];let o="",h=0;const m=()=>{if(o.length===0)throw new Ve(xe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let E=!1;for(;h<e.length;){const C=e[h];if(C==="\\"){if(h+1===e.length)throw new Ve(xe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[h+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new Ve(xe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=v,h+=2}else C==="`"?(E=!E,h++):C!=="."||E?(o+=C,h++):(m(),h++)}if(m(),E)throw new Ve(xe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ri(n)}static emptyPath(){return new Ri([])}}class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(gn.fromString(e))}static fromName(e){return new Qe(gn.fromString(e).popFirst(5))}static empty(){return new Qe(gn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new gn(e.slice()))}}function yE(a,e,n){if(!n)throw new Ve(xe.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function Pv(a,e,n,o){if(e===!0&&o===!0)throw new Ve(xe.INVALID_ARGUMENT,`${a} and ${n} cannot be used together.`)}function oy(a){if(!Qe.isDocumentKey(a))throw new Ve(xe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function ly(a){if(Qe.isDocumentKey(a))throw new Ve(xe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function _E(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function Ef(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":st(12329,{type:typeof a})}function os(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new Ve(xe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ef(a);throw new Ve(xe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return a}function ei(a,e){const n={typeString:a};return e&&(n.value=e),n}function du(a,e){if(!_E(a))throw new Ve(xe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const o in e)if(e[o]){const h=e[o].typeString,m="value"in e[o]?{value:e[o].value}:void 0;if(!(o in a)){n=`JSON missing required field: '${o}'`;break}const E=a[o];if(h&&typeof E!==h){n=`JSON field '${o}' must be a ${h}.`;break}if(m!==void 0&&E!==m.value){n=`Expected '${o}' field to equal '${m.value}'`;break}}if(n)throw new Ve(xe.INVALID_ARGUMENT,n);return!0}const cy=-62135596800,uy=1e6;class xn{static now(){return xn.fromMillis(Date.now())}static fromDate(e){return xn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor((e-1e3*n)*uy);return new xn(n,o)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ve(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ve(xe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<cy)throw new Ve(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(xe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uy}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(du(e,xn._jsonSchema))return new xn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-cy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xn._jsonSchemaVersion="firestore/timestamp/1.0",xn._jsonSchema={type:ei("string",xn._jsonSchemaVersion),seconds:ei("number"),nanoseconds:ei("number")};class lt{static fromTimestamp(e){return new lt(e)}static min(){return new lt(new xn(0,0))}static max(){return new lt(new xn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const nu=-1;function Lv(a,e){const n=a.toTimestamp().seconds,o=a.toTimestamp().nanoseconds+1,h=lt.fromTimestamp(o===1e9?new xn(n+1,0):new xn(n,o));return new ro(h,Qe.empty(),e)}function kv(a){return new ro(a.readTime,a.key,nu)}class ro{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new ro(lt.min(),Qe.empty(),nu)}static max(){return new ro(lt.max(),Qe.empty(),nu)}}function Bv(a,e){let n=a.readTime.compareTo(e.readTime);return n!==0?n:(n=Qe.comparator(a.documentKey,e.documentKey),n!==0?n:kt(a.largestBatchId,e.largestBatchId))}const Vv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Uv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function $l(a){if(a.code!==xe.FAILED_PRECONDITION||a.message!==Vv)throw a;ze("LocalStore","Unexpectedly lost primary lease")}class we{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&st(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new we(((o,h)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(o,h)},this.catchCallback=m=>{this.wrapFailure(n,m).next(o,h)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof we?n:we.resolve(n)}catch(n){return we.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):we.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):we.reject(n)}static resolve(e){return new we(((n,o)=>{n(e)}))}static reject(e){return new we(((n,o)=>{o(e)}))}static waitFor(e){return new we(((n,o)=>{let h=0,m=0,E=!1;e.forEach((C=>{++h,C.next((()=>{++m,E&&m===h&&n()}),(v=>o(v)))})),E=!0,m===h&&n()}))}static or(e){let n=we.resolve(!1);for(const o of e)n=n.next((h=>h?we.resolve(h):o()));return n}static forEach(e,n){const o=[];return e.forEach(((h,m)=>{o.push(n.call(this,h,m))})),this.waitFor(o)}static mapArray(e,n){return new we(((o,h)=>{const m=e.length,E=new Array(m);let C=0;for(let v=0;v<m;v++){const w=v;n(e[w]).next((D=>{E[w]=D,++C,C===m&&o(E)}),(D=>h(D)))}}))}static doWhile(e,n){return new we(((o,h)=>{const m=()=>{e()===!0?n().next((()=>{m()}),h):o()};m()}))}}function Fv(a){const e=a.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ec(a){return a.name==="IndexedDbTransactionError"}class xf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>n.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xf.ce=-1;const L0=-1;function Af(a){return a==null}function Jh(a){return a===0&&1/a==-1/0}function zv(a){return typeof a=="number"&&Number.isInteger(a)&&!Jh(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}const EE="";function jv(a){let e="";for(let n=0;n<a.length;n++)e.length>0&&(e=hy(e)),e=Hv(a.get(n),e);return hy(e)}function Hv(a,e){let n=e;const o=a.length;for(let h=0;h<o;h++){const m=a.charAt(h);switch(m){case"\0":n+="";break;case EE:n+="";break;default:n+=m}}return n}function hy(a){return a+EE+""}function fy(a){let e=0;for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e++;return e}function fo(a,e){for(const n in a)Object.prototype.hasOwnProperty.call(a,n)&&e(n,a[n])}function xE(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class Pn{constructor(e,n){this.comparator=e,this.root=n||Ii.EMPTY}insert(e,n){return new Pn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ii.BLACK,null,null))}remove(e){return new Pn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ii.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(o===0)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const h=this.comparator(e,o.key);if(h===0)return n+o.left.size;h<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,o)=>(e(n,o),!1)))}toString(){const e=[];return this.inorderTraversal(((n,o)=>(e.push(`${n}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rh(this.root,e,this.comparator,!0)}}class Rh{constructor(e,n,o,h){this.isReverse=h,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=n?o(e.key,n):1,n&&h&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(m===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ii{constructor(e,n,o,h,m){this.key=e,this.value=n,this.color=o??Ii.RED,this.left=h??Ii.EMPTY,this.right=m??Ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,h,m){return new Ii(e??this.key,n??this.value,o??this.color,h??this.left,m??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let h=this;const m=o(e,h.key);return h=m<0?h.copy(null,null,null,h.left.insert(e,n,o),null):m===0?h.copy(null,n,null,null,null):h.copy(null,null,null,null,h.right.insert(e,n,o)),h.fixUp()}removeMin(){if(this.left.isEmpty())return Ii.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,h=this;if(n(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,n),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),n(e,h.key)===0){if(h.right.isEmpty())return Ii.EMPTY;o=h.right.min(),h=h.copy(o.key,o.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,n))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw st(43730,{key:this.key,value:this.value});if(this.right.isRed())throw st(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw st(27949);return e+(this.isRed()?0:1)}}Ii.EMPTY=null,Ii.RED=!0,Ii.BLACK=!1;Ii.EMPTY=new class{constructor(){this.size=0}get key(){throw st(57766)}get value(){throw st(16141)}get color(){throw st(16727)}get left(){throw st(29726)}get right(){throw st(36894)}copy(e,n,o,h,m){return this}insert(e,n,o){return new Ii(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ai{constructor(e){this.comparator=e,this.data=new Pn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,o)=>(e(n),!1)))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const h=o.getNext();if(this.comparator(h.key,e[1])>=0)return;n(h.key)}}forEachWhile(e,n){let o;for(o=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dy(this.data.getIterator())}getIteratorFrom(e){return new dy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((o=>{n=n.add(o)})),n}isEqual(e){if(!(e instanceof ai)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const h=n.getNext().key,m=o.getNext().key;if(this.comparator(h,m)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ai(this.comparator);return n.data=e,n}}class dy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Rr{constructor(e){this.fields=e,e.sort(Ri.comparator)}static empty(){return new Rr([])}unionWith(e){let n=new ai(Ri.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new Rr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Hl(this.fields,e.fields,((n,o)=>n.isEqual(o)))}}class AE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ni{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(h){try{return atob(h)}catch(m){throw typeof DOMException<"u"&&m instanceof DOMException?new AE("Invalid base64 string: "+m):m}})(e);return new Ni(n)}static fromUint8Array(e){const n=(function(h){let m="";for(let E=0;E<h.length;++E)m+=String.fromCharCode(h[E]);return m})(e);return new Ni(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const o=new Uint8Array(n.length);for(let h=0;h<n.length;h++)o[h]=n.charCodeAt(h);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ni.EMPTY_BYTE_STRING=new Ni("");const Gv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function so(a){if(tn(!!a,39018),typeof a=="string"){let e=0;const n=Gv.exec(a);if(tn(!!n,46558,{timestamp:a}),n[1]){let h=n[1];h=(h+"000000000").substr(0,9),e=Number(h)}const o=new Date(a);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:qn(a.seconds),nanos:qn(a.nanos)}}function qn(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function ao(a){return typeof a=="string"?Ni.fromBase64String(a):Ni.fromUint8Array(a)}const wE="server_timestamp",TE="__type__",CE="__previous_value__",vE="__local_write_time__";function k0(a){return(a?.mapValue?.fields||{})[TE]?.stringValue===wE}function wf(a){const e=a.mapValue.fields[CE];return k0(e)?wf(e):e}function iu(a){const e=so(a.mapValue.fields[vE].timestampValue);return new xn(e.seconds,e.nanos)}class qv{constructor(e,n,o,h,m,E,C,v,w,D){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=h,this.ssl=m,this.forceLongPolling=E,this.autoDetectLongPolling=C,this.longPollingOptions=v,this.useFetchStreams=w,this.isUsingEmulator=D}}const $h="(default)";class ru{constructor(e,n){this.projectId=e,this.database=n||$h}static empty(){return new ru("","")}get isDefaultDatabase(){return this.database===$h}isEqual(e){return e instanceof ru&&e.projectId===this.projectId&&e.database===this.database}}const SE="__type__",Xv="__max__",Nh={mapValue:{}},bE="__vector__",ef="value";function oo(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?k0(a)?4:Wv(a)?9007199254740991:Yv(a)?10:11:st(28295,{value:a})}function bs(a,e){if(a===e)return!0;const n=oo(a);if(n!==oo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return iu(a).isEqual(iu(e));case 3:return(function(h,m){if(typeof h.timestampValue=="string"&&typeof m.timestampValue=="string"&&h.timestampValue.length===m.timestampValue.length)return h.timestampValue===m.timestampValue;const E=so(h.timestampValue),C=so(m.timestampValue);return E.seconds===C.seconds&&E.nanos===C.nanos})(a,e);case 5:return a.stringValue===e.stringValue;case 6:return(function(h,m){return ao(h.bytesValue).isEqual(ao(m.bytesValue))})(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return(function(h,m){return qn(h.geoPointValue.latitude)===qn(m.geoPointValue.latitude)&&qn(h.geoPointValue.longitude)===qn(m.geoPointValue.longitude)})(a,e);case 2:return(function(h,m){if("integerValue"in h&&"integerValue"in m)return qn(h.integerValue)===qn(m.integerValue);if("doubleValue"in h&&"doubleValue"in m){const E=qn(h.doubleValue),C=qn(m.doubleValue);return E===C?Jh(E)===Jh(C):isNaN(E)&&isNaN(C)}return!1})(a,e);case 9:return Hl(a.arrayValue.values||[],e.arrayValue.values||[],bs);case 10:case 11:return(function(h,m){const E=h.mapValue.fields||{},C=m.mapValue.fields||{};if(fy(E)!==fy(C))return!1;for(const v in E)if(E.hasOwnProperty(v)&&(C[v]===void 0||!bs(E[v],C[v])))return!1;return!0})(a,e);default:return st(52216,{left:a})}}function su(a,e){return(a.values||[]).find((n=>bs(n,e)))!==void 0}function Gl(a,e){if(a===e)return 0;const n=oo(a),o=oo(e);if(n!==o)return kt(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return kt(a.booleanValue,e.booleanValue);case 2:return(function(m,E){const C=qn(m.integerValue||m.doubleValue),v=qn(E.integerValue||E.doubleValue);return C<v?-1:C>v?1:C===v?0:isNaN(C)?isNaN(v)?0:-1:1})(a,e);case 3:return gy(a.timestampValue,e.timestampValue);case 4:return gy(iu(a),iu(e));case 5:return n0(a.stringValue,e.stringValue);case 6:return(function(m,E){const C=ao(m),v=ao(E);return C.compareTo(v)})(a.bytesValue,e.bytesValue);case 7:return(function(m,E){const C=m.split("/"),v=E.split("/");for(let w=0;w<C.length&&w<v.length;w++){const D=kt(C[w],v[w]);if(D!==0)return D}return kt(C.length,v.length)})(a.referenceValue,e.referenceValue);case 8:return(function(m,E){const C=kt(qn(m.latitude),qn(E.latitude));return C!==0?C:kt(qn(m.longitude),qn(E.longitude))})(a.geoPointValue,e.geoPointValue);case 9:return my(a.arrayValue,e.arrayValue);case 10:return(function(m,E){const C=m.fields||{},v=E.fields||{},w=C[ef]?.arrayValue,D=v[ef]?.arrayValue,M=kt(w?.values?.length||0,D?.values?.length||0);return M!==0?M:my(w,D)})(a.mapValue,e.mapValue);case 11:return(function(m,E){if(m===Nh.mapValue&&E===Nh.mapValue)return 0;if(m===Nh.mapValue)return 1;if(E===Nh.mapValue)return-1;const C=m.fields||{},v=Object.keys(C),w=E.fields||{},D=Object.keys(w);v.sort(),D.sort();for(let M=0;M<v.length&&M<D.length;++M){const z=n0(v[M],D[M]);if(z!==0)return z;const te=Gl(C[v[M]],w[D[M]]);if(te!==0)return te}return kt(v.length,D.length)})(a.mapValue,e.mapValue);default:throw st(23264,{he:n})}}function gy(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return kt(a,e);const n=so(a),o=so(e),h=kt(n.seconds,o.seconds);return h!==0?h:kt(n.nanos,o.nanos)}function my(a,e){const n=a.values||[],o=e.values||[];for(let h=0;h<n.length&&h<o.length;++h){const m=Gl(n[h],o[h]);if(m)return m}return kt(n.length,o.length)}function ql(a){return i0(a)}function i0(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(n){const o=so(n);return`time(${o.seconds},${o.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(n){return ao(n).toBase64()})(a.bytesValue):"referenceValue"in a?(function(n){return Qe.fromName(n).toString()})(a.referenceValue):"geoPointValue"in a?(function(n){return`geo(${n.latitude},${n.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(n){let o="[",h=!0;for(const m of n.values||[])h?h=!1:o+=",",o+=i0(m);return o+"]"})(a.arrayValue):"mapValue"in a?(function(n){const o=Object.keys(n.fields||{}).sort();let h="{",m=!0;for(const E of o)m?m=!1:h+=",",h+=`${E}:${i0(n.fields[E])}`;return h+"}"})(a.mapValue):st(61005,{value:a})}function Uh(a){switch(oo(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wf(a);return e?16+Uh(e):16;case 5:return 2*a.stringValue.length;case 6:return ao(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((h,m)=>h+Uh(m)),0)})(a.arrayValue);case 10:case 11:return(function(o){let h=0;return fo(o.fields,((m,E)=>{h+=m.length+Uh(E)})),h})(a.mapValue);default:throw st(13486,{value:a})}}function py(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function r0(a){return!!a&&"integerValue"in a}function B0(a){return!!a&&"arrayValue"in a}function yy(a){return!!a&&"nullValue"in a}function _y(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Fh(a){return!!a&&"mapValue"in a}function Yv(a){return(a?.mapValue?.fields||{})[SE]?.stringValue===bE}function Kc(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const e={mapValue:{fields:{}}};return fo(a.mapValue.fields,((n,o)=>e.mapValue.fields[n]=Kc(o))),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(a.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Kc(a.arrayValue.values[n]);return e}return{...a}}function Wv(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===Xv}class lr{constructor(e){this.value=e}static empty(){return new lr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Fh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kc(n)}setAll(e){let n=Ri.emptyPath(),o={},h=[];e.forEach(((E,C)=>{if(!n.isImmediateParentOf(C)){const v=this.getFieldsMap(n);this.applyChanges(v,o,h),o={},h=[],n=C.popLast()}E?o[C.lastSegment()]=Kc(E):h.push(C.lastSegment())}));const m=this.getFieldsMap(n);this.applyChanges(m,o,h)}delete(e){const n=this.field(e.popLast());Fh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let h=n.mapValue.fields[e.get(o)];Fh(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=h),n=h}return n.mapValue.fields}applyChanges(e,n,o){fo(n,((h,m)=>e[h]=m));for(const h of o)delete e[h]}clone(){return new lr(Kc(this.value))}}function IE(a){const e=[];return fo(a.fields,((n,o)=>{const h=new Ri([n]);if(Fh(o)){const m=IE(o.mapValue).fields;if(m.length===0)e.push(h);else for(const E of m)e.push(h.child(E))}else e.push(h)})),new Rr(e)}class zi{constructor(e,n,o,h,m,E,C){this.key=e,this.documentType=n,this.version=o,this.readTime=h,this.createTime=m,this.data=E,this.documentState=C}static newInvalidDocument(e){return new zi(e,0,lt.min(),lt.min(),lt.min(),lr.empty(),0)}static newFoundDocument(e,n,o,h){return new zi(e,1,n,lt.min(),o,h,0)}static newNoDocument(e,n){return new zi(e,2,n,lt.min(),lt.min(),lr.empty(),0)}static newUnknownDocument(e,n){return new zi(e,3,n,lt.min(),lt.min(),lr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tf{constructor(e,n){this.position=e,this.inclusive=n}}function Ey(a,e,n){let o=0;for(let h=0;h<a.position.length;h++){const m=e[h],E=a.position[h];if(m.field.isKeyField()?o=Qe.comparator(Qe.fromName(E.referenceValue),n.key):o=Gl(E,n.data.field(m.field)),m.dir==="desc"&&(o*=-1),o!==0)break}return o}function xy(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let n=0;n<a.position.length;n++)if(!bs(a.position[n],e.position[n]))return!1;return!0}class nf{constructor(e,n="asc"){this.field=e,this.dir=n}}function Kv(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class RE{}class $n extends RE{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,o):new Zv(e,n,o):n==="array-contains"?new eS(e,o):n==="in"?new tS(e,o):n==="not-in"?new nS(e,o):n==="array-contains-any"?new iS(e,o):new $n(e,n,o)}static createKeyFieldInFilter(e,n,o){return n==="in"?new Jv(e,o):new $v(e,o)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Gl(n,this.value)):n!==null&&oo(this.value)===oo(n)&&this.matchesComparison(Gl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return st(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cs extends RE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new cs(e,n)}matches(e){return NE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function NE(a){return a.op==="and"}function OE(a){return Qv(a)&&NE(a)}function Qv(a){for(const e of a.filters)if(e instanceof cs)return!1;return!0}function s0(a){if(a instanceof $n)return a.field.canonicalString()+a.op.toString()+ql(a.value);if(OE(a))return a.filters.map((e=>s0(e))).join(",");{const e=a.filters.map((n=>s0(n))).join(",");return`${a.op}(${e})`}}function DE(a,e){return a instanceof $n?(function(o,h){return h instanceof $n&&o.op===h.op&&o.field.isEqual(h.field)&&bs(o.value,h.value)})(a,e):a instanceof cs?(function(o,h){return h instanceof cs&&o.op===h.op&&o.filters.length===h.filters.length?o.filters.reduce(((m,E,C)=>m&&DE(E,h.filters[C])),!0):!1})(a,e):void st(19439)}function ME(a){return a instanceof $n?(function(n){return`${n.field.canonicalString()} ${n.op} ${ql(n.value)}`})(a):a instanceof cs?(function(n){return n.op.toString()+" {"+n.getFilters().map(ME).join(" ,")+"}"})(a):"Filter"}class Zv extends $n{constructor(e,n,o){super(e,n,o),this.key=Qe.fromName(o.referenceValue)}matches(e){const n=Qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Jv extends $n{constructor(e,n){super(e,"in",n),this.keys=PE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class $v extends $n{constructor(e,n){super(e,"not-in",n),this.keys=PE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function PE(a,e){return(e.arrayValue?.values||[]).map((n=>Qe.fromName(n.referenceValue)))}class eS extends $n{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return B0(n)&&su(n.arrayValue,this.value)}}class tS extends $n{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&su(this.value.arrayValue,n)}}class nS extends $n{constructor(e,n){super(e,"not-in",n)}matches(e){if(su(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!su(this.value.arrayValue,n)}}class iS extends $n{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!B0(n)||!n.arrayValue.values)&&n.arrayValue.values.some((o=>su(this.value.arrayValue,o)))}}class rS{constructor(e,n=null,o=[],h=[],m=null,E=null,C=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=h,this.limit=m,this.startAt=E,this.endAt=C,this.Te=null}}function Ay(a,e=null,n=[],o=[],h=null,m=null,E=null){return new rS(a,e,n,o,h,m,E)}function V0(a){const e=dt(a);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((o=>s0(o))).join(","),n+="|ob:",n+=e.orderBy.map((o=>(function(m){return m.field.canonicalString()+m.dir})(o))).join(","),Af(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((o=>ql(o))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((o=>ql(o))).join(",")),e.Te=n}return e.Te}function U0(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<a.orderBy.length;n++)if(!Kv(a.orderBy[n],e.orderBy[n]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let n=0;n<a.filters.length;n++)if(!DE(a.filters[n],e.filters[n]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!xy(a.startAt,e.startAt)&&xy(a.endAt,e.endAt)}function a0(a){return Qe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}class gu{constructor(e,n=null,o=[],h=[],m=null,E="F",C=null,v=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=h,this.limit=m,this.limitType=E,this.startAt=C,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function sS(a,e,n,o,h,m,E,C){return new gu(a,e,n,o,h,m,E,C)}function F0(a){return new gu(a)}function wy(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function LE(a){return a.collectionGroup!==null}function Qc(a){const e=dt(a);if(e.Ie===null){e.Ie=[];const n=new Set;for(const m of e.explicitOrderBy)e.Ie.push(m),n.add(m.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(E){let C=new ai(Ri.comparator);return E.filters.forEach((v=>{v.getFlattenedFilters().forEach((w=>{w.isInequality()&&(C=C.add(w.field))}))})),C})(e).forEach((m=>{n.has(m.canonicalString())||m.isKeyField()||e.Ie.push(new nf(m,o))})),n.has(Ri.keyField().canonicalString())||e.Ie.push(new nf(Ri.keyField(),o))}return e.Ie}function Ts(a){const e=dt(a);return e.Ee||(e.Ee=aS(e,Qc(a))),e.Ee}function aS(a,e){if(a.limitType==="F")return Ay(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map((h=>{const m=h.dir==="desc"?"asc":"desc";return new nf(h.field,m)}));const n=a.endAt?new tf(a.endAt.position,a.endAt.inclusive):null,o=a.startAt?new tf(a.startAt.position,a.startAt.inclusive):null;return Ay(a.path,a.collectionGroup,e,a.filters,a.limit,n,o)}}function o0(a,e){const n=a.filters.concat([e]);return new gu(a.path,a.collectionGroup,a.explicitOrderBy.slice(),n,a.limit,a.limitType,a.startAt,a.endAt)}function l0(a,e,n){return new gu(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,n,a.startAt,a.endAt)}function Tf(a,e){return U0(Ts(a),Ts(e))&&a.limitType===e.limitType}function kE(a){return`${V0(Ts(a))}|lt:${a.limitType}`}function Ol(a){return`Query(target=${(function(n){let o=n.path.canonicalString();return n.collectionGroup!==null&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map((h=>ME(h))).join(", ")}]`),Af(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map((h=>(function(E){return`${E.field.canonicalString()} (${E.dir})`})(h))).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map((h=>ql(h))).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map((h=>ql(h))).join(",")),`Target(${o})`})(Ts(a))}; limitType=${a.limitType})`}function Cf(a,e){return e.isFoundDocument()&&(function(o,h){const m=h.key.path;return o.collectionGroup!==null?h.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(m):Qe.isDocumentKey(o.path)?o.path.isEqual(m):o.path.isImmediateParentOf(m)})(a,e)&&(function(o,h){for(const m of Qc(o))if(!m.field.isKeyField()&&h.data.field(m.field)===null)return!1;return!0})(a,e)&&(function(o,h){for(const m of o.filters)if(!m.matches(h))return!1;return!0})(a,e)&&(function(o,h){return!(o.startAt&&!(function(E,C,v){const w=Ey(E,C,v);return E.inclusive?w<=0:w<0})(o.startAt,Qc(o),h)||o.endAt&&!(function(E,C,v){const w=Ey(E,C,v);return E.inclusive?w>=0:w>0})(o.endAt,Qc(o),h))})(a,e)}function oS(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function BE(a){return(e,n)=>{let o=!1;for(const h of Qc(a)){const m=lS(h,e,n);if(m!==0)return m;o=o||h.field.isKeyField()}return 0}}function lS(a,e,n){const o=a.field.isKeyField()?Qe.comparator(e.key,n.key):(function(m,E,C){const v=E.data.field(m),w=C.data.field(m);return v!==null&&w!==null?Gl(v,w):st(42886)})(a.field,e,n);switch(a.dir){case"asc":return o;case"desc":return-1*o;default:return st(19790,{direction:a.dir})}}class Qo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o!==void 0){for(const[h,m]of o)if(this.equalsFn(h,e))return m}}has(e){return this.get(e)!==void 0}set(e,n){const o=this.mapKeyFn(e),h=this.inner[o];if(h===void 0)return this.inner[o]=[[e,n]],void this.innerSize++;for(let m=0;m<h.length;m++)if(this.equalsFn(h[m][0],e))return void(h[m]=[e,n]);h.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(o===void 0)return!1;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return o.length===1?delete this.inner[n]:o.splice(h,1),this.innerSize--,!0;return!1}forEach(e){fo(this.inner,((n,o)=>{for(const[h,m]of o)e(h,m)}))}isEmpty(){return xE(this.inner)}size(){return this.innerSize}}const cS=new Pn(Qe.comparator);function ca(){return cS}const VE=new Pn(Qe.comparator);function Hc(...a){let e=VE;for(const n of a)e=e.insert(n.key,n);return e}function UE(a){let e=VE;return a.forEach(((n,o)=>e=e.insert(n,o.overlayedDocument))),e}function zo(){return Zc()}function FE(){return Zc()}function Zc(){return new Qo((a=>a.toString()),((a,e)=>a.isEqual(e)))}const uS=new Pn(Qe.comparator),hS=new ai(Qe.comparator);function Bt(...a){let e=hS;for(const n of a)e=e.add(n);return e}const fS=new ai(kt);function dS(){return fS}function z0(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jh(e)?"-0":e}}function zE(a){return{integerValue:""+a}}function gS(a,e){return zv(e)?zE(e):z0(a,e)}class vf{constructor(){this._=void 0}}function mS(a,e,n){return a instanceof rf?(function(h,m){const E={fields:{[TE]:{stringValue:wE},[vE]:{timestampValue:{seconds:h.seconds,nanos:h.nanoseconds}}}};return m&&k0(m)&&(m=wf(m)),m&&(E.fields[CE]=m),{mapValue:E}})(n,e):a instanceof au?HE(a,e):a instanceof ou?GE(a,e):(function(h,m){const E=jE(h,m),C=Ty(E)+Ty(h.Ae);return r0(E)&&r0(h.Ae)?zE(C):z0(h.serializer,C)})(a,e)}function pS(a,e,n){return a instanceof au?HE(a,e):a instanceof ou?GE(a,e):n}function jE(a,e){return a instanceof sf?(function(o){return r0(o)||(function(m){return!!m&&"doubleValue"in m})(o)})(e)?e:{integerValue:0}:null}class rf extends vf{}class au extends vf{constructor(e){super(),this.elements=e}}function HE(a,e){const n=qE(e);for(const o of a.elements)n.some((h=>bs(h,o)))||n.push(o);return{arrayValue:{values:n}}}class ou extends vf{constructor(e){super(),this.elements=e}}function GE(a,e){let n=qE(e);for(const o of a.elements)n=n.filter((h=>!bs(h,o)));return{arrayValue:{values:n}}}class sf extends vf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ty(a){return qn(a.integerValue||a.doubleValue)}function qE(a){return B0(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}function yS(a,e){return a.field.isEqual(e.field)&&(function(o,h){return o instanceof au&&h instanceof au||o instanceof ou&&h instanceof ou?Hl(o.elements,h.elements,bs):o instanceof sf&&h instanceof sf?bs(o.Ae,h.Ae):o instanceof rf&&h instanceof rf})(a.transform,e.transform)}class _S{constructor(e,n){this.version=e,this.transformResults=n}}class cr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zh(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class Sf{}function XE(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new bf(a.key,cr.none()):new mu(a.key,a.data,cr.none());{const n=a.data,o=lr.empty();let h=new ai(Ri.comparator);for(let m of e.fields)if(!h.has(m)){let E=n.field(m);E===null&&m.length>1&&(m=m.popLast(),E=n.field(m)),E===null?o.delete(m):o.set(m,E),h=h.add(m)}return new go(a.key,o,new Rr(h.toArray()),cr.none())}}function ES(a,e,n){a instanceof mu?(function(h,m,E){const C=h.value.clone(),v=vy(h.fieldTransforms,m,E.transformResults);C.setAll(v),m.convertToFoundDocument(E.version,C).setHasCommittedMutations()})(a,e,n):a instanceof go?(function(h,m,E){if(!zh(h.precondition,m))return void m.convertToUnknownDocument(E.version);const C=vy(h.fieldTransforms,m,E.transformResults),v=m.data;v.setAll(YE(h)),v.setAll(C),m.convertToFoundDocument(E.version,v).setHasCommittedMutations()})(a,e,n):(function(h,m,E){m.convertToNoDocument(E.version).setHasCommittedMutations()})(0,e,n)}function Jc(a,e,n,o){return a instanceof mu?(function(m,E,C,v){if(!zh(m.precondition,E))return C;const w=m.value.clone(),D=Sy(m.fieldTransforms,v,E);return w.setAll(D),E.convertToFoundDocument(E.version,w).setHasLocalMutations(),null})(a,e,n,o):a instanceof go?(function(m,E,C,v){if(!zh(m.precondition,E))return C;const w=Sy(m.fieldTransforms,v,E),D=E.data;return D.setAll(YE(m)),D.setAll(w),E.convertToFoundDocument(E.version,D).setHasLocalMutations(),C===null?null:C.unionWith(m.fieldMask.fields).unionWith(m.fieldTransforms.map((M=>M.field)))})(a,e,n,o):(function(m,E,C){return zh(m.precondition,E)?(E.convertToNoDocument(E.version).setHasLocalMutations(),null):C})(a,e,n)}function xS(a,e){let n=null;for(const o of a.fieldTransforms){const h=e.data.field(o.field),m=jE(o.transform,h||null);m!=null&&(n===null&&(n=lr.empty()),n.set(o.field,m))}return n||null}function Cy(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!(function(o,h){return o===void 0&&h===void 0||!(!o||!h)&&Hl(o,h,((m,E)=>yS(m,E)))})(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class mu extends Sf{constructor(e,n,o,h=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class go extends Sf{constructor(e,n,o,h,m=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=h,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function YE(a){const e=new Map;return a.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const o=a.data.field(n);e.set(n,o)}})),e}function vy(a,e,n){const o=new Map;tn(a.length===n.length,32656,{Re:n.length,Ve:a.length});for(let h=0;h<n.length;h++){const m=a[h],E=m.transform,C=e.data.field(m.field);o.set(m.field,pS(E,C,n[h]))}return o}function Sy(a,e,n){const o=new Map;for(const h of a){const m=h.transform,E=n.data.field(h.field);o.set(h.field,mS(m,E,e))}return o}class bf extends Sf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AS extends Sf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wS{constructor(e,n,o,h){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=h}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let h=0;h<this.mutations.length;h++){const m=this.mutations[h];m.key.isEqual(e.key)&&ES(m,e,o[h])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=Jc(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=Jc(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=FE();return this.mutations.forEach((h=>{const m=e.get(h.key),E=m.overlayedDocument;let C=this.applyToLocalView(E,m.mutatedFields);C=n.has(h.key)?null:C;const v=XE(E,C);v!==null&&o.set(h.key,v),E.isValidDocument()||E.convertToNoDocument(lt.min())})),o}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Bt())}isEqual(e){return this.batchId===e.batchId&&Hl(this.mutations,e.mutations,((n,o)=>Cy(n,o)))&&Hl(this.baseMutations,e.baseMutations,((n,o)=>Cy(n,o)))}}class j0{constructor(e,n,o,h){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=h}static from(e,n,o){tn(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let h=(function(){return uS})();const m=e.mutations;for(let E=0;E<m.length;E++)h=h.insert(m[E].key,o[E].version);return new j0(e,n,o,h)}}class TS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class CS{constructor(e,n){this.count=e,this.unchangedNames=n}}var Jn,zt;function vS(a){switch(a){case xe.OK:return st(64938);case xe.CANCELLED:case xe.UNKNOWN:case xe.DEADLINE_EXCEEDED:case xe.RESOURCE_EXHAUSTED:case xe.INTERNAL:case xe.UNAVAILABLE:case xe.UNAUTHENTICATED:return!1;case xe.INVALID_ARGUMENT:case xe.NOT_FOUND:case xe.ALREADY_EXISTS:case xe.PERMISSION_DENIED:case xe.FAILED_PRECONDITION:case xe.ABORTED:case xe.OUT_OF_RANGE:case xe.UNIMPLEMENTED:case xe.DATA_LOSS:return!0;default:return st(15467,{code:a})}}function WE(a){if(a===void 0)return la("GRPC error has no .code"),xe.UNKNOWN;switch(a){case Jn.OK:return xe.OK;case Jn.CANCELLED:return xe.CANCELLED;case Jn.UNKNOWN:return xe.UNKNOWN;case Jn.DEADLINE_EXCEEDED:return xe.DEADLINE_EXCEEDED;case Jn.RESOURCE_EXHAUSTED:return xe.RESOURCE_EXHAUSTED;case Jn.INTERNAL:return xe.INTERNAL;case Jn.UNAVAILABLE:return xe.UNAVAILABLE;case Jn.UNAUTHENTICATED:return xe.UNAUTHENTICATED;case Jn.INVALID_ARGUMENT:return xe.INVALID_ARGUMENT;case Jn.NOT_FOUND:return xe.NOT_FOUND;case Jn.ALREADY_EXISTS:return xe.ALREADY_EXISTS;case Jn.PERMISSION_DENIED:return xe.PERMISSION_DENIED;case Jn.FAILED_PRECONDITION:return xe.FAILED_PRECONDITION;case Jn.ABORTED:return xe.ABORTED;case Jn.OUT_OF_RANGE:return xe.OUT_OF_RANGE;case Jn.UNIMPLEMENTED:return xe.UNIMPLEMENTED;case Jn.DATA_LOSS:return xe.DATA_LOSS;default:return st(39323,{code:a})}}(zt=Jn||(Jn={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";function SS(){return new TextEncoder}const bS=new to([4294967295,4294967295],0);function by(a){const e=SS().encode(a),n=new cE;return n.update(e),new Uint8Array(n.digest())}function Iy(a){const e=new DataView(a.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),h=e.getUint32(8,!0),m=e.getUint32(12,!0);return[new to([n,o],0),new to([h,m],0)]}class H0{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new Gc(`Invalid padding: ${n}`);if(o<0)throw new Gc(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Gc(`Invalid hash count: ${o}`);if(e.length===0&&n!==0)throw new Gc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=to.fromNumber(this.ge)}ye(e,n,o){let h=e.add(n.multiply(to.fromNumber(o)));return h.compare(bS)===1&&(h=new to([h.getBits(0),h.getBits(1)],0)),h.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=by(e),[o,h]=Iy(n);for(let m=0;m<this.hashCount;m++){const E=this.ye(o,h,m);if(!this.we(E))return!1}return!0}static create(e,n,o){const h=e%8==0?0:8-e%8,m=new Uint8Array(Math.ceil(e/8)),E=new H0(m,h,n);return o.forEach((C=>E.insert(C))),E}insert(e){if(this.ge===0)return;const n=by(e),[o,h]=Iy(n);for(let m=0;m<this.hashCount;m++){const E=this.ye(o,h,m);this.Se(E)}}Se(e){const n=Math.floor(e/8),o=e%8;this.bitmap[n]|=1<<o}}class Gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class If{constructor(e,n,o,h,m){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=h,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const h=new Map;return h.set(e,pu.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new If(lt.min(),h,new Pn(kt),ca(),Bt())}}class pu{constructor(e,n,o,h,m){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=h,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new pu(o,n,Bt(),Bt(),Bt())}}class jh{constructor(e,n,o,h){this.be=e,this.removedTargetIds=n,this.key=o,this.De=h}}class KE{constructor(e,n){this.targetId=e,this.Ce=n}}class QE{constructor(e,n,o=Ni.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=h}}class Ry{constructor(){this.ve=0,this.Fe=Ny(),this.Me=Ni.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Bt(),n=Bt(),o=Bt();return this.Fe.forEach(((h,m)=>{switch(m){case 0:e=e.add(h);break;case 2:n=n.add(h);break;case 1:o=o.add(h);break;default:st(38017,{changeType:m})}})),new pu(this.Me,this.xe,e,n,o)}qe(){this.Oe=!1,this.Fe=Ny()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,tn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class IS{constructor(e){this.Ge=e,this.ze=new Map,this.je=ca(),this.Je=Oh(),this.He=Oh(),this.Ye=new Pn(kt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const o=this.nt(n);switch(e.state){case 0:this.rt(n)&&o.Le(e.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(e.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(o.We(),o.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),o.Le(e.resumeToken));break;default:st(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((o,h)=>{this.rt(h)&&n(h)}))}st(e){const n=e.targetId,o=e.Ce.count,h=this.ot(n);if(h){const m=h.target;if(a0(m))if(o===0){const E=new Qe(m.path);this.et(n,E,zi.newNoDocument(E,lt.min()))}else tn(o===1,20013,{expectedCount:o});else{const E=this._t(n);if(E!==o){const C=this.ut(e),v=C?this.ct(C,e,E):1;if(v!==0){this.it(n);const w=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,w)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:h=0},hashCount:m=0}=n;let E,C;try{E=ao(o).toUint8Array()}catch(v){if(v instanceof AE)return jl("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{C=new H0(E,h,m)}catch(v){return jl(v instanceof Gc?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return C.ge===0?null:C}ct(e,n,o){return n.Ce.count===o-this.Pt(e,n.targetId)?0:2}Pt(e,n){const o=this.Ge.getRemoteKeysForTarget(n);let h=0;return o.forEach((m=>{const E=this.Ge.ht(),C=`projects/${E.projectId}/databases/${E.database}/documents/${m.path.canonicalString()}`;e.mightContain(C)||(this.et(n,m,null),h++)})),h}Tt(e){const n=new Map;this.ze.forEach(((m,E)=>{const C=this.ot(E);if(C){if(m.current&&a0(C.target)){const v=new Qe(C.target.path);this.It(v).has(E)||this.Et(E,v)||this.et(E,v,zi.newNoDocument(v,e))}m.Be&&(n.set(E,m.ke()),m.qe())}}));let o=Bt();this.He.forEach(((m,E)=>{let C=!0;E.forEachWhile((v=>{const w=this.ot(v);return!w||w.purpose==="TargetPurposeLimboResolution"||(C=!1,!1)})),C&&(o=o.add(m))})),this.je.forEach(((m,E)=>E.setReadTime(e)));const h=new If(e,n,this.Ye,this.je,o);return this.je=ca(),this.Je=Oh(),this.He=Oh(),this.Ye=new Pn(kt),h}Xe(e,n){if(!this.rt(e))return;const o=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,o),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,o){if(!this.rt(e))return;const h=this.nt(e);this.Et(e,n)?h.Qe(n,1):h.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),o&&(this.je=this.je.insert(n,o))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ry,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ai(kt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ai(kt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ze("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ry),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Oh(){return new Pn(Qe.comparator)}function Ny(){return new Pn(Qe.comparator)}const RS={asc:"ASCENDING",desc:"DESCENDING"},NS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},OS={and:"AND",or:"OR"};class DS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function c0(a,e){return a.useProto3Json||Af(e)?e:{value:e}}function af(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZE(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function MS(a,e){return af(a,e.toTimestamp())}function Cs(a){return tn(!!a,49232),lt.fromTimestamp((function(n){const o=so(n);return new xn(o.seconds,o.nanos)})(a))}function G0(a,e){return u0(a,e).canonicalString()}function u0(a,e){const n=(function(h){return new gn(["projects",h.projectId,"databases",h.database])})(a).child("documents");return e===void 0?n:n.child(e)}function JE(a){const e=gn.fromString(a);return tn(ix(e),10190,{key:e.toString()}),e}function h0(a,e){return G0(a.databaseId,e.path)}function F1(a,e){const n=JE(e);if(n.get(1)!==a.databaseId.projectId)throw new Ve(xe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+a.databaseId.projectId);if(n.get(3)!==a.databaseId.database)throw new Ve(xe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+a.databaseId.database);return new Qe(ex(n))}function $E(a,e){return G0(a.databaseId,e)}function PS(a){const e=JE(a);return e.length===4?gn.emptyPath():ex(e)}function f0(a){return new gn(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function ex(a){return tn(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function Oy(a,e,n){return{name:h0(a,e),fields:n.value.mapValue.fields}}function LS(a,e){let n;if("targetChange"in e){e.targetChange;const o=(function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:st(39313,{state:w})})(e.targetChange.targetChangeType||"NO_CHANGE"),h=e.targetChange.targetIds||[],m=(function(w,D){return w.useProto3Json?(tn(D===void 0||typeof D=="string",58123),Ni.fromBase64String(D||"")):(tn(D===void 0||D instanceof Buffer||D instanceof Uint8Array,16193),Ni.fromUint8Array(D||new Uint8Array))})(a,e.targetChange.resumeToken),E=e.targetChange.cause,C=E&&(function(w){const D=w.code===void 0?xe.UNKNOWN:WE(w.code);return new Ve(D,w.message||"")})(E);n=new QE(o,h,m,C||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const h=F1(a,o.document.name),m=Cs(o.document.updateTime),E=o.document.createTime?Cs(o.document.createTime):lt.min(),C=new lr({mapValue:{fields:o.document.fields}}),v=zi.newFoundDocument(h,m,E,C),w=o.targetIds||[],D=o.removedTargetIds||[];n=new jh(w,D,v.key,v)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const h=F1(a,o.document),m=o.readTime?Cs(o.readTime):lt.min(),E=zi.newNoDocument(h,m),C=o.removedTargetIds||[];n=new jh([],C,E.key,E)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const h=F1(a,o.document),m=o.removedTargetIds||[];n=new jh([],m,h,null)}else{if(!("filter"in e))return st(11601,{Rt:e});{e.filter;const o=e.filter;o.targetId;const{count:h=0,unchangedNames:m}=o,E=new CS(h,m),C=o.targetId;n=new KE(C,E)}}return n}function kS(a,e){let n;if(e instanceof mu)n={update:Oy(a,e.key,e.value)};else if(e instanceof bf)n={delete:h0(a,e.key)};else if(e instanceof go)n={update:Oy(a,e.key,e.data),updateMask:qS(e.fieldMask)};else{if(!(e instanceof AS))return st(16599,{Vt:e.type});n={verify:h0(a,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((o=>(function(m,E){const C=E.transform;if(C instanceof rf)return{fieldPath:E.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof au)return{fieldPath:E.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof ou)return{fieldPath:E.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof sf)return{fieldPath:E.field.canonicalString(),increment:C.Ae};throw st(20930,{transform:E.transform})})(0,o)))),e.precondition.isNone||(n.currentDocument=(function(h,m){return m.updateTime!==void 0?{updateTime:MS(h,m.updateTime)}:m.exists!==void 0?{exists:m.exists}:st(27497)})(a,e.precondition)),n}function BS(a,e){return a&&a.length>0?(tn(e!==void 0,14353),a.map((n=>(function(h,m){let E=h.updateTime?Cs(h.updateTime):Cs(m);return E.isEqual(lt.min())&&(E=Cs(m)),new _S(E,h.transformResults||[])})(n,e)))):[]}function VS(a,e){return{documents:[$E(a,e.path)]}}function US(a,e){const n={structuredQuery:{}},o=e.path;let h;e.collectionGroup!==null?(h=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(h=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=$E(a,h);const m=(function(w){if(w.length!==0)return nx(cs.create(w,"and"))})(e.filters);m&&(n.structuredQuery.where=m);const E=(function(w){if(w.length!==0)return w.map((D=>(function(z){return{field:Dl(z.field),direction:jS(z.dir)}})(D)))})(e.orderBy);E&&(n.structuredQuery.orderBy=E);const C=c0(a,e.limit);return C!==null&&(n.structuredQuery.limit=C),e.startAt&&(n.structuredQuery.startAt=(function(w){return{before:w.inclusive,values:w.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(w){return{before:!w.inclusive,values:w.position}})(e.endAt)),{ft:n,parent:h}}function FS(a){let e=PS(a.parent);const n=a.structuredQuery,o=n.from?n.from.length:0;let h=null;if(o>0){tn(o===1,65062);const D=n.from[0];D.allDescendants?h=D.collectionId:e=e.child(D.collectionId)}let m=[];n.where&&(m=(function(M){const z=tx(M);return z instanceof cs&&OE(z)?z.getFilters():[z]})(n.where));let E=[];n.orderBy&&(E=(function(M){return M.map((z=>(function(_e){return new nf(Ml(_e.field),(function(ve){switch(ve){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_e.direction))})(z)))})(n.orderBy));let C=null;n.limit&&(C=(function(M){let z;return z=typeof M=="object"?M.value:M,Af(z)?null:z})(n.limit));let v=null;n.startAt&&(v=(function(M){const z=!!M.before,te=M.values||[];return new tf(te,z)})(n.startAt));let w=null;return n.endAt&&(w=(function(M){const z=!M.before,te=M.values||[];return new tf(te,z)})(n.endAt)),sS(e,h,E,m,C,"F",v,w)}function zS(a,e){const n=(function(h){switch(h){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st(28987,{purpose:h})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tx(a){return a.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Ml(n.unaryFilter.field);return $n.create(o,"==",{doubleValue:NaN});case"IS_NULL":const h=Ml(n.unaryFilter.field);return $n.create(h,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const m=Ml(n.unaryFilter.field);return $n.create(m,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const E=Ml(n.unaryFilter.field);return $n.create(E,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return st(61313);default:return st(60726)}})(a):a.fieldFilter!==void 0?(function(n){return $n.create(Ml(n.fieldFilter.field),(function(h){switch(h){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return st(58110);default:return st(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(n){return cs.create(n.compositeFilter.filters.map((o=>tx(o))),(function(h){switch(h){case"AND":return"and";case"OR":return"or";default:return st(1026)}})(n.compositeFilter.op))})(a):st(30097,{filter:a})}function jS(a){return RS[a]}function HS(a){return NS[a]}function GS(a){return OS[a]}function Dl(a){return{fieldPath:a.canonicalString()}}function Ml(a){return Ri.fromServerFormat(a.fieldPath)}function nx(a){return a instanceof $n?(function(n){if(n.op==="=="){if(_y(n.value))return{unaryFilter:{field:Dl(n.field),op:"IS_NAN"}};if(yy(n.value))return{unaryFilter:{field:Dl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_y(n.value))return{unaryFilter:{field:Dl(n.field),op:"IS_NOT_NAN"}};if(yy(n.value))return{unaryFilter:{field:Dl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dl(n.field),op:HS(n.op),value:n.value}}})(a):a instanceof cs?(function(n){const o=n.getFilters().map((h=>nx(h)));return o.length===1?o[0]:{compositeFilter:{op:GS(n.op),filters:o}}})(a):st(54877,{filter:a})}function qS(a){const e=[];return a.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ix(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}class Qa{constructor(e,n,o,h,m=lt.min(),E=lt.min(),C=Ni.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=h,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=C,this.expectedCount=v}withSequenceNumber(e){return new Qa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class XS{constructor(e){this.yt=e}}function YS(a){const e=FS({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?l0(e,e.limit,"L"):e}class WS{constructor(){this.Cn=new KS}addToCollectionParentIndex(e,n){return this.Cn.add(n),we.resolve()}getCollectionParents(e,n){return we.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return we.resolve()}deleteFieldIndex(e,n){return we.resolve()}deleteAllFieldIndexes(e){return we.resolve()}createTargetIndexes(e,n){return we.resolve()}getDocumentsMatchingTarget(e,n){return we.resolve(null)}getIndexType(e,n){return we.resolve(0)}getFieldIndexes(e,n){return we.resolve([])}getNextCollectionGroupToUpdate(e){return we.resolve(null)}getMinOffset(e,n){return we.resolve(ro.min())}getMinOffsetFromCollectionGroup(e,n){return we.resolve(ro.min())}updateCollectionGroup(e,n,o){return we.resolve()}updateIndexEntries(e,n){return we.resolve()}}class KS{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),h=this.index[n]||new ai(gn.comparator),m=!h.has(o);return this.index[n]=h.add(o),m}has(e){const n=e.lastSegment(),o=e.popLast(),h=this.index[n];return h&&h.has(o)}getEntries(e){return(this.index[e]||new ai(gn.comparator)).toArray()}}const Dy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rx=41943040;class or{static withCacheSize(e){return new or(e,or.DEFAULT_COLLECTION_PERCENTILE,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}}or.DEFAULT_COLLECTION_PERCENTILE=10,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,or.DEFAULT=new or(rx,or.DEFAULT_COLLECTION_PERCENTILE,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),or.DISABLED=new or(-1,0,0);class Xl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Xl(0)}static cr(){return new Xl(-1)}}const My="LruGarbageCollector",QS=1048576;function Py([a,e],[n,o]){const h=kt(a,n);return h===0?kt(e,o):h}class ZS{constructor(e){this.Ir=e,this.buffer=new ai(Py),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();Py(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class JS{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ze(My,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ec(n)?ze(My,"Ignoring IndexedDB error during garbage collection: ",n):await $l(n)}await this.Vr(3e5)}))}}class $S{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((o=>Math.floor(n/100*o)))}nthSequenceNumber(e,n){if(n===0)return we.resolve(xf.ce);const o=new ZS(n);return this.mr.forEachTarget(e,(h=>o.Ar(h.sequenceNumber))).next((()=>this.mr.pr(e,(h=>o.Ar(h))))).next((()=>o.maxValue))}removeTargets(e,n,o){return this.mr.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),we.resolve(Dy)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Dy):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let o,h,m,E,C,v,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((M=>(M>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),h=this.params.maximumSequenceNumbersToCollect):h=M,E=Date.now(),this.nthSequenceNumber(e,h)))).next((M=>(o=M,C=Date.now(),this.removeTargets(e,o,n)))).next((M=>(m=M,v=Date.now(),this.removeOrphanedDocuments(e,o)))).next((M=>(w=Date.now(),Nl()<=Lt.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${E-D}ms
	Determined least recently used ${h} in `+(C-E)+`ms
	Removed ${m} targets in `+(v-C)+`ms
	Removed ${M} documents in `+(w-v)+`ms
Total Duration: ${w-D}ms`),we.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:m,documentsRemoved:M}))))}}function eb(a,e){return new $S(a,e)}class tb{constructor(){this.changes=new Qo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,zi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return o!==void 0?we.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nb{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class ib{constructor(e,n,o,h){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=h}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next((h=>(o=h,this.remoteDocumentCache.getEntry(e,n)))).next((h=>(o!==null&&Jc(o.mutation,h,Rr.empty(),xn.now()),h)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.getLocalViewOfDocuments(e,o,Bt()).next((()=>o))))}getLocalViewOfDocuments(e,n,o=Bt()){const h=zo();return this.populateOverlays(e,h,n).next((()=>this.computeViews(e,n,h,o).next((m=>{let E=Hc();return m.forEach(((C,v)=>{E=E.insert(C,v.overlayedDocument)})),E}))))}getOverlayedDocuments(e,n){const o=zo();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,Bt())))}populateOverlays(e,n,o){const h=[];return o.forEach((m=>{n.has(m)||h.push(m)})),this.documentOverlayCache.getOverlays(e,h).next((m=>{m.forEach(((E,C)=>{n.set(E,C)}))}))}computeViews(e,n,o,h){let m=ca();const E=Zc(),C=(function(){return Zc()})();return n.forEach(((v,w)=>{const D=o.get(w.key);h.has(w.key)&&(D===void 0||D.mutation instanceof go)?m=m.insert(w.key,w):D!==void 0?(E.set(w.key,D.mutation.getFieldMask()),Jc(D.mutation,w,D.mutation.getFieldMask(),xn.now())):E.set(w.key,Rr.empty())})),this.recalculateAndSaveOverlays(e,m).next((v=>(v.forEach(((w,D)=>E.set(w,D))),n.forEach(((w,D)=>C.set(w,new nb(D,E.get(w)??null)))),C)))}recalculateAndSaveOverlays(e,n){const o=Zc();let h=new Pn(((E,C)=>E-C)),m=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((E=>{for(const C of E)C.keys().forEach((v=>{const w=n.get(v);if(w===null)return;let D=o.get(v)||Rr.empty();D=C.applyToLocalView(w,D),o.set(v,D);const M=(h.get(C.batchId)||Bt()).add(v);h=h.insert(C.batchId,M)}))})).next((()=>{const E=[],C=h.getReverseIterator();for(;C.hasNext();){const v=C.getNext(),w=v.key,D=v.value,M=FE();D.forEach((z=>{if(!m.has(z)){const te=XE(n.get(z),o.get(z));te!==null&&M.set(z,te),m=m.add(z)}})),E.push(this.documentOverlayCache.saveOverlays(e,w,M))}return we.waitFor(E)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,n,o,h){return(function(E){return Qe.isDocumentKey(E.path)&&E.collectionGroup===null&&E.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):LE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,h):this.getDocumentsMatchingCollectionQuery(e,n,o,h)}getNextDocuments(e,n,o,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,h).next((m=>{const E=h-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,h-m.size):we.resolve(zo());let C=nu,v=m;return E.next((w=>we.forEach(w,((D,M)=>(C<M.largestBatchId&&(C=M.largestBatchId),m.get(D)?we.resolve():this.remoteDocumentCache.getEntry(e,D).next((z=>{v=v.insert(D,z)}))))).next((()=>this.populateOverlays(e,w,m))).next((()=>this.computeViews(e,v,w,Bt()))).next((D=>({batchId:C,changes:UE(D)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Qe(n)).next((o=>{let h=Hc();return o.isFoundDocument()&&(h=h.insert(o.key,o)),h}))}getDocumentsMatchingCollectionGroupQuery(e,n,o,h){const m=n.collectionGroup;let E=Hc();return this.indexManager.getCollectionParents(e,m).next((C=>we.forEach(C,(v=>{const w=(function(M,z){return new gu(z,null,M.explicitOrderBy.slice(),M.filters.slice(),M.limit,M.limitType,M.startAt,M.endAt)})(n,v.child(m));return this.getDocumentsMatchingCollectionQuery(e,w,o,h).next((D=>{D.forEach(((M,z)=>{E=E.insert(M,z)}))}))})).next((()=>E))))}getDocumentsMatchingCollectionQuery(e,n,o,h){let m;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next((E=>(m=E,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,m,h)))).next((E=>{m.forEach(((v,w)=>{const D=w.getKey();E.get(D)===null&&(E=E.insert(D,zi.newInvalidDocument(D)))}));let C=Hc();return E.forEach(((v,w)=>{const D=m.get(v);D!==void 0&&Jc(D.mutation,w,Rr.empty(),xn.now()),Cf(n,w)&&(C=C.insert(v,w))})),C}))}}class rb{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return we.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(h){return{id:h.id,version:h.version,createTime:Cs(h.createTime)}})(n)),we.resolve()}getNamedQuery(e,n){return we.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(h){return{name:h.name,query:YS(h.bundledQuery),readTime:Cs(h.readTime)}})(n)),we.resolve()}}class sb{constructor(){this.overlays=new Pn(Qe.comparator),this.qr=new Map}getOverlay(e,n){return we.resolve(this.overlays.get(n))}getOverlays(e,n){const o=zo();return we.forEach(n,(h=>this.getOverlay(e,h).next((m=>{m!==null&&o.set(h,m)})))).next((()=>o))}saveOverlays(e,n,o){return o.forEach(((h,m)=>{this.St(e,n,m)})),we.resolve()}removeOverlaysForBatchId(e,n,o){const h=this.qr.get(o);return h!==void 0&&(h.forEach((m=>this.overlays=this.overlays.remove(m))),this.qr.delete(o)),we.resolve()}getOverlaysForCollection(e,n,o){const h=zo(),m=n.length+1,E=new Qe(n.child("")),C=this.overlays.getIteratorFrom(E);for(;C.hasNext();){const v=C.getNext().value,w=v.getKey();if(!n.isPrefixOf(w.path))break;w.path.length===m&&v.largestBatchId>o&&h.set(v.getKey(),v)}return we.resolve(h)}getOverlaysForCollectionGroup(e,n,o,h){let m=new Pn(((w,D)=>w-D));const E=this.overlays.getIterator();for(;E.hasNext();){const w=E.getNext().value;if(w.getKey().getCollectionGroup()===n&&w.largestBatchId>o){let D=m.get(w.largestBatchId);D===null&&(D=zo(),m=m.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const C=zo(),v=m.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach(((w,D)=>C.set(w,D))),!(C.size()>=h)););return we.resolve(C)}St(e,n,o){const h=this.overlays.get(o.key);if(h!==null){const E=this.qr.get(h.largestBatchId).delete(o.key);this.qr.set(h.largestBatchId,E)}this.overlays=this.overlays.insert(o.key,new TS(n,o));let m=this.qr.get(n);m===void 0&&(m=Bt(),this.qr.set(n,m)),this.qr.set(n,m.add(o.key))}}class ab{constructor(){this.sessionToken=Ni.EMPTY_BYTE_STRING}getSessionToken(e){return we.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,we.resolve()}}class q0{constructor(){this.Qr=new ai(hi.$r),this.Ur=new ai(hi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const o=new hi(e,n);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(e,n){e.forEach((o=>this.addReference(o,n)))}removeReference(e,n){this.Gr(new hi(e,n))}zr(e,n){e.forEach((o=>this.removeReference(o,n)))}jr(e){const n=new Qe(new gn([])),o=new hi(n,e),h=new hi(n,e+1),m=[];return this.Ur.forEachInRange([o,h],(E=>{this.Gr(E),m.push(E.key)})),m}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Qe(new gn([])),o=new hi(n,e),h=new hi(n,e+1);let m=Bt();return this.Ur.forEachInRange([o,h],(E=>{m=m.add(E.key)})),m}containsKey(e){const n=new hi(e,0),o=this.Qr.firstAfterOrEqual(n);return o!==null&&e.isEqual(o.key)}}class hi{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Qe.comparator(e.key,n.key)||kt(e.Yr,n.Yr)}static Kr(e,n){return kt(e.Yr,n.Yr)||Qe.comparator(e.key,n.key)}}class ob{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ai(hi.$r)}checkEmpty(e){return we.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,o,h){const m=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const E=new wS(m,n,o,h);this.mutationQueue.push(E);for(const C of h)this.Zr=this.Zr.add(new hi(C.key,m)),this.indexManager.addToCollectionParentIndex(e,C.key.path.popLast());return we.resolve(E)}lookupMutationBatch(e,n){return we.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const o=n+1,h=this.ei(o),m=h<0?0:h;return we.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return we.resolve(this.mutationQueue.length===0?L0:this.tr-1)}getAllMutationBatches(e){return we.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new hi(n,0),h=new hi(n,Number.POSITIVE_INFINITY),m=[];return this.Zr.forEachInRange([o,h],(E=>{const C=this.Xr(E.Yr);m.push(C)})),we.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new ai(kt);return n.forEach((h=>{const m=new hi(h,0),E=new hi(h,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([m,E],(C=>{o=o.add(C.Yr)}))})),we.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,h=o.length+1;let m=o;Qe.isDocumentKey(m)||(m=m.child(""));const E=new hi(new Qe(m),0);let C=new ai(kt);return this.Zr.forEachWhile((v=>{const w=v.key.path;return!!o.isPrefixOf(w)&&(w.length===h&&(C=C.add(v.Yr)),!0)}),E),we.resolve(this.ti(C))}ti(e){const n=[];return e.forEach((o=>{const h=this.Xr(o);h!==null&&n.push(h)})),n}removeMutationBatch(e,n){tn(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return we.forEach(n.mutations,(h=>{const m=new hi(h.key,n.batchId);return o=o.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)})).next((()=>{this.Zr=o}))}ir(e){}containsKey(e,n){const o=new hi(n,0),h=this.Zr.firstAfterOrEqual(o);return we.resolve(n.isEqual(h&&h.key))}performConsistencyCheck(e){return this.mutationQueue.length,we.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class lb{constructor(e){this.ri=e,this.docs=(function(){return new Pn(Qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,h=this.docs.get(o),m=h?h.size:0,E=this.ri(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:E}),this.size+=E-m,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return we.resolve(o?o.document.mutableCopy():zi.newInvalidDocument(n))}getEntries(e,n){let o=ca();return n.forEach((h=>{const m=this.docs.get(h);o=o.insert(h,m?m.document.mutableCopy():zi.newInvalidDocument(h))})),we.resolve(o)}getDocumentsMatchingQuery(e,n,o,h){let m=ca();const E=n.path,C=new Qe(E.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(C);for(;v.hasNext();){const{key:w,value:{document:D}}=v.getNext();if(!E.isPrefixOf(w.path))break;w.path.length>E.length+1||Bv(kv(D),o)<=0||(h.has(D.key)||Cf(n,D))&&(m=m.insert(D.key,D.mutableCopy()))}return we.resolve(m)}getAllFromCollectionGroup(e,n,o,h){st(9500)}ii(e,n){return we.forEach(this.docs,(o=>n(o)))}newChangeBuffer(e){return new cb(this)}getSize(e){return we.resolve(this.size)}}class cb extends tb{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((o,h)=>{h.isValidDocument()?n.push(this.Nr.addEntry(e,h)):this.Nr.removeEntry(o)})),we.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class ub{constructor(e){this.persistence=e,this.si=new Qo((n=>V0(n)),U0),this.lastRemoteSnapshotVersion=lt.min(),this.highestTargetId=0,this.oi=0,this._i=new q0,this.targetCount=0,this.ai=Xl.ur()}forEachTarget(e,n){return this.si.forEach(((o,h)=>n(h))),we.resolve()}getLastRemoteSnapshotVersion(e){return we.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return we.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),we.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.oi&&(this.oi=n),we.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Xl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,we.resolve()}updateTargetData(e,n){return this.Pr(n),we.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,we.resolve()}removeTargets(e,n,o){let h=0;const m=[];return this.si.forEach(((E,C)=>{C.sequenceNumber<=n&&o.get(C.targetId)===null&&(this.si.delete(E),m.push(this.removeMatchingKeysForTargetId(e,C.targetId)),h++)})),we.waitFor(m).next((()=>h))}getTargetCount(e){return we.resolve(this.targetCount)}getTargetData(e,n){const o=this.si.get(n)||null;return we.resolve(o)}addMatchingKeys(e,n,o){return this._i.Wr(n,o),we.resolve()}removeMatchingKeys(e,n,o){this._i.zr(n,o);const h=this.persistence.referenceDelegate,m=[];return h&&n.forEach((E=>{m.push(h.markPotentiallyOrphaned(e,E))})),we.waitFor(m)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),we.resolve()}getMatchingKeysForTargetId(e,n){const o=this._i.Hr(n);return we.resolve(o)}containsKey(e,n){return we.resolve(this._i.containsKey(n))}}class sx{constructor(e,n){this.ui={},this.overlays={},this.ci=new xf(0),this.li=!1,this.li=!0,this.hi=new ab,this.referenceDelegate=e(this),this.Pi=new ub(this),this.indexManager=new WS,this.remoteDocumentCache=(function(h){return new lb(h)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new XS(n),this.Ii=new rb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sb,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.ui[e.toKey()];return o||(o=new ob(n,this.referenceDelegate),this.ui[e.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,o){ze("MemoryPersistence","Starting transaction:",e);const h=new hb(this.ci.next());return this.referenceDelegate.Ei(),o(h).next((m=>this.referenceDelegate.di(h).next((()=>m)))).toPromise().then((m=>(h.raiseOnCommittedEvent(),m)))}Ai(e,n){return we.or(Object.values(this.ui).map((o=>()=>o.containsKey(e,n))))}}class hb extends Uv{constructor(e){super(),this.currentSequenceNumber=e}}class X0{constructor(e){this.persistence=e,this.Ri=new q0,this.Vi=null}static mi(e){return new X0(e)}get fi(){if(this.Vi)return this.Vi;throw st(60996)}addReference(e,n,o){return this.Ri.addReference(o,n),this.fi.delete(o.toString()),we.resolve()}removeReference(e,n,o){return this.Ri.removeReference(o,n),this.fi.add(o.toString()),we.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),we.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((h=>this.fi.add(h.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next((h=>{h.forEach((m=>this.fi.add(m.toString())))})).next((()=>o.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return we.forEach(this.fi,(o=>{const h=Qe.fromPath(o);return this.gi(e,h).next((m=>{m||n.removeEntry(h,lt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((o=>{o?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return we.or([()=>we.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class of{constructor(e,n){this.persistence=e,this.pi=new Qo((o=>jv(o.path)),((o,h)=>o.isEqual(h))),this.garbageCollector=eb(this,n)}static mi(e,n){return new of(e,n)}Ei(){}di(e){return we.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>n.next((h=>o+h))))}wr(e){let n=0;return this.pr(e,(o=>{n++})).next((()=>n))}pr(e,n){return we.forEach(this.pi,((o,h)=>this.br(e,o,h).next((m=>m?we.resolve():n(h)))))}removeTargets(e,n,o){return this.persistence.getTargetCache().removeTargets(e,n,o)}removeOrphanedDocuments(e,n){let o=0;const h=this.persistence.getRemoteDocumentCache(),m=h.newChangeBuffer();return h.ii(e,(E=>this.br(e,E,n).next((C=>{C||(o++,m.removeEntry(E,lt.min()))})))).next((()=>m.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),we.resolve()}removeReference(e,n,o){return this.pi.set(o,e.currentSequenceNumber),we.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),we.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Uh(e.data.value)),n}br(e,n,o){return we.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const h=this.pi.get(n);return we.resolve(h!==void 0&&h>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Y0{constructor(e,n,o,h){this.targetId=e,this.fromCache=n,this.Es=o,this.ds=h}static As(e,n){let o=Bt(),h=Bt();for(const m of n.docChanges)switch(m.type){case 0:o=o.add(m.doc.key);break;case 1:h=h.add(m.doc.key)}return new Y0(e,n.fromCache,o,h)}}class fb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class db{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Gw()?8:Fv(ji())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,o,h){const m={result:null};return this.ys(e,n).next((E=>{m.result=E})).next((()=>{if(!m.result)return this.ws(e,n,h,o).next((E=>{m.result=E}))})).next((()=>{if(m.result)return;const E=new fb;return this.Ss(e,n,E).next((C=>{if(m.result=C,this.Vs)return this.bs(e,n,E,C.size)}))})).next((()=>m.result))}bs(e,n,o,h){return o.documentReadCount<this.fs?(Nl()<=Lt.DEBUG&&ze("QueryEngine","SDK will not create cache indexes for query:",Ol(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),we.resolve()):(Nl()<=Lt.DEBUG&&ze("QueryEngine","Query:",Ol(n),"scans",o.documentReadCount,"local documents and returns",h,"documents as results."),o.documentReadCount>this.gs*h?(Nl()<=Lt.DEBUG&&ze("QueryEngine","The SDK decides to create cache indexes for query:",Ol(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ts(n))):we.resolve())}ys(e,n){if(wy(n))return we.resolve(null);let o=Ts(n);return this.indexManager.getIndexType(e,o).next((h=>h===0?null:(n.limit!==null&&h===1&&(n=l0(n,null,"F"),o=Ts(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next((m=>{const E=Bt(...m);return this.ps.getDocuments(e,E).next((C=>this.indexManager.getMinOffset(e,o).next((v=>{const w=this.Ds(n,C);return this.Cs(n,w,E,v.readTime)?this.ys(e,l0(n,null,"F")):this.vs(e,w,n,v)}))))})))))}ws(e,n,o,h){return wy(n)||h.isEqual(lt.min())?we.resolve(null):this.ps.getDocuments(e,o).next((m=>{const E=this.Ds(n,m);return this.Cs(n,E,o,h)?we.resolve(null):(Nl()<=Lt.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Ol(n)),this.vs(e,E,n,Lv(h,nu)).next((C=>C)))}))}Ds(e,n){let o=new ai(BE(e));return n.forEach(((h,m)=>{Cf(e,m)&&(o=o.add(m))})),o}Cs(e,n,o,h){if(e.limit===null)return!1;if(o.size!==n.size)return!0;const m=e.limitType==="F"?n.last():n.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(h)>0)}Ss(e,n,o){return Nl()<=Lt.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",Ol(n)),this.ps.getDocumentsMatchingQuery(e,n,ro.min(),o)}vs(e,n,o,h){return this.ps.getDocumentsMatchingQuery(e,o,h).next((m=>(n.forEach((E=>{m=m.insert(E.key,E)})),m)))}}const W0="LocalStore",gb=3e8;class mb{constructor(e,n,o,h){this.persistence=e,this.Fs=n,this.serializer=h,this.Ms=new Pn(kt),this.xs=new Qo((m=>V0(m)),U0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(o)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ib(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function pb(a,e,n,o){return new mb(a,e,n,o)}async function ax(a,e){const n=dt(a);return await n.persistence.runTransaction("Handle user change","readonly",(o=>{let h;return n.mutationQueue.getAllMutationBatches(o).next((m=>(h=m,n.Bs(e),n.mutationQueue.getAllMutationBatches(o)))).next((m=>{const E=[],C=[];let v=Bt();for(const w of h){E.push(w.batchId);for(const D of w.mutations)v=v.add(D.key)}for(const w of m){C.push(w.batchId);for(const D of w.mutations)v=v.add(D.key)}return n.localDocuments.getDocuments(o,v).next((w=>({Ls:w,removedBatchIds:E,addedBatchIds:C})))}))}))}function yb(a,e){const n=dt(a);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const h=e.batch.keys(),m=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(C,v,w,D){const M=w.batch,z=M.keys();let te=we.resolve();return z.forEach((_e=>{te=te.next((()=>D.getEntry(v,_e))).next((pe=>{const ve=w.docVersions.get(_e);tn(ve!==null,48541),pe.version.compareTo(ve)<0&&(M.applyToRemoteDocument(pe,w),pe.isValidDocument()&&(pe.setReadTime(w.commitVersion),D.addEntry(pe)))}))})),te.next((()=>C.mutationQueue.removeMutationBatch(v,M)))})(n,o,e,m).next((()=>m.apply(o))).next((()=>n.mutationQueue.performConsistencyCheck(o))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(o,h,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(C){let v=Bt();for(let w=0;w<C.mutationResults.length;++w)C.mutationResults[w].transformResults.length>0&&(v=v.add(C.batch.mutations[w].key));return v})(e)))).next((()=>n.localDocuments.getDocuments(o,h)))}))}function ox(a){const e=dt(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function _b(a,e){const n=dt(a),o=e.snapshotVersion;let h=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(m=>{const E=n.Ns.newChangeBuffer({trackRemovals:!0});h=n.Ms;const C=[];e.targetChanges.forEach(((D,M)=>{const z=h.get(M);if(!z)return;C.push(n.Pi.removeMatchingKeys(m,D.removedDocuments,M).next((()=>n.Pi.addMatchingKeys(m,D.addedDocuments,M))));let te=z.withSequenceNumber(m.currentSequenceNumber);e.targetMismatches.get(M)!==null?te=te.withResumeToken(Ni.EMPTY_BYTE_STRING,lt.min()).withLastLimboFreeSnapshotVersion(lt.min()):D.resumeToken.approximateByteSize()>0&&(te=te.withResumeToken(D.resumeToken,o)),h=h.insert(M,te),(function(pe,ve,je){return pe.resumeToken.approximateByteSize()===0||ve.snapshotVersion.toMicroseconds()-pe.snapshotVersion.toMicroseconds()>=gb?!0:je.addedDocuments.size+je.modifiedDocuments.size+je.removedDocuments.size>0})(z,te,D)&&C.push(n.Pi.updateTargetData(m,te))}));let v=ca(),w=Bt();if(e.documentUpdates.forEach((D=>{e.resolvedLimboDocuments.has(D)&&C.push(n.persistence.referenceDelegate.updateLimboDocument(m,D))})),C.push(Eb(m,E,e.documentUpdates).next((D=>{v=D.ks,w=D.qs}))),!o.isEqual(lt.min())){const D=n.Pi.getLastRemoteSnapshotVersion(m).next((M=>n.Pi.setTargetsMetadata(m,m.currentSequenceNumber,o)));C.push(D)}return we.waitFor(C).next((()=>E.apply(m))).next((()=>n.localDocuments.getLocalViewOfDocuments(m,v,w))).next((()=>v))})).then((m=>(n.Ms=h,m)))}function Eb(a,e,n){let o=Bt(),h=Bt();return n.forEach((m=>o=o.add(m))),e.getEntries(a,o).next((m=>{let E=ca();return n.forEach(((C,v)=>{const w=m.get(C);v.isFoundDocument()!==w.isFoundDocument()&&(h=h.add(C)),v.isNoDocument()&&v.version.isEqual(lt.min())?(e.removeEntry(C,v.readTime),E=E.insert(C,v)):!w.isValidDocument()||v.version.compareTo(w.version)>0||v.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(v),E=E.insert(C,v)):ze(W0,"Ignoring outdated watch update for ",C,". Current version:",w.version," Watch version:",v.version)})),{ks:E,qs:h}}))}function xb(a,e){const n=dt(a);return n.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=L0),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function Ab(a,e){const n=dt(a);return n.persistence.runTransaction("Allocate target","readwrite",(o=>{let h;return n.Pi.getTargetData(o,e).next((m=>m?(h=m,we.resolve(h)):n.Pi.allocateTargetId(o).next((E=>(h=new Qa(e,E,"TargetPurposeListen",o.currentSequenceNumber),n.Pi.addTargetData(o,h).next((()=>h)))))))})).then((o=>{const h=n.Ms.get(o.targetId);return(h===null||o.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(o.targetId,o),n.xs.set(e,o.targetId)),o}))}async function d0(a,e,n){const o=dt(a),h=o.Ms.get(e),m=n?"readwrite":"readwrite-primary";try{n||await o.persistence.runTransaction("Release target",m,(E=>o.persistence.referenceDelegate.removeTarget(E,h)))}catch(E){if(!ec(E))throw E;ze(W0,`Failed to update sequence numbers for target ${e}: ${E}`)}o.Ms=o.Ms.remove(e),o.xs.delete(h.target)}function Ly(a,e,n){const o=dt(a);let h=lt.min(),m=Bt();return o.persistence.runTransaction("Execute query","readwrite",(E=>(function(v,w,D){const M=dt(v),z=M.xs.get(D);return z!==void 0?we.resolve(M.Ms.get(z)):M.Pi.getTargetData(w,D)})(o,E,Ts(e)).next((C=>{if(C)return h=C.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(E,C.targetId).next((v=>{m=v}))})).next((()=>o.Fs.getDocumentsMatchingQuery(E,e,n?h:lt.min(),n?m:Bt()))).next((C=>(wb(o,oS(e),C),{documents:C,Qs:m})))))}function wb(a,e,n){let o=a.Os.get(e)||lt.min();n.forEach(((h,m)=>{m.readTime.compareTo(o)>0&&(o=m.readTime)})),a.Os.set(e,o)}class ky{constructor(){this.activeTargetIds=dS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Tb{constructor(){this.Mo=new ky,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,o){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ky,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Cb{Oo(e){}shutdown(){}}const By="ConnectivityMonitor";class Vy{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ze(By,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ze(By,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Dh=null;function g0(){return Dh===null?Dh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Dh++,"0x"+Dh.toString(16)}const z1="RestConnection",vb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Sb{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),h=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${o}/databases/${h}`,this.Wo=this.databaseId.database===$h?`project_id=${o}`:`project_id=${o}&database_id=${h}`}Go(e,n,o,h,m){const E=g0(),C=this.zo(e,n.toUriEncodedString());ze(z1,`Sending RPC '${e}' ${E}:`,C,o);const v={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(v,h,m);const{host:w}=new URL(C),D=Wl(w);return this.Jo(e,C,v,o,D).then((M=>(ze(z1,`Received RPC '${e}' ${E}: `,M),M)),(M=>{throw jl(z1,`RPC '${e}' ${E} failed with error: `,M,"url: ",C,"request:",o),M}))}Ho(e,n,o,h,m,E){return this.Go(e,n,o,h,m)}jo(e,n,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Jl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((h,m)=>e[m]=h)),o&&o.headers.forEach(((h,m)=>e[m]=h))}zo(e,n){const o=vb[e];return`${this.Uo}/v1/${n}:${o}`}terminate(){}}class bb{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ui="WebChannelConnection";class Ib extends Sb{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,o,h,m){const E=g0();return new Promise(((C,v)=>{const w=new uE;w.setWithCredentials(!0),w.listenOnce(hE.COMPLETE,(()=>{try{switch(w.getLastErrorCode()){case Vh.NO_ERROR:const M=w.getResponseJson();ze(Ui,`XHR for RPC '${e}' ${E} received:`,JSON.stringify(M)),C(M);break;case Vh.TIMEOUT:ze(Ui,`RPC '${e}' ${E} timed out`),v(new Ve(xe.DEADLINE_EXCEEDED,"Request time out"));break;case Vh.HTTP_ERROR:const z=w.getStatus();if(ze(Ui,`RPC '${e}' ${E} failed with status:`,z,"response text:",w.getResponseText()),z>0){let te=w.getResponseJson();Array.isArray(te)&&(te=te[0]);const _e=te?.error;if(_e&&_e.status&&_e.message){const pe=(function(je){const Pe=je.toLowerCase().replace(/_/g,"-");return Object.values(xe).indexOf(Pe)>=0?Pe:xe.UNKNOWN})(_e.status);v(new Ve(pe,_e.message))}else v(new Ve(xe.UNKNOWN,"Server responded with status "+w.getStatus()))}else v(new Ve(xe.UNAVAILABLE,"Connection failed."));break;default:st(9055,{l_:e,streamId:E,h_:w.getLastErrorCode(),P_:w.getLastError()})}}finally{ze(Ui,`RPC '${e}' ${E} completed.`)}}));const D=JSON.stringify(h);ze(Ui,`RPC '${e}' ${E} sending request:`,h),w.send(n,"POST",D,o,15)}))}T_(e,n,o){const h=g0(),m=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],E=gE(),C=dE(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(v.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(v.useFetchStreams=!0),this.jo(v.initMessageHeaders,n,o),v.encodeInitMessageHeaders=!0;const D=m.join("");ze(Ui,`Creating RPC '${e}' stream ${h}: ${D}`,v);const M=E.createWebChannel(D,v);this.I_(M);let z=!1,te=!1;const _e=new bb({Yo:ve=>{te?ze(Ui,`Not sending because RPC '${e}' stream ${h} is closed:`,ve):(z||(ze(Ui,`Opening RPC '${e}' stream ${h} transport.`),M.open(),z=!0),ze(Ui,`RPC '${e}' stream ${h} sending:`,ve),M.send(ve))},Zo:()=>M.close()}),pe=(ve,je,Pe)=>{ve.listen(je,(Ce=>{try{Pe(Ce)}catch(Be){setTimeout((()=>{throw Be}),0)}}))};return pe(M,jc.EventType.OPEN,(()=>{te||(ze(Ui,`RPC '${e}' stream ${h} transport opened.`),_e.o_())})),pe(M,jc.EventType.CLOSE,(()=>{te||(te=!0,ze(Ui,`RPC '${e}' stream ${h} transport closed`),_e.a_(),this.E_(M))})),pe(M,jc.EventType.ERROR,(ve=>{te||(te=!0,jl(Ui,`RPC '${e}' stream ${h} transport errored. Name:`,ve.name,"Message:",ve.message),_e.a_(new Ve(xe.UNAVAILABLE,"The operation could not be completed")))})),pe(M,jc.EventType.MESSAGE,(ve=>{if(!te){const je=ve.data[0];tn(!!je,16349);const Pe=je,Ce=Pe?.error||Pe[0]?.error;if(Ce){ze(Ui,`RPC '${e}' stream ${h} received error:`,Ce);const Be=Ce.status;let ct=(function(j){const B=Jn[j];if(B!==void 0)return WE(B)})(Be),ke=Ce.message;ct===void 0&&(ct=xe.INTERNAL,ke="Unknown error status: "+Be+" with message "+Ce.message),te=!0,_e.a_(new Ve(ct,ke)),M.close()}else ze(Ui,`RPC '${e}' stream ${h} received:`,je),_e.u_(je)}})),pe(C,fE.STAT_EVENT,(ve=>{ve.stat===t0.PROXY?ze(Ui,`RPC '${e}' stream ${h} detected buffering proxy`):ve.stat===t0.NOPROXY&&ze(Ui,`RPC '${e}' stream ${h} detected no buffering proxy`)})),setTimeout((()=>{_e.__()}),0),_e}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function j1(){return typeof document<"u"?document:null}function Rf(a){return new DS(a,!0)}class lx{constructor(e,n,o=1e3,h=1.5,m=6e4){this.Mi=e,this.timerId=n,this.d_=o,this.A_=h,this.R_=m,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),h=Math.max(0,n-o);h>0&&ze("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,h,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Uy="PersistentStream";class cx{constructor(e,n,o,h,m,E,C,v){this.Mi=e,this.S_=o,this.b_=h,this.connection=m,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=C,this.listener=v,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lx(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===xe.RESOURCE_EXHAUSTED?(la(n.toString()),la("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===xe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,h])=>{this.D_===n&&this.G_(o,h)}),(o=>{e((()=>{const h=new Ve(xe.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(h)}))}))}G_(e,n){const o=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((h=>{o((()=>this.z_(h)))})),this.stream.onMessage((h=>{o((()=>++this.F_==1?this.J_(h):this.onNext(h)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ze(Uy,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ze(Uy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Rb extends cx{constructor(e,n,o,h,m,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,h,E),this.serializer=m}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=LS(this.serializer,e),o=(function(m){if(!("targetChange"in m))return lt.min();const E=m.targetChange;return E.targetIds&&E.targetIds.length?lt.min():E.readTime?Cs(E.readTime):lt.min()})(e);return this.listener.H_(n,o)}Y_(e){const n={};n.database=f0(this.serializer),n.addTarget=(function(m,E){let C;const v=E.target;if(C=a0(v)?{documents:VS(m,v)}:{query:US(m,v).ft},C.targetId=E.targetId,E.resumeToken.approximateByteSize()>0){C.resumeToken=ZE(m,E.resumeToken);const w=c0(m,E.expectedCount);w!==null&&(C.expectedCount=w)}else if(E.snapshotVersion.compareTo(lt.min())>0){C.readTime=af(m,E.snapshotVersion.toTimestamp());const w=c0(m,E.expectedCount);w!==null&&(C.expectedCount=w)}return C})(this.serializer,e);const o=zS(this.serializer,e);o&&(n.labels=o),this.q_(n)}Z_(e){const n={};n.database=f0(this.serializer),n.removeTarget=e,this.q_(n)}}class Nb extends cx{constructor(e,n,o,h,m,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,h,E),this.serializer=m}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return tn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){tn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=BS(e.writeResults,e.commitTime),o=Cs(e.commitTime);return this.listener.na(o,n)}ra(){const e={};e.database=f0(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((o=>kS(this.serializer,o)))};this.q_(n)}}class Ob{}class Db extends Ob{constructor(e,n,o,h){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=h,this.ia=!1}sa(){if(this.ia)throw new Ve(xe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,o,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,E])=>this.connection.Go(e,u0(n,o),h,m,E))).catch((m=>{throw m.name==="FirebaseError"?(m.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Ve(xe.UNKNOWN,m.toString())}))}Ho(e,n,o,h,m){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([E,C])=>this.connection.Ho(e,u0(n,o),h,E,C,m))).catch((E=>{throw E.name==="FirebaseError"?(E.code===xe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),E):new Ve(xe.UNKNOWN,E.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Mb{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(la(n),this.aa=!1):ze("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Wo="RemoteStore";class Pb{constructor(e,n,o,h,m){this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=m,this.Aa.Oo((E=>{o.enqueueAndForget((async()=>{Zo(this)&&(ze(Wo,"Restarting streams for network reachability change."),await(async function(v){const w=dt(v);w.Ea.add(4),await yu(w),w.Ra.set("Unknown"),w.Ea.delete(4),await Nf(w)})(this))}))})),this.Ra=new Mb(o,h)}}async function Nf(a){if(Zo(a))for(const e of a.da)await e(!0)}async function yu(a){for(const e of a.da)await e(!1)}function ux(a,e){const n=dt(a);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),J0(n)?Z0(n):tc(n).O_()&&Q0(n,e))}function K0(a,e){const n=dt(a),o=tc(n);n.Ia.delete(e),o.O_()&&hx(n,e),n.Ia.size===0&&(o.O_()?o.L_():Zo(n)&&n.Ra.set("Unknown"))}function Q0(a,e){if(a.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(lt.min())>0){const n=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}tc(a).Y_(e)}function hx(a,e){a.Va.Ue(e),tc(a).Z_(e)}function Z0(a){a.Va=new IS({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),At:e=>a.Ia.get(e)||null,ht:()=>a.datastore.serializer.databaseId}),tc(a).start(),a.Ra.ua()}function J0(a){return Zo(a)&&!tc(a).x_()&&a.Ia.size>0}function Zo(a){return dt(a).Ea.size===0}function fx(a){a.Va=void 0}async function Lb(a){a.Ra.set("Online")}async function kb(a){a.Ia.forEach(((e,n)=>{Q0(a,e)}))}async function Bb(a,e){fx(a),J0(a)?(a.Ra.ha(e),Z0(a)):a.Ra.set("Unknown")}async function Vb(a,e,n){if(a.Ra.set("Online"),e instanceof QE&&e.state===2&&e.cause)try{await(async function(h,m){const E=m.cause;for(const C of m.targetIds)h.Ia.has(C)&&(await h.remoteSyncer.rejectListen(C,E),h.Ia.delete(C),h.Va.removeTarget(C))})(a,e)}catch(o){ze(Wo,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await lf(a,o)}else if(e instanceof jh?a.Va.Ze(e):e instanceof KE?a.Va.st(e):a.Va.tt(e),!n.isEqual(lt.min()))try{const o=await ox(a.localStore);n.compareTo(o)>=0&&await(function(m,E){const C=m.Va.Tt(E);return C.targetChanges.forEach(((v,w)=>{if(v.resumeToken.approximateByteSize()>0){const D=m.Ia.get(w);D&&m.Ia.set(w,D.withResumeToken(v.resumeToken,E))}})),C.targetMismatches.forEach(((v,w)=>{const D=m.Ia.get(v);if(!D)return;m.Ia.set(v,D.withResumeToken(Ni.EMPTY_BYTE_STRING,D.snapshotVersion)),hx(m,v);const M=new Qa(D.target,v,w,D.sequenceNumber);Q0(m,M)})),m.remoteSyncer.applyRemoteEvent(C)})(a,n)}catch(o){ze(Wo,"Failed to raise snapshot:",o),await lf(a,o)}}async function lf(a,e,n){if(!ec(e))throw e;a.Ea.add(1),await yu(a),a.Ra.set("Offline"),n||(n=()=>ox(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{ze(Wo,"Retrying IndexedDB access"),await n(),a.Ea.delete(1),await Nf(a)}))}function dx(a,e){return e().catch((n=>lf(a,n,e)))}async function Of(a){const e=dt(a),n=lo(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:L0;for(;Ub(e);)try{const h=await xb(e.localStore,o);if(h===null){e.Ta.length===0&&n.L_();break}o=h.batchId,Fb(e,h)}catch(h){await lf(e,h)}gx(e)&&mx(e)}function Ub(a){return Zo(a)&&a.Ta.length<10}function Fb(a,e){a.Ta.push(e);const n=lo(a);n.O_()&&n.X_&&n.ea(e.mutations)}function gx(a){return Zo(a)&&!lo(a).x_()&&a.Ta.length>0}function mx(a){lo(a).start()}async function zb(a){lo(a).ra()}async function jb(a){const e=lo(a);for(const n of a.Ta)e.ea(n.mutations)}async function Hb(a,e,n){const o=a.Ta.shift(),h=j0.from(o,e,n);await dx(a,(()=>a.remoteSyncer.applySuccessfulWrite(h))),await Of(a)}async function Gb(a,e){e&&lo(a).X_&&await(async function(o,h){if((function(E){return vS(E)&&E!==xe.ABORTED})(h.code)){const m=o.Ta.shift();lo(o).B_(),await dx(o,(()=>o.remoteSyncer.rejectFailedWrite(m.batchId,h))),await Of(o)}})(a,e),gx(a)&&mx(a)}async function Fy(a,e){const n=dt(a);n.asyncQueue.verifyOperationInProgress(),ze(Wo,"RemoteStore received new credentials");const o=Zo(n);n.Ea.add(3),await yu(n),o&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Nf(n)}async function qb(a,e){const n=dt(a);e?(n.Ea.delete(2),await Nf(n)):e||(n.Ea.add(2),await yu(n),n.Ra.set("Unknown"))}function tc(a){return a.ma||(a.ma=(function(n,o,h){const m=dt(n);return m.sa(),new Rb(o,m.connection,m.authCredentials,m.appCheckCredentials,m.serializer,h)})(a.datastore,a.asyncQueue,{Xo:Lb.bind(null,a),t_:kb.bind(null,a),r_:Bb.bind(null,a),H_:Vb.bind(null,a)}),a.da.push((async e=>{e?(a.ma.B_(),J0(a)?Z0(a):a.Ra.set("Unknown")):(await a.ma.stop(),fx(a))}))),a.ma}function lo(a){return a.fa||(a.fa=(function(n,o,h){const m=dt(n);return m.sa(),new Nb(o,m.connection,m.authCredentials,m.appCheckCredentials,m.serializer,h)})(a.datastore,a.asyncQueue,{Xo:()=>Promise.resolve(),t_:zb.bind(null,a),r_:Gb.bind(null,a),ta:jb.bind(null,a),na:Hb.bind(null,a)}),a.da.push((async e=>{e?(a.fa.B_(),await Of(a)):(await a.fa.stop(),a.Ta.length>0&&(ze(Wo,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}class $0{constructor(e,n,o,h,m){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=h,this.removalCallback=m,this.deferred=new no,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((E=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,h,m){const E=Date.now()+o,C=new $0(e,n,E,h,m);return C.start(o),C}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(xe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eg(a,e){if(la("AsyncQueue",`${e}: ${a}`),ec(a))return new Ve(xe.UNAVAILABLE,`${e}: ${a}`);throw a}class Ul{static emptySet(e){return new Ul(e.comparator)}constructor(e){this.comparator=e?(n,o)=>e(n,o)||Qe.comparator(n.key,o.key):(n,o)=>Qe.comparator(n.key,o.key),this.keyedMap=Hc(),this.sortedSet=new Pn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,o)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ul)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const h=n.getNext().key,m=o.getNext().key;if(!h.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const o=new Ul;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class zy{constructor(){this.ga=new Pn(Qe.comparator)}track(e){const n=e.doc.key,o=this.ga.get(n);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(n,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(n,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(n):e.type===1&&o.type===2?this.ga=this.ga.insert(n,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):st(63341,{Rt:e,pa:o}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,o)=>{e.push(o)})),e}}class Yl{constructor(e,n,o,h,m,E,C,v,w){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=h,this.mutatedKeys=m,this.fromCache=E,this.syncStateChanged=C,this.excludesMetadataChanges=v,this.hasCachedResults=w}static fromInitialDocuments(e,n,o,h,m){const E=[];return n.forEach((C=>{E.push({type:0,doc:C})})),new Yl(e,n,Ul.emptySet(n),E,o,h,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let h=0;h<n.length;h++)if(n[h].type!==o[h].type||!n[h].doc.isEqual(o[h].doc))return!1;return!0}}class Xb{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Yb{constructor(){this.queries=jy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,o){const h=dt(n),m=h.queries;h.queries=jy(),m.forEach(((E,C)=>{for(const v of C.Sa)v.onError(o)}))})(this,new Ve(xe.ABORTED,"Firestore shutting down"))}}function jy(){return new Qo((a=>kE(a)),Tf)}async function px(a,e){const n=dt(a);let o=3;const h=e.query;let m=n.queries.get(h);m?!m.ba()&&e.Da()&&(o=2):(m=new Xb,o=e.Da()?0:1);try{switch(o){case 0:m.wa=await n.onListen(h,!0);break;case 1:m.wa=await n.onListen(h,!1);break;case 2:await n.onFirstRemoteStoreListen(h)}}catch(E){const C=eg(E,`Initialization of query '${Ol(e.query)}' failed`);return void e.onError(C)}n.queries.set(h,m),m.Sa.push(e),e.va(n.onlineState),m.wa&&e.Fa(m.wa)&&tg(n)}async function yx(a,e){const n=dt(a),o=e.query;let h=3;const m=n.queries.get(o);if(m){const E=m.Sa.indexOf(e);E>=0&&(m.Sa.splice(E,1),m.Sa.length===0?h=e.Da()?0:1:!m.ba()&&e.Da()&&(h=2))}switch(h){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}function Wb(a,e){const n=dt(a);let o=!1;for(const h of e){const m=h.query,E=n.queries.get(m);if(E){for(const C of E.Sa)C.Fa(h)&&(o=!0);E.wa=h}}o&&tg(n)}function Kb(a,e,n){const o=dt(a),h=o.queries.get(e);if(h)for(const m of h.Sa)m.onError(n);o.queries.delete(e)}function tg(a){a.Ca.forEach((e=>{e.next()}))}var m0,Hy;(Hy=m0||(m0={})).Ma="default",Hy.Cache="cache";class _x{constructor(e,n,o){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const h of e.docChanges)h.type!==3&&o.push(h);e=new Yl(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const o=n!=="Offline";return(!this.options.qa||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==m0.Cache}}class Ex{constructor(e){this.key=e}}class xx{constructor(e){this.key=e}}class Qb{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Bt(),this.mutatedKeys=Bt(),this.eu=BE(e),this.tu=new Ul(this.eu)}get nu(){return this.Ya}ru(e,n){const o=n?n.iu:new zy,h=n?n.tu:this.tu;let m=n?n.mutatedKeys:this.mutatedKeys,E=h,C=!1;const v=this.query.limitType==="F"&&h.size===this.query.limit?h.last():null,w=this.query.limitType==="L"&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal(((D,M)=>{const z=h.get(D),te=Cf(this.query,M)?M:null,_e=!!z&&this.mutatedKeys.has(z.key),pe=!!te&&(te.hasLocalMutations||this.mutatedKeys.has(te.key)&&te.hasCommittedMutations);let ve=!1;z&&te?z.data.isEqual(te.data)?_e!==pe&&(o.track({type:3,doc:te}),ve=!0):this.su(z,te)||(o.track({type:2,doc:te}),ve=!0,(v&&this.eu(te,v)>0||w&&this.eu(te,w)<0)&&(C=!0)):!z&&te?(o.track({type:0,doc:te}),ve=!0):z&&!te&&(o.track({type:1,doc:z}),ve=!0,(v||w)&&(C=!0)),ve&&(te?(E=E.add(te),m=pe?m.add(D):m.delete(D)):(E=E.delete(D),m=m.delete(D)))})),this.query.limit!==null)for(;E.size>this.query.limit;){const D=this.query.limitType==="F"?E.last():E.first();E=E.delete(D.key),m=m.delete(D.key),o.track({type:1,doc:D})}return{tu:E,iu:o,Cs:C,mutatedKeys:m}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,h){const m=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const E=e.iu.ya();E.sort(((D,M)=>(function(te,_e){const pe=ve=>{switch(ve){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st(20277,{Rt:ve})}};return pe(te)-pe(_e)})(D.type,M.type)||this.eu(D.doc,M.doc))),this.ou(o),h=h??!1;const C=n&&!h?this._u():[],v=this.Xa.size===0&&this.current&&!h?1:0,w=v!==this.Za;return this.Za=v,E.length!==0||w?{snapshot:new Yl(this.query,e.tu,m,E,e.mutatedKeys,v===0,w,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:C}:{au:C}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Bt(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const n=[];return e.forEach((o=>{this.Xa.has(o)||n.push(new xx(o))})),this.Xa.forEach((o=>{e.has(o)||n.push(new Ex(o))})),n}cu(e){this.Ya=e.Qs,this.Xa=Bt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ng="SyncEngine";class Zb{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class Jb{constructor(e){this.key=e,this.hu=!1}}class $b{constructor(e,n,o,h,m,E){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=h,this.currentUser=m,this.maxConcurrentLimboResolutions=E,this.Pu={},this.Tu=new Qo((C=>kE(C)),Tf),this.Iu=new Map,this.Eu=new Set,this.du=new Pn(Qe.comparator),this.Au=new Map,this.Ru=new q0,this.Vu={},this.mu=new Map,this.fu=Xl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function eI(a,e,n=!0){const o=Sx(a);let h;const m=o.Tu.get(e);return m?(o.sharedClientState.addLocalQueryTarget(m.targetId),h=m.view.lu()):h=await Ax(o,e,n,!0),h}async function tI(a,e){const n=Sx(a);await Ax(n,e,!0,!1)}async function Ax(a,e,n,o){const h=await Ab(a.localStore,Ts(e)),m=h.targetId,E=a.sharedClientState.addLocalQueryTarget(m,n);let C;return o&&(C=await nI(a,e,m,E==="current",h.resumeToken)),a.isPrimaryClient&&n&&ux(a.remoteStore,h),C}async function nI(a,e,n,o,h){a.pu=(M,z,te)=>(async function(pe,ve,je,Pe){let Ce=ve.view.ru(je);Ce.Cs&&(Ce=await Ly(pe.localStore,ve.query,!1).then((({documents:V})=>ve.view.ru(V,Ce))));const Be=Pe&&Pe.targetChanges.get(ve.targetId),ct=Pe&&Pe.targetMismatches.get(ve.targetId)!=null,ke=ve.view.applyChanges(Ce,pe.isPrimaryClient,Be,ct);return qy(pe,ve.targetId,ke.au),ke.snapshot})(a,M,z,te);const m=await Ly(a.localStore,e,!0),E=new Qb(e,m.Qs),C=E.ru(m.documents),v=pu.createSynthesizedTargetChangeForCurrentChange(n,o&&a.onlineState!=="Offline",h),w=E.applyChanges(C,a.isPrimaryClient,v);qy(a,n,w.au);const D=new Zb(e,n,E);return a.Tu.set(e,D),a.Iu.has(n)?a.Iu.get(n).push(e):a.Iu.set(n,[e]),w.snapshot}async function iI(a,e,n){const o=dt(a),h=o.Tu.get(e),m=o.Iu.get(h.targetId);if(m.length>1)return o.Iu.set(h.targetId,m.filter((E=>!Tf(E,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(h.targetId),o.sharedClientState.isActiveQueryTarget(h.targetId)||await d0(o.localStore,h.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(h.targetId),n&&K0(o.remoteStore,h.targetId),p0(o,h.targetId)})).catch($l)):(p0(o,h.targetId),await d0(o.localStore,h.targetId,!0))}async function rI(a,e){const n=dt(a),o=n.Tu.get(e),h=n.Iu.get(o.targetId);n.isPrimaryClient&&h.length===1&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),K0(n.remoteStore,o.targetId))}async function sI(a,e,n){const o=fI(a);try{const h=await(function(E,C){const v=dt(E),w=xn.now(),D=C.reduce(((te,_e)=>te.add(_e.key)),Bt());let M,z;return v.persistence.runTransaction("Locally write mutations","readwrite",(te=>{let _e=ca(),pe=Bt();return v.Ns.getEntries(te,D).next((ve=>{_e=ve,_e.forEach(((je,Pe)=>{Pe.isValidDocument()||(pe=pe.add(je))}))})).next((()=>v.localDocuments.getOverlayedDocuments(te,_e))).next((ve=>{M=ve;const je=[];for(const Pe of C){const Ce=xS(Pe,M.get(Pe.key).overlayedDocument);Ce!=null&&je.push(new go(Pe.key,Ce,IE(Ce.value.mapValue),cr.exists(!0)))}return v.mutationQueue.addMutationBatch(te,w,je,C)})).next((ve=>{z=ve;const je=ve.applyToLocalDocumentSet(M,pe);return v.documentOverlayCache.saveOverlays(te,ve.batchId,je)}))})).then((()=>({batchId:z.batchId,changes:UE(M)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(h.batchId),(function(E,C,v){let w=E.Vu[E.currentUser.toKey()];w||(w=new Pn(kt)),w=w.insert(C,v),E.Vu[E.currentUser.toKey()]=w})(o,h.batchId,n),await _u(o,h.changes),await Of(o.remoteStore)}catch(h){const m=eg(h,"Failed to persist write");n.reject(m)}}async function wx(a,e){const n=dt(a);try{const o=await _b(n.localStore,e);e.targetChanges.forEach(((h,m)=>{const E=n.Au.get(m);E&&(tn(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1,22616),h.addedDocuments.size>0?E.hu=!0:h.modifiedDocuments.size>0?tn(E.hu,14607):h.removedDocuments.size>0&&(tn(E.hu,42227),E.hu=!1))})),await _u(n,o,e)}catch(o){await $l(o)}}function Gy(a,e,n){const o=dt(a);if(o.isPrimaryClient&&n===0||!o.isPrimaryClient&&n===1){const h=[];o.Tu.forEach(((m,E)=>{const C=E.view.va(e);C.snapshot&&h.push(C.snapshot)})),(function(E,C){const v=dt(E);v.onlineState=C;let w=!1;v.queries.forEach(((D,M)=>{for(const z of M.Sa)z.va(C)&&(w=!0)})),w&&tg(v)})(o.eventManager,e),h.length&&o.Pu.H_(h),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function aI(a,e,n){const o=dt(a);o.sharedClientState.updateQueryState(e,"rejected",n);const h=o.Au.get(e),m=h&&h.key;if(m){let E=new Pn(Qe.comparator);E=E.insert(m,zi.newNoDocument(m,lt.min()));const C=Bt().add(m),v=new If(lt.min(),new Map,new Pn(kt),E,C);await wx(o,v),o.du=o.du.remove(m),o.Au.delete(e),ig(o)}else await d0(o.localStore,e,!1).then((()=>p0(o,e,n))).catch($l)}async function oI(a,e){const n=dt(a),o=e.batch.batchId;try{const h=await yb(n.localStore,e);Cx(n,o,null),Tx(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),await _u(n,h)}catch(h){await $l(h)}}async function lI(a,e,n){const o=dt(a);try{const h=await(function(E,C){const v=dt(E);return v.persistence.runTransaction("Reject batch","readwrite-primary",(w=>{let D;return v.mutationQueue.lookupMutationBatch(w,C).next((M=>(tn(M!==null,37113),D=M.keys(),v.mutationQueue.removeMutationBatch(w,M)))).next((()=>v.mutationQueue.performConsistencyCheck(w))).next((()=>v.documentOverlayCache.removeOverlaysForBatchId(w,D,C))).next((()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,D))).next((()=>v.localDocuments.getDocuments(w,D)))}))})(o.localStore,e);Cx(o,e,n),Tx(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),await _u(o,h)}catch(h){await $l(h)}}function Tx(a,e){(a.mu.get(e)||[]).forEach((n=>{n.resolve()})),a.mu.delete(e)}function Cx(a,e,n){const o=dt(a);let h=o.Vu[o.currentUser.toKey()];if(h){const m=h.get(e);m&&(n?m.reject(n):m.resolve(),h=h.remove(e)),o.Vu[o.currentUser.toKey()]=h}}function p0(a,e,n=null){a.sharedClientState.removeLocalQueryTarget(e);for(const o of a.Iu.get(e))a.Tu.delete(o),n&&a.Pu.yu(o,n);a.Iu.delete(e),a.isPrimaryClient&&a.Ru.jr(e).forEach((o=>{a.Ru.containsKey(o)||vx(a,o)}))}function vx(a,e){a.Eu.delete(e.path.canonicalString());const n=a.du.get(e);n!==null&&(K0(a.remoteStore,n),a.du=a.du.remove(e),a.Au.delete(n),ig(a))}function qy(a,e,n){for(const o of n)o instanceof Ex?(a.Ru.addReference(o.key,e),cI(a,o)):o instanceof xx?(ze(ng,"Document no longer in limbo: "+o.key),a.Ru.removeReference(o.key,e),a.Ru.containsKey(o.key)||vx(a,o.key)):st(19791,{wu:o})}function cI(a,e){const n=e.key,o=n.path.canonicalString();a.du.get(n)||a.Eu.has(o)||(ze(ng,"New document in limbo: "+n),a.Eu.add(o),ig(a))}function ig(a){for(;a.Eu.size>0&&a.du.size<a.maxConcurrentLimboResolutions;){const e=a.Eu.values().next().value;a.Eu.delete(e);const n=new Qe(gn.fromString(e)),o=a.fu.next();a.Au.set(o,new Jb(n)),a.du=a.du.insert(n,o),ux(a.remoteStore,new Qa(Ts(F0(n.path)),o,"TargetPurposeLimboResolution",xf.ce))}}async function _u(a,e,n){const o=dt(a),h=[],m=[],E=[];o.Tu.isEmpty()||(o.Tu.forEach(((C,v)=>{E.push(o.pu(v,e,n).then((w=>{if((w||n)&&o.isPrimaryClient){const D=w?!w.fromCache:n?.targetChanges.get(v.targetId)?.current;o.sharedClientState.updateQueryState(v.targetId,D?"current":"not-current")}if(w){h.push(w);const D=Y0.As(v.targetId,w);m.push(D)}})))})),await Promise.all(E),o.Pu.H_(h),await(async function(v,w){const D=dt(v);try{await D.persistence.runTransaction("notifyLocalViewChanges","readwrite",(M=>we.forEach(w,(z=>we.forEach(z.Es,(te=>D.persistence.referenceDelegate.addReference(M,z.targetId,te))).next((()=>we.forEach(z.ds,(te=>D.persistence.referenceDelegate.removeReference(M,z.targetId,te)))))))))}catch(M){if(!ec(M))throw M;ze(W0,"Failed to update sequence numbers: "+M)}for(const M of w){const z=M.targetId;if(!M.fromCache){const te=D.Ms.get(z),_e=te.snapshotVersion,pe=te.withLastLimboFreeSnapshotVersion(_e);D.Ms=D.Ms.insert(z,pe)}}})(o.localStore,m))}async function uI(a,e){const n=dt(a);if(!n.currentUser.isEqual(e)){ze(ng,"User change. New user:",e.toKey());const o=await ax(n.localStore,e);n.currentUser=e,(function(m,E){m.mu.forEach((C=>{C.forEach((v=>{v.reject(new Ve(xe.CANCELLED,E))}))})),m.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await _u(n,o.Ls)}}function hI(a,e){const n=dt(a),o=n.Au.get(e);if(o&&o.hu)return Bt().add(o.key);{let h=Bt();const m=n.Iu.get(e);if(!m)return h;for(const E of m){const C=n.Tu.get(E);h=h.unionWith(C.view.nu)}return h}}function Sx(a){const e=dt(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=wx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aI.bind(null,e),e.Pu.H_=Wb.bind(null,e.eventManager),e.Pu.yu=Kb.bind(null,e.eventManager),e}function fI(a){const e=dt(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lI.bind(null,e),e}class cf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return pb(this.persistence,new db,e.initialUser,this.serializer)}Cu(e){return new sx(X0.mi,this.serializer)}Du(e){return new Tb}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cf.provider={build:()=>new cf};class dI extends cf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){tn(this.persistence.referenceDelegate instanceof of,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new JS(o,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?or.withCacheSize(this.cacheSizeBytes):or.DEFAULT;return new sx((o=>of.mi(o,n)),this.serializer)}}class y0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>Gy(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=uI.bind(null,this.syncEngine),await qb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Yb})()}createDatastore(e){const n=Rf(e.databaseInfo.databaseId),o=(function(m){return new Ib(m)})(e.databaseInfo);return(function(m,E,C,v){return new Db(m,E,C,v)})(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return(function(o,h,m,E,C){return new Pb(o,h,m,E,C)})(this.localStore,this.datastore,e.asyncQueue,(n=>Gy(this.syncEngine,n,0)),(function(){return Vy.v()?new Vy:new Cb})())}createSyncEngine(e,n){return(function(h,m,E,C,v,w,D){const M=new $b(h,m,E,C,v,w);return D&&(M.gu=!0),M})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const o=dt(n);ze(Wo,"RemoteStore shutting down."),o.Ea.add(5),await yu(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}y0.provider={build:()=>new y0};class bx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):la("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const co="FirestoreClient";class gI{constructor(e,n,o,h,m){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=h,this.user=Fi.UNAUTHENTICATED,this.clientId=P0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=m,this.authCredentials.start(o,(async E=>{ze(co,"Received user=",E.uid),await this.authCredentialListener(E),this.user=E})),this.appCheckCredentials.start(o,(E=>(ze(co,"Received new app check token=",E),this.appCheckCredentialListener(E,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new no;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const o=eg(n,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function H1(a,e){a.asyncQueue.verifyOperationInProgress(),ze(co,"Initializing OfflineComponentProvider");const n=a.configuration;await e.initialize(n);let o=n.initialUser;a.setCredentialChangeListener((async h=>{o.isEqual(h)||(await ax(e.localStore,h),o=h)})),e.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=e}async function Xy(a,e){a.asyncQueue.verifyOperationInProgress();const n=await mI(a);ze(co,"Initializing OnlineComponentProvider"),await e.initialize(n,a.configuration),a.setCredentialChangeListener((o=>Fy(e.remoteStore,o))),a.setAppCheckTokenChangeListener(((o,h)=>Fy(e.remoteStore,h))),a._onlineComponents=e}async function mI(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){ze(co,"Using user provided OfflineComponentProvider");try{await H1(a,a._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(h){return h.name==="FirebaseError"?h.code===xe.FAILED_PRECONDITION||h.code===xe.UNIMPLEMENTED:!(typeof DOMException<"u"&&h instanceof DOMException)||h.code===22||h.code===20||h.code===11})(n))throw n;jl("Error using user provided cache. Falling back to memory cache: "+n),await H1(a,new cf)}}else ze(co,"Using default OfflineComponentProvider"),await H1(a,new dI(void 0));return a._offlineComponents}async function Ix(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(ze(co,"Using user provided OnlineComponentProvider"),await Xy(a,a._uninitializedComponentsProvider._online)):(ze(co,"Using default OnlineComponentProvider"),await Xy(a,new y0))),a._onlineComponents}function pI(a){return Ix(a).then((e=>e.syncEngine))}async function _0(a){const e=await Ix(a),n=e.eventManager;return n.onListen=eI.bind(null,e.syncEngine),n.onUnlisten=iI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rI.bind(null,e.syncEngine),n}function yI(a,e,n={}){const o=new no;return a.asyncQueue.enqueueAndForget((async()=>(function(m,E,C,v,w){const D=new bx({next:z=>{D.Nu(),E.enqueueAndForget((()=>yx(m,M))),z.fromCache&&v.source==="server"?w.reject(new Ve(xe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(z)},error:z=>w.reject(z)}),M=new _x(C,D,{includeMetadataChanges:!0,qa:!0});return px(m,M)})(await _0(a),a.asyncQueue,e,n,o))),o.promise}function Rx(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}const Yy=new Map;const Nx="firestore.googleapis.com",Wy=!0;class Ky{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(xe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Nx,this.ssl=Wy}else this.host=e.host,this.ssl=e.ssl??Wy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<QS)throw new Ve(xe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Pv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rx(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ve(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ve(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ve(xe.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,h){return o.timeoutSeconds===h.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Df{constructor(e,n,o,h){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ky({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(xe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(xe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ky(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new Cv;switch(o.type){case"firstParty":return new Iv(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new Ve(xe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const o=Yy.get(n);o&&(ze("ComponentProvider","Removing Datastore"),Yy.delete(n),o.terminate())})(this),Promise.resolve()}}function _I(a,e,n,o={}){a=os(a,Df);const h=Wl(e),m=a._getSettings(),E={...m,emulatorOptions:a._getEmulatorOptions()},C=`${e}:${n}`;h&&(w_(`https://${C}`),T_("Firestore",!0)),m.host!==Nx&&m.host!==C&&jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v={...m,host:C,ssl:h,emulatorOptions:o};if(!Go(v,E)&&(a._setSettings(v),o.mockUserToken)){let w,D;if(typeof o.mockUserToken=="string")w=o.mockUserToken,D=Fi.MOCK_USER;else{w=Lw(o.mockUserToken,a._app?.options.projectId);const M=o.mockUserToken.sub||o.mockUserToken.user_id;if(!M)throw new Ve(xe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");D=new Fi(M)}a._authCredentials=new vv(new pE(w,D))}}class Jo{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Jo(this.firestore,e,this._query)}}class ti{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new io(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ti(this.firestore,e,this._key)}toJSON(){return{type:ti._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,o){if(du(n,ti._jsonSchema))return new ti(e,o||null,new Qe(gn.fromString(n.referencePath)))}}ti._jsonSchemaVersion="firestore/documentReference/1.0",ti._jsonSchema={type:ei("string",ti._jsonSchemaVersion),referencePath:ei("string")};class io extends Jo{constructor(e,n,o){super(e,n,F0(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ti(this.firestore,null,new Qe(e))}withConverter(e){return new io(this.firestore,e,this._path)}}function Wr(a,e,...n){if(a=Xn(a),yE("collection","path",e),a instanceof Df){const o=gn.fromString(e,...n);return ly(o),new io(a,null,o)}{if(!(a instanceof ti||a instanceof io))throw new Ve(xe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(gn.fromString(e,...n));return ly(o),new io(a.firestore,null,o)}}function qa(a,e,...n){if(a=Xn(a),arguments.length===1&&(e=P0.newId()),yE("doc","path",e),a instanceof Df){const o=gn.fromString(e,...n);return oy(o),new ti(a,null,new Qe(o))}{if(!(a instanceof ti||a instanceof io))throw new Ve(xe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=a._path.child(gn.fromString(e,...n));return oy(o),new ti(a.firestore,a instanceof io?a.converter:null,new Qe(o))}}const Qy="AsyncQueue";class Zy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lx(this,"async_queue_retry"),this._c=()=>{const o=j1();o&&ze(Qy,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const n=j1();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=j1();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new no;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ec(e))throw e;ze(Qy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,la("INTERNAL UNHANDLED ERROR: ",Jy(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=n,n}enqueueAfterDelay(e,n,o){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const h=$0.createAndSchedule(this,e,n,o,(m=>this.hc(m)));return this.tc.push(h),h}uc(){this.nc&&st(47125,{Pc:Jy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,o)=>n.targetTimeMs-o.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Jy(a){let e=a.message||"";return a.stack&&(e=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),e}function $y(a){return(function(n,o){if(typeof n!="object"||n===null)return!1;const h=n;for(const m of o)if(m in h&&typeof h[m]=="function")return!0;return!1})(a,["next","error","complete"])}class uo extends Df{constructor(e,n,o,h){super(e,n,o,h),this.type="firestore",this._queue=new Zy,this._persistenceKey=h?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zy(e),this._firestoreClient=void 0,await e}}}function EI(a,e){const n=typeof a=="object"?a:b_(),o=typeof a=="string"?a:$h,h=C0(n,"firestore").getImmediate({identifier:o});if(!h._initialized){const m=Mw("firestore");m&&_I(h,...m)}return h}function Mf(a){if(a._terminated)throw new Ve(xe.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||xI(a),a._firestoreClient}function xI(a){const e=a._freezeSettings(),n=(function(h,m,E,C){return new qv(h,m,E,C.host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,Rx(C.experimentalLongPollingOptions),C.useFetchStreams,C.isUsingEmulator)})(a._databaseId,a._app?.options.appId||"",a._persistenceKey,e);a._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(a._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),a._firestoreClient=new gI(a._authCredentials,a._appCheckCredentials,a._queue,n,a._componentsProvider&&(function(h){const m=h?._online.build();return{_offline:h?._offline.build(m),_online:m}})(a._componentsProvider))}class Kr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kr(Ni.fromBase64String(e))}catch(n){throw new Ve(xe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kr(Ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(du(e,Kr._jsonSchema))return Kr.fromBase64String(e.bytes)}}Kr._jsonSchemaVersion="firestore/bytes/1.0",Kr._jsonSchema={type:ei("string",Kr._jsonSchemaVersion),bytes:ei("string")};class Eu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ve(xe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ri(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class rg{constructor(e){this._methodName=e}}class vs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ve(xe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ve(xe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vs._jsonSchemaVersion}}static fromJSON(e){if(du(e,vs._jsonSchema))return new vs(e.latitude,e.longitude)}}vs._jsonSchemaVersion="firestore/geoPoint/1.0",vs._jsonSchema={type:ei("string",vs._jsonSchemaVersion),latitude:ei("number"),longitude:ei("number")};class Ss{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,h){if(o.length!==h.length)return!1;for(let m=0;m<o.length;++m)if(o[m]!==h[m])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ss._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(du(e,Ss._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Ss(e.vectorValues);throw new Ve(xe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ss._jsonSchemaVersion="firestore/vectorValue/1.0",Ss._jsonSchema={type:ei("string",Ss._jsonSchemaVersion),vectorValues:ei("object")};const AI=/^__.*__$/;class wI{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return this.fieldMask!==null?new go(e,this.data,this.fieldMask,n,this.fieldTransforms):new mu(e,this.data,n,this.fieldTransforms)}}class Ox{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new go(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Dx(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st(40011,{Ac:a})}}class sg{constructor(e,n,o,h,m,E){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=h,m===void 0&&this.Rc(),this.fieldTransforms=m||[],this.fieldMask=E||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new sg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),o=this.Vc({path:n,fc:!1});return o.gc(e),o}yc(e){const n=this.path?.child(e),o=this.Vc({path:n,fc:!1});return o.Rc(),o}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return uf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Dx(this.Ac)&&AI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class TI{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||Rf(e)}Cc(e,n,o,h=!1){return new sg({Ac:e,methodName:n,Dc:o,path:Ri.emptyPath(),fc:!1,bc:h},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pf(a){const e=a._freezeSettings(),n=Rf(a._databaseId);return new TI(a._databaseId,!!e.ignoreUndefinedProperties,n)}function Mx(a,e,n,o,h,m={}){const E=a.Cc(m.merge||m.mergeFields?2:0,e,n,h);ag("Data must be an object, but it was:",E,o);const C=kx(o,E);let v,w;if(m.merge)v=new Rr(E.fieldMask),w=E.fieldTransforms;else if(m.mergeFields){const D=[];for(const M of m.mergeFields){const z=E0(e,M,n);if(!E.contains(z))throw new Ve(xe.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);Vx(D,z)||D.push(z)}v=new Rr(D),w=E.fieldTransforms.filter((M=>v.covers(M.field)))}else v=null,w=E.fieldTransforms;return new wI(new lr(C),v,w)}class Lf extends rg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lf}}function Px(a,e,n,o){const h=a.Cc(1,e,n);ag("Data must be an object, but it was:",h,o);const m=[],E=lr.empty();fo(o,((v,w)=>{const D=og(e,v,n);w=Xn(w);const M=h.yc(D);if(w instanceof Lf)m.push(D);else{const z=xu(w,M);z!=null&&(m.push(D),E.set(D,z))}}));const C=new Rr(m);return new Ox(E,C,h.fieldTransforms)}function Lx(a,e,n,o,h,m){const E=a.Cc(1,e,n),C=[E0(e,o,n)],v=[h];if(m.length%2!=0)throw new Ve(xe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<m.length;z+=2)C.push(E0(e,m[z])),v.push(m[z+1]);const w=[],D=lr.empty();for(let z=C.length-1;z>=0;--z)if(!Vx(w,C[z])){const te=C[z];let _e=v[z];_e=Xn(_e);const pe=E.yc(te);if(_e instanceof Lf)w.push(te);else{const ve=xu(_e,pe);ve!=null&&(w.push(te),D.set(te,ve))}}const M=new Rr(w);return new Ox(D,M,E.fieldTransforms)}function CI(a,e,n,o=!1){return xu(n,a.Cc(o?4:3,e))}function xu(a,e){if(Bx(a=Xn(a)))return ag("Unsupported field value:",e,a),kx(a,e);if(a instanceof rg)return(function(o,h){if(!Dx(h.Ac))throw h.Sc(`${o._methodName}() can only be used with update() and set()`);if(!h.path)throw h.Sc(`${o._methodName}() is not currently supported inside arrays`);const m=o._toFieldTransform(h);m&&h.fieldTransforms.push(m)})(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(o,h){const m=[];let E=0;for(const C of o){let v=xu(C,h.wc(E));v==null&&(v={nullValue:"NULL_VALUE"}),m.push(v),E++}return{arrayValue:{values:m}}})(a,e)}return(function(o,h){if((o=Xn(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return gS(h.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const m=xn.fromDate(o);return{timestampValue:af(h.serializer,m)}}if(o instanceof xn){const m=new xn(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:af(h.serializer,m)}}if(o instanceof vs)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Kr)return{bytesValue:ZE(h.serializer,o._byteString)};if(o instanceof ti){const m=h.databaseId,E=o.firestore._databaseId;if(!E.isEqual(m))throw h.Sc(`Document reference is for database ${E.projectId}/${E.database} but should be for database ${m.projectId}/${m.database}`);return{referenceValue:G0(o.firestore._databaseId||h.databaseId,o._key.path)}}if(o instanceof Ss)return(function(E,C){return{mapValue:{fields:{[SE]:{stringValue:bE},[ef]:{arrayValue:{values:E.toArray().map((w=>{if(typeof w!="number")throw C.Sc("VectorValues must only contain numeric values.");return z0(C.serializer,w)}))}}}}}})(o,h);throw h.Sc(`Unsupported field value: ${Ef(o)}`)})(a,e)}function kx(a,e){const n={};return xE(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fo(a,((o,h)=>{const m=xu(h,e.mc(o));m!=null&&(n[o]=m)})),{mapValue:{fields:n}}}function Bx(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof xn||a instanceof vs||a instanceof Kr||a instanceof ti||a instanceof rg||a instanceof Ss)}function ag(a,e,n){if(!Bx(n)||!_E(n)){const o=Ef(n);throw o==="an object"?e.Sc(a+" a custom object"):e.Sc(a+" "+o)}}function E0(a,e,n){if((e=Xn(e))instanceof Eu)return e._internalPath;if(typeof e=="string")return og(a,e);throw uf("Field path arguments must be of type string or ",a,!1,void 0,n)}const vI=new RegExp("[~\\*/\\[\\]]");function og(a,e,n){if(e.search(vI)>=0)throw uf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,n);try{return new Eu(...e.split("."))._internalPath}catch{throw uf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,n)}}function uf(a,e,n,o,h){const m=o&&!o.isEmpty(),E=h!==void 0;let C=`Function ${e}() called with invalid data`;n&&(C+=" (via `toFirestore()`)"),C+=". ";let v="";return(m||E)&&(v+=" (found",m&&(v+=` in field ${o}`),E&&(v+=` in document ${h}`),v+=")"),new Ve(xe.INVALID_ARGUMENT,C+a+v)}function Vx(a,e){return a.some((n=>n.isEqual(e)))}class Ux{constructor(e,n,o,h,m){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=h,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new ti(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SI extends Ux{data(){return super.data()}}function lg(a,e){return typeof e=="string"?og(a,e):e instanceof Eu?e._internalPath:e._delegate._internalPath}function Fx(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new Ve(xe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cg{}class bI extends cg{}function Vc(a,e,...n){let o=[];e instanceof cg&&o.push(e),o=o.concat(n),(function(m){const E=m.filter((v=>v instanceof ug)).length,C=m.filter((v=>v instanceof kf)).length;if(E>1||E>0&&C>0)throw new Ve(xe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const h of o)a=h._apply(a);return a}class kf extends bI{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new kf(e,n,o)}_apply(e){const n=this._parse(e);return zx(e._query,n),new Jo(e.firestore,e.converter,o0(e._query,n))}_parse(e){const n=Pf(e.firestore);return(function(m,E,C,v,w,D,M){let z;if(w.isKeyField()){if(D==="array-contains"||D==="array-contains-any")throw new Ve(xe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if(D==="in"||D==="not-in"){t_(M,D);const _e=[];for(const pe of M)_e.push(e_(v,m,pe));z={arrayValue:{values:_e}}}else z=e_(v,m,M)}else D!=="in"&&D!=="not-in"&&D!=="array-contains-any"||t_(M,D),z=CI(C,E,M,D==="in"||D==="not-in");return $n.create(w,D,z)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function II(a,e,n){const o=e,h=lg("where",a);return kf._create(h,o,n)}class ug extends cg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ug(e,n)}_parse(e){const n=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return n.length===1?n[0]:cs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(h,m){let E=h;const C=m.getFlattenedFilters();for(const v of C)zx(E,v),E=o0(E,v)})(e._query,n),new Jo(e.firestore,e.converter,o0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function e_(a,e,n){if(typeof(n=Xn(n))=="string"){if(n==="")throw new Ve(xe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!LE(e)&&n.indexOf("/")!==-1)throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(gn.fromString(n));if(!Qe.isDocumentKey(o))throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return py(a,new Qe(o))}if(n instanceof ti)return py(a,n._key);throw new Ve(xe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ef(n)}.`)}function t_(a,e){if(!Array.isArray(a)||a.length===0)throw new Ve(xe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zx(a,e){const n=(function(h,m){for(const E of h)for(const C of E.getFlattenedFilters())if(m.indexOf(C.op)>=0)return C.op;return null})(a.filters,(function(h){switch(h){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ve(xe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ve(xe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class RI{convertValue(e,n="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ao(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw st(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return fo(e,((h,m)=>{o[h]=this.convertValue(m,n)})),o}convertVectorValue(e){const n=e.fields?.[ef].arrayValue?.values?.map((o=>qn(o.doubleValue)));return new Ss(n)}convertGeoPoint(e){return new vs(qn(e.latitude),qn(e.longitude))}convertArray(e,n){return(e.values||[]).map((o=>this.convertValue(o,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const o=wf(e);return o==null?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(iu(e));default:return null}}convertTimestamp(e){const n=so(e);return new xn(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=gn.fromString(e);tn(ix(o),9688,{name:e});const h=new ru(o.get(1),o.get(3)),m=new Qe(o.popFirst(5));return h.isEqual(n)||la(`Document ${m} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),m}}function jx(a,e,n){let o;return o=a?n&&(n.merge||n.mergeFields)?a.toFirestore(e,n):a.toFirestore(e):e,o}class qc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jo extends Ux{constructor(e,n,o,h,m,E){super(e,n,o,h,E),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(lg("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(xe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=jo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}jo._jsonSchemaVersion="firestore/documentSnapshot/1.0",jo._jsonSchema={type:ei("string",jo._jsonSchemaVersion),bundleSource:ei("string","DocumentSnapshot"),bundleName:ei("string"),bundle:ei("string")};class Hh extends jo{data(e={}){return super.data(e)}}class Ho{constructor(e,n,o,h){this._firestore=e,this._userDataWriter=n,this._snapshot=h,this.metadata=new qc(h.hasPendingWrites,h.fromCache),this.query=o}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((o=>{e.call(n,new Hh(this._firestore,this._userDataWriter,o.key,o,new qc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ve(xe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(h,m){if(h._snapshot.oldDocs.isEmpty()){let E=0;return h._snapshot.docChanges.map((C=>{const v=new Hh(h._firestore,h._userDataWriter,C.doc.key,C.doc,new qc(h._snapshot.mutatedKeys.has(C.doc.key),h._snapshot.fromCache),h.query.converter);return C.doc,{type:"added",doc:v,oldIndex:-1,newIndex:E++}}))}{let E=h._snapshot.oldDocs;return h._snapshot.docChanges.filter((C=>m||C.type!==3)).map((C=>{const v=new Hh(h._firestore,h._userDataWriter,C.doc.key,C.doc,new qc(h._snapshot.mutatedKeys.has(C.doc.key),h._snapshot.fromCache),h.query.converter);let w=-1,D=-1;return C.type!==0&&(w=E.indexOf(C.doc.key),E=E.delete(C.doc.key)),C.type!==1&&(E=E.add(C.doc),D=E.indexOf(C.doc.key)),{type:NI(C.type),doc:v,oldIndex:w,newIndex:D}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(xe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ho._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=P0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],o=[],h=[];return this.docs.forEach((m=>{m._document!==null&&(n.push(m._document),o.push(this._userDataWriter.convertObjectMap(m._document.data.value.mapValue.fields,"previous")),h.push(m.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function NI(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st(61501,{type:a})}}Ho._jsonSchemaVersion="firestore/querySnapshot/1.0",Ho._jsonSchema={type:ei("string",Ho._jsonSchemaVersion),bundleSource:ei("string","QuerySnapshot"),bundleName:ei("string"),bundle:ei("string")};class hg extends RI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ti(this.firestore,null,n)}}function n_(a){a=os(a,Jo);const e=os(a.firestore,uo),n=Mf(e),o=new hg(e);return Fx(a._query),yI(n,a._query).then((h=>new Ho(e,o,a,h)))}function G1(a,e,n,...o){a=os(a,ti);const h=os(a.firestore,uo),m=Pf(h);let E;return E=typeof(e=Xn(e))=="string"||e instanceof Eu?Lx(m,"updateDoc",a._key,e,n,o):Px(m,"updateDoc",a._key,e),Bf(h,[E.toMutation(a._key,cr.exists(!0))])}function i_(a){return Bf(os(a.firestore,uo),[new bf(a._key,cr.none())])}function Uc(a,e){const n=os(a.firestore,uo),o=qa(a),h=jx(a.converter,e);return Bf(n,[Mx(Pf(a.firestore),"addDoc",o._key,h,a.converter!==null,{}).toMutation(o._key,cr.exists(!1))]).then((()=>o))}function Mh(a,...e){a=Xn(a);let n={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||$y(e[o])||(n=e[o++]);const h={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if($y(e[o])){const v=e[o];e[o]=v.next?.bind(v),e[o+1]=v.error?.bind(v),e[o+2]=v.complete?.bind(v)}let m,E,C;if(a instanceof ti)E=os(a.firestore,uo),C=F0(a._key.path),m={next:v=>{e[o]&&e[o](OI(E,a,v))},error:e[o+1],complete:e[o+2]};else{const v=os(a,Jo);E=os(v.firestore,uo),C=v._query;const w=new hg(E);m={next:D=>{e[o]&&e[o](new Ho(E,w,v,D))},error:e[o+1],complete:e[o+2]},Fx(a._query)}return(function(w,D,M,z){const te=new bx(z),_e=new _x(D,te,M);return w.asyncQueue.enqueueAndForget((async()=>px(await _0(w),_e))),()=>{te.Nu(),w.asyncQueue.enqueueAndForget((async()=>yx(await _0(w),_e)))}})(Mf(E),C,h,m)}function Bf(a,e){return(function(o,h){const m=new no;return o.asyncQueue.enqueueAndForget((async()=>sI(await pI(o),h,m))),m.promise})(Mf(a),e)}function OI(a,e,n){const o=n.docs.get(e._key),h=new hg(a);return new jo(a,h,e._key,o,new qc(n.hasPendingWrites,n.fromCache),e.converter)}class DI{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Pf(e)}set(e,n,o){this._verifyNotCommitted();const h=q1(e,this._firestore),m=jx(h.converter,n,o),E=Mx(this._dataReader,"WriteBatch.set",h._key,m,h.converter!==null,o);return this._mutations.push(E.toMutation(h._key,cr.none())),this}update(e,n,o,...h){this._verifyNotCommitted();const m=q1(e,this._firestore);let E;return E=typeof(n=Xn(n))=="string"||n instanceof Eu?Lx(this._dataReader,"WriteBatch.update",m._key,n,o,h):Px(this._dataReader,"WriteBatch.update",m._key,n),this._mutations.push(E.toMutation(m._key,cr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=q1(e,this._firestore);return this._mutations=this._mutations.concat(new bf(n._key,cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(xe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function q1(a,e){if((a=Xn(a)).firestore!==e)throw new Ve(xe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}function r_(a){return Mf(a=os(a,uo)),new DI(a,(e=>Bf(a,e)))}(function(e,n=!0){(function(h){Jl=h})(Kl),Fl(new qo("firestore",((o,{instanceIdentifier:h,options:m})=>{const E=o.getProvider("app").getImmediate(),C=new uo(new Sv(o.getProvider("auth-internal")),new Rv(E,o.getProvider("app-check-internal")),(function(w,D){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new Ve(xe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ru(w.options.projectId,D)})(E,h),E);return m={useFetchStreams:n,...m},C._setSettings(m),C}),"PUBLIC").setMultipleInstances(!0)),$a(iy,ry,e),$a(iy,ry,"esm2020")})();const MI={apiKey:"AIzaSyB5M2V4De0XU5y--e09NPStfuKjSr0DAdQ",authDomain:"faktureapp.firebaseapp.com",projectId:"faktureapp",storageBucket:"faktureapp.firebasestorage.app",messagingSenderId:"23563095646",appId:"1:23563095646:web:a707840c2dc8c9733aeecf"},Hx=S_(MI),X1=xv(Hx),Zn=EI(Hx),Gx=tt.createContext(void 0),Vf=()=>{const a=tt.useContext(Gx);if(a===void 0)throw new Error("useAuth must be used within an AuthProvider");return a},PI=({children:a})=>{const[e,n]=tt.useState(null),[o,h]=tt.useState(!0);tt.useEffect(()=>lC(X1,w=>{n(w),h(!1)}),[]);const C={currentUser:e,loading:o,signIn:async(v,w)=>{await sC(X1,v,w)},signOut:async()=>{await cC(X1)}};return X.jsx(Gx.Provider,{value:C,children:a})},qx=tt.createContext(void 0),Au=()=>{const a=tt.useContext(qx);if(a===void 0)throw new Error("usePharmacy must be used within a PharmacyProvider");return a},LI=["tableta","ampula","ferveta","komad","litar","ml","gram","kutija"],kI=({children:a})=>{const[e,n]=tt.useState([]),[o,h]=tt.useState([]),[m,E]=tt.useState([]),[C,v]=tt.useState([]),[w,D]=tt.useState(!0),{currentUser:M}=Vf(),z=async()=>{if((await n_(Wr(Zn,"pharmacy_units"))).empty){const q=r_(Zn);for(const F of LI){const Ue=qa(Wr(Zn,"pharmacy_units"));q.set(Ue,{name:F,createdAt:Date.now()})}await q.commit()}};tt.useEffect(()=>{if(!M){n([]),h([]),E([]),v([]),D(!1);return}z();const G=Mh(Vc(Wr(Zn,"pharmacy_medicines")),Q=>{const K=[];Q.forEach(se=>{K.push({id:se.id,...se.data()})}),n(K.sort((se,Le)=>se.name.localeCompare(Le.name)))}),q=Mh(Vc(Wr(Zn,"pharmacy_stock")),Q=>{const K=[];Q.forEach(se=>{K.push({id:se.id,...se.data()})}),h(K),D(!1)}),F=Mh(Vc(Wr(Zn,"pharmacy_transactions")),Q=>{const K=[];Q.forEach(se=>{K.push({id:se.id,...se.data()})}),E(K.sort((se,Le)=>Le.createdAt-se.createdAt))}),Ue=Mh(Vc(Wr(Zn,"pharmacy_units")),Q=>{const K=[];Q.forEach(se=>{K.push({id:se.id,...se.data()})}),v(K.sort((se,Le)=>se.name.localeCompare(Le.name)))});return()=>{G(),q(),F(),Ue()}},[M]);const te=async G=>(await Uc(Wr(Zn,"pharmacy_medicines"),{...G,createdAt:Date.now(),updatedAt:Date.now()})).id,_e=async(G,q)=>{await G1(qa(Zn,"pharmacy_medicines",G),{...q,updatedAt:Date.now()})},pe=async G=>{const q=Vc(Wr(Zn,"pharmacy_stock"),II("medicineId","==",G)),F=await n_(q),Ue=r_(Zn);F.forEach(Q=>{Ue.delete(Q.ref)}),Ue.delete(qa(Zn,"pharmacy_medicines",G)),await Ue.commit()},ve=G=>e.find(q=>q.barcode===G),je=G=>e.find(q=>q.name.toLowerCase()===G.toLowerCase()),Pe=async(G,q,F)=>{const Ue=e.find(se=>se.id===G);if(!Ue)throw new Error("Medicine not found");const Q=new Date().toISOString().split("T")[0],K=o.find(se=>se.medicineId===G&&se.expiryDate===F);K?await G1(qa(Zn,"pharmacy_stock",K.id),{quantity:K.quantity+q,updatedAt:Date.now()}):await Uc(Wr(Zn,"pharmacy_stock"),{medicineId:G,medicineName:Ue.name,quantity:q,expiryDate:F,entryDate:Q,createdAt:Date.now(),updatedAt:Date.now()}),await Uc(Wr(Zn,"pharmacy_transactions"),{type:"entry",medicineId:G,medicineName:Ue.name,batchId:K?.id||"new",quantity:q,expiryDate:F,transactionDate:Q,createdAt:Date.now()})},Ce=async(G,q)=>{const F=o.find(K=>K.id===G);if(!F)throw new Error("Batch not found");const Ue=new Date().toISOString().split("T")[0],Q=F.quantity-q;if(Q<0)throw new Error("Insufficient stock");Q===0?await i_(qa(Zn,"pharmacy_stock",G)):await G1(qa(Zn,"pharmacy_stock",G),{quantity:Q,updatedAt:Date.now()}),await Uc(Wr(Zn,"pharmacy_transactions"),{type:"exit",medicineId:F.medicineId,medicineName:F.medicineName,batchId:G,quantity:q,expiryDate:F.expiryDate,transactionDate:Ue,createdAt:Date.now()})},Be=async G=>{if(C.find(F=>F.name.toLowerCase()===G.toLowerCase()))throw new Error("Unit already exists");await Uc(Wr(Zn,"pharmacy_units"),{name:G,createdAt:Date.now()})},ct=async G=>{await i_(qa(Zn,"pharmacy_units",G))},ke=()=>{const G=new Date,q=new Date;q.setDate(G.getDate()+30);const F=G.toISOString().split("T")[0],Ue=q.toISOString().split("T")[0],Q=new Map;for(const K of e)Q.set(K.id,{medicineId:K.id,medicineName:K.name,barcode:K.barcode,unit:K.unit,totalQuantity:0,minQuantity:K.minQuantity,batches:[],isLowStock:!1,hasExpiringSoon:!1,hasExpired:!1});for(const K of o){const se=Q.get(K.medicineId);se&&(se.totalQuantity+=K.quantity,se.batches.push(K),K.expiryDate<F?se.hasExpired=!0:K.expiryDate<=Ue&&(se.hasExpiringSoon=!0))}for(const K of Q.values())K.totalQuantity<K.minQuantity&&(K.isLowStock=!0),K.batches.sort((se,Le)=>se.expiryDate.localeCompare(Le.expiryDate));return Array.from(Q.values()).sort((K,se)=>K.medicineName.localeCompare(se.medicineName))},ee={medicines:e,stockBatches:o,transactions:m,units:C,loading:w,addMedicine:te,updateMedicine:_e,deleteMedicine:pe,getMedicineByBarcode:ve,getMedicineByName:je,addStock:Pe,removeStock:Ce,addUnit:Be,deleteUnit:ct,getStockSummary:ke,getLowStockItems:()=>ke().filter(G=>G.isLowStock),getExpiringItems:(G=30)=>{const q=new Date;q.setDate(q.getDate()+G);const F=q.toISOString().split("T")[0],Ue=new Date().toISOString().split("T")[0];return ke().filter(Q=>Q.batches.some(K=>K.expiryDate<=F&&K.expiryDate>=Ue))},getExpiredItems:()=>{const G=new Date().toISOString().split("T")[0];return ke().filter(q=>q.batches.some(F=>F.expiryDate<G))}};return X.jsx(qx.Provider,{value:ee,children:a})},BI=()=>{const[a,e]=tt.useState(""),[n,o]=tt.useState(""),[h,m]=tt.useState(""),[E,C]=tt.useState(!1),{signIn:v}=Vf(),w=async D=>{D.preventDefault(),m(""),C(!0);try{await v(a,n)}catch{m("Pogrean email ili lozinka")}finally{C(!1)}};return X.jsx("div",{className:"login-container",children:X.jsxs("div",{className:"login-box",children:[X.jsx("h1",{children:" Apoteka"}),X.jsx("p",{className:"login-subtitle",children:"Upravljanje lijekovima"}),h&&X.jsx("div",{className:"login-error",children:h}),X.jsxs("form",{onSubmit:w,children:[X.jsxs("div",{className:"form-group",children:[X.jsx("label",{children:"Email"}),X.jsx("input",{type:"email",value:a,onChange:D=>e(D.target.value),required:!0,placeholder:"vas@email.com"})]}),X.jsxs("div",{className:"form-group",children:[X.jsx("label",{children:"Lozinka"}),X.jsx("input",{type:"password",value:n,onChange:D=>o(D.target.value),required:!0,placeholder:""})]}),X.jsx("button",{type:"submit",disabled:E,className:"login-button",children:E?"Prijavljivanje...":"Prijavi se"})]})]})})},VI=({activeView:a,onViewChange:e})=>{const{currentUser:n,signOut:o}=Vf();return X.jsxs("header",{className:"header",children:[X.jsx("div",{className:"header-title",children:X.jsx("h1",{children:" Apoteka"})}),X.jsxs("nav",{className:"header-nav",children:[X.jsx("button",{className:a==="entry"?"active":"",onClick:()=>e("entry"),children:" Ulaz"}),X.jsx("button",{className:a==="exit"?"active":"",onClick:()=>e("exit"),children:" Izlaz"}),X.jsx("button",{className:a==="inventory"?"active":"",onClick:()=>e("inventory"),children:" Magacin"}),X.jsx("button",{className:a==="alerts"?"active":"",onClick:()=>e("alerts"),children:" Upozorenja"}),X.jsx("button",{className:a==="settings"?"active":"",onClick:()=>e("settings"),children:" Postavke"})]}),X.jsxs("div",{className:"header-user",children:[X.jsx("span",{children:n?.email}),X.jsx("button",{onClick:o,className:"logout-btn",children:"Odjavi se"})]})]})};var He;(function(a){a[a.QR_CODE=0]="QR_CODE",a[a.AZTEC=1]="AZTEC",a[a.CODABAR=2]="CODABAR",a[a.CODE_39=3]="CODE_39",a[a.CODE_93=4]="CODE_93",a[a.CODE_128=5]="CODE_128",a[a.DATA_MATRIX=6]="DATA_MATRIX",a[a.MAXICODE=7]="MAXICODE",a[a.ITF=8]="ITF",a[a.EAN_13=9]="EAN_13",a[a.EAN_8=10]="EAN_8",a[a.PDF_417=11]="PDF_417",a[a.RSS_14=12]="RSS_14",a[a.RSS_EXPANDED=13]="RSS_EXPANDED",a[a.UPC_A=14]="UPC_A",a[a.UPC_E=15]="UPC_E",a[a.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(He||(He={}));var s_=new Map([[He.QR_CODE,"QR_CODE"],[He.AZTEC,"AZTEC"],[He.CODABAR,"CODABAR"],[He.CODE_39,"CODE_39"],[He.CODE_93,"CODE_93"],[He.CODE_128,"CODE_128"],[He.DATA_MATRIX,"DATA_MATRIX"],[He.MAXICODE,"MAXICODE"],[He.ITF,"ITF"],[He.EAN_13,"EAN_13"],[He.EAN_8,"EAN_8"],[He.PDF_417,"PDF_417"],[He.RSS_14,"RSS_14"],[He.RSS_EXPANDED,"RSS_EXPANDED"],[He.UPC_A,"UPC_A"],[He.UPC_E,"UPC_E"],[He.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),a_;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.URL=1]="URL"})(a_||(a_={}));function UI(a){return Object.values(He).includes(a)}var hf;(function(a){a[a.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",a[a.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(hf||(hf={}));var FI=(function(){function a(){}return a.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",a.SCAN_DEFAULT_FPS=2,a.DEFAULT_DISABLE_FLIP=!1,a.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,a.DEFAULT_SUPPORTED_SCAN_TYPE=[hf.SCAN_TYPE_CAMERA,hf.SCAN_TYPE_FILE],a})(),Xx=(function(){function a(e,n){this.format=e,this.formatName=n}return a.prototype.toString=function(){return this.formatName},a.create=function(e){if(!s_.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new a(e,s_.get(e))},a})(),o_=(function(){function a(){}return a.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},a.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},a})(),x0;(function(a){a[a.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",a[a.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",a[a.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(x0||(x0={}));var zI=(function(){function a(){}return a.createFrom=function(e){return{errorMessage:e,type:x0.UNKWOWN_ERROR}},a})(),jI=(function(){function a(e){this.verbose=e}return a.prototype.log=function(e){this.verbose&&console.log(e)},a.prototype.warn=function(e){this.verbose&&console.warn(e)},a.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},a.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},a})();function ia(a){return typeof a>"u"||a===null}var Ll=(function(){function a(){}return a.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},a.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},a.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},a.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},a.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},a.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},a.scannerPaused=function(){return"Scanner paused"},a})(),Yx=(function(){function a(){}return a.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var o=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var h=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],m=new Set(h),E=Object.keys(e),C=0,v=E;C<v.length;C++){var w=v[C];if(m.has(w))return n.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},a})(),Xc={exports:{}},HI=Xc.exports,l_;function GI(){return l_||(l_=1,(function(a,e){(function(n,o){o(e)})(HI,(function(n){function o(N){return N==null}var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,i){N.__proto__=i}||function(N,i){for(var s in i)i.hasOwnProperty(s)&&(N[s]=i[s])};function m(N,i){h(N,i);function s(){this.constructor=N}N.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)}function E(N,i){var s=Object.setPrototypeOf;s?s(N,i):N.__proto__=i}function C(N,i){i===void 0&&(i=N.constructor);var s=Error.captureStackTrace;s&&s(N,i)}var v=(function(N){m(i,N);function i(s){var l=this.constructor,u=N.call(this,s)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),E(u,l.prototype),C(u),u}return i})(Error);class w extends v{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}w.kind="Exception";class D extends w{}D.kind="ArgumentException";class M extends w{}M.kind="IllegalArgumentException";class z{constructor(i){if(this.binarizer=i,i===null)throw new M("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,s){return this.binarizer.getBlackRow(i,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,s,l,u){const f=this.binarizer.getLuminanceSource().crop(i,s,l,u);return new z(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new z(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new z(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class te extends w{static getChecksumInstance(){return new te}}te.kind="ChecksumException";class _e{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class pe{static arraycopy(i,s,l,u,f){for(;f--;)l[u++]=i[s++]}static currentTimeMillis(){return Date.now()}}class ve extends w{}ve.kind="IndexOutOfBoundsException";class je extends ve{constructor(i=void 0,s=void 0){super(s),this.index=i,this.message=s}}je.kind="ArrayIndexOutOfBoundsException";class Pe{static fill(i,s){for(let l=0,u=i.length;l<u;l++)i[l]=s}static fillWithin(i,s,l,u){Pe.rangeCheck(i.length,s,l);for(let f=s;f<l;f++)i[f]=u}static rangeCheck(i,s,l){if(s>l)throw new M("fromIndex("+s+") > toIndex("+l+")");if(s<0)throw new je(s);if(l>i)throw new je(l)}static asList(...i){return i}static create(i,s,l){return Array.from({length:i}).map(f=>Array.from({length:s}).fill(l))}static createInt32Array(i,s,l){return Array.from({length:i}).map(f=>Int32Array.from({length:s}).fill(l))}static equals(i,s){if(!i||!s||!i.length||!s.length||i.length!==s.length)return!1;for(let l=0,u=i.length;l<u;l++)if(i[l]!==s[l])return!1;return!0}static hashCode(i){if(i===null)return 0;let s=1;for(const l of i)s=31*s+l;return s}static fillUint8Array(i,s){for(let l=0;l!==i.length;l++)i[l]=s}static copyOf(i,s){return i.slice(0,s)}static copyOfUint8Array(i,s){if(i.length<=s){const l=new Uint8Array(s);return l.set(i),l}return i.slice(0,s)}static copyOfRange(i,s,l){const u=l-s,f=new Int32Array(u);return pe.arraycopy(i,s,f,0,u),f}static binarySearch(i,s,l){l===void 0&&(l=Pe.numberComparator);let u=0,f=i.length-1;for(;u<=f;){const g=f+u>>1,y=l(s,i[g]);if(y>0)u=g+1;else if(y<0)f=g-1;else return g}return-u-1}static numberComparator(i,s){return i-s}}class Ce{static numberOfTrailingZeros(i){let s;if(i===0)return 32;let l=31;return s=i<<16,s!==0&&(l-=16,i=s),s=i<<8,s!==0&&(l-=8,i=s),s=i<<4,s!==0&&(l-=4,i=s),s=i<<2,s!==0&&(l-=2,i=s),l-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let s=1;return i>>>16||(s+=16,i<<=16),i>>>24||(s+=8,i<<=8),i>>>28||(s+=4,i<<=4),i>>>30||(s+=2,i<<=2),s-=i>>>31,s}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,s){return Math.trunc(i/s)}static parseInt(i,s=void 0){return parseInt(i,s)}}Ce.MIN_VALUE_32_BITS=-2147483648,Ce.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Be{constructor(i,s){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,s==null?this.bits=Be.makeArray(i):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const s=Be.makeArray(i);pe.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const s=this.size;if(i>=s)return s;const l=this.bits;let u=Math.floor(i/32),f=l[u];f&=~((1<<(i&31))-1);const g=l.length;for(;f===0;){if(++u===g)return s;f=l[u]}const y=u*32+Ce.numberOfTrailingZeros(f);return y>s?s:y}getNextUnset(i){const s=this.size;if(i>=s)return s;const l=this.bits;let u=Math.floor(i/32),f=~l[u];f&=~((1<<(i&31))-1);const g=l.length;for(;f===0;){if(++u===g)return s;f=~l[u]}const y=u*32+Ce.numberOfTrailingZeros(f);return y>s?s:y}setBulk(i,s){this.bits[Math.floor(i/32)]=s}setRange(i,s){if(s<i||i<0||s>this.size)throw new M;if(s===i)return;s--;const l=Math.floor(i/32),u=Math.floor(s/32),f=this.bits;for(let g=l;g<=u;g++){const y=g>l?0:i&31,T=(2<<(g<u?31:s&31))-(1<<y);f[g]|=T}}clear(){const i=this.bits.length,s=this.bits;for(let l=0;l<i;l++)s[l]=0}isRange(i,s,l){if(s<i||i<0||s>this.size)throw new M;if(s===i)return!0;s--;const u=Math.floor(i/32),f=Math.floor(s/32),g=this.bits;for(let y=u;y<=f;y++){const x=y>u?0:i&31,b=(2<<(y<f?31:s&31))-(1<<x)&4294967295;if((g[y]&b)!==(l?b:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,s){if(s<0||s>32)throw new M("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let l=s;l>0;l--)this.appendBit((i>>l-1&1)===1)}appendBitArray(i){const s=i.size;this.ensureCapacity(this.size+s);for(let l=0;l<s;l++)this.appendBit(i.get(l))}xor(i){if(this.size!==i.size)throw new M("Sizes don't match");const s=this.bits;for(let l=0,u=s.length;l<u;l++)s[l]^=i.bits[l]}toBytes(i,s,l,u){for(let f=0;f<u;f++){let g=0;for(let y=0;y<8;y++)this.get(i)&&(g|=1<<7-y),i++;s[l+f]=g}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),l=s+1,u=this.bits;for(let f=0;f<l;f++){let g=u[f];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,i[s-f]=g}if(this.size!==l*32){const f=l*32-this.size;let g=i[0]>>>f;for(let y=1;y<l;y++){const x=i[y];g|=x<<32-f,i[y-1]=g,g=x>>>f}i[l-1]=g}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof Be))return!1;const s=i;return this.size===s.size&&Pe.equals(this.bits,s.bits)}hashCode(){return 31*this.size+Pe.hashCode(this.bits)}toString(){let i="";for(let s=0,l=this.size;s<l;s++)(s&7)===0&&(i+=" "),i+=this.get(s)?"X":".";return i}clone(){return new Be(this.size,this.bits.slice())}}var ct;(function(N){N[N.OTHER=0]="OTHER",N[N.PURE_BARCODE=1]="PURE_BARCODE",N[N.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",N[N.TRY_HARDER=3]="TRY_HARDER",N[N.CHARACTER_SET=4]="CHARACTER_SET",N[N.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",N[N.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",N[N.ASSUME_GS1=7]="ASSUME_GS1",N[N.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",N[N.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",N[N.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ct||(ct={}));var ke=ct;class V extends w{static getFormatInstance(){return new V}}V.kind="FormatException";var j;(function(N){N[N.Cp437=0]="Cp437",N[N.ISO8859_1=1]="ISO8859_1",N[N.ISO8859_2=2]="ISO8859_2",N[N.ISO8859_3=3]="ISO8859_3",N[N.ISO8859_4=4]="ISO8859_4",N[N.ISO8859_5=5]="ISO8859_5",N[N.ISO8859_6=6]="ISO8859_6",N[N.ISO8859_7=7]="ISO8859_7",N[N.ISO8859_8=8]="ISO8859_8",N[N.ISO8859_9=9]="ISO8859_9",N[N.ISO8859_10=10]="ISO8859_10",N[N.ISO8859_11=11]="ISO8859_11",N[N.ISO8859_13=12]="ISO8859_13",N[N.ISO8859_14=13]="ISO8859_14",N[N.ISO8859_15=14]="ISO8859_15",N[N.ISO8859_16=15]="ISO8859_16",N[N.SJIS=16]="SJIS",N[N.Cp1250=17]="Cp1250",N[N.Cp1251=18]="Cp1251",N[N.Cp1252=19]="Cp1252",N[N.Cp1256=20]="Cp1256",N[N.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",N[N.UTF8=22]="UTF8",N[N.ASCII=23]="ASCII",N[N.Big5=24]="Big5",N[N.GB18030=25]="GB18030",N[N.EUC_KR=26]="EUC_KR"})(j||(j={}));class B{constructor(i,s,l,...u){this.valueIdentifier=i,this.name=l,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=u,B.VALUE_IDENTIFIER_TO_ECI.set(i,this),B.NAME_TO_ECI.set(l,this);const f=this.values;for(let g=0,y=f.length;g!==y;g++){const x=f[g];B.VALUES_TO_ECI.set(x,this)}for(const g of u)B.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new V("incorect value");const s=B.VALUES_TO_ECI.get(i);if(s===void 0)throw new V("incorect value");return s}static getCharacterSetECIByName(i){const s=B.NAME_TO_ECI.get(i);if(s===void 0)throw new V("incorect value");return s}equals(i){if(!(i instanceof B))return!1;const s=i;return this.getName()===s.getName()}}B.VALUE_IDENTIFIER_TO_ECI=new Map,B.VALUES_TO_ECI=new Map,B.NAME_TO_ECI=new Map,B.Cp437=new B(j.Cp437,Int32Array.from([0,2]),"Cp437"),B.ISO8859_1=new B(j.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),B.ISO8859_2=new B(j.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),B.ISO8859_3=new B(j.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),B.ISO8859_4=new B(j.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),B.ISO8859_5=new B(j.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),B.ISO8859_6=new B(j.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),B.ISO8859_7=new B(j.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),B.ISO8859_8=new B(j.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),B.ISO8859_9=new B(j.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),B.ISO8859_10=new B(j.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),B.ISO8859_11=new B(j.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),B.ISO8859_13=new B(j.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),B.ISO8859_14=new B(j.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),B.ISO8859_15=new B(j.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),B.ISO8859_16=new B(j.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),B.SJIS=new B(j.SJIS,20,"SJIS","Shift_JIS"),B.Cp1250=new B(j.Cp1250,21,"Cp1250","windows-1250"),B.Cp1251=new B(j.Cp1251,22,"Cp1251","windows-1251"),B.Cp1252=new B(j.Cp1252,23,"Cp1252","windows-1252"),B.Cp1256=new B(j.Cp1256,24,"Cp1256","windows-1256"),B.UnicodeBigUnmarked=new B(j.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),B.UTF8=new B(j.UTF8,26,"UTF8","UTF-8"),B.ASCII=new B(j.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),B.Big5=new B(j.Big5,28,"Big5"),B.GB18030=new B(j.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),B.EUC_KR=new B(j.EUC_KR,30,"EUC_KR","EUC-KR");class ee extends w{}ee.kind="UnsupportedOperationException";class G{static decode(i,s){const l=this.encodingName(s);return this.customDecoder?this.customDecoder(i,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(i,l):new TextDecoder(l).decode(i)}static shouldDecodeOnFallback(i){return!G.isBrowser()&&i==="ISO-8859-1"}static encode(i,s){const l=this.encodingName(s);return this.customEncoder?this.customEncoder(i,l):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof B?i:B.getCharacterSetECIByName(i)}static decodeFallback(i,s){const l=this.encodingCharacterSet(s);if(G.isDecodeFallbackSupported(l)){let u="";for(let f=0,g=i.length;f<g;f++){let y=i[f].toString(16);y.length<2&&(y="0"+y),u+="%"+y}return decodeURIComponent(u)}if(l.equals(B.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new ee(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(B.UTF8)||i.equals(B.ISO8859_1)||i.equals(B.ASCII)}static encodeFallback(i){const l=btoa(unescape(encodeURIComponent(i))).split(""),u=[];for(let f=0;f<l.length;f++)u.push(l[f].charCodeAt(0));return new Uint8Array(u)}}class q{static castAsNonUtf8Char(i,s=null){const l=s?s.getName():this.ISO88591;return G.decode(new Uint8Array([i]),l)}static guessEncoding(i,s){if(s!=null&&s.get(ke.CHARACTER_SET)!==void 0)return s.get(ke.CHARACTER_SET).toString();const l=i.length;let u=!0,f=!0,g=!0,y=0,x=0,T=0,b=0,O=0,P=0,H=0,W=0,Z=0,re=0,fe=0;const Re=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let be=0;be<l&&(u||f||g);be++){const Te=i[be]&255;g&&(y>0?(Te&128)===0?g=!1:y--:(Te&128)!==0&&((Te&64)===0?g=!1:(y++,(Te&32)===0?x++:(y++,(Te&16)===0?T++:(y++,(Te&8)===0?b++:g=!1))))),u&&(Te>127&&Te<160?u=!1:Te>159&&(Te<192||Te===215||Te===247)&&fe++),f&&(O>0?Te<64||Te===127||Te>252?f=!1:O--:Te===128||Te===160||Te>239?f=!1:Te>160&&Te<224?(P++,W=0,H++,H>Z&&(Z=H)):Te>127?(O++,H=0,W++,W>re&&(re=W)):(H=0,W=0))}return g&&y>0&&(g=!1),f&&O>0&&(f=!1),g&&(Re||x+T+b>0)?q.UTF8:f&&(q.ASSUME_SHIFT_JIS||Z>=3||re>=3)?q.SHIFT_JIS:u&&f?Z===2&&P===2||fe*10>=l?q.SHIFT_JIS:q.ISO88591:u?q.ISO88591:f?q.SHIFT_JIS:g?q.UTF8:q.PLATFORM_DEFAULT_ENCODING}static format(i,...s){let l=-1;function u(g,y,x,T,b,O){if(g==="%%")return"%";if(s[++l]===void 0)return;g=T?parseInt(T.substr(1)):void 0;let P=b?parseInt(b.substr(1)):void 0,H;switch(O){case"s":H=s[l];break;case"c":H=s[l][0];break;case"f":H=parseFloat(s[l]).toFixed(g);break;case"p":H=parseFloat(s[l]).toPrecision(g);break;case"e":H=parseFloat(s[l]).toExponential(g);break;case"x":H=parseInt(s[l]).toString(P||16);break;case"d":H=parseFloat(parseInt(s[l],P||10).toPrecision(g)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(P);let W=parseInt(x),Z=x&&x[0]+""=="0"?"0":" ";for(;H.length<W;)H=y!==void 0?H+Z:Z+H;return H}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,u)}static getBytes(i,s){return G.encode(i,s)}static getCharCode(i,s=0){return i.charCodeAt(s)}static getCharAt(i){return String.fromCharCode(i)}}q.SHIFT_JIS=B.SJIS.getName(),q.GB2312="GB2312",q.ISO88591=B.ISO8859_1.getName(),q.EUC_JP="EUC_JP",q.UTF8=B.UTF8.getName(),q.PLATFORM_DEFAULT_ENCODING=q.UTF8,q.ASSUME_SHIFT_JIS=!1;class F{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=q.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,s,l){for(let u=s;s<s+l;u++)this.append(i[u]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,s){this.value=this.value.substr(0,i)+s+this.value.substr(i+1)}substring(i,s){return this.value.substring(i,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,s){this.value=this.value.substr(0,i)+s+this.value.substr(i+s.length)}}class Ue{constructor(i,s,l,u){if(this.width=i,this.height=s,this.rowSize=l,this.bits=u,s==null&&(s=i),this.height=s,i<1||s<1)throw new M("Both dimensions must be greater than 0");l==null&&(l=Math.floor((i+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const s=i.length,l=i[0].length,u=new Ue(l,s);for(let f=0;f<s;f++){const g=i[f];for(let y=0;y<l;y++)g[y]&&u.set(y,f)}return u}static parseFromString(i,s,l){if(i===null)throw new M("stringRepresentation cannot be null");const u=new Array(i.length);let f=0,g=0,y=-1,x=0,T=0;for(;T<i.length;)if(i.charAt(T)===`
`||i.charAt(T)==="\r"){if(f>g){if(y===-1)y=f-g;else if(f-g!==y)throw new M("row lengths do not match");g=f,x++}T++}else if(i.substring(T,T+s.length)===s)T+=s.length,u[f]=!0,f++;else if(i.substring(T,T+l.length)===l)T+=l.length,u[f]=!1,f++;else throw new M("illegal character encountered: "+i.substring(T));if(f>g){if(y===-1)y=f-g;else if(f-g!==y)throw new M("row lengths do not match");x++}const b=new Ue(y,x);for(let O=0;O<f;O++)u[O]&&b.set(Math.floor(O%y),Math.floor(O/y));return b}get(i,s){const l=s*this.rowSize+Math.floor(i/32);return(this.bits[l]>>>(i&31)&1)!==0}set(i,s){const l=s*this.rowSize+Math.floor(i/32);this.bits[l]|=1<<(i&31)&4294967295}unset(i,s){const l=s*this.rowSize+Math.floor(i/32);this.bits[l]&=~(1<<(i&31)&4294967295)}flip(i,s){const l=s*this.rowSize+Math.floor(i/32);this.bits[l]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new M("input matrix dimensions do not match");const s=new Be(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let f=0,g=this.height;f<g;f++){const y=f*l,x=i.getRow(f,s).getBitArray();for(let T=0;T<l;T++)u[y+T]^=x[T]}}clear(){const i=this.bits,s=i.length;for(let l=0;l<s;l++)i[l]=0}setRegion(i,s,l,u){if(s<0||i<0)throw new M("Left and top must be nonnegative");if(u<1||l<1)throw new M("Height and width must be at least 1");const f=i+l,g=s+u;if(g>this.height||f>this.width)throw new M("The region must fit inside the matrix");const y=this.rowSize,x=this.bits;for(let T=s;T<g;T++){const b=T*y;for(let O=i;O<f;O++)x[b+Math.floor(O/32)]|=1<<(O&31)&4294967295}}getRow(i,s){s==null||s.getSize()<this.width?s=new Be(this.width):s.clear();const l=this.rowSize,u=this.bits,f=i*l;for(let g=0;g<l;g++)s.setBulk(g*32,u[f+g]);return s}setRow(i,s){pe.arraycopy(s.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),s=this.getHeight();let l=new Be(i),u=new Be(i);for(let f=0,g=Math.floor((s+1)/2);f<g;f++)l=this.getRow(f,l),u=this.getRow(s-1-f,u),l.reverse(),u.reverse(),this.setRow(f,u),this.setRow(s-1-f,l)}getEnclosingRectangle(){const i=this.width,s=this.height,l=this.rowSize,u=this.bits;let f=i,g=s,y=-1,x=-1;for(let T=0;T<s;T++)for(let b=0;b<l;b++){const O=u[T*l+b];if(O!==0){if(T<g&&(g=T),T>x&&(x=T),b*32<f){let P=0;for(;(O<<31-P&4294967295)===0;)P++;b*32+P<f&&(f=b*32+P)}if(b*32+31>y){let P=31;for(;!(O>>>P);)P--;b*32+P>y&&(y=b*32+P)}}}return y<f||x<g?null:Int32Array.from([f,g,y-f+1,x-g+1])}getTopLeftOnBit(){const i=this.rowSize,s=this.bits;let l=0;for(;l<s.length&&s[l]===0;)l++;if(l===s.length)return null;const u=l/i;let f=l%i*32;const g=s[l];let y=0;for(;(g<<31-y&4294967295)===0;)y++;return f+=y,Int32Array.from([f,u])}getBottomRightOnBit(){const i=this.rowSize,s=this.bits;let l=s.length-1;for(;l>=0&&s[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/i);let f=Math.floor(l%i)*32;const g=s[l];let y=31;for(;!(g>>>y);)y--;return f+=y,Int32Array.from([f,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof Ue))return!1;const s=i;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&Pe.equals(this.bits,s.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+Pe.hashCode(this.bits),i}toString(i="X ",s="  ",l=`
`){return this.buildToString(i,s,l)}buildToString(i,s,l){let u=new F;for(let f=0,g=this.height;f<g;f++){for(let y=0,x=this.width;y<x;y++)u.append(this.get(y,f)?i:s);u.append(l)}return u.toString()}clone(){return new Ue(this.width,this.height,this.rowSize,this.bits.slice())}}class Q extends w{static getNotFoundInstance(){return new Q}}Q.kind="NotFoundException";class K extends _e{constructor(i){super(i),this.luminances=K.EMPTY,this.buckets=new Int32Array(K.LUMINANCE_BUCKETS)}getBlackRow(i,s){const l=this.getLuminanceSource(),u=l.getWidth();s==null||s.getSize()<u?s=new Be(u):s.clear(),this.initArrays(u);const f=l.getRow(i,this.luminances),g=this.buckets;for(let x=0;x<u;x++)g[(f[x]&255)>>K.LUMINANCE_SHIFT]++;const y=K.estimateBlackPoint(g);if(u<3)for(let x=0;x<u;x++)(f[x]&255)<y&&s.set(x);else{let x=f[0]&255,T=f[1]&255;for(let b=1;b<u-1;b++){const O=f[b+1]&255;(T*4-x-O)/2<y&&s.set(b),x=T,T=O}}return s}getBlackMatrix(){const i=this.getLuminanceSource(),s=i.getWidth(),l=i.getHeight(),u=new Ue(s,l);this.initArrays(s);const f=this.buckets;for(let x=1;x<5;x++){const T=Math.floor(l*x/5),b=i.getRow(T,this.luminances),O=Math.floor(s*4/5);for(let P=Math.floor(s/5);P<O;P++){const H=b[P]&255;f[H>>K.LUMINANCE_SHIFT]++}}const g=K.estimateBlackPoint(f),y=i.getMatrix();for(let x=0;x<l;x++){const T=x*s;for(let b=0;b<s;b++)(y[T+b]&255)<g&&u.set(b,x)}return u}createBinarizer(i){return new K(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const s=this.buckets;for(let l=0;l<K.LUMINANCE_BUCKETS;l++)s[l]=0}static estimateBlackPoint(i){const s=i.length;let l=0,u=0,f=0;for(let b=0;b<s;b++)i[b]>f&&(u=b,f=i[b]),i[b]>l&&(l=i[b]);let g=0,y=0;for(let b=0;b<s;b++){const O=b-u,P=i[b]*O*O;P>y&&(g=b,y=P)}if(u>g){const b=u;u=g,g=b}if(g-u<=s/16)throw new Q;let x=g-1,T=-1;for(let b=g-1;b>u;b--){const O=b-u,P=O*O*(g-b)*(l-i[b]);P>T&&(x=b,T=P)}return x<<K.LUMINANCE_SHIFT}}K.LUMINANCE_BITS=5,K.LUMINANCE_SHIFT=8-K.LUMINANCE_BITS,K.LUMINANCE_BUCKETS=1<<K.LUMINANCE_BITS,K.EMPTY=Uint8ClampedArray.from([0]);class se extends K{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),s=i.getWidth(),l=i.getHeight();if(s>=se.MINIMUM_DIMENSION&&l>=se.MINIMUM_DIMENSION){const u=i.getMatrix();let f=s>>se.BLOCK_SIZE_POWER;(s&se.BLOCK_SIZE_MASK)!==0&&f++;let g=l>>se.BLOCK_SIZE_POWER;(l&se.BLOCK_SIZE_MASK)!==0&&g++;const y=se.calculateBlackPoints(u,f,g,s,l),x=new Ue(s,l);se.calculateThresholdForBlock(u,f,g,s,l,y,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new se(i)}static calculateThresholdForBlock(i,s,l,u,f,g,y){const x=f-se.BLOCK_SIZE,T=u-se.BLOCK_SIZE;for(let b=0;b<l;b++){let O=b<<se.BLOCK_SIZE_POWER;O>x&&(O=x);const P=se.cap(b,2,l-3);for(let H=0;H<s;H++){let W=H<<se.BLOCK_SIZE_POWER;W>T&&(W=T);const Z=se.cap(H,2,s-3);let re=0;for(let Re=-2;Re<=2;Re++){const be=g[P+Re];re+=be[Z-2]+be[Z-1]+be[Z]+be[Z+1]+be[Z+2]}const fe=re/25;se.thresholdBlock(i,W,O,fe,u,y)}}}static cap(i,s,l){return i<s?s:i>l?l:i}static thresholdBlock(i,s,l,u,f,g){for(let y=0,x=l*f+s;y<se.BLOCK_SIZE;y++,x+=f)for(let T=0;T<se.BLOCK_SIZE;T++)(i[x+T]&255)<=u&&g.set(s+T,l+y)}static calculateBlackPoints(i,s,l,u,f){const g=f-se.BLOCK_SIZE,y=u-se.BLOCK_SIZE,x=new Array(l);for(let T=0;T<l;T++){x[T]=new Int32Array(s);let b=T<<se.BLOCK_SIZE_POWER;b>g&&(b=g);for(let O=0;O<s;O++){let P=O<<se.BLOCK_SIZE_POWER;P>y&&(P=y);let H=0,W=255,Z=0;for(let fe=0,Re=b*u+P;fe<se.BLOCK_SIZE;fe++,Re+=u){for(let be=0;be<se.BLOCK_SIZE;be++){const Te=i[Re+be]&255;H+=Te,Te<W&&(W=Te),Te>Z&&(Z=Te)}if(Z-W>se.MIN_DYNAMIC_RANGE)for(fe++,Re+=u;fe<se.BLOCK_SIZE;fe++,Re+=u)for(let be=0;be<se.BLOCK_SIZE;be++)H+=i[Re+be]&255}let re=H>>se.BLOCK_SIZE_POWER*2;if(Z-W<=se.MIN_DYNAMIC_RANGE&&(re=W/2,T>0&&O>0)){const fe=(x[T-1][O]+2*x[T][O-1]+x[T-1][O-1])/4;W<fe&&(re=fe)}x[T][O]=re}}return x}}se.BLOCK_SIZE_POWER=3,se.BLOCK_SIZE=1<<se.BLOCK_SIZE_POWER,se.BLOCK_SIZE_MASK=se.BLOCK_SIZE-1,se.MINIMUM_DIMENSION=se.BLOCK_SIZE*5,se.MIN_DYNAMIC_RANGE=24;class Le{constructor(i,s){this.width=i,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,s,l,u){throw new ee("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ee("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ee("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let s=new F;for(let l=0;l<this.height;l++){const u=this.getRow(l,i);for(let f=0;f<this.width;f++){const g=u[f]&255;let y;g<64?y="#":g<128?y="+":g<192?y=".":y=" ",s.append(y)}s.append(`
`)}return s.toString()}}class ut extends Le{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,s){const l=this.delegate.getRow(i,s),u=this.getWidth();for(let f=0;f<u;f++)l[f]=255-(l[f]&255);return l}getMatrix(){const i=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(s);for(let u=0;u<s;u++)l[u]=255-(i[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(i,s,l,u){return new ut(this.delegate.crop(i,s,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ut(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ut(this.delegate.rotateCounterClockwise45())}}class mt extends Le{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=mt.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const s=i.getContext("2d").getImageData(0,0,i.width,i.height);return mt.toGrayscaleBuffer(s.data,i.width,i.height)}static toGrayscaleBuffer(i,s,l){const u=new Uint8ClampedArray(s*l);for(let f=0,g=0,y=i.length;f<y;f+=4,g++){let x;if(i[f+3]===0)x=255;else{const b=i[f],O=i[f+1],P=i[f+2];x=306*b+601*O+117*P+512>>10}u[g]=x}return u}getRow(i,s){if(i<0||i>=this.getHeight())throw new M("Requested row is outside the image: "+i);const l=this.getWidth(),u=i*l;return s===null?s=this.buffer.slice(u,u+l):(s.length<l&&(s=new Uint8ClampedArray(l)),s.set(this.buffer.slice(u,u+l))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,s,l,u){return super.crop(i,s,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const s=this.getTempCanvasElement(),l=s.getContext("2d"),u=i*mt.DEGREE_TO_RADIANS,f=this.canvas.width,g=this.canvas.height,y=Math.ceil(Math.abs(Math.cos(u))*f+Math.abs(Math.sin(u))*g),x=Math.ceil(Math.abs(Math.sin(u))*f+Math.abs(Math.cos(u))*g);return s.width=y,s.height=x,l.translate(y/2,x/2),l.rotate(u),l.drawImage(this.canvas,f/-2,g/-2),this.buffer=mt.makeBufferFromCanvasImageData(s),this}invert(){return new ut(this)}}mt.DEGREE_TO_RADIANS=Math.PI/180;class J{constructor(i,s,l){this.deviceId=i,this.label=s,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ae=(globalThis||Sh||self||window||void 0)&&(globalThis||Sh||self||window||void 0).__awaiter||function(N,i,s,l){function u(f){return f instanceof s?f:new s(function(g){g(f)})}return new(s||(s=Promise))(function(f,g){function y(b){try{T(l.next(b))}catch(O){g(O)}}function x(b){try{T(l.throw(b))}catch(O){g(O)}}function T(b){b.done?f(b.value):u(b.value).then(y,x)}T((l=l.apply(N,i||[])).next())})};class Ie{constructor(i,s=500,l){this.reader=i,this.timeBetweenScansMillis=s,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const l of i){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const f=l.deviceId||l.id,g=l.label||`Video device ${s.length+1}`,y=l.groupId,x={deviceId:f,label:g,kind:u,groupId:y};s.push(x)}return s})}getVideoInputDevices(){return ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new J(s.deviceId,s.label))})}findDeviceById(i){return ae(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(l=>l.deviceId===i):null})}decodeFromInputVideoDevice(i,s){return ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,s)})}decodeOnceFromVideoDevice(i,s){return ae(this,void 0,void 0,function*(){this.reset();let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,s)})}decodeOnceFromConstraints(i,s){return ae(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(l,s)})}decodeOnceFromStream(i,s){return ae(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,s);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(i,s,l){return ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,s,l)})}decodeFromVideoDevice(i,s,l){return ae(this,void 0,void 0,function*(){let u;i?u={deviceId:{exact:i}}:u={facingMode:"environment"};const f={video:u};return yield this.decodeFromConstraints(f,s,l)})}decodeFromConstraints(i,s,l){return ae(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(u,s,l)})}decodeFromStream(i,s,l){return ae(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(i,s);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,s){return ae(this,void 0,void 0,function*(){const l=this.prepareVideoElement(s);return this.addVideoSource(l,i),this.videoElement=l,this.stream=i,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(i){return new Promise((s,l)=>this.playVideoOnLoad(i,()=>s()))}playVideoOnLoad(i,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",s),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,s){const l=document.getElementById(i);if(!l)throw new D(`element with id '${i}' not found`);if(l.nodeName.toLowerCase()!==s.toLowerCase())throw new D(`element with id '${i}' must be an ${s} element`);return l}decodeFromImage(i,s){if(!i&&!s)throw new D("either imageElement with a src set or an url must be provided");return s&&!i?this.decodeFromImageUrl(s):this.decodeFromImageElement(i)}decodeFromVideo(i,s){if(!i&&!s)throw new D("Either an element with a src set or an URL must be provided");return s&&!i?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,s,l){if(i===void 0&&s===void 0)throw new D("Either an element with a src set or an URL must be provided");return s&&!i?this.decodeFromVideoUrlContinuously(s,l):this.decodeFromVideoElementContinuously(i,l)}decodeFromImageElement(i){if(!i)throw new D("An image element must be provided.");this.reset();const s=this.prepareImageElement(i);this.imageElement=s;let l;return this.isImageLoaded(s)?l=this.decodeOnce(s,!1,!0):l=this._decodeOnLoadImage(s),l}decodeFromVideoElement(i){const s=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(i,s){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(l,s)}_decodeFromVideoElementSetup(i){if(!i)throw new D("A video element must be provided.");this.reset();const s=this.prepareVideoElement(i);return this.videoElement=s,s}decodeFromImageUrl(i){if(!i)throw new D("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const l=this._decodeOnLoadImage(s);return s.src=i,l}decodeFromVideoUrl(i){if(!i)throw new D("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElement(s);return s.src=i,l}decodeFromVideoUrlContinuously(i,s){if(!i)throw new D("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,s);return l.src=i,u}_decodeOnLoadImage(i){return new Promise((s,l)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(s,l),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,s){return ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,s)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let s;return typeof i>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof i=="string"&&(s=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(s=i),s}prepareVideoElement(i){let s;return!i&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof i=="string"&&(s=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(s=i),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(i,s=!0,l=!0){this._stopAsyncDecode=!1;const u=(f,g)=>{if(this._stopAsyncDecode){g(new Q("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const y=this.decode(i);f(y)}catch(y){const x=s&&y instanceof Q,b=(y instanceof te||y instanceof V)&&l;if(x||b)return setTimeout(u,this._timeBetweenDecodingAttempts,f,g);g(y)}};return new Promise((f,g)=>u(f,g))}decodeContinuously(i,s){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(i);s(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){s(null,u);const f=u instanceof te||u instanceof V,g=u instanceof Q;(f||g)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(i){const s=this.createBinaryBitmap(i);return this.decodeBitmap(s)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,s,l){s||(s={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(i,s,l=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const s=this.getCaptureCanvas(i),l=new mt(s),u=new se(l);return new z(u)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const s=this.createCaptureCanvas(i);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let l,u;return typeof i<"u"&&(i instanceof HTMLVideoElement?(l=i.videoWidth,u=i.videoHeight):i instanceof HTMLImageElement&&(l=i.naturalWidth||i.width,u=i.naturalHeight||i.height)),s.style.width=l+"px",s.style.height=u+"px",s.width=l,s.height=u,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,s){try{i.srcObject=s}catch{i.src=URL.createObjectURL(s)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class De{constructor(i,s,l=s==null?0:8*s.length,u,f,g=pe.currentTimeMillis()){this.text=i,this.rawBytes=s,this.numBits=l,this.resultPoints=u,this.format=f,this.timestamp=g,this.text=i,this.rawBytes=s,l==null?this.numBits=s==null?0:8*s.length:this.numBits=l,this.resultPoints=u,this.format=f,this.resultMetadata=null,g==null?this.timestamp=pe.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,s)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const s=this.resultPoints;if(s===null)this.resultPoints=i;else if(i!==null&&i.length>0){const l=new Array(s.length+i.length);pe.arraycopy(s,0,l,0,s.length),pe.arraycopy(i,0,l,s.length,i.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var nt;(function(N){N[N.AZTEC=0]="AZTEC",N[N.CODABAR=1]="CODABAR",N[N.CODE_39=2]="CODE_39",N[N.CODE_93=3]="CODE_93",N[N.CODE_128=4]="CODE_128",N[N.DATA_MATRIX=5]="DATA_MATRIX",N[N.EAN_8=6]="EAN_8",N[N.EAN_13=7]="EAN_13",N[N.ITF=8]="ITF",N[N.MAXICODE=9]="MAXICODE",N[N.PDF_417=10]="PDF_417",N[N.QR_CODE=11]="QR_CODE",N[N.RSS_14=12]="RSS_14",N[N.RSS_EXPANDED=13]="RSS_EXPANDED",N[N.UPC_A=14]="UPC_A",N[N.UPC_E=15]="UPC_E",N[N.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(nt||(nt={}));var Oe=nt,At;(function(N){N[N.OTHER=0]="OTHER",N[N.ORIENTATION=1]="ORIENTATION",N[N.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",N[N.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",N[N.ISSUE_NUMBER=4]="ISSUE_NUMBER",N[N.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",N[N.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",N[N.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",N[N.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",N[N.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",N[N.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(At||(At={}));var wt=At;class Zt{constructor(i,s,l,u,f=-1,g=-1){this.rawBytes=i,this.text=s,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=g,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ur{exp(i){return this.expTable[i]}log(i){if(i===0)throw new M;return this.logTable[i]}static addOrSubtract(i,s){return i^s}}class Fn{constructor(i,s){if(s.length===0)throw new M;this.field=i;const l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),pe.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const s=this.coefficients;let l;if(i===1){l=0;for(let g=0,y=s.length;g!==y;g++){const x=s[g];l=ur.addOrSubtract(l,x)}return l}l=s[0];const u=s.length,f=this.field;for(let g=1;g<u;g++)l=ur.addOrSubtract(f.multiply(i,l),s[g]);return l}addOrSubtract(i){if(!this.field.equals(i.field))throw new M("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let s=this.coefficients,l=i.coefficients;if(s.length>l.length){const g=s;s=l,l=g}let u=new Int32Array(l.length);const f=l.length-s.length;pe.arraycopy(l,0,u,0,f);for(let g=f;g<l.length;g++)u[g]=ur.addOrSubtract(s[g-f],l[g]);return new Fn(this.field,u)}multiply(i){if(!this.field.equals(i.field))throw new M("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const s=this.coefficients,l=s.length,u=i.coefficients,f=u.length,g=new Int32Array(l+f-1),y=this.field;for(let x=0;x<l;x++){const T=s[x];for(let b=0;b<f;b++)g[x+b]=ur.addOrSubtract(g[x+b],y.multiply(T,u[b]))}return new Fn(y,g)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const s=this.coefficients.length,l=this.field,u=new Int32Array(s),f=this.coefficients;for(let g=0;g<s;g++)u[g]=l.multiply(f[g],i);return new Fn(l,u)}multiplyByMonomial(i,s){if(i<0)throw new M;if(s===0)return this.field.getZero();const l=this.coefficients,u=l.length,f=new Int32Array(u+i),g=this.field;for(let y=0;y<u;y++)f[y]=g.multiply(l[y],s);return new Fn(g,f)}divide(i){if(!this.field.equals(i.field))throw new M("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new M("Divide by 0");const s=this.field;let l=s.getZero(),u=this;const f=i.getCoefficient(i.getDegree()),g=s.inverse(f);for(;u.getDegree()>=i.getDegree()&&!u.isZero();){const y=u.getDegree()-i.getDegree(),x=s.multiply(u.getCoefficient(u.getDegree()),g),T=i.multiplyByMonomial(y,x),b=s.buildMonomial(y,x);l=l.addOrSubtract(b),u=u.addOrSubtract(T)}return[l,u]}toString(){let i="";for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);if(l!==0){if(l<0?(i+=" - ",l=-l):i.length>0&&(i+=" + "),s===0||l!==1){const u=this.field.log(l);u===0?i+="1":u===1?i+="a":(i+="a^",i+=u)}s!==0&&(s===1?i+="x":(i+="x^",i+=s))}}return i}}class Qr extends w{}Qr.kind="ArithmeticException";class Tt extends ur{constructor(i,s,l){super(),this.primitive=i,this.size=s,this.generatorBase=l;const u=new Int32Array(s);let f=1;for(let y=0;y<s;y++)u[y]=f,f*=2,f>=s&&(f^=i,f&=s-1);this.expTable=u;const g=new Int32Array(s);for(let y=0;y<s-1;y++)g[u[y]]=y;this.logTable=g,this.zero=new Fn(this,Int32Array.from([0])),this.one=new Fn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,s){if(i<0)throw new M;if(s===0)return this.zero;const l=new Int32Array(i+1);return l[0]=s,new Fn(this,l)}inverse(i){if(i===0)throw new Qr;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,s){return i===0||s===0?0:this.expTable[(this.logTable[i]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+Ce.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}Tt.AZTEC_DATA_12=new Tt(4201,4096,1),Tt.AZTEC_DATA_10=new Tt(1033,1024,1),Tt.AZTEC_DATA_6=new Tt(67,64,1),Tt.AZTEC_PARAM=new Tt(19,16,1),Tt.QR_CODE_FIELD_256=new Tt(285,256,0),Tt.DATA_MATRIX_FIELD_256=new Tt(301,256,1),Tt.AZTEC_DATA_8=Tt.DATA_MATRIX_FIELD_256,Tt.MAXICODE_FIELD_64=Tt.AZTEC_DATA_6;class fi extends w{}fi.kind="ReedSolomonException";class Oi extends w{}Oi.kind="IllegalStateException";class hr{constructor(i){this.field=i}decode(i,s){const l=this.field,u=new Fn(l,i),f=new Int32Array(s);let g=!0;for(let H=0;H<s;H++){const W=u.evaluateAt(l.exp(H+l.getGeneratorBase()));f[f.length-1-H]=W,W!==0&&(g=!1)}if(g)return;const y=new Fn(l,f),x=this.runEuclideanAlgorithm(l.buildMonomial(s,1),y,s),T=x[0],b=x[1],O=this.findErrorLocations(T),P=this.findErrorMagnitudes(b,O);for(let H=0;H<O.length;H++){const W=i.length-1-l.log(O[H]);if(W<0)throw new fi("Bad error location");i[W]=Tt.addOrSubtract(i[W],P[H])}}runEuclideanAlgorithm(i,s,l){if(i.getDegree()<s.getDegree()){const H=i;i=s,s=H}const u=this.field;let f=i,g=s,y=u.getZero(),x=u.getOne();for(;g.getDegree()>=(l/2|0);){let H=f,W=y;if(f=g,y=x,f.isZero())throw new fi("r_{i-1} was zero");g=H;let Z=u.getZero();const re=f.getCoefficient(f.getDegree()),fe=u.inverse(re);for(;g.getDegree()>=f.getDegree()&&!g.isZero();){const Re=g.getDegree()-f.getDegree(),be=u.multiply(g.getCoefficient(g.getDegree()),fe);Z=Z.addOrSubtract(u.buildMonomial(Re,be)),g=g.addOrSubtract(f.multiplyByMonomial(Re,be))}if(x=Z.multiply(y).addOrSubtract(W),g.getDegree()>=f.getDegree())throw new Oi("Division algorithm failed to reduce polynomial?")}const T=x.getCoefficient(0);if(T===0)throw new fi("sigmaTilde(0) was zero");const b=u.inverse(T),O=x.multiplyScalar(b),P=g.multiplyScalar(b);return[O,P]}findErrorLocations(i){const s=i.getDegree();if(s===1)return Int32Array.from([i.getCoefficient(1)]);const l=new Int32Array(s);let u=0;const f=this.field;for(let g=1;g<f.getSize()&&u<s;g++)i.evaluateAt(g)===0&&(l[u]=f.inverse(g),u++);if(u!==s)throw new fi("Error locator degree does not match number of roots");return l}findErrorMagnitudes(i,s){const l=s.length,u=new Int32Array(l),f=this.field;for(let g=0;g<l;g++){const y=f.inverse(s[g]);let x=1;for(let T=0;T<l;T++)if(g!==T){const b=f.multiply(s[T],y),O=(b&1)===0?b|1:b&-2;x=f.multiply(x,O)}u[g]=f.multiply(i.evaluateAt(y),f.inverse(x)),f.getGeneratorBase()!==0&&(u[g]=f.multiply(u[g],y))}return u}}var Rn;(function(N){N[N.UPPER=0]="UPPER",N[N.LOWER=1]="LOWER",N[N.MIXED=2]="MIXED",N[N.DIGIT=3]="DIGIT",N[N.PUNCT=4]="PUNCT",N[N.BINARY=5]="BINARY"})(Rn||(Rn={}));class Gt{decode(i){this.ddata=i;let s=i.getBits(),l=this.extractBits(s),u=this.correctBits(l),f=Gt.convertBoolArrayToByteArray(u),g=Gt.getEncodedData(u),y=new Zt(f,g,null,null);return y.setNumBits(u.length),y}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let s=i.length,l=Rn.UPPER,u=Rn.UPPER,f="",g=0;for(;g<s;)if(u===Rn.BINARY){if(s-g<5)break;let y=Gt.readCode(i,g,5);if(g+=5,y===0){if(s-g<11)break;y=Gt.readCode(i,g,11)+31,g+=11}for(let x=0;x<y;x++){if(s-g<8){g=s;break}const T=Gt.readCode(i,g,8);f+=q.castAsNonUtf8Char(T),g+=8}u=l}else{let y=u===Rn.DIGIT?4:5;if(s-g<y)break;let x=Gt.readCode(i,g,y);g+=y;let T=Gt.getCharacter(u,x);T.startsWith("CTRL_")?(l=u,u=Gt.getTable(T.charAt(5)),T.charAt(6)==="L"&&(l=u)):(f+=T,u=l)}return f}static getTable(i){switch(i){case"L":return Rn.LOWER;case"P":return Rn.PUNCT;case"M":return Rn.MIXED;case"D":return Rn.DIGIT;case"B":return Rn.BINARY;default:return Rn.UPPER}}static getCharacter(i,s){switch(i){case Rn.UPPER:return Gt.UPPER_TABLE[s];case Rn.LOWER:return Gt.LOWER_TABLE[s];case Rn.MIXED:return Gt.MIXED_TABLE[s];case Rn.PUNCT:return Gt.PUNCT_TABLE[s];case Rn.DIGIT:return Gt.DIGIT_TABLE[s];default:throw new Oi("Bad table")}}correctBits(i){let s,l;this.ddata.getNbLayers()<=2?(l=6,s=Tt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,s=Tt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,s=Tt.AZTEC_DATA_10):(l=12,s=Tt.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),f=i.length/l;if(f<u)throw new V;let g=i.length%l,y=new Int32Array(f);for(let P=0;P<f;P++,g+=l)y[P]=Gt.readCode(i,g,l);try{new hr(s).decode(y,f-u)}catch(P){throw new V(P)}let x=(1<<l)-1,T=0;for(let P=0;P<u;P++){let H=y[P];if(H===0||H===x)throw new V;(H===1||H===x-1)&&T++}let b=new Array(u*l-T),O=0;for(let P=0;P<u;P++){let H=y[P];if(H===1||H===x-1)b.fill(H>1,O,O+l-1),O+=l-1;else for(let W=l-1;W>=0;--W)b[O++]=(H&1<<W)!==0}return b}extractBits(i){let s=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(s?11:14)+l*4,f=new Int32Array(u),g=new Array(this.totalBitsInLayer(l,s));if(s)for(let y=0;y<f.length;y++)f[y]=y;else{let y=u+1+2*Ce.truncDivision(Ce.truncDivision(u,2)-1,15),x=u/2,T=Ce.truncDivision(y,2);for(let b=0;b<x;b++){let O=b+Ce.truncDivision(b,15);f[x-b-1]=T-O-1,f[x+b]=T+O+1}}for(let y=0,x=0;y<l;y++){let T=(l-y)*4+(s?9:12),b=y*2,O=u-1-b;for(let P=0;P<T;P++){let H=P*2;for(let W=0;W<2;W++)g[x+H+W]=i.get(f[b+W],f[b+P]),g[x+2*T+H+W]=i.get(f[b+P],f[O-W]),g[x+4*T+H+W]=i.get(f[O-W],f[O-P]),g[x+6*T+H+W]=i.get(f[O-P],f[b+W])}x+=T*8}return g}static readCode(i,s,l){let u=0;for(let f=s;f<s+l;f++)u<<=1,i[f]&&(u|=1);return u}static readByte(i,s){let l=i.length-s;return l>=8?Gt.readCode(i,s,8):Gt.readCode(i,s,l)<<8-l}static convertBoolArrayToByteArray(i){let s=new Uint8Array((i.length+7)/8);for(let l=0;l<s.length;l++)s[l]=Gt.readByte(i,8*l);return s}totalBitsInLayer(i,s){return((s?88:112)+16*i)*i}}Gt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Gt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Gt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Gt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Gt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ze{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,s,l,u){const f=i-l,g=s-u;return Math.sqrt(f*f+g*g)}static sum(i){let s=0;for(let l=0,u=i.length;l!==u;l++){const f=i[l];s+=f}return s}}class An{static floatToIntBits(i){return i}}An.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Fe{constructor(i,s){this.x=i,this.y=s}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof Fe){const s=i;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*An.floatToIntBits(this.x)+An.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const s=this.distance(i[0],i[1]),l=this.distance(i[1],i[2]),u=this.distance(i[0],i[2]);let f,g,y;if(l>=s&&l>=u?(g=i[0],f=i[1],y=i[2]):u>=l&&u>=s?(g=i[1],f=i[0],y=i[2]):(g=i[2],f=i[0],y=i[1]),this.crossProductZ(f,g,y)<0){const x=f;f=y,y=x}i[0]=f,i[1]=g,i[2]=y}static distance(i,s){return Ze.distance(i.x,i.y,s.x,s.y)}static crossProductZ(i,s,l){const u=s.x,f=s.y;return(l.x-u)*(i.y-f)-(l.y-f)*(i.x-u)}}class ha{constructor(i,s){this.bits=i,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class mo extends ha{constructor(i,s,l,u,f){super(i,s),this.compact=l,this.nbDatablocks=u,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class mn{constructor(i,s,l,u){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),s==null&&(s=mn.INIT_SIZE),l==null&&(l=i.getWidth()/2|0),u==null&&(u=i.getHeight()/2|0);const f=s/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=u-f,this.downInit=u+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Q}detect(){let i=this.leftInit,s=this.rightInit,l=this.upInit,u=this.downInit,f=!1,g=!0,y=!1,x=!1,T=!1,b=!1,O=!1;const P=this.width,H=this.height;for(;g;){g=!1;let W=!0;for(;(W||!x)&&s<P;)W=this.containsBlackPoint(l,u,s,!1),W?(s++,g=!0,x=!0):x||s++;if(s>=P){f=!0;break}let Z=!0;for(;(Z||!T)&&u<H;)Z=this.containsBlackPoint(i,s,u,!0),Z?(u++,g=!0,T=!0):T||u++;if(u>=H){f=!0;break}let re=!0;for(;(re||!b)&&i>=0;)re=this.containsBlackPoint(l,u,i,!1),re?(i--,g=!0,b=!0):b||i--;if(i<0){f=!0;break}let fe=!0;for(;(fe||!O)&&l>=0;)fe=this.containsBlackPoint(i,s,l,!0),fe?(l--,g=!0,O=!0):O||l--;if(l<0){f=!0;break}g&&(y=!0)}if(!f&&y){const W=s-i;let Z=null;for(let be=1;Z===null&&be<W;be++)Z=this.getBlackPointOnSegment(i,u-be,i+be,u);if(Z==null)throw new Q;let re=null;for(let be=1;re===null&&be<W;be++)re=this.getBlackPointOnSegment(i,l+be,i+be,l);if(re==null)throw new Q;let fe=null;for(let be=1;fe===null&&be<W;be++)fe=this.getBlackPointOnSegment(s,l+be,s-be,l);if(fe==null)throw new Q;let Re=null;for(let be=1;Re===null&&be<W;be++)Re=this.getBlackPointOnSegment(s,u-be,s-be,u);if(Re==null)throw new Q;return this.centerEdges(Re,Z,fe,re)}else throw new Q}getBlackPointOnSegment(i,s,l,u){const f=Ze.round(Ze.distance(i,s,l,u)),g=(l-i)/f,y=(u-s)/f,x=this.image;for(let T=0;T<f;T++){const b=Ze.round(i+T*g),O=Ze.round(s+T*y);if(x.get(b,O))return new Fe(b,O)}return null}centerEdges(i,s,l,u){const f=i.getX(),g=i.getY(),y=s.getX(),x=s.getY(),T=l.getX(),b=l.getY(),O=u.getX(),P=u.getY(),H=mn.CORR;return f<this.width/2?[new Fe(O-H,P+H),new Fe(y+H,x+H),new Fe(T-H,b-H),new Fe(f+H,g-H)]:[new Fe(O+H,P+H),new Fe(y+H,x-H),new Fe(T-H,b+H),new Fe(f-H,g-H)]}containsBlackPoint(i,s,l,u){const f=this.image;if(u){for(let g=i;g<=s;g++)if(f.get(g,l))return!0}else for(let g=i;g<=s;g++)if(f.get(l,g))return!0;return!1}}mn.INIT_SIZE=10,mn.CORR=1;class Zr{static checkAndNudgePoints(i,s){const l=i.getWidth(),u=i.getHeight();let f=!0;for(let g=0;g<s.length&&f;g+=2){const y=Math.floor(s[g]),x=Math.floor(s[g+1]);if(y<-1||y>l||x<-1||x>u)throw new Q;f=!1,y===-1?(s[g]=0,f=!0):y===l&&(s[g]=l-1,f=!0),x===-1?(s[g+1]=0,f=!0):x===u&&(s[g+1]=u-1,f=!0)}f=!0;for(let g=s.length-2;g>=0&&f;g-=2){const y=Math.floor(s[g]),x=Math.floor(s[g+1]);if(y<-1||y>l||x<-1||x>u)throw new Q;f=!1,y===-1?(s[g]=0,f=!0):y===l&&(s[g]=l-1,f=!0),x===-1?(s[g+1]=0,f=!0):x===u&&(s[g+1]=u-1,f=!0)}}}class di{constructor(i,s,l,u,f,g,y,x,T){this.a11=i,this.a21=s,this.a31=l,this.a12=u,this.a22=f,this.a32=g,this.a13=y,this.a23=x,this.a33=T}static quadrilateralToQuadrilateral(i,s,l,u,f,g,y,x,T,b,O,P,H,W,Z,re){const fe=di.quadrilateralToSquare(i,s,l,u,f,g,y,x);return di.squareToQuadrilateral(T,b,O,P,H,W,Z,re).times(fe)}transformPoints(i){const s=i.length,l=this.a11,u=this.a12,f=this.a13,g=this.a21,y=this.a22,x=this.a23,T=this.a31,b=this.a32,O=this.a33;for(let P=0;P<s;P+=2){const H=i[P],W=i[P+1],Z=f*H+x*W+O;i[P]=(l*H+g*W+T)/Z,i[P+1]=(u*H+y*W+b)/Z}}transformPointsWithValues(i,s){const l=this.a11,u=this.a12,f=this.a13,g=this.a21,y=this.a22,x=this.a23,T=this.a31,b=this.a32,O=this.a33,P=i.length;for(let H=0;H<P;H++){const W=i[H],Z=s[H],re=f*W+x*Z+O;i[H]=(l*W+g*Z+T)/re,s[H]=(u*W+y*Z+b)/re}}static squareToQuadrilateral(i,s,l,u,f,g,y,x){const T=i-l+f-y,b=s-u+g-x;if(T===0&&b===0)return new di(l-i,f-l,i,u-s,g-u,s,0,0,1);{const O=l-f,P=y-f,H=u-g,W=x-g,Z=O*W-P*H,re=(T*W-P*b)/Z,fe=(O*b-T*H)/Z;return new di(l-i+re*l,y-i+fe*y,i,u-s+re*u,x-s+fe*x,s,re,fe,1)}}static quadrilateralToSquare(i,s,l,u,f,g,y,x){return di.squareToQuadrilateral(i,s,l,u,f,g,y,x).buildAdjoint()}buildAdjoint(){return new di(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new di(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class fa extends Zr{sampleGrid(i,s,l,u,f,g,y,x,T,b,O,P,H,W,Z,re,fe,Re,be){const Te=di.quadrilateralToQuadrilateral(u,f,g,y,x,T,b,O,P,H,W,Z,re,fe,Re,be);return this.sampleGridWithTransform(i,s,l,Te)}sampleGridWithTransform(i,s,l,u){if(s<=0||l<=0)throw new Q;const f=new Ue(s,l),g=new Float32Array(2*s);for(let y=0;y<l;y++){const x=g.length,T=y+.5;for(let b=0;b<x;b+=2)g[b]=b/2+.5,g[b+1]=T;u.transformPoints(g),Zr.checkAndNudgePoints(i,g);try{for(let b=0;b<x;b+=2)i.get(Math.floor(g[b]),Math.floor(g[b+1]))&&f.set(b/2,y)}catch{throw new Q}}return f}}class gi{static setGridSampler(i){gi.gridSampler=i}static getInstance(){return gi.gridSampler}}gi.gridSampler=new fa;class ni{constructor(i,s){this.x=i,this.y=s}toResultPoint(){return new Fe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class po{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let s=this.getMatrixCenter(),l=this.getBullsEyeCorners(s);if(i){let g=l[0];l[0]=l[2],l[2]=g}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),f=this.getMatrixCornerPoints(l);return new mo(u,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new Q;let s=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(i[0],i[1],s),this.sampleLine(i[1],i[2],s),this.sampleLine(i[2],i[3],s),this.sampleLine(i[3],i[0],s)]);this.shift=this.getRotation(l,s);let u=0;for(let g=0;g<4;g++){let y=l[(this.shift+g)%4];this.compact?(u<<=7,u+=y>>1&127):(u<<=10,u+=(y>>2&992)+(y>>1&31))}let f=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(i,s){let l=0;i.forEach((u,f,g)=>{let y=(u>>s-2<<1)+(u&1);l=(l<<3)+y}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(Ce.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new Q}getCorrectedParameterData(i,s){let l,u;s?(l=7,u=2):(l=10,u=4);let f=l-u,g=new Int32Array(l);for(let x=l-1;x>=0;--x)g[x]=i&15,i>>=4;try{new hr(Tt.AZTEC_PARAM).decode(g,f)}catch{throw new Q}let y=0;for(let x=0;x<u;x++)y=(y<<4)+g[x];return y}getBullsEyeCorners(i){let s=i,l=i,u=i,f=i,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let O=this.getFirstDifferent(s,g,1,-1),P=this.getFirstDifferent(l,g,1,1),H=this.getFirstDifferent(u,g,-1,1),W=this.getFirstDifferent(f,g,-1,-1);if(this.nbCenterLayers>2){let Z=this.distancePoint(W,O)*this.nbCenterLayers/(this.distancePoint(f,s)*(this.nbCenterLayers+2));if(Z<.75||Z>1.25||!this.isWhiteOrBlackRectangle(O,P,H,W))break}s=O,l=P,u=H,f=W,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Q;this.compact=this.nbCenterLayers===5;let y=new Fe(s.getX()+.5,s.getY()-.5),x=new Fe(l.getX()+.5,l.getY()+.5),T=new Fe(u.getX()-.5,u.getY()+.5),b=new Fe(f.getX()-.5,f.getY()-.5);return this.expandSquare([y,x,T,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,s,l,u;try{let y=new mn(this.image).detect();i=y[0],s=y[1],l=y[2],u=y[3]}catch{let x=this.image.getWidth()/2,T=this.image.getHeight()/2;i=this.getFirstDifferent(new ni(x+7,T-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new ni(x+7,T+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new ni(x-7,T+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new ni(x-7,T-7),!1,-1,-1).toResultPoint()}let f=Ze.round((i.getX()+u.getX()+s.getX()+l.getX())/4),g=Ze.round((i.getY()+u.getY()+s.getY()+l.getY())/4);try{let y=new mn(this.image,15,f,g).detect();i=y[0],s=y[1],l=y[2],u=y[3]}catch{i=this.getFirstDifferent(new ni(f+7,g-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new ni(f+7,g+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new ni(f-7,g+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new ni(f-7,g-7),!1,-1,-1).toResultPoint()}return f=Ze.round((i.getX()+u.getX()+s.getX()+l.getX())/4),g=Ze.round((i.getY()+u.getY()+s.getY()+l.getY())/4),new ni(f,g)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,s,l,u,f){let g=gi.getInstance(),y=this.getDimension(),x=y/2-this.nbCenterLayers,T=y/2+this.nbCenterLayers;return g.sampleGrid(i,y,y,x,x,T,x,T,T,x,T,s.getX(),s.getY(),l.getX(),l.getY(),u.getX(),u.getY(),f.getX(),f.getY())}sampleLine(i,s,l){let u=0,f=this.distanceResultPoint(i,s),g=f/l,y=i.getX(),x=i.getY(),T=g*(s.getX()-i.getX())/f,b=g*(s.getY()-i.getY())/f;for(let O=0;O<l;O++)this.image.get(Ze.round(y+O*T),Ze.round(x+O*b))&&(u|=1<<l-O-1);return u}isWhiteOrBlackRectangle(i,s,l,u){let f=3;i=new ni(i.getX()-f,i.getY()+f),s=new ni(s.getX()-f,s.getY()-f),l=new ni(l.getX()+f,l.getY()-f),u=new ni(u.getX()+f,u.getY()+f);let g=this.getColor(u,i);if(g===0)return!1;let y=this.getColor(i,s);return y!==g||(y=this.getColor(s,l),y!==g)?!1:(y=this.getColor(l,u),y===g)}getColor(i,s){let l=this.distancePoint(i,s),u=(s.getX()-i.getX())/l,f=(s.getY()-i.getY())/l,g=0,y=i.getX(),x=i.getY(),T=this.image.get(i.getX(),i.getY()),b=Math.ceil(l);for(let P=0;P<b;P++)y+=u,x+=f,this.image.get(Ze.round(y),Ze.round(x))!==T&&g++;let O=g/l;return O>.1&&O<.9?0:O<=.1===T?1:-1}getFirstDifferent(i,s,l,u){let f=i.getX()+l,g=i.getY()+u;for(;this.isValid(f,g)&&this.image.get(f,g)===s;)f+=l,g+=u;for(f-=l,g-=u;this.isValid(f,g)&&this.image.get(f,g)===s;)f+=l;for(f-=l;this.isValid(f,g)&&this.image.get(f,g)===s;)g+=u;return g-=u,new ni(f,g)}expandSquare(i,s,l){let u=l/(2*s),f=i[0].getX()-i[2].getX(),g=i[0].getY()-i[2].getY(),y=(i[0].getX()+i[2].getX())/2,x=(i[0].getY()+i[2].getY())/2,T=new Fe(y+u*f,x+u*g),b=new Fe(y-u*f,x-u*g);f=i[1].getX()-i[3].getX(),g=i[1].getY()-i[3].getY(),y=(i[1].getX()+i[3].getX())/2,x=(i[1].getY()+i[3].getY())/2;let O=new Fe(y+u*f,x+u*g),P=new Fe(y-u*f,x-u*g);return[T,O,b,P]}isValid(i,s){return i>=0&&i<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(i){let s=Ze.round(i.getX()),l=Ze.round(i.getY());return this.isValid(s,l)}distancePoint(i,s){return Ze.distance(i.getX(),i.getY(),s.getX(),s.getY())}distanceResultPoint(i,s){return Ze.distance(i.getX(),i.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ce.truncDivision(this.nbLayers-4,8)+1)+15}}class Is{decode(i,s=null){let l=null,u=new po(i.getBlackMatrix()),f=null,g=null;try{let b=u.detectMirror(!1);f=b.getPoints(),this.reportFoundResultPoints(s,f),g=new Gt().decode(b)}catch(b){l=b}if(g==null)try{let b=u.detectMirror(!0);f=b.getPoints(),this.reportFoundResultPoints(s,f),g=new Gt().decode(b)}catch(b){throw l??b}let y=new De(g.getText(),g.getRawBytes(),g.getNumBits(),f,Oe.AZTEC,pe.currentTimeMillis()),x=g.getByteSegments();x!=null&&y.putMetadata(wt.BYTE_SEGMENTS,x);let T=g.getECLevel();return T!=null&&y.putMetadata(wt.ERROR_CORRECTION_LEVEL,T),y}reportFoundResultPoints(i,s){if(i!=null){let l=i.get(ke.NEED_RESULT_POINT_CALLBACK);l!=null&&s.forEach((u,f,g)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class $o extends Ie{constructor(i=500){super(new Is,i)}}class qt{decode(i,s){try{return this.doDecode(i,s)}catch{if(s&&s.get(ke.TRY_HARDER)===!0&&i.isRotateSupported()){const f=i.rotateCounterClockwise(),g=this.doDecode(f,s),y=g.getResultMetadata();let x=270;y!==null&&y.get(wt.ORIENTATION)===!0&&(x=x+y.get(wt.ORIENTATION)%360),g.putMetadata(wt.ORIENTATION,x);const T=g.getResultPoints();if(T!==null){const b=f.getHeight();for(let O=0;O<T.length;O++)T[O]=new Fe(b-T[O].getY()-1,T[O].getX())}return g}else throw new Q}}reset(){}doDecode(i,s){const l=i.getWidth(),u=i.getHeight();let f=new Be(l);const g=s&&s.get(ke.TRY_HARDER)===!0,y=Math.max(1,u>>(g?8:5));let x;g?x=u:x=15;const T=Math.trunc(u/2);for(let b=0;b<x;b++){const O=Math.trunc((b+1)/2),P=(b&1)===0,H=T+y*(P?O:-O);if(H<0||H>=u)break;try{f=i.getBlackRow(H,f)}catch{continue}for(let W=0;W<2;W++){if(W===1&&(f.reverse(),s&&s.get(ke.NEED_RESULT_POINT_CALLBACK)===!0)){const Z=new Map;s.forEach((re,fe)=>Z.set(fe,re)),Z.delete(ke.NEED_RESULT_POINT_CALLBACK),s=Z}try{const Z=this.decodeRow(H,f,s);if(W===1){Z.putMetadata(wt.ORIENTATION,180);const re=Z.getResultPoints();re!==null&&(re[0]=new Fe(l-re[0].getX()-1,re[0].getY()),re[1]=new Fe(l-re[1].getX()-1,re[1].getY()))}return Z}catch{}}}throw new Q}static recordPattern(i,s,l){const u=l.length;for(let T=0;T<u;T++)l[T]=0;const f=i.getSize();if(s>=f)throw new Q;let g=!i.get(s),y=0,x=s;for(;x<f;){if(i.get(x)!==g)l[y]++;else{if(++y===u)break;l[y]=1,g=!g}x++}if(!(y===u||y===u-1&&x===f))throw new Q}static recordPatternInReverse(i,s,l){let u=l.length,f=i.get(s);for(;s>0&&u>=0;)i.get(--s)!==f&&(u--,f=!f);if(u>=0)throw new Q;qt.recordPattern(i,s+1,l)}static patternMatchVariance(i,s,l){const u=i.length;let f=0,g=0;for(let T=0;T<u;T++)f+=i[T],g+=s[T];if(f<g)return Number.POSITIVE_INFINITY;const y=f/g;l*=y;let x=0;for(let T=0;T<u;T++){const b=i[T],O=s[T]*y,P=b>O?b-O:O-b;if(P>l)return Number.POSITIVE_INFINITY;x+=P}return x/f}}class Se extends qt{static findStartPattern(i){const s=i.getSize(),l=i.getNextSet(0);let u=0,f=Int32Array.from([0,0,0,0,0,0]),g=l,y=!1;const x=6;for(let T=l;T<s;T++)if(i.get(T)!==y)f[u]++;else{if(u===x-1){let b=Se.MAX_AVG_VARIANCE,O=-1;for(let P=Se.CODE_START_A;P<=Se.CODE_START_C;P++){const H=qt.patternMatchVariance(f,Se.CODE_PATTERNS[P],Se.MAX_INDIVIDUAL_VARIANCE);H<b&&(b=H,O=P)}if(O>=0&&i.isRange(Math.max(0,g-(T-g)/2),g,!1))return Int32Array.from([g,T,O]);g+=f[0]+f[1],f=f.slice(2,f.length-1),f[u-1]=0,f[u]=0,u--}else u++;f[u]=1,y=!y}throw new Q}static decodeCode(i,s,l){qt.recordPattern(i,l,s);let u=Se.MAX_AVG_VARIANCE,f=-1;for(let g=0;g<Se.CODE_PATTERNS.length;g++){const y=Se.CODE_PATTERNS[g],x=this.patternMatchVariance(s,y,Se.MAX_INDIVIDUAL_VARIANCE);x<u&&(u=x,f=g)}if(f>=0)return f;throw new Q}decodeRow(i,s,l){const u=l&&l.get(ke.ASSUME_GS1)===!0,f=Se.findStartPattern(s),g=f[2];let y=0;const x=new Uint8Array(20);x[y++]=g;let T;switch(g){case Se.CODE_START_A:T=Se.CODE_CODE_A;break;case Se.CODE_START_B:T=Se.CODE_CODE_B;break;case Se.CODE_START_C:T=Se.CODE_CODE_C;break;default:throw new V}let b=!1,O=!1,P="",H=f[0],W=f[1];const Z=Int32Array.from([0,0,0,0,0,0]);let re=0,fe=0,Re=g,be=0,Te=!0,Et=!1,ot=!1;for(;!b;){const zs=O;switch(O=!1,re=fe,fe=Se.decodeCode(s,Z,W),x[y++]=fe,fe!==Se.CODE_STOP&&(Te=!0),fe!==Se.CODE_STOP&&(be++,Re+=be*fe),H=W,W+=Z.reduce((Tu,ic)=>Tu+ic,0),fe){case Se.CODE_START_A:case Se.CODE_START_B:case Se.CODE_START_C:throw new V}switch(T){case Se.CODE_CODE_A:if(fe<64)ot===Et?P+=String.fromCharCode(32+fe):P+=String.fromCharCode(32+fe+128),ot=!1;else if(fe<96)ot===Et?P+=String.fromCharCode(fe-64):P+=String.fromCharCode(fe+64),ot=!1;else switch(fe!==Se.CODE_STOP&&(Te=!1),fe){case Se.CODE_FNC_1:u&&(P.length===0?P+="]C1":P+="");break;case Se.CODE_FNC_2:case Se.CODE_FNC_3:break;case Se.CODE_FNC_4_A:!Et&&ot?(Et=!0,ot=!1):Et&&ot?(Et=!1,ot=!1):ot=!0;break;case Se.CODE_SHIFT:O=!0,T=Se.CODE_CODE_B;break;case Se.CODE_CODE_B:T=Se.CODE_CODE_B;break;case Se.CODE_CODE_C:T=Se.CODE_CODE_C;break;case Se.CODE_STOP:b=!0;break}break;case Se.CODE_CODE_B:if(fe<96)ot===Et?P+=String.fromCharCode(32+fe):P+=String.fromCharCode(32+fe+128),ot=!1;else switch(fe!==Se.CODE_STOP&&(Te=!1),fe){case Se.CODE_FNC_1:u&&(P.length===0?P+="]C1":P+="");break;case Se.CODE_FNC_2:case Se.CODE_FNC_3:break;case Se.CODE_FNC_4_B:!Et&&ot?(Et=!0,ot=!1):Et&&ot?(Et=!1,ot=!1):ot=!0;break;case Se.CODE_SHIFT:O=!0,T=Se.CODE_CODE_A;break;case Se.CODE_CODE_A:T=Se.CODE_CODE_A;break;case Se.CODE_CODE_C:T=Se.CODE_CODE_C;break;case Se.CODE_STOP:b=!0;break}break;case Se.CODE_CODE_C:if(fe<100)fe<10&&(P+="0"),P+=fe;else switch(fe!==Se.CODE_STOP&&(Te=!1),fe){case Se.CODE_FNC_1:u&&(P.length===0?P+="]C1":P+="");break;case Se.CODE_CODE_A:T=Se.CODE_CODE_A;break;case Se.CODE_CODE_B:T=Se.CODE_CODE_B;break;case Se.CODE_STOP:b=!0;break}break}zs&&(T=T===Se.CODE_CODE_A?Se.CODE_CODE_B:Se.CODE_CODE_A)}const kn=W-H;if(W=s.getNextUnset(W),!s.isRange(W,Math.min(s.getSize(),W+(W-H)/2),!1))throw new Q;if(Re-=be*re,Re%103!==re)throw new te;const tr=P.length;if(tr===0)throw new Q;tr>0&&Te&&(T===Se.CODE_CODE_C?P=P.substring(0,tr-2):P=P.substring(0,tr-1));const Ti=(f[1]+f[0])/2,en=H+kn/2,ri=x.length,Wi=new Uint8Array(ri);for(let zs=0;zs<ri;zs++)Wi[zs]=x[zs];const Aa=[new Fe(Ti,i),new Fe(en,i)];return new De(P,Wi,0,Aa,Oe.CODE_128,new Date().getTime())}}Se.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Se.MAX_AVG_VARIANCE=.25,Se.MAX_INDIVIDUAL_VARIANCE=.7,Se.CODE_SHIFT=98,Se.CODE_CODE_C=99,Se.CODE_CODE_B=100,Se.CODE_CODE_A=101,Se.CODE_FNC_1=102,Se.CODE_FNC_2=97,Se.CODE_FNC_3=96,Se.CODE_FNC_4_A=101,Se.CODE_FNC_4_B=100,Se.CODE_START_A=103,Se.CODE_START_B=104,Se.CODE_START_C=105,Se.CODE_STOP=106;class Xt extends qt{constructor(i=!1,s=!1){super(),this.usingCheckDigit=i,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,s,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let f=Xt.findAsteriskPattern(s,u),g=s.getNextSet(f[1]),y=s.getSize(),x,T;do{Xt.recordPattern(s,g,u);let Z=Xt.toNarrowWidePattern(u);if(Z<0)throw new Q;x=Xt.patternToChar(Z),this.decodeRowResult+=x,T=g;for(let re of u)g+=re;g=s.getNextSet(g)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let b=0;for(let Z of u)b+=Z;let O=g-T-b;if(g!==y&&O*2<b)throw new Q;if(this.usingCheckDigit){let Z=this.decodeRowResult.length-1,re=0;for(let fe=0;fe<Z;fe++)re+=Xt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(fe));if(this.decodeRowResult.charAt(Z)!==Xt.ALPHABET_STRING.charAt(re%43))throw new te;this.decodeRowResult=this.decodeRowResult.substring(0,Z)}if(this.decodeRowResult.length===0)throw new Q;let P;this.extendedMode?P=Xt.decodeExtended(this.decodeRowResult):P=this.decodeRowResult;let H=(f[1]+f[0])/2,W=T+b/2;return new De(P,null,0,[new Fe(H,i),new Fe(W,i)],Oe.CODE_39,new Date().getTime())}static findAsteriskPattern(i,s){let l=i.getSize(),u=i.getNextSet(0),f=0,g=u,y=!1,x=s.length;for(let T=u;T<l;T++)if(i.get(T)!==y)s[f]++;else{if(f===x-1){if(this.toNarrowWidePattern(s)===Xt.ASTERISK_ENCODING&&i.isRange(Math.max(0,g-Math.floor((T-g)/2)),g,!1))return[g,T];g+=s[0]+s[1],s.copyWithin(0,2,2+f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,y=!y}throw new Q}static toNarrowWidePattern(i){let s=i.length,l=0,u;do{let f=2147483647;for(let x of i)x<f&&x>l&&(f=x);l=f,u=0;let g=0,y=0;for(let x=0;x<s;x++){let T=i[x];T>l&&(y|=1<<s-1-x,u++,g+=T)}if(u===3){for(let x=0;x<s&&u>0;x++){let T=i[x];if(T>l&&(u--,T*2>=g))return-1}return y}}while(u>3);return-1}static patternToChar(i){for(let s=0;s<Xt.CHARACTER_ENCODINGS.length;s++)if(Xt.CHARACTER_ENCODINGS[s]===i)return Xt.ALPHABET_STRING.charAt(s);if(i===Xt.ASTERISK_ENCODING)return"*";throw new Q}static decodeExtended(i){let s=i.length,l="";for(let u=0;u<s;u++){let f=i.charAt(u);if(f==="+"||f==="$"||f==="%"||f==="/"){let g=i.charAt(u+1),y="\0";switch(f){case"+":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)+32);else throw new V;break;case"$":if(g>="A"&&g<="Z")y=String.fromCharCode(g.charCodeAt(0)-64);else throw new V;break;case"%":if(g>="A"&&g<="E")y=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")y=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")y=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")y="\0";else if(g==="V")y="@";else if(g==="W")y="`";else if(g==="X"||g==="Y"||g==="Z")y="";else throw new V;break;case"/":if(g>="A"&&g<="O")y=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")y=":";else throw new V;break}l+=y,u++}else l+=f}return l}}Xt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Xt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Xt.ASTERISK_ENCODING=148;class it extends qt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,s,l){let u=this.decodeStart(s),f=this.decodeEnd(s),g=new F;it.decodeMiddle(s,u[1],f[0],g);let y=g.toString(),x=null;l!=null&&(x=l.get(ke.ALLOWED_LENGTHS)),x==null&&(x=it.DEFAULT_ALLOWED_LENGTHS);let T=y.length,b=!1,O=0;for(let W of x){if(T===W){b=!0;break}W>O&&(O=W)}if(!b&&T>O&&(b=!0),!b)throw new V;const P=[new Fe(u[1],i),new Fe(f[0],i)];return new De(y,null,0,P,Oe.ITF,new Date().getTime())}static decodeMiddle(i,s,l,u){let f=new Int32Array(10),g=new Int32Array(5),y=new Int32Array(5);for(f.fill(0),g.fill(0),y.fill(0);s<l;){qt.recordPattern(i,s,f);for(let T=0;T<5;T++){let b=2*T;g[T]=f[b],y[T]=f[b+1]}let x=it.decodeDigit(g);u.append(x.toString()),x=this.decodeDigit(y),u.append(x.toString()),f.forEach(function(T){s+=T})}}decodeStart(i){let s=it.skipWhiteSpace(i),l=it.findGuardPattern(i,s,it.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(i,l[0]),l}validateQuietZone(i,s){let l=this.narrowLineWidth*10;l=l<s?l:s;for(let u=s-1;l>0&&u>=0&&!i.get(u);u--)l--;if(l!==0)throw new Q}static skipWhiteSpace(i){const s=i.getSize(),l=i.getNextSet(0);if(l===s)throw new Q;return l}decodeEnd(i){i.reverse();try{let s=it.skipWhiteSpace(i),l;try{l=it.findGuardPattern(i,s,it.END_PATTERN_REVERSED[0])}catch(f){f instanceof Q&&(l=it.findGuardPattern(i,s,it.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,l[0]);let u=l[0];return l[0]=i.getSize()-l[1],l[1]=i.getSize()-u,l}finally{i.reverse()}}static findGuardPattern(i,s,l){let u=l.length,f=new Int32Array(u),g=i.getSize(),y=!1,x=0,T=s;f.fill(0);for(let b=s;b<g;b++)if(i.get(b)!==y)f[x]++;else{if(x===u-1){if(qt.patternMatchVariance(f,l,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return[T,b];T+=f[0]+f[1],pe.arraycopy(f,2,f,0,x-1),f[x-1]=0,f[x]=0,x--}else x++;f[x]=1,y=!y}throw new Q}static decodeDigit(i){let s=it.MAX_AVG_VARIANCE,l=-1,u=it.PATTERNS.length;for(let f=0;f<u;f++){let g=it.PATTERNS[f],y=qt.patternMatchVariance(i,g,it.MAX_INDIVIDUAL_VARIANCE);y<s?(s=y,l=f):y===s&&(l=-1)}if(l>=0)return l%10;throw new Q}}it.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],it.MAX_AVG_VARIANCE=.38,it.MAX_INDIVIDUAL_VARIANCE=.5,it.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],it.START_PATTERN=Int32Array.from([1,1,1,1]),it.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class cn extends qt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let s=!1,l,u=0,f=Int32Array.from([0,0,0]);for(;!s;){f=Int32Array.from([0,0,0]),l=cn.findGuardPattern(i,u,!1,this.START_END_PATTERN,f);let g=l[0];u=l[1];let y=g-(u-g);y>=0&&(s=i.isRange(y,g,!1))}return l}static checkChecksum(i){return cn.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let s=i.length;if(s===0)return!1;let l=parseInt(i.charAt(s-1),10);return cn.getStandardUPCEANChecksum(i.substring(0,s-1))===l}static getStandardUPCEANChecksum(i){let s=i.length,l=0;for(let u=s-1;u>=0;u-=2){let f=i.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new V;l+=f}l*=3;for(let u=s-2;u>=0;u-=2){let f=i.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new V;l+=f}return(1e3-l)%10}static decodeEnd(i,s){return cn.findGuardPattern(i,s,!1,cn.START_END_PATTERN,new Int32Array(cn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,s,l,u){return this.findGuardPattern(i,s,l,u,new Int32Array(u.length))}static findGuardPattern(i,s,l,u,f){let g=i.getSize();s=l?i.getNextUnset(s):i.getNextSet(s);let y=0,x=s,T=u.length,b=l;for(let O=s;O<g;O++)if(i.get(O)!==b)f[y]++;else{if(y===T-1){if(qt.patternMatchVariance(f,u,cn.MAX_INDIVIDUAL_VARIANCE)<cn.MAX_AVG_VARIANCE)return Int32Array.from([x,O]);x+=f[0]+f[1];let P=f.slice(2,f.length-1);for(let H=0;H<y-1;H++)f[H]=P[H];f[y-1]=0,f[y]=0,y--}else y++;f[y]=1,b=!b}throw new Q}static decodeDigit(i,s,l,u){this.recordPattern(i,l,s);let f=this.MAX_AVG_VARIANCE,g=-1,y=u.length;for(let x=0;x<y;x++){let T=u[x],b=qt.patternMatchVariance(s,T,cn.MAX_INDIVIDUAL_VARIANCE);b<f&&(f=b,g=x)}if(g>=0)return g;throw new Q}}cn.MAX_AVG_VARIANCE=.48,cn.MAX_INDIVIDUAL_VARIANCE=.7,cn.START_END_PATTERN=Int32Array.from([1,1,1]),cn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),cn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),cn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Nr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,s,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(s,l,u),g=u.toString(),y=Nr.parseExtensionString(g),x=[new Fe((l[0]+l[1])/2,i),new Fe(f,i)],T=new De(g,null,0,x,Oe.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&T.putAllMetadata(y),T}decodeMiddle(i,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g=s[1],y=0;for(let T=0;T<5&&g<f;T++){let b=cn.decodeDigit(i,u,g,cn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+b%10);for(let O of u)g+=O;b>=10&&(y|=1<<4-T),T!==4&&(g=i.getNextSet(g),g=i.getNextUnset(g))}if(l.length!==5)throw new Q;let x=this.determineCheckDigit(y);if(Nr.extensionChecksum(l.toString())!==x)throw new Q;return g}static extensionChecksum(i){let s=i.length,l=0;for(let u=s-2;u>=0;u-=2)l+=i.charAt(u).charCodeAt(0)-48;l*=3;for(let u=s-1;u>=0;u-=2)l+=i.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(i){for(let s=0;s<10;s++)if(i===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new Q}static parseExtensionString(i){if(i.length!==5)return null;let s=Nr.parseExtension5String(i);return s==null?null:new Map([[wt.SUGGESTED_PRICE,s]])}static parseExtension5String(i){let s;switch(i.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let l=parseInt(i.substring(1)),u=(l/100).toString(),f=l%100,g=f<10?"0"+f:f.toString();return s+u+"."+g}}class da{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,s,l){let u=this.decodeRowStringBuffer,f=this.decodeMiddle(s,l,u),g=u.toString(),y=da.parseExtensionString(g),x=[new Fe((l[0]+l[1])/2,i),new Fe(f,i)],T=new De(g,null,0,x,Oe.UPC_EAN_EXTENSION,new Date().getTime());return y!=null&&T.putAllMetadata(y),T}decodeMiddle(i,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g=s[1],y=0;for(let x=0;x<2&&g<f;x++){let T=cn.decodeDigit(i,u,g,cn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+T%10);for(let b of u)g+=b;T>=10&&(y|=1<<1-x),x!==1&&(g=i.getNextSet(g),g=i.getNextUnset(g))}if(l.length!==2)throw new Q;if(parseInt(l.toString())%4!==y)throw new Q;return g}static parseExtensionString(i){return i.length!==2?null:new Map([[wt.ISSUE_NUMBER,parseInt(i)]])}}class fr{static decodeRow(i,s,l){let u=cn.findGuardPattern(s,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Nr().decodeRow(i,s,u)}catch{return new da().decodeRow(i,s,u)}}}fr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class xt extends cn{constructor(){super(),this.decodeRowStringBuffer="",xt.L_AND_G_PATTERNS=xt.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let s=xt.L_PATTERNS[i-10],l=new Int32Array(s.length);for(let u=0;u<s.length;u++)l[u]=s[s.length-u-1];xt.L_AND_G_PATTERNS[i]=l}}decodeRow(i,s,l){let u=xt.findStartGuardPattern(s),f=l==null?null:l.get(ke.NEED_RESULT_POINT_CALLBACK);if(f!=null){const Te=new Fe((u[0]+u[1])/2,i);f.foundPossibleResultPoint(Te)}let g=this.decodeMiddle(s,u,this.decodeRowStringBuffer),y=g.rowOffset,x=g.resultString;if(f!=null){const Te=new Fe(y,i);f.foundPossibleResultPoint(Te)}let T=this.decodeEnd(s,y);if(f!=null){const Te=new Fe((T[0]+T[1])/2,i);f.foundPossibleResultPoint(Te)}let b=T[1],O=b+(b-T[0]);if(O>=s.getSize()||!s.isRange(b,O,!1))throw new Q;let P=x.toString();if(P.length<8)throw new V;if(!xt.checkChecksum(P))throw new te;let H=(u[1]+u[0])/2,W=(T[1]+T[0])/2,Z=this.getBarcodeFormat(),re=[new Fe(H,i),new Fe(W,i)],fe=new De(P,null,0,re,Z,new Date().getTime()),Re=0;try{let Te=fr.decodeRow(i,s,T[1]);fe.putMetadata(wt.UPC_EAN_EXTENSION,Te.getText()),fe.putAllMetadata(Te.getResultMetadata()),fe.addResultPoints(Te.getResultPoints()),Re=Te.getText().length}catch{}let be=l==null?null:l.get(ke.ALLOWED_EAN_EXTENSIONS);if(be!=null){let Te=!1;for(let Et in be)if(Re.toString()===Et){Te=!0;break}if(!Te)throw new Q}return fe}decodeEnd(i,s){return xt.findGuardPattern(i,s,!1,xt.START_END_PATTERN,new Int32Array(xt.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return xt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let s=i.length;if(s===0)return!1;let l=parseInt(i.charAt(s-1),10);return xt.getStandardUPCEANChecksum(i.substring(0,s-1))===l}static getStandardUPCEANChecksum(i){let s=i.length,l=0;for(let u=s-1;u>=0;u-=2){let f=i.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new V;l+=f}l*=3;for(let u=s-2;u>=0;u-=2){let f=i.charAt(u).charCodeAt(0)-48;if(f<0||f>9)throw new V;l+=f}return(1e3-l)%10}}class sn extends xt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,s,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g=s[1],y=0;for(let T=0;T<6&&g<f;T++){let b=xt.decodeDigit(i,u,g,xt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+b%10);for(let O of u)g+=O;b>=10&&(y|=1<<5-T)}l=sn.determineFirstDigit(l,y),g=xt.findGuardPattern(i,g,!0,xt.MIDDLE_PATTERN,new Int32Array(xt.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<6&&g<f;T++){let b=xt.decodeDigit(i,u,g,xt.L_PATTERNS);l+=String.fromCharCode(48+b);for(let O of u)g+=O}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return Oe.EAN_13}static determineFirstDigit(i,s){for(let l=0;l<10;l++)if(s===this.FIRST_DIGIT_ENCODINGS[l])return i=String.fromCharCode(48+l)+i,i;throw new Q}}sn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class dr extends xt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,s,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g=s[1];for(let x=0;x<4&&g<f;x++){let T=xt.decodeDigit(i,u,g,xt.L_PATTERNS);l+=String.fromCharCode(48+T);for(let b of u)g+=b}g=xt.findGuardPattern(i,g,!0,xt.MIDDLE_PATTERN,new Int32Array(xt.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&g<f;x++){let T=xt.decodeDigit(i,u,g,xt.L_PATTERNS);l+=String.fromCharCode(48+T);for(let b of u)g+=b}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return Oe.EAN_8}}class gr extends xt{constructor(){super(...arguments),this.ean13Reader=new sn}getBarcodeFormat(){return Oe.UPC_A}decode(i,s){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,s,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,s,l))}decodeMiddle(i,s,l){return this.ean13Reader.decodeMiddle(i,s,l)}maybeReturnResult(i){let s=i.getText();if(s.charAt(0)==="0"){let l=new De(s.substring(1),null,null,i.getResultPoints(),Oe.UPC_A);return i.getResultMetadata()!=null&&l.putAllMetadata(i.getResultMetadata()),l}else throw new Q}reset(){this.ean13Reader.reset()}}class Nn extends xt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,s,l){const u=this.decodeMiddleCounters.map(T=>T);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const f=i.getSize();let g=s[1],y=0;for(let T=0;T<6&&g<f;T++){const b=Nn.decodeDigit(i,u,g,Nn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+b%10);for(let O of u)g+=O;b>=10&&(y|=1<<5-T)}let x=Nn.determineNumSysAndCheckDigit(l,y);return{rowOffset:g,resultString:x}}decodeEnd(i,s){return Nn.findGuardPatternWithoutCounters(i,s,!0,Nn.MIDDLE_END_PATTERN)}checkChecksum(i){return xt.checkChecksum(Nn.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,s){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let f=String.fromCharCode(48+l),g=String.fromCharCode(48+u);return f+i+g}throw Q.getNotFoundInstance()}getBarcodeFormat(){return Oe.UPC_E}static convertUPCEtoUPCA(i){const s=i.slice(1,7).split("").map(f=>f.charCodeAt(0)),l=new F;l.append(i.charAt(0));let u=s[5];switch(u){case 0:case 1:case 2:l.appendChars(s,0,2),l.append(u),l.append("0000"),l.appendChars(s,2,3);break;case 3:l.appendChars(s,0,3),l.append("00000"),l.appendChars(s,3,2);break;case 4:l.appendChars(s,0,4),l.append("00000"),l.append(s[4]);break;default:l.appendChars(s,0,5),l.append("0000"),l.append(u);break}return i.length>=8&&l.append(i.charAt(7)),l.toString()}}Nn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Nn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class yo extends qt{constructor(i){super();let s=i==null?null:i.get(ke.POSSIBLE_FORMATS),l=[];o(s)?(l.push(new sn),l.push(new gr),l.push(new dr),l.push(new Nn)):(s.indexOf(Oe.EAN_13)>-1&&l.push(new sn),s.indexOf(Oe.UPC_A)>-1&&l.push(new gr),s.indexOf(Oe.EAN_8)>-1&&l.push(new dr),s.indexOf(Oe.UPC_E)>-1&&l.push(new Nn)),this.readers=l}decodeRow(i,s,l){for(let u of this.readers)try{const f=u.decodeRow(i,s,l),g=f.getBarcodeFormat()===Oe.EAN_13&&f.getText().charAt(0)==="0",y=l==null?null:l.get(ke.POSSIBLE_FORMATS),x=y==null||y.includes(Oe.UPC_A);if(g&&x){const T=f.getRawBytes(),b=new De(f.getText().substring(1),T,T?T.length:null,f.getResultPoints(),Oe.UPC_A);return b.putAllMetadata(f.getResultMetadata()),b}return f}catch{}throw new Q}reset(){for(let i of this.readers)i.reset()}}class zn extends qt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,s){for(let l=0;l<s.length;l++)if(qt.patternMatchVariance(i,s[l],zn.MAX_INDIVIDUAL_VARIANCE)<zn.MAX_AVG_VARIANCE)return l;throw new Q}static count(i){return Ze.sum(new Int32Array(i))}static increment(i,s){let l=0,u=s[0];for(let f=1;f<i.length;f++)s[f]>u&&(u=s[f],l=f);i[l]++}static decrement(i,s){let l=0,u=s[0];for(let f=1;f<i.length;f++)s[f]<u&&(u=s[f],l=f);i[l]--}static isFinderPattern(i){let s=i[0]+i[1],l=s+i[2]+i[3],u=s/l;if(u>=zn.MIN_FINDER_PATTERN_RATIO&&u<=zn.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let y of i)y>g&&(g=y),y<f&&(f=y);return g<10*f}return!1}}zn.MAX_AVG_VARIANCE=.2,zn.MAX_INDIVIDUAL_VARIANCE=.45,zn.MIN_FINDER_PATTERN_RATIO=9.5/12,zn.MAX_FINDER_PATTERN_RATIO=12.5/14;class mi{constructor(i,s){this.value=i,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof mi))return!1;const s=i;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Or{constructor(i,s,l,u,f){this.value=i,this.startEnd=s,this.value=i,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new Fe(l,f)),this.resultPoints.push(new Fe(u,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof Or))return!1;const s=i;return this.value===s.value}hashCode(){return this.value}}class Qi{constructor(){}static getRSSvalue(i,s,l){let u=0;for(let x of i)u+=x;let f=0,g=0,y=i.length;for(let x=0;x<y-1;x++){let T;for(T=1,g|=1<<x;T<i[x];T++,g&=~(1<<x)){let b=Qi.combins(u-T-1,y-x-2);if(l&&g===0&&u-T-(y-x-1)>=y-x-1&&(b-=Qi.combins(u-T-(y-x),y-x-2)),y-x-1>1){let O=0;for(let P=u-T-(y-x-2);P>s;P--)O+=Qi.combins(u-T-P-1,y-x-3);b-=O*(y-1-x)}else u-T>s&&b--;f+=b}u-=T}return f}static combins(i,s){let l,u;i-s>s?(u=s,l=i-s):(u=i-s,l=s);let f=1,g=1;for(let y=i;y>l;y--)f*=y,g<=u&&(f/=g,g++);for(;g<=u;)f/=g,g++;return f}}class Rs{static buildBitArray(i){let s=i.length*2-1;i[i.length-1].getRightChar()==null&&(s-=1);let l=12*s,u=new Be(l),f=0,y=i[0].getRightChar().getValue();for(let x=11;x>=0;--x)(y&1<<x)!=0&&u.set(f),f++;for(let x=1;x<i.length;++x){let T=i[x],b=T.getLeftChar().getValue();for(let O=11;O>=0;--O)(b&1<<O)!=0&&u.set(f),f++;if(T.getRightChar()!=null){let O=T.getRightChar().getValue();for(let P=11;P>=0;--P)(O&1<<P)!=0&&u.set(f),f++}}return u}}class mr{constructor(i,s){s?this.decodedInformation=null:(this.finished=i,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ns{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class Ln extends Ns{constructor(i,s){super(i),this.value=s}getValue(){return this.value}isFNC1(){return this.value===Ln.FNC1}}Ln.FNC1="$";class pi extends Ns{constructor(i,s,l){super(i),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class yi extends Ns{constructor(i,s,l){if(super(i),s<0||s>10||l<0||l>10)throw new V;this.firstDigit=s,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===yi.FNC1}isSecondDigitFNC1(){return this.secondDigit===yi.FNC1}isAnyFNC1(){return this.firstDigit===yi.FNC1||this.secondDigit===yi.FNC1}}yi.FNC1=10;class Me{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new Q;let s=i.substring(0,2);for(let f of Me.TWO_DIGIT_DATA_LENGTH)if(f[0]===s)return f[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(2,f[2],i):Me.processFixedAI(2,f[1],i);if(i.length<3)throw new Q;let l=i.substring(0,3);for(let f of Me.THREE_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(3,f[2],i):Me.processFixedAI(3,f[1],i);for(let f of Me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(4,f[2],i):Me.processFixedAI(4,f[1],i);if(i.length<4)throw new Q;let u=i.substring(0,4);for(let f of Me.FOUR_DIGIT_DATA_LENGTH)if(f[0]===u)return f[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(4,f[2],i):Me.processFixedAI(4,f[1],i);throw new Q}static processFixedAI(i,s,l){if(l.length<i)throw new Q;let u=l.substring(0,i);if(l.length<i+s)throw new Q;let f=l.substring(i,i+s),g=l.substring(i+s),y="("+u+")"+f,x=Me.parseFieldsInGeneralPurpose(g);return x==null?y:y+x}static processVariableAI(i,s,l){let u=l.substring(0,i),f;l.length<i+s?f=l.length:f=i+s;let g=l.substring(i,f),y=l.substring(f),x="("+u+")"+g,T=Me.parseFieldsInGeneralPurpose(y);return T==null?x:x+T}}Me.VARIABLE_LENGTH=[],Me.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Me.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Me.VARIABLE_LENGTH,20],["22",Me.VARIABLE_LENGTH,29],["30",Me.VARIABLE_LENGTH,8],["37",Me.VARIABLE_LENGTH,8],["90",Me.VARIABLE_LENGTH,30],["91",Me.VARIABLE_LENGTH,30],["92",Me.VARIABLE_LENGTH,30],["93",Me.VARIABLE_LENGTH,30],["94",Me.VARIABLE_LENGTH,30],["95",Me.VARIABLE_LENGTH,30],["96",Me.VARIABLE_LENGTH,30],["97",Me.VARIABLE_LENGTH,3],["98",Me.VARIABLE_LENGTH,30],["99",Me.VARIABLE_LENGTH,30]],Me.THREE_DIGIT_DATA_LENGTH=[["240",Me.VARIABLE_LENGTH,30],["241",Me.VARIABLE_LENGTH,30],["242",Me.VARIABLE_LENGTH,6],["250",Me.VARIABLE_LENGTH,30],["251",Me.VARIABLE_LENGTH,30],["253",Me.VARIABLE_LENGTH,17],["254",Me.VARIABLE_LENGTH,20],["400",Me.VARIABLE_LENGTH,30],["401",Me.VARIABLE_LENGTH,30],["402",17],["403",Me.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Me.VARIABLE_LENGTH,20],["421",Me.VARIABLE_LENGTH,15],["422",3],["423",Me.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Me.VARIABLE_LENGTH,15],["391",Me.VARIABLE_LENGTH,18],["392",Me.VARIABLE_LENGTH,15],["393",Me.VARIABLE_LENGTH,18],["703",Me.VARIABLE_LENGTH,30]],Me.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Me.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Me.VARIABLE_LENGTH,20],["8003",Me.VARIABLE_LENGTH,30],["8004",Me.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Me.VARIABLE_LENGTH,30],["8008",Me.VARIABLE_LENGTH,12],["8018",18],["8020",Me.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Me.VARIABLE_LENGTH,70],["8200",Me.VARIABLE_LENGTH,70]];class oi{constructor(i){this.buffer=new F,this.information=i}decodeAllCodes(i,s){let l=s,u=null;do{let f=this.decodeGeneralPurposeField(l,u),g=Me.parseFieldsInGeneralPurpose(f.getNewString());if(g!=null&&i.append(g),f.isRemaining()?u=""+f.getRemainingValue():u=null,l===f.getNewPosition())break;l=f.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let s=i;s<i+3;++s)if(this.information.get(s))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(i,4);return f===0?new yi(this.information.getSize(),yi.FNC1,yi.FNC1):new yi(this.information.getSize(),f-1,yi.FNC1)}let s=this.extractNumericValueFromBitArray(i,7),l=(s-8)/11,u=(s-8)%11;return new yi(i+7,l,u)}extractNumericValueFromBitArray(i,s){return oi.extractNumericValueFromBitArray(this.information,i,s)}static extractNumericValueFromBitArray(i,s,l){let u=0;for(let f=0;f<l;++f)i.get(s+f)&&(u|=1<<l-f-1);return u}decodeGeneralPurposeField(i,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(i);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new pi(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new pi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,s;do{let l=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),i=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),i=s.isFinished()):(s=this.parseNumericBlock(),i=s.isFinished()),!(l!==this.current.getPosition())&&!i)break}while(!i);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let s;return i.isSecondDigitFNC1()?s=new pi(this.current.getPosition(),this.buffer.toString()):s=new pi(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new mr(!0,s)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let s=new pi(this.current.getPosition(),this.buffer.toString());return new mr(!0,s)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new mr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let s=new pi(this.current.getPosition(),this.buffer.toString());return new mr(!0,s)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new mr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let s=new pi(this.current.getPosition(),this.buffer.toString());return new mr(!0,s)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new mr(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(i,5);if(s>=5&&s<16)return!0;if(i+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<116)return!0;if(i+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(i,8);return u>=232&&u<253}decodeIsoIec646(i){let s=this.extractNumericValueFromBitArray(i,5);if(s===15)return new Ln(i+5,Ln.FNC1);if(s>=5&&s<15)return new Ln(i+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<90)return new Ln(i+7,""+(l+1));if(l>=90&&l<116)return new Ln(i+7,""+(l+7));let u=this.extractNumericValueFromBitArray(i,8),f;switch(u){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new V}return new Ln(i+8,f)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(i,5);if(s>=5&&s<16)return!0;if(i+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,6);return l>=16&&l<63}decodeAlphanumeric(i){let s=this.extractNumericValueFromBitArray(i,5);if(s===15)return new Ln(i+5,Ln.FNC1);if(s>=5&&s<15)return new Ln(i+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(i,6);if(l>=32&&l<58)return new Ln(i+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new Oi("Decoding invalid alphanumeric value: "+l)}return new Ln(i+6,u)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let s=0;s<5&&s+i<this.information.getSize();++s)if(s===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+s))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let s=i;s<i+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let s=0;s<4&&s+i<this.information.getSize();++s)if(this.information.get(i+s))return!1;return!0}}class wn{constructor(i){this.information=i,this.generalDecoder=new oi(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class jt extends wn{constructor(i){super(i)}encodeCompressedGtin(i,s){i.append("(01)");let l=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,s,l)}encodeCompressedGtinWithoutAI(i,s,l){for(let u=0;u<4;++u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*u,10);f/100===0&&i.append("0"),f/10===0&&i.append("0"),i.append(f)}jt.appendCheckDigit(i,l)}static appendCheckDigit(i,s){let l=0;for(let u=0;u<13;u++){let f=i.charAt(u+s).charCodeAt(0)-48;l+=(u&1)===0?3*f:f}l=10-l%10,l===10&&(l=0),i.append(l)}}jt.GTIN_SIZE=40;class _i extends jt{constructor(i){super(i)}parseInformation(){let i=new F;i.append("(01)");let s=i.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(_i.HEADER_SIZE,4);return i.append(l),this.encodeCompressedGtinWithoutAI(i,_i.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(i,_i.HEADER_SIZE+44)}}_i.HEADER_SIZE=4;class Jr extends wn{constructor(i){super(i)}parseInformation(){let i=new F;return this.getGeneralDecoder().decodeAllCodes(i,Jr.HEADER_SIZE)}}Jr.HEADER_SIZE=5;class ga extends jt{constructor(i){super(i)}encodeCompressedWeight(i,s,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s,l);this.addWeightCode(i,u);let f=this.checkWeight(u),g=1e5;for(let y=0;y<5;++y)f/g===0&&i.append("0"),g/=10;i.append(f)}}class Hi extends ga{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Hi.HEADER_SIZE+ga.GTIN_SIZE+Hi.WEIGHT_SIZE)throw new Q;let i=new F;return this.encodeCompressedGtin(i,Hi.HEADER_SIZE),this.encodeCompressedWeight(i,Hi.HEADER_SIZE+ga.GTIN_SIZE,Hi.WEIGHT_SIZE),i.toString()}}Hi.HEADER_SIZE=5,Hi.WEIGHT_SIZE=15;class el extends Hi{constructor(i){super(i)}addWeightCode(i,s){i.append("(3103)")}checkWeight(i){return i}}class Dr extends Hi{constructor(i){super(i)}addWeightCode(i,s){s<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class Ei extends jt{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<Ei.HEADER_SIZE+jt.GTIN_SIZE)throw new Q;let i=new F;this.encodeCompressedGtin(i,Ei.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Ei.HEADER_SIZE+jt.GTIN_SIZE,Ei.LAST_DIGIT_SIZE);i.append("(392"),i.append(s),i.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Ei.HEADER_SIZE+jt.GTIN_SIZE+Ei.LAST_DIGIT_SIZE,null);return i.append(l.getNewString()),i.toString()}}Ei.HEADER_SIZE=8,Ei.LAST_DIGIT_SIZE=2;class dn extends jt{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<dn.HEADER_SIZE+jt.GTIN_SIZE)throw new Q;let i=new F;this.encodeCompressedGtin(i,dn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(dn.HEADER_SIZE+jt.GTIN_SIZE,dn.LAST_DIGIT_SIZE);i.append("(393"),i.append(s),i.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(dn.HEADER_SIZE+jt.GTIN_SIZE+dn.LAST_DIGIT_SIZE,dn.FIRST_THREE_DIGITS_SIZE);l/100==0&&i.append("0"),l/10==0&&i.append("0"),i.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(dn.HEADER_SIZE+jt.GTIN_SIZE+dn.LAST_DIGIT_SIZE+dn.FIRST_THREE_DIGITS_SIZE,null);return i.append(u.getNewString()),i.toString()}}dn.HEADER_SIZE=8,dn.LAST_DIGIT_SIZE=2,dn.FIRST_THREE_DIGITS_SIZE=10;class St extends ga{constructor(i,s,l){super(i),this.dateCode=l,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=St.HEADER_SIZE+St.GTIN_SIZE+St.WEIGHT_SIZE+St.DATE_SIZE)throw new Q;let i=new F;return this.encodeCompressedGtin(i,St.HEADER_SIZE),this.encodeCompressedWeight(i,St.HEADER_SIZE+St.GTIN_SIZE,St.WEIGHT_SIZE),this.encodeCompressedDate(i,St.HEADER_SIZE+St.GTIN_SIZE+St.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,St.DATE_SIZE);if(l==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let u=l%32;l/=32;let f=l%12+1;l/=12;let g=l;g/10==0&&i.append("0"),i.append(g),f/10==0&&i.append("0"),i.append(f),u/10==0&&i.append("0"),i.append(u)}addWeightCode(i,s){i.append("("),i.append(this.firstAIdigits),i.append(s/1e5),i.append(")")}checkWeight(i){return i%1e5}}St.HEADER_SIZE=8,St.WEIGHT_SIZE=20,St.DATE_SIZE=16;function Di(N){try{if(N.get(1))return new _i(N);if(!N.get(2))return new Jr(N);switch(oi.extractNumericValueFromBitArray(N,1,4)){case 4:return new el(N);case 5:return new Dr(N)}switch(oi.extractNumericValueFromBitArray(N,1,5)){case 12:return new Ei(N);case 13:return new dn(N)}switch(oi.extractNumericValueFromBitArray(N,1,7)){case 56:return new St(N,"310","11");case 57:return new St(N,"320","11");case 58:return new St(N,"310","13");case 59:return new St(N,"320","13");case 60:return new St(N,"310","15");case 61:return new St(N,"320","15");case 62:return new St(N,"310","17");case 63:return new St(N,"320","17")}}catch(i){throw console.log(i),new Oi("unknown decoder: "+N)}}class ii{constructor(i,s,l,u){this.leftchar=i,this.rightchar=s,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,s){return i instanceof ii?ii.equalsOrNull(i.leftchar,s.leftchar)&&ii.equalsOrNull(i.rightchar,s.rightchar)&&ii.equalsOrNull(i.finderpattern,s.finderpattern):!1}static equalsOrNull(i,s){return i===null?s===null:ii.equals(i,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Tn{constructor(i,s,l){this.pairs=i,this.rowNumber=s,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,s){return i instanceof Tn?this.checkEqualitity(i,s)&&i.wasReversed===s.wasReversed:!1}checkEqualitity(i,s){if(!i||!s)return;let l;return i.forEach((u,f)=>{s.forEach(g=>{u.getLeftChar().getValue()===g.getLeftChar().getValue()&&u.getRightChar().getValue()===g.getRightChar().getValue()&&u.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(l=!0)})}),l}}class Ae extends zn{constructor(i){super(...arguments),this.pairs=new Array(Ae.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,s,l){this.pairs.length=0,this.startFromEven=!1;try{return Ae.constructResult(this.decodeRow2pairs(i,s))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,Ae.constructResult(this.decodeRow2pairs(i,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,s){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,i))}catch(f){if(f instanceof Q){if(!this.pairs.length)throw new Q;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(i,!1),u){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new Q}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return i&&(this.rows=this.rows.reverse()),s}checkRows(i,s){for(let l=s;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let g of i)this.pairs.push(g.getPairs());if(this.pairs.push(u.getPairs()),!Ae.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(i);f.push(u);try{return this.checkRows(f,l+1)}catch(g){this.verbose&&console.log(g)}}throw new Q}static isValidSequence(i){for(let s of Ae.FINDER_PATTERN_SEQUENCES){if(i.length>s.length)continue;let l=!0;for(let u=0;u<i.length;u++)if(i[u].getFinderPattern().getValue()!=s[u]){l=!1;break}if(l)return!0}return!1}storeRow(i,s){let l=0,u=!1,f=!1;for(;l<this.rows.length;){let g=this.rows[l];if(g.getRowNumber()>i){f=g.isEquivalent(this.pairs);break}u=g.isEquivalent(this.pairs),l++}f||u||Ae.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Tn(this.pairs,i,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,s){for(let l of s)if(l.getPairs().length!==i.length){for(let u of l.getPairs())for(let f of i)if(ii.equals(u,f))break}}static isPartialRow(i,s){for(let l of s){let u=!0;for(let f of i){let g=!1;for(let y of l.getPairs())if(f.equals(y)){g=!0;break}if(!g){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(i){let s=Rs.buildBitArray(i),u=Di(s).parseInformation(),f=i[0].getFinderPattern().getResultPoints(),g=i[i.length-1].getFinderPattern().getResultPoints(),y=[f[0],f[1],g[0],g[1]];return new De(u,null,null,y,Oe.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),s=i.getLeftChar(),l=i.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),f=2;for(let y=1;y<this.pairs.size();++y){let x=this.pairs.get(y);u+=x.getLeftChar().getChecksumPortion(),f++;let T=x.getRightChar();T!=null&&(u+=T.getChecksumPortion(),f++)}return u%=211,211*(f-4)+u==s.getValue()}static getNextSecondBar(i,s){let l;return i.get(s)?(l=i.getNextUnset(s),l=i.getNextSet(l)):(l=i.getNextSet(s),l=i.getNextUnset(l)),l}retrieveNextPair(i,s,l){let u=s.length%2==0;this.startFromEven&&(u=!u);let f,g=!0,y=-1;do this.findNextPair(i,s,y),f=this.parseFoundFinderPattern(i,l,u),f==null?y=Ae.getNextSecondBar(i,this.startEnd[0]):g=!1;while(g);let x=this.decodeDataCharacter(i,f,u,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new Q;let T;try{T=this.decodeDataCharacter(i,f,u,!1)}catch(b){T=null,this.verbose&&console.log(b)}return new ii(x,T,f,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,s,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=i.getSize(),g;l>=0?g=l:this.isEmptyPair(s)?g=0:g=s[s.length-1].getFinderPattern().getStartEnd()[1];let y=s.length%2!=0;this.startFromEven&&(y=!y);let x=!1;for(;g<f&&(x=!i.get(g),!!x);)g++;let T=0,b=g;for(let O=g;O<f;O++)if(i.get(O)!=x)u[T]++;else{if(T==3){if(y&&Ae.reverseCounters(u),Ae.isFinderPattern(u)){this.startEnd[0]=b,this.startEnd[1]=O;return}y&&Ae.reverseCounters(u),b+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,T--}else T++;u[T]=1,x=!x}throw new Q}static reverseCounters(i){let s=i.length;for(let l=0;l<s/2;++l){let u=i[l];i[l]=i[s-l-1],i[s-l-1]=u}}parseFoundFinderPattern(i,s,l){let u,f,g;if(l){let T=this.startEnd[0]-1;for(;T>=0&&!i.get(T);)T--;T++,u=this.startEnd[0]-T,f=T,g=this.startEnd[1]}else f=this.startEnd[0],g=i.getNextUnset(this.startEnd[1]+1),u=g-this.startEnd[1];let y=this.getDecodeFinderCounters();pe.arraycopy(y,0,y,1,y.length-1),y[0]=u;let x;try{x=this.parseFinderValue(y,Ae.FINDER_PATTERNS)}catch{return null}return new Or(x,[f,g],f,g,s)}decodeDataCharacter(i,s,l,u){let f=this.getDataCharacterCounters();for(let en=0;en<f.length;en++)f[en]=0;if(u)Ae.recordPatternInReverse(i,s.getStartEnd()[0],f);else{Ae.recordPattern(i,s.getStartEnd()[1],f);for(let en=0,ri=f.length-1;en<ri;en++,ri--){let Wi=f[en];f[en]=f[ri],f[ri]=Wi}}let g=17,y=Ze.sum(new Int32Array(f))/g,x=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(y-x)/x>.3)throw new Q;let T=this.getOddCounts(),b=this.getEvenCounts(),O=this.getOddRoundingErrors(),P=this.getEvenRoundingErrors();for(let en=0;en<f.length;en++){let ri=1*f[en]/y,Wi=ri+.5;if(Wi<1){if(ri<.3)throw new Q;Wi=1}else if(Wi>8){if(ri>8.7)throw new Q;Wi=8}let Aa=en/2;(en&1)==0?(T[Aa]=Wi,O[Aa]=ri-Wi):(b[Aa]=Wi,P[Aa]=ri-Wi)}this.adjustOddEvenCounts(g);let H=4*s.getValue()+(l?0:2)+(u?0:1)-1,W=0,Z=0;for(let en=T.length-1;en>=0;en--){if(Ae.isNotA1left(s,l,u)){let ri=Ae.WEIGHTS[H][2*en];Z+=T[en]*ri}W+=T[en]}let re=0;for(let en=b.length-1;en>=0;en--)if(Ae.isNotA1left(s,l,u)){let ri=Ae.WEIGHTS[H][2*en+1];re+=b[en]*ri}let fe=Z+re;if((W&1)!=0||W>13||W<4)throw new Q;let Re=(13-W)/2,be=Ae.SYMBOL_WIDEST[Re],Te=9-be,Et=Qi.getRSSvalue(T,be,!0),ot=Qi.getRSSvalue(b,Te,!1),kn=Ae.EVEN_TOTAL_SUBSET[Re],tr=Ae.GSUM[Re],Ti=Et*kn+ot+tr;return new mi(Ti,fe)}static isNotA1left(i,s,l){return!(i.getValue()==0&&s&&l)}adjustOddEvenCounts(i){let s=Ze.sum(new Int32Array(this.getOddCounts())),l=Ze.sum(new Int32Array(this.getEvenCounts())),u=!1,f=!1;s>13?f=!0:s<4&&(u=!0);let g=!1,y=!1;l>13?y=!0:l<4&&(g=!0);let x=s+l-i,T=(s&1)==1,b=(l&1)==0;if(x==1)if(T){if(b)throw new Q;f=!0}else{if(!b)throw new Q;y=!0}else if(x==-1)if(T){if(b)throw new Q;u=!0}else{if(!b)throw new Q;g=!0}else if(x==0){if(T){if(!b)throw new Q;s<l?(u=!0,y=!0):(f=!0,g=!0)}else if(b)throw new Q}else throw new Q;if(u){if(f)throw new Q;Ae.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Ae.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(y)throw new Q;Ae.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&Ae.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ae.SYMBOL_WIDEST=[7,5,4,3,1],Ae.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ae.GSUM=[0,348,1388,2948,3988],Ae.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ae.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ae.FINDER_PAT_A=0,Ae.FINDER_PAT_B=1,Ae.FINDER_PAT_C=2,Ae.FINDER_PAT_D=3,Ae.FINDER_PAT_E=4,Ae.FINDER_PAT_F=5,Ae.FINDER_PATTERN_SEQUENCES=[[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_C,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_C],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_E,Ae.FINDER_PAT_B,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_E],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F],[Ae.FINDER_PAT_A,Ae.FINDER_PAT_A,Ae.FINDER_PAT_B,Ae.FINDER_PAT_B,Ae.FINDER_PAT_C,Ae.FINDER_PAT_D,Ae.FINDER_PAT_D,Ae.FINDER_PAT_E,Ae.FINDER_PAT_E,Ae.FINDER_PAT_F,Ae.FINDER_PAT_F]],Ae.MAX_PAIRS=11;class _o extends mi{constructor(i,s,l){super(i,s),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ht extends zn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,s,l){const u=this.decodePair(s,!1,i,l);Ht.addOrTally(this.possibleLeftPairs,u),s.reverse();let f=this.decodePair(s,!0,i,l);Ht.addOrTally(this.possibleRightPairs,f),s.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let y of this.possibleRightPairs)if(y.getCount()>1&&Ht.checkChecksum(g,y))return Ht.constructResult(g,y)}throw new Q}static addOrTally(i,s){if(s==null)return;let l=!1;for(let u of i)if(u.getValue()===s.getValue()){u.incrementCount(),l=!0;break}l||i.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,s){let l=4537077*i.getValue()+s.getValue(),u=new String(l).toString(),f=new F;for(let T=13-u.length;T>0;T--)f.append("0");f.append(u);let g=0;for(let T=0;T<13;T++){let b=f.charAt(T).charCodeAt(0)-48;g+=(T&1)===0?3*b:b}g=10-g%10,g===10&&(g=0),f.append(g.toString());let y=i.getFinderPattern().getResultPoints(),x=s.getFinderPattern().getResultPoints();return new De(f.toString(),null,0,[y[0],y[1],x[0],x[1]],Oe.RSS_14,new Date().getTime())}static checkChecksum(i,s){let l=(i.getChecksumPortion()+16*s.getChecksumPortion())%79,u=9*i.getFinderPattern().getValue()+s.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(i,s,l,u){try{let f=this.findFinderPattern(i,s),g=this.parseFoundFinderPattern(i,l,s,f),y=u==null?null:u.get(ke.NEED_RESULT_POINT_CALLBACK);if(y!=null){let b=(f[0]+f[1])/2;s&&(b=i.getSize()-1-b),y.foundPossibleResultPoint(new Fe(b,l))}let x=this.decodeDataCharacter(i,g,!0),T=this.decodeDataCharacter(i,g,!1);return new _o(1597*x.getValue()+T.getValue(),x.getChecksumPortion()+4*T.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(i,s,l){let u=this.getDataCharacterCounters();for(let re=0;re<u.length;re++)u[re]=0;if(l)qt.recordPatternInReverse(i,s.getStartEnd()[0],u);else{qt.recordPattern(i,s.getStartEnd()[1]+1,u);for(let re=0,fe=u.length-1;re<fe;re++,fe--){let Re=u[re];u[re]=u[fe],u[fe]=Re}}let f=l?16:15,g=Ze.sum(new Int32Array(u))/f,y=this.getOddCounts(),x=this.getEvenCounts(),T=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors();for(let re=0;re<u.length;re++){let fe=u[re]/g,Re=Math.floor(fe+.5);Re<1?Re=1:Re>8&&(Re=8);let be=Math.floor(re/2);(re&1)===0?(y[be]=Re,T[be]=fe-Re):(x[be]=Re,b[be]=fe-Re)}this.adjustOddEvenCounts(l,f);let O=0,P=0;for(let re=y.length-1;re>=0;re--)P*=9,P+=y[re],O+=y[re];let H=0,W=0;for(let re=x.length-1;re>=0;re--)H*=9,H+=x[re],W+=x[re];let Z=P+3*H;if(l){if((O&1)!==0||O>12||O<4)throw new Q;let re=(12-O)/2,fe=Ht.OUTSIDE_ODD_WIDEST[re],Re=9-fe,be=Qi.getRSSvalue(y,fe,!1),Te=Qi.getRSSvalue(x,Re,!0),Et=Ht.OUTSIDE_EVEN_TOTAL_SUBSET[re],ot=Ht.OUTSIDE_GSUM[re];return new mi(be*Et+Te+ot,Z)}else{if((W&1)!==0||W>10||W<4)throw new Q;let re=(10-W)/2,fe=Ht.INSIDE_ODD_WIDEST[re],Re=9-fe,be=Qi.getRSSvalue(y,fe,!0),Te=Qi.getRSSvalue(x,Re,!1),Et=Ht.INSIDE_ODD_TOTAL_SUBSET[re],ot=Ht.INSIDE_GSUM[re];return new mi(Te*Et+be+ot,Z)}}findFinderPattern(i,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=i.getSize(),f=!1,g=0;for(;g<u&&(f=!i.get(g),s!==f);)g++;let y=0,x=g;for(let T=g;T<u;T++)if(i.get(T)!==f)l[y]++;else{if(y===3){if(zn.isFinderPattern(l))return[x,T];x+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,y--}else y++;l[y]=1,f=!f}throw new Q}parseFoundFinderPattern(i,s,l,u){let f=i.get(u[0]),g=u[0]-1;for(;g>=0&&f!==i.get(g);)g--;g++;const y=u[0]-g,x=this.getDecodeFinderCounters(),T=new Int32Array(x.length);pe.arraycopy(x,0,T,1,x.length-1),T[0]=y;const b=this.parseFinderValue(T,Ht.FINDER_PATTERNS);let O=g,P=u[1];return l&&(O=i.getSize()-1-O,P=i.getSize()-1-P),new Or(b,[g,u[1]],O,P,s)}adjustOddEvenCounts(i,s){let l=Ze.sum(new Int32Array(this.getOddCounts())),u=Ze.sum(new Int32Array(this.getEvenCounts())),f=!1,g=!1,y=!1,x=!1;i?(l>12?g=!0:l<4&&(f=!0),u>12?x=!0:u<4&&(y=!0)):(l>11?g=!0:l<5&&(f=!0),u>10?x=!0:u<4&&(y=!0));let T=l+u-s,b=(l&1)===(i?1:0),O=(u&1)===1;if(T===1)if(b){if(O)throw new Q;g=!0}else{if(!O)throw new Q;x=!0}else if(T===-1)if(b){if(O)throw new Q;f=!0}else{if(!O)throw new Q;y=!0}else if(T===0){if(b){if(!O)throw new Q;l<u?(f=!0,x=!0):(g=!0,y=!0)}else if(O)throw new Q}else throw new Q;if(f){if(g)throw new Q;zn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&zn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),y){if(x)throw new Q;zn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&zn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ht.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ht.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ht.OUTSIDE_GSUM=[0,161,961,2015,2715],Ht.INSIDE_GSUM=[0,336,1036,1516],Ht.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ht.INSIDE_ODD_WIDEST=[2,4,6,8],Ht.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class xi extends qt{constructor(i,s){super(),this.readers=[],this.verbose=s===!0;const l=i?i.get(ke.POSSIBLE_FORMATS):null,u=i&&i.get(ke.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Oe.EAN_13)||l.includes(Oe.UPC_A)||l.includes(Oe.EAN_8)||l.includes(Oe.UPC_E))&&this.readers.push(new yo(i)),l.includes(Oe.CODE_39)&&this.readers.push(new Xt(u)),l.includes(Oe.CODE_128)&&this.readers.push(new Se),l.includes(Oe.ITF)&&this.readers.push(new it),l.includes(Oe.RSS_14)&&this.readers.push(new Ht),l.includes(Oe.RSS_EXPANDED)&&this.readers.push(new Ae(this.verbose))):(this.readers.push(new yo(i)),this.readers.push(new Xt),this.readers.push(new yo(i)),this.readers.push(new Se),this.readers.push(new it),this.readers.push(new Ht),this.readers.push(new Ae(this.verbose)))}decodeRow(i,s,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(i,s,l)}catch{}throw new Q}reset(){this.readers.forEach(i=>i.reset())}}class Eo extends Ie{constructor(i=500,s){super(new xi(s),i,s)}}class Ot{constructor(i,s,l){this.ecCodewords=i,this.ecBlocks=[s],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class bt{constructor(i,s){this.count=i,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _t{constructor(i,s,l,u,f,g){this.versionNumber=i,this.symbolSizeRows=s,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=f,this.ecBlocks=g;let y=0;const x=g.getECCodewords(),T=g.getECBlocks();for(let b of T)y+=b.getCount()*(b.getDataCodewords()+x);this.totalCodewords=y}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,s){if((i&1)!==0||(s&1)!==0)throw new V;for(let l of _t.VERSIONS)if(l.symbolSizeRows===i&&l.symbolSizeColumns===s)return l;throw new V}toString(){return""+this.versionNumber}static buildVersions(){return[new _t(1,10,10,8,8,new Ot(5,new bt(1,3))),new _t(2,12,12,10,10,new Ot(7,new bt(1,5))),new _t(3,14,14,12,12,new Ot(10,new bt(1,8))),new _t(4,16,16,14,14,new Ot(12,new bt(1,12))),new _t(5,18,18,16,16,new Ot(14,new bt(1,18))),new _t(6,20,20,18,18,new Ot(18,new bt(1,22))),new _t(7,22,22,20,20,new Ot(20,new bt(1,30))),new _t(8,24,24,22,22,new Ot(24,new bt(1,36))),new _t(9,26,26,24,24,new Ot(28,new bt(1,44))),new _t(10,32,32,14,14,new Ot(36,new bt(1,62))),new _t(11,36,36,16,16,new Ot(42,new bt(1,86))),new _t(12,40,40,18,18,new Ot(48,new bt(1,114))),new _t(13,44,44,20,20,new Ot(56,new bt(1,144))),new _t(14,48,48,22,22,new Ot(68,new bt(1,174))),new _t(15,52,52,24,24,new Ot(42,new bt(2,102))),new _t(16,64,64,14,14,new Ot(56,new bt(2,140))),new _t(17,72,72,16,16,new Ot(36,new bt(4,92))),new _t(18,80,80,18,18,new Ot(48,new bt(4,114))),new _t(19,88,88,20,20,new Ot(56,new bt(4,144))),new _t(20,96,96,22,22,new Ot(68,new bt(4,174))),new _t(21,104,104,24,24,new Ot(56,new bt(6,136))),new _t(22,120,120,18,18,new Ot(68,new bt(6,175))),new _t(23,132,132,20,20,new Ot(62,new bt(8,163))),new _t(24,144,144,22,22,new Ot(62,new bt(8,156),new bt(2,155))),new _t(25,8,18,6,16,new Ot(7,new bt(1,5))),new _t(26,8,32,6,14,new Ot(11,new bt(1,10))),new _t(27,12,26,10,24,new Ot(14,new bt(1,16))),new _t(28,12,36,10,16,new Ot(18,new bt(1,22))),new _t(29,16,36,14,16,new Ot(24,new bt(1,32))),new _t(30,16,48,14,22,new Ot(28,new bt(1,49)))]}}_t.VERSIONS=_t.buildVersions();class us{constructor(i){const s=i.getHeight();if(s<8||s>144||(s&1)!==0)throw new V;this.version=us.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new Ue(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const s=i.getHeight(),l=i.getWidth();return _t.getVersionForDimensions(s,l)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let s=0,l=4,u=0;const f=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let y=!1,x=!1,T=!1,b=!1;do if(l===f&&u===0&&!y)i[s++]=this.readCorner1(f,g)&255,l-=2,u+=2,y=!0;else if(l===f-2&&u===0&&(g&3)!==0&&!x)i[s++]=this.readCorner2(f,g)&255,l-=2,u+=2,x=!0;else if(l===f+4&&u===2&&(g&7)===0&&!T)i[s++]=this.readCorner3(f,g)&255,l-=2,u+=2,T=!0;else if(l===f-2&&u===0&&(g&7)===4&&!b)i[s++]=this.readCorner4(f,g)&255,l-=2,u+=2,b=!0;else{do l<f&&u>=0&&!this.readMappingMatrix.get(u,l)&&(i[s++]=this.readUtah(l,u,f,g)&255),l-=2,u+=2;while(l>=0&&u<g);l+=1,u+=3;do l>=0&&u<g&&!this.readMappingMatrix.get(u,l)&&(i[s++]=this.readUtah(l,u,f,g)&255),l+=2,u-=2;while(l<f&&u>=0);l+=3,u+=1}while(l<f||u<g);if(s!==this.version.getTotalCodewords())throw new V;return i}readModule(i,s,l,u){return i<0&&(i+=l,s+=4-(l+4&7)),s<0&&(s+=u,i+=4-(u+4&7)),this.readMappingMatrix.set(s,i),this.mappingBitMatrix.get(s,i)}readUtah(i,s,l,u){let f=0;return this.readModule(i-2,s-2,l,u)&&(f|=1),f<<=1,this.readModule(i-2,s-1,l,u)&&(f|=1),f<<=1,this.readModule(i-1,s-2,l,u)&&(f|=1),f<<=1,this.readModule(i-1,s-1,l,u)&&(f|=1),f<<=1,this.readModule(i-1,s,l,u)&&(f|=1),f<<=1,this.readModule(i,s-2,l,u)&&(f|=1),f<<=1,this.readModule(i,s-1,l,u)&&(f|=1),f<<=1,this.readModule(i,s,l,u)&&(f|=1),f}readCorner1(i,s){let l=0;return this.readModule(i-1,0,i,s)&&(l|=1),l<<=1,this.readModule(i-1,1,i,s)&&(l|=1),l<<=1,this.readModule(i-1,2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-1,i,s)&&(l|=1),l<<=1,this.readModule(1,s-1,i,s)&&(l|=1),l<<=1,this.readModule(2,s-1,i,s)&&(l|=1),l<<=1,this.readModule(3,s-1,i,s)&&(l|=1),l}readCorner2(i,s){let l=0;return this.readModule(i-3,0,i,s)&&(l|=1),l<<=1,this.readModule(i-2,0,i,s)&&(l|=1),l<<=1,this.readModule(i-1,0,i,s)&&(l|=1),l<<=1,this.readModule(0,s-4,i,s)&&(l|=1),l<<=1,this.readModule(0,s-3,i,s)&&(l|=1),l<<=1,this.readModule(0,s-2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-1,i,s)&&(l|=1),l<<=1,this.readModule(1,s-1,i,s)&&(l|=1),l}readCorner3(i,s){let l=0;return this.readModule(i-1,0,i,s)&&(l|=1),l<<=1,this.readModule(i-1,s-1,i,s)&&(l|=1),l<<=1,this.readModule(0,s-3,i,s)&&(l|=1),l<<=1,this.readModule(0,s-2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-1,i,s)&&(l|=1),l<<=1,this.readModule(1,s-3,i,s)&&(l|=1),l<<=1,this.readModule(1,s-2,i,s)&&(l|=1),l<<=1,this.readModule(1,s-1,i,s)&&(l|=1),l}readCorner4(i,s){let l=0;return this.readModule(i-3,0,i,s)&&(l|=1),l<<=1,this.readModule(i-2,0,i,s)&&(l|=1),l<<=1,this.readModule(i-1,0,i,s)&&(l|=1),l<<=1,this.readModule(0,s-2,i,s)&&(l|=1),l<<=1,this.readModule(0,s-1,i,s)&&(l|=1),l<<=1,this.readModule(1,s-1,i,s)&&(l|=1),l<<=1,this.readModule(2,s-1,i,s)&&(l|=1),l<<=1,this.readModule(3,s-1,i,s)&&(l|=1),l}extractDataRegion(i){const s=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(i.getHeight()!==s)throw new M("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),g=s/u|0,y=l/f|0,x=g*u,T=y*f,b=new Ue(T,x);for(let O=0;O<g;++O){const P=O*u;for(let H=0;H<y;++H){const W=H*f;for(let Z=0;Z<u;++Z){const re=O*(u+2)+1+Z,fe=P+Z;for(let Re=0;Re<f;++Re){const be=H*(f+2)+1+Re;if(i.get(be,re)){const Te=W+Re;b.set(Te,fe)}}}}}return b}}class Ai{constructor(i,s){this.numDataCodewords=i,this.codewords=s}static getDataBlocks(i,s){const l=s.getECBlocks();let u=0;const f=l.getECBlocks();for(let Z of f)u+=Z.getCount();const g=new Array(u);let y=0;for(let Z of f)for(let re=0;re<Z.getCount();re++){const fe=Z.getDataCodewords(),Re=l.getECCodewords()+fe;g[y++]=new Ai(fe,new Uint8Array(Re))}const T=g[0].codewords.length-l.getECCodewords(),b=T-1;let O=0;for(let Z=0;Z<b;Z++)for(let re=0;re<y;re++)g[re].codewords[Z]=i[O++];const P=s.getVersionNumber()===24,H=P?8:y;for(let Z=0;Z<H;Z++)g[Z].codewords[T-1]=i[O++];const W=g[0].codewords.length;for(let Z=T;Z<W;Z++)for(let re=0;re<y;re++){const fe=P?(re+8)%y:re,Re=P&&fe>7?Z-1:Z;g[fe].codewords[Re]=i[O++]}if(O!==i.length)throw new M;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Cn{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new M(""+i);let s=0,l=this.bitOffset,u=this.byteOffset;const f=this.bytes;if(l>0){const g=8-l,y=i<g?i:g,x=g-y,T=255>>8-y<<x;s=(f[u]&T)>>x,i-=y,l+=y,l===8&&(l=0,u++)}if(i>0){for(;i>=8;)s=s<<8|f[u]&255,u++,i-=8;if(i>0){const g=8-i,y=255>>g<<g;s=s<<i|(f[u]&y)>>g,l+=i}}return this.bitOffset=l,this.byteOffset=u,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ct;(function(N){N[N.PAD_ENCODE=0]="PAD_ENCODE",N[N.ASCII_ENCODE=1]="ASCII_ENCODE",N[N.C40_ENCODE=2]="C40_ENCODE",N[N.TEXT_ENCODE=3]="TEXT_ENCODE",N[N.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",N[N.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",N[N.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ct||(Ct={}));class wi{static decode(i){const s=new Cn(i),l=new F,u=new F,f=new Array;let g=Ct.ASCII_ENCODE;do if(g===Ct.ASCII_ENCODE)g=this.decodeAsciiSegment(s,l,u);else{switch(g){case Ct.C40_ENCODE:this.decodeC40Segment(s,l);break;case Ct.TEXT_ENCODE:this.decodeTextSegment(s,l);break;case Ct.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,l);break;case Ct.EDIFACT_ENCODE:this.decodeEdifactSegment(s,l);break;case Ct.BASE256_ENCODE:this.decodeBase256Segment(s,l,f);break;default:throw new V}g=Ct.ASCII_ENCODE}while(g!==Ct.PAD_ENCODE&&s.available()>0);return u.length()>0&&l.append(u.toString()),new Zt(i,l.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(i,s,l){let u=!1;do{let f=i.readBits(8);if(f===0)throw new V;if(f<=128)return u&&(f+=128),s.append(String.fromCharCode(f-1)),Ct.ASCII_ENCODE;if(f===129)return Ct.PAD_ENCODE;if(f<=229){const g=f-130;g<10&&s.append("0"),s.append(""+g)}else switch(f){case 230:return Ct.C40_ENCODE;case 231:return Ct.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:s.append("[)>05"),l.insert(0,"");break;case 237:s.append("[)>06"),l.insert(0,"");break;case 238:return Ct.ANSIX12_ENCODE;case 239:return Ct.TEXT_ENCODE;case 240:return Ct.EDIFACT_ENCODE;case 241:break;default:if(f!==254||i.available()!==0)throw new V;break}}while(i.available()>0);return Ct.ASCII_ENCODE}static decodeC40Segment(i,s){let l=!1;const u=[];let f=0;do{if(i.available()===8)return;const g=i.readBits(8);if(g===254)return;this.parseTwoBytes(g,i.readBits(8),u);for(let y=0;y<3;y++){const x=u[y];switch(f){case 0:if(x<3)f=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const T=this.C40_BASIC_SET_CHARS[x];l?(s.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):s.append(T)}else throw new V;break;case 1:l?(s.append(String.fromCharCode(x+128)),l=!1):s.append(String.fromCharCode(x)),f=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const T=this.C40_SHIFT2_SET_CHARS[x];l?(s.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):s.append(T)}else switch(x){case 27:s.append("");break;case 30:l=!0;break;default:throw new V}f=0;break;case 3:l?(s.append(String.fromCharCode(x+224)),l=!1):s.append(String.fromCharCode(x+96)),f=0;break;default:throw new V}}}while(i.available()>0)}static decodeTextSegment(i,s){let l=!1,u=[],f=0;do{if(i.available()===8)return;const g=i.readBits(8);if(g===254)return;this.parseTwoBytes(g,i.readBits(8),u);for(let y=0;y<3;y++){const x=u[y];switch(f){case 0:if(x<3)f=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const T=this.TEXT_BASIC_SET_CHARS[x];l?(s.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):s.append(T)}else throw new V;break;case 1:l?(s.append(String.fromCharCode(x+128)),l=!1):s.append(String.fromCharCode(x)),f=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const T=this.TEXT_SHIFT2_SET_CHARS[x];l?(s.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):s.append(T)}else switch(x){case 27:s.append("");break;case 30:l=!0;break;default:throw new V}f=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const T=this.TEXT_SHIFT3_SET_CHARS[x];l?(s.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):s.append(T),f=0}else throw new V;break;default:throw new V}}}while(i.available()>0)}static decodeAnsiX12Segment(i,s){const l=[];do{if(i.available()===8)return;const u=i.readBits(8);if(u===254)return;this.parseTwoBytes(u,i.readBits(8),l);for(let f=0;f<3;f++){const g=l[f];switch(g){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(g<14)s.append(String.fromCharCode(g+44));else if(g<40)s.append(String.fromCharCode(g+51));else throw new V;break}}}while(i.available()>0)}static parseTwoBytes(i,s,l){let u=(i<<8)+s-1,f=Math.floor(u/1600);l[0]=f,u-=f*1600,f=Math.floor(u/40),l[1]=f,l[2]=u-f*40}static decodeEdifactSegment(i,s){do{if(i.available()<=16)return;for(let l=0;l<4;l++){let u=i.readBits(6);if(u===31){const f=8-i.getBitOffset();f!==8&&i.readBits(f);return}(u&32)===0&&(u|=64),s.append(String.fromCharCode(u))}}while(i.available()>0)}static decodeBase256Segment(i,s,l){let u=1+i.getByteOffset();const f=this.unrandomize255State(i.readBits(8),u++);let g;if(f===0?g=i.available()/8|0:f<250?g=f:g=250*(f-249)+this.unrandomize255State(i.readBits(8),u++),g<0)throw new V;const y=new Uint8Array(g);for(let x=0;x<g;x++){if(i.available()<8)throw new V;y[x]=this.unrandomize255State(i.readBits(8),u++)}l.push(y);try{s.append(G.decode(y,q.ISO88591))}catch(x){throw new Oi("Platform does not support required encoding: "+x.message)}}static unrandomize255State(i,s){const l=149*s%255+1,u=i-l;return u>=0?u:u+256}}wi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],wi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],wi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],wi.TEXT_SHIFT2_SET_CHARS=wi.C40_SHIFT2_SET_CHARS,wi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class xo{constructor(){this.rsDecoder=new hr(Tt.DATA_MATRIX_FIELD_256)}decode(i){const s=new us(i),l=s.getVersion(),u=s.readCodewords(),f=Ai.getDataBlocks(u,l);let g=0;for(let T of f)g+=T.getNumDataCodewords();const y=new Uint8Array(g),x=f.length;for(let T=0;T<x;T++){const b=f[T],O=b.getCodewords(),P=b.getNumDataCodewords();this.correctErrors(O,P);for(let H=0;H<P;H++)y[H*x+T]=O[H]}return wi.decode(y)}correctErrors(i,s){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-s)}catch{throw new te}for(let u=0;u<s;u++)i[u]=l[u]}}class $e{constructor(i){this.image=i,this.rectangleDetector=new mn(this.image)}detect(){const i=this.rectangleDetector.detect();let s=this.detectSolid1(i);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new Q;s=this.shiftToModuleCenter(s);const l=s[0],u=s[1],f=s[2],g=s[3];let y=this.transitionsBetween(l,g)+1,x=this.transitionsBetween(f,g)+1;(y&1)===1&&(y+=1),(x&1)===1&&(x+=1),4*y<7*x&&4*x<7*y&&(y=x=Math.max(y,x));let T=$e.sampleGrid(this.image,l,u,f,g,y,x);return new ha(T,[l,u,f,g])}static shiftPoint(i,s,l){let u=(s.getX()-i.getX())/(l+1),f=(s.getY()-i.getY())/(l+1);return new Fe(i.getX()+u,i.getY()+f)}static moveAway(i,s,l){let u=i.getX(),f=i.getY();return u<s?u-=1:u+=1,f<l?f-=1:f+=1,new Fe(u,f)}detectSolid1(i){let s=i[0],l=i[1],u=i[3],f=i[2],g=this.transitionsBetween(s,l),y=this.transitionsBetween(l,u),x=this.transitionsBetween(u,f),T=this.transitionsBetween(f,s),b=g,O=[f,s,l,u];return b>y&&(b=y,O[0]=s,O[1]=l,O[2]=u,O[3]=f),b>x&&(b=x,O[0]=l,O[1]=u,O[2]=f,O[3]=s),b>T&&(O[0]=u,O[1]=f,O[2]=s,O[3]=l),O}detectSolid2(i){let s=i[0],l=i[1],u=i[2],f=i[3],g=this.transitionsBetween(s,f),y=$e.shiftPoint(l,u,(g+1)*4),x=$e.shiftPoint(u,l,(g+1)*4),T=this.transitionsBetween(y,s),b=this.transitionsBetween(x,f);return T<b?(i[0]=s,i[1]=l,i[2]=u,i[3]=f):(i[0]=l,i[1]=u,i[2]=f,i[3]=s),i}correctTopRight(i){let s=i[0],l=i[1],u=i[2],f=i[3],g=this.transitionsBetween(s,f),y=this.transitionsBetween(l,f),x=$e.shiftPoint(s,l,(y+1)*4),T=$e.shiftPoint(u,l,(g+1)*4);g=this.transitionsBetween(x,f),y=this.transitionsBetween(T,f);let b=new Fe(f.getX()+(u.getX()-l.getX())/(g+1),f.getY()+(u.getY()-l.getY())/(g+1)),O=new Fe(f.getX()+(s.getX()-l.getX())/(y+1),f.getY()+(s.getY()-l.getY())/(y+1));if(!this.isValid(b))return this.isValid(O)?O:null;if(!this.isValid(O))return b;let P=this.transitionsBetween(x,b)+this.transitionsBetween(T,b),H=this.transitionsBetween(x,O)+this.transitionsBetween(T,O);return P>H?b:O}shiftToModuleCenter(i){let s=i[0],l=i[1],u=i[2],f=i[3],g=this.transitionsBetween(s,f)+1,y=this.transitionsBetween(u,f)+1,x=$e.shiftPoint(s,l,y*4),T=$e.shiftPoint(u,l,g*4);g=this.transitionsBetween(x,f)+1,y=this.transitionsBetween(T,f)+1,(g&1)===1&&(g+=1),(y&1)===1&&(y+=1);let b=(s.getX()+l.getX()+u.getX()+f.getX())/4,O=(s.getY()+l.getY()+u.getY()+f.getY())/4;s=$e.moveAway(s,b,O),l=$e.moveAway(l,b,O),u=$e.moveAway(u,b,O),f=$e.moveAway(f,b,O);let P,H;return x=$e.shiftPoint(s,l,y*4),x=$e.shiftPoint(x,f,g*4),P=$e.shiftPoint(l,s,y*4),P=$e.shiftPoint(P,u,g*4),T=$e.shiftPoint(u,f,y*4),T=$e.shiftPoint(T,l,g*4),H=$e.shiftPoint(f,u,y*4),H=$e.shiftPoint(H,s,g*4),[x,P,T,H]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,s,l,u,f,g,y){return gi.getInstance().sampleGrid(i,g,y,.5,.5,g-.5,.5,g-.5,y-.5,.5,y-.5,s.getX(),s.getY(),f.getX(),f.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(i,s){let l=Math.trunc(i.getX()),u=Math.trunc(i.getY()),f=Math.trunc(s.getX()),g=Math.trunc(s.getY()),y=Math.abs(g-u)>Math.abs(f-l);if(y){let Z=l;l=u,u=Z,Z=f,f=g,g=Z}let x=Math.abs(f-l),T=Math.abs(g-u),b=-x/2,O=u<g?1:-1,P=l<f?1:-1,H=0,W=this.image.get(y?u:l,y?l:u);for(let Z=l,re=u;Z!==f;Z+=P){let fe=this.image.get(y?re:Z,y?Z:re);if(fe!==W&&(H++,W=fe),b+=T,b>0){if(re===g)break;re+=O,b-=x}}return H}}class Mi{constructor(){this.decoder=new xo}decode(i,s=null){let l,u;if(s!=null&&s.has(ke.PURE_BARCODE)){const T=Mi.extractPureBits(i.getBlackMatrix());l=this.decoder.decode(T),u=Mi.NO_POINTS}else{const T=new $e(i.getBlackMatrix()).detect();l=this.decoder.decode(T.getBits()),u=T.getPoints()}const f=l.getRawBytes(),g=new De(l.getText(),f,8*f.length,u,Oe.DATA_MATRIX,pe.currentTimeMillis()),y=l.getByteSegments();y!=null&&g.putMetadata(wt.BYTE_SEGMENTS,y);const x=l.getECLevel();return x!=null&&g.putMetadata(wt.ERROR_CORRECTION_LEVEL,x),g}reset(){}static extractPureBits(i){const s=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(s==null||l==null)throw new Q;const u=this.moduleSize(s,i);let f=s[1];const g=l[1];let y=s[0];const T=(l[0]-y+1)/u,b=(g-f+1)/u;if(T<=0||b<=0)throw new Q;const O=u/2;f+=O,y+=O;const P=new Ue(T,b);for(let H=0;H<b;H++){const W=f+H*u;for(let Z=0;Z<T;Z++)i.get(y+Z*u,W)&&P.set(Z,H)}return P}static moduleSize(i,s){const l=s.getWidth();let u=i[0];const f=i[1];for(;u<l&&s.get(u,f);)u++;if(u===l)throw new Q;const g=u-i[0];if(g===0)throw new Q;return g}}Mi.NO_POINTS=[];class Mr extends Ie{constructor(i=500){super(new Mi,i)}}var Zi;(function(N){N[N.L=0]="L",N[N.M=1]="M",N[N.Q=2]="Q",N[N.H=3]="H"})(Zi||(Zi={}));class pt{constructor(i,s,l){this.value=i,this.stringValue=s,this.bits=l,pt.FOR_BITS.set(l,this),pt.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return pt.L;case"M":return pt.M;case"Q":return pt.Q;case"H":return pt.H;default:throw new D(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof pt))return!1;const s=i;return this.value===s.value}static forBits(i){if(i<0||i>=pt.FOR_BITS.size)throw new M;return pt.FOR_BITS.get(i)}}pt.FOR_BITS=new Map,pt.FOR_VALUE=new Map,pt.L=new pt(Zi.L,"L",1),pt.M=new pt(Zi.M,"M",0),pt.Q=new pt(Zi.Q,"Q",3),pt.H=new pt(Zi.H,"H",2);class On{constructor(i){this.errorCorrectionLevel=pt.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,s){return Ce.bitCount(i^s)}static decodeFormatInformation(i,s){const l=On.doDecodeFormatInformation(i,s);return l!==null?l:On.doDecodeFormatInformation(i^On.FORMAT_INFO_MASK_QR,s^On.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,s){let l=Number.MAX_SAFE_INTEGER,u=0;for(const f of On.FORMAT_INFO_DECODE_LOOKUP){const g=f[0];if(g===i||g===s)return new On(f[1]);let y=On.numBitsDiffering(i,g);y<l&&(u=f[1],l=y),i!==s&&(y=On.numBitsDiffering(s,g),y<l&&(u=f[1],l=y))}return l<=3?new On(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof On))return!1;const s=i;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}On.FORMAT_INFO_MASK_QR=21522,On.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class oe{constructor(i,...s){this.ecCodewordsPerBlock=i,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const s=this.ecBlocks;for(const l of s)i+=l.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class U{constructor(i,s){this.count=i,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ge{constructor(i,s,...l){this.versionNumber=i,this.alignmentPatternCenters=s,this.ecBlocks=l;let u=0;const f=l[0].getECCodewordsPerBlock(),g=l[0].getECBlocks();for(const y of g)u+=y.getCount()*(y.getDataCodewords()+f);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new V;try{return this.getVersionForNumber((i-17)/4)}catch{throw new V}}static getVersionForNumber(i){if(i<1||i>40)throw new M;return Ge.VERSIONS[i-1]}static decodeVersionInformation(i){let s=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<Ge.VERSION_DECODE_INFO.length;u++){const f=Ge.VERSION_DECODE_INFO[u];if(f===i)return Ge.getVersionForNumber(u+7);const g=On.numBitsDiffering(i,f);g<s&&(l=u+7,s=g)}return s<=3?Ge.getVersionForNumber(l):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),s=new Ue(i);s.setRegion(0,0,9,9),s.setRegion(i-8,0,8,9),s.setRegion(0,i-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const f=this.alignmentPatternCenters[u]-2;for(let g=0;g<l;g++)u===0&&(g===0||g===l-1)||u===l-1&&g===0||s.setRegion(this.alignmentPatternCenters[g]-2,f,5,5)}return s.setRegion(6,9,1,i-17),s.setRegion(9,6,i-17,1),this.versionNumber>6&&(s.setRegion(i-11,0,3,6),s.setRegion(0,i-11,6,3)),s}toString(){return""+this.versionNumber}}Ge.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ge.VERSIONS=[new Ge(1,new Int32Array(0),new oe(7,new U(1,19)),new oe(10,new U(1,16)),new oe(13,new U(1,13)),new oe(17,new U(1,9))),new Ge(2,Int32Array.from([6,18]),new oe(10,new U(1,34)),new oe(16,new U(1,28)),new oe(22,new U(1,22)),new oe(28,new U(1,16))),new Ge(3,Int32Array.from([6,22]),new oe(15,new U(1,55)),new oe(26,new U(1,44)),new oe(18,new U(2,17)),new oe(22,new U(2,13))),new Ge(4,Int32Array.from([6,26]),new oe(20,new U(1,80)),new oe(18,new U(2,32)),new oe(26,new U(2,24)),new oe(16,new U(4,9))),new Ge(5,Int32Array.from([6,30]),new oe(26,new U(1,108)),new oe(24,new U(2,43)),new oe(18,new U(2,15),new U(2,16)),new oe(22,new U(2,11),new U(2,12))),new Ge(6,Int32Array.from([6,34]),new oe(18,new U(2,68)),new oe(16,new U(4,27)),new oe(24,new U(4,19)),new oe(28,new U(4,15))),new Ge(7,Int32Array.from([6,22,38]),new oe(20,new U(2,78)),new oe(18,new U(4,31)),new oe(18,new U(2,14),new U(4,15)),new oe(26,new U(4,13),new U(1,14))),new Ge(8,Int32Array.from([6,24,42]),new oe(24,new U(2,97)),new oe(22,new U(2,38),new U(2,39)),new oe(22,new U(4,18),new U(2,19)),new oe(26,new U(4,14),new U(2,15))),new Ge(9,Int32Array.from([6,26,46]),new oe(30,new U(2,116)),new oe(22,new U(3,36),new U(2,37)),new oe(20,new U(4,16),new U(4,17)),new oe(24,new U(4,12),new U(4,13))),new Ge(10,Int32Array.from([6,28,50]),new oe(18,new U(2,68),new U(2,69)),new oe(26,new U(4,43),new U(1,44)),new oe(24,new U(6,19),new U(2,20)),new oe(28,new U(6,15),new U(2,16))),new Ge(11,Int32Array.from([6,30,54]),new oe(20,new U(4,81)),new oe(30,new U(1,50),new U(4,51)),new oe(28,new U(4,22),new U(4,23)),new oe(24,new U(3,12),new U(8,13))),new Ge(12,Int32Array.from([6,32,58]),new oe(24,new U(2,92),new U(2,93)),new oe(22,new U(6,36),new U(2,37)),new oe(26,new U(4,20),new U(6,21)),new oe(28,new U(7,14),new U(4,15))),new Ge(13,Int32Array.from([6,34,62]),new oe(26,new U(4,107)),new oe(22,new U(8,37),new U(1,38)),new oe(24,new U(8,20),new U(4,21)),new oe(22,new U(12,11),new U(4,12))),new Ge(14,Int32Array.from([6,26,46,66]),new oe(30,new U(3,115),new U(1,116)),new oe(24,new U(4,40),new U(5,41)),new oe(20,new U(11,16),new U(5,17)),new oe(24,new U(11,12),new U(5,13))),new Ge(15,Int32Array.from([6,26,48,70]),new oe(22,new U(5,87),new U(1,88)),new oe(24,new U(5,41),new U(5,42)),new oe(30,new U(5,24),new U(7,25)),new oe(24,new U(11,12),new U(7,13))),new Ge(16,Int32Array.from([6,26,50,74]),new oe(24,new U(5,98),new U(1,99)),new oe(28,new U(7,45),new U(3,46)),new oe(24,new U(15,19),new U(2,20)),new oe(30,new U(3,15),new U(13,16))),new Ge(17,Int32Array.from([6,30,54,78]),new oe(28,new U(1,107),new U(5,108)),new oe(28,new U(10,46),new U(1,47)),new oe(28,new U(1,22),new U(15,23)),new oe(28,new U(2,14),new U(17,15))),new Ge(18,Int32Array.from([6,30,56,82]),new oe(30,new U(5,120),new U(1,121)),new oe(26,new U(9,43),new U(4,44)),new oe(28,new U(17,22),new U(1,23)),new oe(28,new U(2,14),new U(19,15))),new Ge(19,Int32Array.from([6,30,58,86]),new oe(28,new U(3,113),new U(4,114)),new oe(26,new U(3,44),new U(11,45)),new oe(26,new U(17,21),new U(4,22)),new oe(26,new U(9,13),new U(16,14))),new Ge(20,Int32Array.from([6,34,62,90]),new oe(28,new U(3,107),new U(5,108)),new oe(26,new U(3,41),new U(13,42)),new oe(30,new U(15,24),new U(5,25)),new oe(28,new U(15,15),new U(10,16))),new Ge(21,Int32Array.from([6,28,50,72,94]),new oe(28,new U(4,116),new U(4,117)),new oe(26,new U(17,42)),new oe(28,new U(17,22),new U(6,23)),new oe(30,new U(19,16),new U(6,17))),new Ge(22,Int32Array.from([6,26,50,74,98]),new oe(28,new U(2,111),new U(7,112)),new oe(28,new U(17,46)),new oe(30,new U(7,24),new U(16,25)),new oe(24,new U(34,13))),new Ge(23,Int32Array.from([6,30,54,78,102]),new oe(30,new U(4,121),new U(5,122)),new oe(28,new U(4,47),new U(14,48)),new oe(30,new U(11,24),new U(14,25)),new oe(30,new U(16,15),new U(14,16))),new Ge(24,Int32Array.from([6,28,54,80,106]),new oe(30,new U(6,117),new U(4,118)),new oe(28,new U(6,45),new U(14,46)),new oe(30,new U(11,24),new U(16,25)),new oe(30,new U(30,16),new U(2,17))),new Ge(25,Int32Array.from([6,32,58,84,110]),new oe(26,new U(8,106),new U(4,107)),new oe(28,new U(8,47),new U(13,48)),new oe(30,new U(7,24),new U(22,25)),new oe(30,new U(22,15),new U(13,16))),new Ge(26,Int32Array.from([6,30,58,86,114]),new oe(28,new U(10,114),new U(2,115)),new oe(28,new U(19,46),new U(4,47)),new oe(28,new U(28,22),new U(6,23)),new oe(30,new U(33,16),new U(4,17))),new Ge(27,Int32Array.from([6,34,62,90,118]),new oe(30,new U(8,122),new U(4,123)),new oe(28,new U(22,45),new U(3,46)),new oe(30,new U(8,23),new U(26,24)),new oe(30,new U(12,15),new U(28,16))),new Ge(28,Int32Array.from([6,26,50,74,98,122]),new oe(30,new U(3,117),new U(10,118)),new oe(28,new U(3,45),new U(23,46)),new oe(30,new U(4,24),new U(31,25)),new oe(30,new U(11,15),new U(31,16))),new Ge(29,Int32Array.from([6,30,54,78,102,126]),new oe(30,new U(7,116),new U(7,117)),new oe(28,new U(21,45),new U(7,46)),new oe(30,new U(1,23),new U(37,24)),new oe(30,new U(19,15),new U(26,16))),new Ge(30,Int32Array.from([6,26,52,78,104,130]),new oe(30,new U(5,115),new U(10,116)),new oe(28,new U(19,47),new U(10,48)),new oe(30,new U(15,24),new U(25,25)),new oe(30,new U(23,15),new U(25,16))),new Ge(31,Int32Array.from([6,30,56,82,108,134]),new oe(30,new U(13,115),new U(3,116)),new oe(28,new U(2,46),new U(29,47)),new oe(30,new U(42,24),new U(1,25)),new oe(30,new U(23,15),new U(28,16))),new Ge(32,Int32Array.from([6,34,60,86,112,138]),new oe(30,new U(17,115)),new oe(28,new U(10,46),new U(23,47)),new oe(30,new U(10,24),new U(35,25)),new oe(30,new U(19,15),new U(35,16))),new Ge(33,Int32Array.from([6,30,58,86,114,142]),new oe(30,new U(17,115),new U(1,116)),new oe(28,new U(14,46),new U(21,47)),new oe(30,new U(29,24),new U(19,25)),new oe(30,new U(11,15),new U(46,16))),new Ge(34,Int32Array.from([6,34,62,90,118,146]),new oe(30,new U(13,115),new U(6,116)),new oe(28,new U(14,46),new U(23,47)),new oe(30,new U(44,24),new U(7,25)),new oe(30,new U(59,16),new U(1,17))),new Ge(35,Int32Array.from([6,30,54,78,102,126,150]),new oe(30,new U(12,121),new U(7,122)),new oe(28,new U(12,47),new U(26,48)),new oe(30,new U(39,24),new U(14,25)),new oe(30,new U(22,15),new U(41,16))),new Ge(36,Int32Array.from([6,24,50,76,102,128,154]),new oe(30,new U(6,121),new U(14,122)),new oe(28,new U(6,47),new U(34,48)),new oe(30,new U(46,24),new U(10,25)),new oe(30,new U(2,15),new U(64,16))),new Ge(37,Int32Array.from([6,28,54,80,106,132,158]),new oe(30,new U(17,122),new U(4,123)),new oe(28,new U(29,46),new U(14,47)),new oe(30,new U(49,24),new U(10,25)),new oe(30,new U(24,15),new U(46,16))),new Ge(38,Int32Array.from([6,32,58,84,110,136,162]),new oe(30,new U(4,122),new U(18,123)),new oe(28,new U(13,46),new U(32,47)),new oe(30,new U(48,24),new U(14,25)),new oe(30,new U(42,15),new U(32,16))),new Ge(39,Int32Array.from([6,26,54,82,110,138,166]),new oe(30,new U(20,117),new U(4,118)),new oe(28,new U(40,47),new U(7,48)),new oe(30,new U(43,24),new U(22,25)),new oe(30,new U(10,15),new U(67,16))),new Ge(40,Int32Array.from([6,30,58,86,114,142,170]),new oe(30,new U(19,118),new U(6,119)),new oe(28,new U(18,47),new U(31,48)),new oe(30,new U(34,24),new U(34,25)),new oe(30,new U(20,15),new U(61,16)))];var Dn;(function(N){N[N.DATA_MASK_000=0]="DATA_MASK_000",N[N.DATA_MASK_001=1]="DATA_MASK_001",N[N.DATA_MASK_010=2]="DATA_MASK_010",N[N.DATA_MASK_011=3]="DATA_MASK_011",N[N.DATA_MASK_100=4]="DATA_MASK_100",N[N.DATA_MASK_101=5]="DATA_MASK_101",N[N.DATA_MASK_110=6]="DATA_MASK_110",N[N.DATA_MASK_111=7]="DATA_MASK_111"})(Dn||(Dn={}));class jn{constructor(i,s){this.value=i,this.isMasked=s}unmaskBitMatrix(i,s){for(let l=0;l<s;l++)for(let u=0;u<s;u++)this.isMasked(l,u)&&i.flip(u,l)}}jn.values=new Map([[Dn.DATA_MASK_000,new jn(Dn.DATA_MASK_000,(N,i)=>(N+i&1)===0)],[Dn.DATA_MASK_001,new jn(Dn.DATA_MASK_001,(N,i)=>(N&1)===0)],[Dn.DATA_MASK_010,new jn(Dn.DATA_MASK_010,(N,i)=>i%3===0)],[Dn.DATA_MASK_011,new jn(Dn.DATA_MASK_011,(N,i)=>(N+i)%3===0)],[Dn.DATA_MASK_100,new jn(Dn.DATA_MASK_100,(N,i)=>(Math.floor(N/2)+Math.floor(i/3)&1)===0)],[Dn.DATA_MASK_101,new jn(Dn.DATA_MASK_101,(N,i)=>N*i%6===0)],[Dn.DATA_MASK_110,new jn(Dn.DATA_MASK_110,(N,i)=>N*i%6<3)],[Dn.DATA_MASK_111,new jn(Dn.DATA_MASK_111,(N,i)=>(N+i+N*i%3&1)===0)]]);class Pi{constructor(i){const s=i.getHeight();if(s<21||(s&3)!==1)throw new V;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let f=0;f<6;f++)i=this.copyBit(f,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let f=5;f>=0;f--)i=this.copyBit(8,f,i);const s=this.bitMatrix.getHeight();let l=0;const u=s-7;for(let f=s-1;f>=u;f--)l=this.copyBit(8,f,l);for(let f=s-8;f<s;f++)l=this.copyBit(f,8,l);if(this.parsedFormatInfo=On.decodeFormatInformation(i,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new V}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),s=Math.floor((i-17)/4);if(s<=6)return Ge.getVersionForNumber(s);let l=0;const u=i-11;for(let g=5;g>=0;g--)for(let y=i-9;y>=u;y--)l=this.copyBit(y,g,l);let f=Ge.decodeVersionInformation(l);if(f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;l=0;for(let g=5;g>=0;g--)for(let y=i-9;y>=u;y--)l=this.copyBit(g,y,l);if(f=Ge.decodeVersionInformation(l),f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;throw new V}copyBit(i,s,l){return(this.isMirror?this.bitMatrix.get(s,i):this.bitMatrix.get(i,s))?l<<1|1:l<<1}readCodewords(){const i=this.readFormatInformation(),s=this.readVersion(),l=jn.values.get(i.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const f=s.buildFunctionPattern();let g=!0;const y=new Uint8Array(s.getTotalCodewords());let x=0,T=0,b=0;for(let O=u-1;O>0;O-=2){O===6&&O--;for(let P=0;P<u;P++){const H=g?u-1-P:P;for(let W=0;W<2;W++)f.get(O-W,H)||(b++,T<<=1,this.bitMatrix.get(O-W,H)&&(T|=1),b===8&&(y[x++]=T,b=0,T=0))}g=!g}if(x!==s.getTotalCodewords())throw new V;return y}remask(){if(this.parsedFormatInfo===null)return;const i=jn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,s)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let s=0,l=i.getWidth();s<l;s++)for(let u=s+1,f=i.getHeight();u<f;u++)i.get(s,u)!==i.get(u,s)&&(i.flip(u,s),i.flip(s,u))}}class ma{constructor(i,s){this.numDataCodewords=i,this.codewords=s}static getDataBlocks(i,s,l){if(i.length!==s.getTotalCodewords())throw new M;const u=s.getECBlocksForLevel(l);let f=0;const g=u.getECBlocks();for(const W of g)f+=W.getCount();const y=new Array(f);let x=0;for(const W of g)for(let Z=0;Z<W.getCount();Z++){const re=W.getDataCodewords(),fe=u.getECCodewordsPerBlock()+re;y[x++]=new ma(re,new Uint8Array(fe))}const T=y[0].codewords.length;let b=y.length-1;for(;b>=0&&y[b].codewords.length!==T;)b--;b++;const O=T-u.getECCodewordsPerBlock();let P=0;for(let W=0;W<O;W++)for(let Z=0;Z<x;Z++)y[Z].codewords[W]=i[P++];for(let W=b;W<x;W++)y[W].codewords[O]=i[P++];const H=y[0].codewords.length;for(let W=O;W<H;W++)for(let Z=0;Z<x;Z++){const re=Z<b?W:W+1;y[Z].codewords[re]=i[P++]}return y}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var li;(function(N){N[N.TERMINATOR=0]="TERMINATOR",N[N.NUMERIC=1]="NUMERIC",N[N.ALPHANUMERIC=2]="ALPHANUMERIC",N[N.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",N[N.BYTE=4]="BYTE",N[N.ECI=5]="ECI",N[N.KANJI=6]="KANJI",N[N.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",N[N.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",N[N.HANZI=9]="HANZI"})(li||(li={}));class Ye{constructor(i,s,l,u){this.value=i,this.stringValue=s,this.characterCountBitsForVersions=l,this.bits=u,Ye.FOR_BITS.set(u,this),Ye.FOR_VALUE.set(i,this)}static forBits(i){const s=Ye.FOR_BITS.get(i);if(s===void 0)throw new M;return s}getCharacterCountBits(i){const s=i.getVersionNumber();let l;return s<=9?l=0:s<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Ye))return!1;const s=i;return this.value===s.value}toString(){return this.stringValue}}Ye.FOR_BITS=new Map,Ye.FOR_VALUE=new Map,Ye.TERMINATOR=new Ye(li.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ye.NUMERIC=new Ye(li.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ye.ALPHANUMERIC=new Ye(li.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ye.STRUCTURED_APPEND=new Ye(li.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ye.BYTE=new Ye(li.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ye.ECI=new Ye(li.ECI,"ECI",Int32Array.from([0,0,0]),7),Ye.KANJI=new Ye(li.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ye.FNC1_FIRST_POSITION=new Ye(li.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ye.FNC1_SECOND_POSITION=new Ye(li.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ye.HANZI=new Ye(li.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Jt{static decode(i,s,l,u){const f=new Cn(i);let g=new F;const y=new Array;let x=-1,T=-1;try{let b=null,O=!1,P;do{if(f.available()<4)P=Ye.TERMINATOR;else{const H=f.readBits(4);P=Ye.forBits(H)}switch(P){case Ye.TERMINATOR:break;case Ye.FNC1_FIRST_POSITION:case Ye.FNC1_SECOND_POSITION:O=!0;break;case Ye.STRUCTURED_APPEND:if(f.available()<16)throw new V;x=f.readBits(8),T=f.readBits(8);break;case Ye.ECI:const H=Jt.parseECIValue(f);if(b=B.getCharacterSetECIByValue(H),b===null)throw new V;break;case Ye.HANZI:const W=f.readBits(4),Z=f.readBits(P.getCharacterCountBits(s));W===Jt.GB2312_SUBSET&&Jt.decodeHanziSegment(f,g,Z);break;default:const re=f.readBits(P.getCharacterCountBits(s));switch(P){case Ye.NUMERIC:Jt.decodeNumericSegment(f,g,re);break;case Ye.ALPHANUMERIC:Jt.decodeAlphanumericSegment(f,g,re,O);break;case Ye.BYTE:Jt.decodeByteSegment(f,g,re,b,y,u);break;case Ye.KANJI:Jt.decodeKanjiSegment(f,g,re);break;default:throw new V}break}}while(P!==Ye.TERMINATOR)}catch{throw new V}return new Zt(i,g.toString(),y.length===0?null:y,l===null?null:l.toString(),x,T)}static decodeHanziSegment(i,s,l){if(l*13>i.available())throw new V;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const g=i.readBits(13);let y=g/96<<8&4294967295|g%96;y<959?y+=41377:y+=42657,u[f]=y>>8&255,u[f+1]=y&255,f+=2,l--}try{s.append(G.decode(u,q.GB2312))}catch(g){throw new V(g)}}static decodeKanjiSegment(i,s,l){if(l*13>i.available())throw new V;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const g=i.readBits(13);let y=g/192<<8&4294967295|g%192;y<7936?y+=33088:y+=49472,u[f]=y>>8,u[f+1]=y,f+=2,l--}try{s.append(G.decode(u,q.SHIFT_JIS))}catch(g){throw new V(g)}}static decodeByteSegment(i,s,l,u,f,g){if(8*l>i.available())throw new V;const y=new Uint8Array(l);for(let T=0;T<l;T++)y[T]=i.readBits(8);let x;u===null?x=q.guessEncoding(y,g):x=u.getName();try{s.append(G.decode(y,x))}catch(T){throw new V(T)}f.push(y)}static toAlphaNumericChar(i){if(i>=Jt.ALPHANUMERIC_CHARS.length)throw new V;return Jt.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,s,l,u){const f=s.length();for(;l>1;){if(i.available()<11)throw new V;const g=i.readBits(11);s.append(Jt.toAlphaNumericChar(Math.floor(g/45))),s.append(Jt.toAlphaNumericChar(g%45)),l-=2}if(l===1){if(i.available()<6)throw new V;s.append(Jt.toAlphaNumericChar(i.readBits(6)))}if(u)for(let g=f;g<s.length();g++)s.charAt(g)==="%"&&(g<s.length()-1&&s.charAt(g+1)==="%"?s.deleteCharAt(g+1):s.setCharAt(g,""))}static decodeNumericSegment(i,s,l){for(;l>=3;){if(i.available()<10)throw new V;const u=i.readBits(10);if(u>=1e3)throw new V;s.append(Jt.toAlphaNumericChar(Math.floor(u/100))),s.append(Jt.toAlphaNumericChar(Math.floor(u/10)%10)),s.append(Jt.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(i.available()<7)throw new V;const u=i.readBits(7);if(u>=100)throw new V;s.append(Jt.toAlphaNumericChar(Math.floor(u/10))),s.append(Jt.toAlphaNumericChar(u%10))}else if(l===1){if(i.available()<4)throw new V;const u=i.readBits(4);if(u>=10)throw new V;s.append(Jt.toAlphaNumericChar(u))}}static parseECIValue(i){const s=i.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){const l=i.readBits(8);return(s&63)<<8&4294967295|l}if((s&224)===192){const l=i.readBits(16);return(s&31)<<16&4294967295|l}throw new V}}Jt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Jt.GB2312_SUBSET=1;class Ao{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const s=i[0];i[0]=i[2],i[2]=s}}class hs{constructor(){this.rsDecoder=new hr(Tt.QR_CODE_FIELD_256)}decodeBooleanArray(i,s){return this.decodeBitMatrix(Ue.parseFromBooleanArray(i),s)}decodeBitMatrix(i,s){const l=new Pi(i);let u=null;try{return this.decodeBitMatrixParser(l,s)}catch(f){u=f}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const f=this.decodeBitMatrixParser(l,s);return f.setOther(new Ao(!0)),f}catch(f){throw u!==null?u:f}}decodeBitMatrixParser(i,s){const l=i.readVersion(),u=i.readFormatInformation().getErrorCorrectionLevel(),f=i.readCodewords(),g=ma.getDataBlocks(f,l,u);let y=0;for(const b of g)y+=b.getNumDataCodewords();const x=new Uint8Array(y);let T=0;for(const b of g){const O=b.getCodewords(),P=b.getNumDataCodewords();this.correctErrors(O,P);for(let H=0;H<P;H++)x[T++]=O[H]}return Jt.decode(x,l,u,s)}correctErrors(i,s){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-s)}catch{throw new te}for(let u=0;u<s;u++)i[u]=l[u]}}class fs extends Fe{constructor(i,s,l){super(i,s),this.estimatedModuleSize=l}aboutEquals(i,s,l){if(Math.abs(s-this.getY())<=i&&Math.abs(l-this.getX())<=i){const u=Math.abs(i-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(i,s,l){const u=(this.getX()+s)/2,f=(this.getY()+i)/2,g=(this.estimatedModuleSize+l)/2;return new fs(u,f,g)}}class Li{constructor(i,s,l,u,f,g,y){this.image=i,this.startX=s,this.startY=l,this.width=u,this.height=f,this.moduleSize=g,this.resultPointCallback=y,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,s=this.height,l=this.width,u=i+l,f=this.startY+s/2,g=new Int32Array(3),y=this.image;for(let x=0;x<s;x++){const T=f+((x&1)===0?Math.floor((x+1)/2):-Math.floor((x+1)/2));g[0]=0,g[1]=0,g[2]=0;let b=i;for(;b<u&&!y.get(b,T);)b++;let O=0;for(;b<u;){if(y.get(b,T))if(O===1)g[1]++;else if(O===2){if(this.foundPatternCross(g)){const P=this.handlePossibleCenter(g,T,b);if(P!==null)return P}g[0]=g[2],g[1]=1,g[2]=0,O=1}else g[++O]++;else O===1&&O++,g[O]++;b++}if(this.foundPatternCross(g)){const P=this.handlePossibleCenter(g,T,u);if(P!==null)return P}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Q}static centerFromEnd(i,s){return s-i[2]-i[1]/2}foundPatternCross(i){const s=this.moduleSize,l=s/2;for(let u=0;u<3;u++)if(Math.abs(s-i[u])>=l)return!1;return!0}crossCheckVertical(i,s,l,u){const f=this.image,g=f.getHeight(),y=this.crossCheckStateCount;y[0]=0,y[1]=0,y[2]=0;let x=i;for(;x>=0&&f.get(s,x)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&!f.get(s,x)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=i+1;x<g&&f.get(s,x)&&y[1]<=l;)y[1]++,x++;if(x===g||y[1]>l)return NaN;for(;x<g&&!f.get(s,x)&&y[2]<=l;)y[2]++,x++;if(y[2]>l)return NaN;const T=y[0]+y[1]+y[2];return 5*Math.abs(T-u)>=2*u?NaN:this.foundPatternCross(y)?Li.centerFromEnd(y,x):NaN}handlePossibleCenter(i,s,l){const u=i[0]+i[1]+i[2],f=Li.centerFromEnd(i,l),g=this.crossCheckVertical(s,f,2*i[1],u);if(!isNaN(g)){const y=(i[0]+i[1]+i[2])/3;for(const T of this.possibleCenters)if(T.aboutEquals(y,g,f))return T.combineEstimate(g,f,y);const x=new fs(f,g,y);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class Os extends Fe{constructor(i,s,l,u){super(i,s),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,s,l){if(Math.abs(s-this.getY())<=i&&Math.abs(l-this.getX())<=i){const u=Math.abs(i-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(i,s,l){const u=this.count+1,f=(this.count*this.getX()+s)/u,g=(this.count*this.getY()+i)/u,y=(this.count*this.estimatedModuleSize+l)/u;return new Os(f,g,y,u)}}class Ji{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class un{constructor(i,s){this.image=i,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const s=i!=null&&i.get(ke.TRY_HARDER)!==void 0,l=i!=null&&i.get(ke.PURE_BARCODE)!==void 0,u=this.image,f=u.getHeight(),g=u.getWidth();let y=Math.floor(3*f/(4*un.MAX_MODULES));(y<un.MIN_SKIP||s)&&(y=un.MIN_SKIP);let x=!1;const T=new Int32Array(5);for(let O=y-1;O<f&&!x;O+=y){T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0;let P=0;for(let H=0;H<g;H++)if(u.get(H,O))(P&1)===1&&P++,T[P]++;else if((P&1)===0)if(P===4)if(un.foundPatternCross(T)){if(this.handlePossibleCenter(T,O,H,l)===!0)if(y=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const Z=this.findRowSkip();Z>T[2]&&(O+=Z-T[2]-y,H=g-1)}else{T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,P=3;continue}P=0,T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0}else T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,P=3;else T[++P]++;else T[P]++;un.foundPatternCross(T)&&this.handlePossibleCenter(T,O,g,l)===!0&&(y=T[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const b=this.selectBestPatterns();return Fe.orderBestPatterns(b),new Ji(b)}static centerFromEnd(i,s){return s-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let s=0;for(let f=0;f<5;f++){const g=i[f];if(g===0)return!1;s+=g}if(s<7)return!1;const l=s/7,u=l/2;return Math.abs(l-i[0])<u&&Math.abs(l-i[1])<u&&Math.abs(3*l-i[2])<3*u&&Math.abs(l-i[3])<u&&Math.abs(l-i[4])<u}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,s,l,u){const f=this.getCrossCheckStateCount();let g=0;const y=this.image;for(;i>=g&&s>=g&&y.get(s-g,i-g);)f[2]++,g++;if(i<g||s<g)return!1;for(;i>=g&&s>=g&&!y.get(s-g,i-g)&&f[1]<=l;)f[1]++,g++;if(i<g||s<g||f[1]>l)return!1;for(;i>=g&&s>=g&&y.get(s-g,i-g)&&f[0]<=l;)f[0]++,g++;if(f[0]>l)return!1;const x=y.getHeight(),T=y.getWidth();for(g=1;i+g<x&&s+g<T&&y.get(s+g,i+g);)f[2]++,g++;if(i+g>=x||s+g>=T)return!1;for(;i+g<x&&s+g<T&&!y.get(s+g,i+g)&&f[3]<l;)f[3]++,g++;if(i+g>=x||s+g>=T||f[3]>=l)return!1;for(;i+g<x&&s+g<T&&y.get(s+g,i+g)&&f[4]<l;)f[4]++,g++;if(f[4]>=l)return!1;const b=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(b-u)<2*u&&un.foundPatternCross(f)}crossCheckVertical(i,s,l,u){const f=this.image,g=f.getHeight(),y=this.getCrossCheckStateCount();let x=i;for(;x>=0&&f.get(s,x);)y[2]++,x--;if(x<0)return NaN;for(;x>=0&&!f.get(s,x)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&f.get(s,x)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=i+1;x<g&&f.get(s,x);)y[2]++,x++;if(x===g)return NaN;for(;x<g&&!f.get(s,x)&&y[3]<l;)y[3]++,x++;if(x===g||y[3]>=l)return NaN;for(;x<g&&f.get(s,x)&&y[4]<l;)y[4]++,x++;if(y[4]>=l)return NaN;const T=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(T-u)>=2*u?NaN:un.foundPatternCross(y)?un.centerFromEnd(y,x):NaN}crossCheckHorizontal(i,s,l,u){const f=this.image,g=f.getWidth(),y=this.getCrossCheckStateCount();let x=i;for(;x>=0&&f.get(x,s);)y[2]++,x--;if(x<0)return NaN;for(;x>=0&&!f.get(x,s)&&y[1]<=l;)y[1]++,x--;if(x<0||y[1]>l)return NaN;for(;x>=0&&f.get(x,s)&&y[0]<=l;)y[0]++,x--;if(y[0]>l)return NaN;for(x=i+1;x<g&&f.get(x,s);)y[2]++,x++;if(x===g)return NaN;for(;x<g&&!f.get(x,s)&&y[3]<l;)y[3]++,x++;if(x===g||y[3]>=l)return NaN;for(;x<g&&f.get(x,s)&&y[4]<l;)y[4]++,x++;if(y[4]>=l)return NaN;const T=y[0]+y[1]+y[2]+y[3]+y[4];return 5*Math.abs(T-u)>=u?NaN:un.foundPatternCross(y)?un.centerFromEnd(y,x):NaN}handlePossibleCenter(i,s,l,u){const f=i[0]+i[1]+i[2]+i[3]+i[4];let g=un.centerFromEnd(i,l),y=this.crossCheckVertical(s,Math.floor(g),i[2],f);if(!isNaN(y)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(y),i[2],f),!isNaN(g)&&(!u||this.crossCheckDiagonal(Math.floor(y),Math.floor(g),i[2],f)))){const x=f/7;let T=!1;const b=this.possibleCenters;for(let O=0,P=b.length;O<P;O++){const H=b[O];if(H.aboutEquals(x,y,g)){b[O]=H.combineEstimate(y,g,x),T=!0;break}}if(!T){const O=new Os(g,y,x);b.push(O),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(O)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const l of this.possibleCenters)if(l.getCount()>=un.CENTER_QUORUM)if(s==null)s=l;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-l.getX())-Math.abs(s.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,s=0;const l=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=un.CENTER_QUORUM&&(i++,s+=g.getEstimatedModuleSize());if(i<3)return!1;const u=s/l;let f=0;for(const g of this.possibleCenters)f+=Math.abs(g.getEstimatedModuleSize()-u);return f<=.05*s}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new Q;const s=this.possibleCenters;let l;if(i>3){let u=0,f=0;for(const x of this.possibleCenters){const T=x.getEstimatedModuleSize();u+=T,f+=T*T}l=u/i;let g=Math.sqrt(f/i-l*l);s.sort((x,T)=>{const b=Math.abs(T.getEstimatedModuleSize()-l),O=Math.abs(x.getEstimatedModuleSize()-l);return b<O?-1:b>O?1:0});const y=Math.max(.2*l,g);for(let x=0;x<s.length&&s.length>3;x++){const T=s[x];Math.abs(T.getEstimatedModuleSize()-l)>y&&(s.splice(x,1),x--)}}if(s.length>3){let u=0;for(const f of s)u+=f.getEstimatedModuleSize();l=u/s.length,s.sort((f,g)=>{if(g.getCount()===f.getCount()){const y=Math.abs(g.getEstimatedModuleSize()-l),x=Math.abs(f.getEstimatedModuleSize()-l);return y<x?1:y>x?-1:0}else return g.getCount()-f.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}un.CENTER_QUORUM=2,un.MIN_SKIP=3,un.MAX_MODULES=57;class ki{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(ke.NEED_RESULT_POINT_CALLBACK);const l=new un(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(l)}processFinderPatternInfo(i){const s=i.getTopLeft(),l=i.getTopRight(),u=i.getBottomLeft(),f=this.calculateModuleSize(s,l,u);if(f<1)throw new Q("No pattern found in proccess finder.");const g=ki.computeDimension(s,l,u,f),y=Ge.getProvisionalVersionForDimension(g),x=y.getDimensionForVersion()-7;let T=null;if(y.getAlignmentPatternCenters().length>0){const H=l.getX()-s.getX()+u.getX(),W=l.getY()-s.getY()+u.getY(),Z=1-3/x,re=Math.floor(s.getX()+Z*(H-s.getX())),fe=Math.floor(s.getY()+Z*(W-s.getY()));for(let Re=4;Re<=16;Re<<=1)try{T=this.findAlignmentInRegion(f,re,fe,Re);break}catch(be){if(!(be instanceof Q))throw be}}const b=ki.createTransform(s,l,u,T,g),O=ki.sampleGrid(this.image,b,g);let P;return T===null?P=[u,s,l]:P=[u,s,l,T],new ha(O,P)}static createTransform(i,s,l,u,f){const g=f-3.5;let y,x,T,b;return u!==null?(y=u.getX(),x=u.getY(),T=g-3,b=T):(y=s.getX()-i.getX()+l.getX(),x=s.getY()-i.getY()+l.getY(),T=g,b=g),di.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,T,b,3.5,g,i.getX(),i.getY(),s.getX(),s.getY(),y,x,l.getX(),l.getY())}static sampleGrid(i,s,l){return gi.getInstance().sampleGridWithTransform(i,l,l,s)}static computeDimension(i,s,l,u){const f=Ze.round(Fe.distance(i,s)/u),g=Ze.round(Fe.distance(i,l)/u);let y=Math.floor((f+g)/2)+7;switch(y&3){case 0:y++;break;case 2:y--;break;case 3:throw new Q("Dimensions could be not found.")}return y}calculateModuleSize(i,s,l){return(this.calculateModuleSizeOneWay(i,s)+this.calculateModuleSizeOneWay(i,l))/2}calculateModuleSizeOneWay(i,s){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(s.getX()),Math.floor(s.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(i,s,l,u){let f=this.sizeOfBlackWhiteBlackRun(i,s,l,u),g=1,y=i-(l-i);y<0?(g=i/(i-y),y=0):y>=this.image.getWidth()&&(g=(this.image.getWidth()-1-i)/(y-i),y=this.image.getWidth()-1);let x=Math.floor(s-(u-s)*g);return g=1,x<0?(g=s/(s-x),x=0):x>=this.image.getHeight()&&(g=(this.image.getHeight()-1-s)/(x-s),x=this.image.getHeight()-1),y=Math.floor(i+(y-i)*g),f+=this.sizeOfBlackWhiteBlackRun(i,s,y,x),f-1}sizeOfBlackWhiteBlackRun(i,s,l,u){const f=Math.abs(u-s)>Math.abs(l-i);if(f){let H=i;i=s,s=H,H=l,l=u,u=H}const g=Math.abs(l-i),y=Math.abs(u-s);let x=-g/2;const T=i<l?1:-1,b=s<u?1:-1;let O=0;const P=l+T;for(let H=i,W=s;H!==P;H+=T){const Z=f?W:H,re=f?H:W;if(O===1===this.image.get(Z,re)){if(O===2)return Ze.distance(H,W,i,s);O++}if(x+=y,x>0){if(W===u)break;W+=b,x-=g}}return O===2?Ze.distance(l+T,u,i,s):NaN}findAlignmentInRegion(i,s,l,u){const f=Math.floor(u*i),g=Math.max(0,s-f),y=Math.min(this.image.getWidth()-1,s+f);if(y-g<i*3)throw new Q("Alignment top exceeds estimated module size.");const x=Math.max(0,l-f),T=Math.min(this.image.getHeight()-1,l+f);if(T-x<i*3)throw new Q("Alignment bottom exceeds estimated module size.");return new Li(this.image,g,x,y-g,T-x,i,this.resultPointCallback).find()}}class Bi{constructor(){this.decoder=new hs}getDecoder(){return this.decoder}decode(i,s){let l,u;if(s!=null&&s.get(ke.PURE_BARCODE)!==void 0){const x=Bi.extractPureBits(i.getBlackMatrix());l=this.decoder.decodeBitMatrix(x,s),u=Bi.NO_POINTS}else{const x=new ki(i.getBlackMatrix()).detect(s);l=this.decoder.decodeBitMatrix(x.getBits(),s),u=x.getPoints()}l.getOther()instanceof Ao&&l.getOther().applyMirroredCorrection(u);const f=new De(l.getText(),l.getRawBytes(),void 0,u,Oe.QR_CODE,void 0),g=l.getByteSegments();g!==null&&f.putMetadata(wt.BYTE_SEGMENTS,g);const y=l.getECLevel();return y!==null&&f.putMetadata(wt.ERROR_CORRECTION_LEVEL,y),l.hasStructuredAppend()&&(f.putMetadata(wt.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),f.putMetadata(wt.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),f}reset(){}static extractPureBits(i){const s=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(s===null||l===null)throw new Q;const u=this.moduleSize(s,i);let f=s[1],g=l[1],y=s[0],x=l[0];if(y>=x||f>=g)throw new Q;if(g-f!==x-y&&(x=y+(g-f),x>=i.getWidth()))throw new Q;const T=Math.round((x-y+1)/u),b=Math.round((g-f+1)/u);if(T<=0||b<=0)throw new Q;if(b!==T)throw new Q;const O=Math.floor(u/2);f+=O,y+=O;const P=y+Math.floor((T-1)*u)-x;if(P>0){if(P>O)throw new Q;y-=P}const H=f+Math.floor((b-1)*u)-g;if(H>0){if(H>O)throw new Q;f-=H}const W=new Ue(T,b);for(let Z=0;Z<b;Z++){const re=f+Math.floor(Z*u);for(let fe=0;fe<T;fe++)i.get(y+Math.floor(fe*u),re)&&W.set(fe,Z)}return W}static moduleSize(i,s){const l=s.getHeight(),u=s.getWidth();let f=i[0],g=i[1],y=!0,x=0;for(;f<u&&g<l;){if(y!==s.get(f,g)){if(++x===5)break;y=!y}f++,g++}if(f===u||g===l)throw new Q;return(f-i[0])/7}}Bi.NO_POINTS=new Array;class We{PDF417Common(){}static getBitCountSum(i){return Ze.sum(i)}static toIntArray(i){if(i==null||!i.length)return We.EMPTY_INT_ARRAY;const s=new Int32Array(i.length);let l=0;for(const u of i)s[l++]=u;return s}static getCodeword(i){const s=Pe.binarySearch(We.SYMBOL_TABLE,i&262143);return s<0?-1:(We.CODEWORD_TABLE[s]-1)%We.NUMBER_OF_CODEWORDS}}We.NUMBER_OF_CODEWORDS=929,We.MAX_CODEWORDS_IN_BARCODE=We.NUMBER_OF_CODEWORDS-1,We.MIN_ROWS_IN_BARCODE=3,We.MAX_ROWS_IN_BARCODE=90,We.MODULES_IN_CODEWORD=17,We.MODULES_IN_STOP_PATTERN=18,We.BARS_IN_MODULE=8,We.EMPTY_INT_ARRAY=new Int32Array([]),We.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),We.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ds{constructor(i,s){this.bits=i,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Je{static detectMultiple(i,s,l){let u=i.getBlackMatrix(),f=Je.detect(l,u);return f.length||(u=u.clone(),u.rotate180(),f=Je.detect(l,u)),new ds(u,f)}static detect(i,s){const l=new Array;let u=0,f=0,g=!1;for(;u<s.getHeight();){const y=Je.findVertices(s,u,f);if(y[0]==null&&y[3]==null){if(!g)break;g=!1,f=0;for(const x of l)x[1]!=null&&(u=Math.trunc(Math.max(u,x[1].getY()))),x[3]!=null&&(u=Math.max(u,Math.trunc(x[3].getY())));u+=Je.ROW_STEP;continue}if(g=!0,l.push(y),!i)break;y[2]!=null?(f=Math.trunc(y[2].getX()),u=Math.trunc(y[2].getY())):(f=Math.trunc(y[4].getX()),u=Math.trunc(y[4].getY()))}return l}static findVertices(i,s,l){const u=i.getHeight(),f=i.getWidth(),g=new Array(8);return Je.copyToResult(g,Je.findRowsWithPattern(i,u,f,s,l,Je.START_PATTERN),Je.INDEXES_START_PATTERN),g[4]!=null&&(l=Math.trunc(g[4].getX()),s=Math.trunc(g[4].getY())),Je.copyToResult(g,Je.findRowsWithPattern(i,u,f,s,l,Je.STOP_PATTERN),Je.INDEXES_STOP_PATTERN),g}static copyToResult(i,s,l){for(let u=0;u<l.length;u++)i[l[u]]=s[u]}static findRowsWithPattern(i,s,l,u,f,g){const y=new Array(4);let x=!1;const T=new Int32Array(g.length);for(;u<s;u+=Je.ROW_STEP){let O=Je.findGuardPattern(i,f,u,l,!1,g,T);if(O!=null){for(;u>0;){const P=Je.findGuardPattern(i,f,--u,l,!1,g,T);if(P!=null)O=P;else{u++;break}}y[0]=new Fe(O[0],u),y[1]=new Fe(O[1],u),x=!0;break}}let b=u+1;if(x){let O=0,P=Int32Array.from([Math.trunc(y[0].getX()),Math.trunc(y[1].getX())]);for(;b<s;b++){const H=Je.findGuardPattern(i,P[0],b,l,!1,g,T);if(H!=null&&Math.abs(P[0]-H[0])<Je.MAX_PATTERN_DRIFT&&Math.abs(P[1]-H[1])<Je.MAX_PATTERN_DRIFT)P=H,O=0;else{if(O>Je.SKIPPED_ROW_COUNT_MAX)break;O++}}b-=O+1,y[2]=new Fe(P[0],b),y[3]=new Fe(P[1],b)}return b-u<Je.BARCODE_MIN_HEIGHT&&Pe.fill(y,null),y}static findGuardPattern(i,s,l,u,f,g,y){Pe.fillWithin(y,0,y.length,0);let x=s,T=0;for(;i.get(x,l)&&x>0&&T++<Je.MAX_PIXEL_DRIFT;)x--;let b=x,O=0,P=g.length;for(let H=f;b<u;b++)if(i.get(b,l)!==H)y[O]++;else{if(O===P-1){if(Je.patternMatchVariance(y,g,Je.MAX_INDIVIDUAL_VARIANCE)<Je.MAX_AVG_VARIANCE)return new Int32Array([x,b]);x+=y[0]+y[1],pe.arraycopy(y,2,y,0,O-1),y[O-1]=0,y[O]=0,O--}else O++;y[O]=1,H=!H}return O===P-1&&Je.patternMatchVariance(y,g,Je.MAX_INDIVIDUAL_VARIANCE)<Je.MAX_AVG_VARIANCE?new Int32Array([x,b-1]):null}static patternMatchVariance(i,s,l){let u=i.length,f=0,g=0;for(let T=0;T<u;T++)f+=i[T],g+=s[T];if(f<g)return 1/0;let y=f/g;l*=y;let x=0;for(let T=0;T<u;T++){let b=i[T],O=s[T]*y,P=b>O?b-O:O-b;if(P>l)return 1/0;x+=P}return x/f}}Je.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Je.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Je.MAX_AVG_VARIANCE=.42,Je.MAX_INDIVIDUAL_VARIANCE=.8,Je.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Je.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Je.MAX_PIXEL_DRIFT=3,Je.MAX_PATTERN_DRIFT=5,Je.SKIPPED_ROW_COUNT_MAX=25,Je.ROW_STEP=5,Je.BARCODE_MIN_HEIGHT=10;class $t{constructor(i,s){if(s.length===0)throw new M;this.field=i;let l=s.length;if(l>1&&s[0]===0){let u=1;for(;u<l&&s[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),pe.arraycopy(s,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let u=0;for(let f of this.coefficients)u=this.field.add(u,f);return u}let s=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)s=this.field.add(this.field.multiply(i,s),this.coefficients[u]);return s}add(i){if(!this.field.equals(i.field))throw new M("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let s=this.coefficients,l=i.coefficients;if(s.length>l.length){let g=s;s=l,l=g}let u=new Int32Array(l.length),f=l.length-s.length;pe.arraycopy(l,0,u,0,f);for(let g=f;g<l.length;g++)u[g]=this.field.add(s[g-f],l[g]);return new $t(this.field,u)}subtract(i){if(!this.field.equals(i.field))throw new M("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof $t?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new M("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new $t(this.field,new Int32Array([0]));let s=this.coefficients,l=s.length,u=i.coefficients,f=u.length,g=new Int32Array(l+f-1);for(let y=0;y<l;y++){let x=s[y];for(let T=0;T<f;T++)g[y+T]=this.field.add(g[y+T],this.field.multiply(x,u[T]))}return new $t(this.field,g)}negative(){let i=this.coefficients.length,s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=this.field.subtract(0,this.coefficients[l]);return new $t(this.field,s)}multiplyScalar(i){if(i===0)return new $t(this.field,new Int32Array([0]));if(i===1)return this;let s=this.coefficients.length,l=new Int32Array(s);for(let u=0;u<s;u++)l[u]=this.field.multiply(this.coefficients[u],i);return new $t(this.field,l)}multiplyByMonomial(i,s){if(i<0)throw new M;if(s===0)return new $t(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+i);for(let f=0;f<l;f++)u[f]=this.field.multiply(this.coefficients[f],s);return new $t(this.field,u)}toString(){let i=new F;for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);l!==0&&(l<0?(i.append(" - "),l=-l):i.length()>0&&i.append(" + "),(s===0||l!==1)&&i.append(l),s!==0&&(s===1?i.append("x"):(i.append("x^"),i.append(s))))}return i.toString()}}class Ds{add(i,s){return(i+s)%this.modulus}subtract(i,s){return(this.modulus+i-s)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new M;return this.logTable[i]}inverse(i){if(i===0)throw new Qr;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,s){return i===0||s===0?0:this.expTable[(this.logTable[i]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class Yt extends Ds{constructor(i,s){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let l=1;for(let u=0;u<i;u++)this.expTable[u]=l,l=l*s%i;for(let u=0;u<i-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new $t(this,new Int32Array([0])),this.one=new $t(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,s){if(i<0)throw new M;if(s===0)return this.zero;let l=new Int32Array(i+1);return l[0]=s,new $t(this,l)}}Yt.PDF417_GF=new Yt(We.NUMBER_OF_CODEWORDS,3);class pr{constructor(){this.field=Yt.PDF417_GF}decode(i,s,l){let u=new $t(this.field,i),f=new Int32Array(s),g=!1;for(let W=s;W>0;W--){let Z=u.evaluateAt(this.field.exp(W));f[s-W]=Z,Z!==0&&(g=!0)}if(!g)return 0;let y=this.field.getOne();if(l!=null)for(const W of l){let Z=this.field.exp(i.length-1-W),re=new $t(this.field,new Int32Array([this.field.subtract(0,Z),1]));y=y.multiply(re)}let x=new $t(this.field,f),T=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),x,s),b=T[0],O=T[1],P=this.findErrorLocations(b),H=this.findErrorMagnitudes(O,b,P);for(let W=0;W<P.length;W++){let Z=i.length-1-this.field.log(P[W]);if(Z<0)throw te.getChecksumInstance();i[Z]=this.field.subtract(i[Z],H[W])}return P.length}runEuclideanAlgorithm(i,s,l){if(i.getDegree()<s.getDegree()){let P=i;i=s,s=P}let u=i,f=s,g=this.field.getZero(),y=this.field.getOne();for(;f.getDegree()>=Math.round(l/2);){let P=u,H=g;if(u=f,g=y,u.isZero())throw te.getChecksumInstance();f=P;let W=this.field.getZero(),Z=u.getCoefficient(u.getDegree()),re=this.field.inverse(Z);for(;f.getDegree()>=u.getDegree()&&!f.isZero();){let fe=f.getDegree()-u.getDegree(),Re=this.field.multiply(f.getCoefficient(f.getDegree()),re);W=W.add(this.field.buildMonomial(fe,Re)),f=f.subtract(u.multiplyByMonomial(fe,Re))}y=W.multiply(g).subtract(H).negative()}let x=y.getCoefficient(0);if(x===0)throw te.getChecksumInstance();let T=this.field.inverse(x),b=y.multiply(T),O=f.multiply(T);return[b,O]}findErrorLocations(i){let s=i.getDegree(),l=new Int32Array(s),u=0;for(let f=1;f<this.field.getSize()&&u<s;f++)i.evaluateAt(f)===0&&(l[u]=this.field.inverse(f),u++);if(u!==s)throw te.getChecksumInstance();return l}findErrorMagnitudes(i,s,l){let u=s.getDegree(),f=new Int32Array(u);for(let T=1;T<=u;T++)f[u-T]=this.field.multiply(T,s.getCoefficient(T));let g=new $t(this.field,f),y=l.length,x=new Int32Array(y);for(let T=0;T<y;T++){let b=this.field.inverse(l[T]),O=this.field.subtract(0,i.evaluateAt(b)),P=this.field.inverse(g.evaluateAt(b));x[T]=this.field.multiply(O,P)}return x}}class yr{constructor(i,s,l,u,f){i instanceof yr?this.constructor_2(i):this.constructor_1(i,s,l,u,f)}constructor_1(i,s,l,u,f){const g=s==null||l==null,y=u==null||f==null;if(g&&y)throw new Q;g?(s=new Fe(0,u.getY()),l=new Fe(0,f.getY())):y&&(u=new Fe(i.getWidth()-1,s.getY()),f=new Fe(i.getWidth()-1,l.getY())),this.image=i,this.topLeft=s,this.bottomLeft=l,this.topRight=u,this.bottomRight=f,this.minX=Math.trunc(Math.min(s.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),f.getX())),this.minY=Math.trunc(Math.min(s.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),f.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,s){return i==null?s:s==null?i:new yr(i.image,i.topLeft,i.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(i,s,l){let u=this.topLeft,f=this.bottomLeft,g=this.topRight,y=this.bottomRight;if(i>0){let x=l?this.topLeft:this.topRight,T=Math.trunc(x.getY()-i);T<0&&(T=0);let b=new Fe(x.getX(),T);l?u=b:g=b}if(s>0){let x=l?this.bottomLeft:this.bottomRight,T=Math.trunc(x.getY()+s);T>=this.image.getHeight()&&(T=this.image.getHeight()-1);let b=new Fe(x.getX(),T);l?f=b:y=b}return new yr(this.image,u,f,g,y)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ms{constructor(i,s,l,u){this.columnCount=i,this.errorCorrectionLevel=u,this.rowCountUpperPart=s,this.rowCountLowerPart=l,this.rowCount=s+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class $r{constructor(){this.buffer=""}static form(i,s){let l=-1;function u(g,y,x,T,b,O){if(g==="%%")return"%";if(s[++l]===void 0)return;g=T?parseInt(T.substr(1)):void 0;let P=b?parseInt(b.substr(1)):void 0,H;switch(O){case"s":H=s[l];break;case"c":H=s[l][0];break;case"f":H=parseFloat(s[l]).toFixed(g);break;case"p":H=parseFloat(s[l]).toPrecision(g);break;case"e":H=parseFloat(s[l]).toExponential(g);break;case"x":H=parseInt(s[l]).toString(P||16);break;case"d":H=parseFloat(parseInt(s[l],P||10).toPrecision(g)).toFixed(0);break}H=typeof H=="object"?JSON.stringify(H):(+H).toString(P);let W=parseInt(x),Z=x&&x[0]+""=="0"?"0":" ";for(;H.length<W;)H=y!==void 0?H+Z:Z+H;return H}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,u)}format(i,...s){this.buffer+=$r.form(i,s)}toString(){return this.buffer}}class _r{constructor(i){this.boundingBox=new yr(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let s=this.getCodeword(i);if(s!=null)return s;for(let l=1;l<_r.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(i)-l;if(u>=0&&(s=this.codewords[u],s!=null)||(u=this.imageRowToCodewordIndex(i)+l,u<this.codewords.length&&(s=this.codewords[u],s!=null)))return s}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,s){this.codewords[this.imageRowToCodewordIndex(i)]=s}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new $r;let s=0;for(const l of this.codewords){if(l==null){i.format("%3d:    |   %n",s++);continue}i.format("%3d: %3d|%3d%n",s++,l.getRowNumber(),l.getValue())}return i.toString()}}_r.MAX_NEARBY_DISTANCE=5;class Gi{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let s=this.values.get(i);s==null&&(s=0),s++,this.values.set(i,s)}getValue(){let i=-1,s=new Array;for(const[l,u]of this.values.entries()){const f={getKey:()=>l,getValue:()=>u};f.getValue()>i?(i=f.getValue(),s=[],s.push(f.getKey())):f.getValue()===i&&s.push(f.getKey())}return We.toIntArray(s)}getConfidence(i){return this.values.get(i)}}class $i extends _r{constructor(i,s){super(i),this._isLeft=s}setRowNumbers(){for(let i of this.getCodewords())i?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,i);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.imageRowToCodewordIndex(Math.trunc(f.getY())),x=-1,T=1,b=0;for(let O=g;O<y;O++){if(s[O]==null)continue;let P=s[O],H=P.getRowNumber()-x;if(H===0)b++;else if(H===1)T=Math.max(T,b),b=1,x=P.getRowNumber();else if(H<0||P.getRowNumber()>=i.getRowCount()||H>O)s[O]=null;else{let W;T>2?W=(T-2)*H:W=H;let Z=W>=O;for(let re=1;re<=W&&!Z;re++)Z=s[O-re]!=null;Z?s[O]=null:(x=P.getRowNumber(),b=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let s=new Int32Array(i.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=s.length)continue;s[u]++}return s}adjustIncompleteIndicatorColumnRowNumbers(i){let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),u=this._isLeft?s.getBottomLeft():s.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=this.getCodewords(),x=-1;for(let T=f;T<g;T++){if(y[T]==null)continue;let b=y[T];b.setRowNumberAsRowIndicatorColumn();let O=b.getRowNumber()-x;O===0||(O===1?x=b.getRowNumber():b.getRowNumber()>=i.getRowCount()?y[T]=null:x=b.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),s=new Gi,l=new Gi,u=new Gi,f=new Gi;for(let y of i){if(y==null)continue;y.setRowNumberAsRowIndicatorColumn();let x=y.getValue()%30,T=y.getRowNumber();switch(this._isLeft||(T+=2),T%3){case 0:l.setValue(x*3+1);break;case 1:f.setValue(x/3),u.setValue(x%3);break;case 2:s.setValue(x+1);break}}if(s.getValue().length===0||l.getValue().length===0||u.getValue().length===0||f.getValue().length===0||s.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<We.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>We.MAX_ROWS_IN_BARCODE)return null;let g=new Ms(s.getValue()[0],l.getValue()[0],u.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(i,g),g}removeIncorrectCodewords(i,s){for(let l=0;l<i.length;l++){let u=i[l];if(i[l]==null)continue;let f=u.getValue()%30,g=u.getRowNumber();if(g>s.getRowCount()){i[l]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:f*3+1!==s.getRowCountUpperPart()&&(i[l]=null);break;case 1:(Math.trunc(f/3)!==s.getErrorCorrectionLevel()||f%3!==s.getRowCountLowerPart())&&(i[l]=null);break;case 2:f+1!==s.getColumnCount()&&(i[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Mn{constructor(i,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=We.MAX_CODEWORDS_IN_BARCODE,s;do s=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let l=this.detectionResultColumns[s].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(s,u,l))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++)if(i[l]!=null&&s[l]!=null&&i[l].getRowNumber()===s[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let f=this.detectionResultColumns[u].getCodewords()[l];f!=null&&(f.setRowNumber(i[l].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),f=0;for(let g=this.barcodeColumnCount+1;g>0&&f<this.ADJUST_ROW_NUMBER_SKIP;g--){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(f=Mn.adjustRowNumberIfValid(u,f,y),y.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,s=this.detectionResultColumns[0].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let u=s[l].getRowNumber(),f=0;for(let g=1;g<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;g++){let y=this.detectionResultColumns[g].getCodewords()[l];y!=null&&(f=Mn.adjustRowNumberIfValid(u,f,y),y.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,s,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(i)?(l.setRowNumber(i),s=0):++s),s}adjustRowNumbers(i,s,l){if(!this.detectionResultColumns[i-1])return;let u=l[s],f=this.detectionResultColumns[i-1].getCodewords(),g=f;this.detectionResultColumns[i+1]!=null&&(g=this.detectionResultColumns[i+1].getCodewords());let y=new Array(14);y[2]=f[s],y[3]=g[s],s>0&&(y[0]=l[s-1],y[4]=f[s-1],y[5]=g[s-1]),s>1&&(y[8]=l[s-2],y[10]=f[s-2],y[11]=g[s-2]),s<l.length-1&&(y[1]=l[s+1],y[6]=f[s+1],y[7]=g[s+1]),s<l.length-2&&(y[9]=l[s+2],y[12]=f[s+2],y[13]=g[s+2]);for(let x of y)if(Mn.adjustRowNumber(u,x))return}static adjustRowNumber(i,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===i.getBucket()?(i.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,s){this.detectionResultColumns[i]=s}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new $r;for(let l=0;l<i.getCodewords().length;l++){s.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){s.format("    |   ");continue}let f=this.detectionResultColumns[u].getCodewords()[l];if(f==null){s.format("    |   ");continue}s.format(" %3d|%3d",f.getRowNumber(),f.getValue())}s.format("%n")}return s.toString()}}class qi{constructor(i,s,l,u){this.rowNumber=qi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(s),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==qi.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}qi.BARCODE_ROW_UNKNOWN=-1;class pn{static initialize(){for(let i=0;i<We.SYMBOL_TABLE.length;i++){let s=We.SYMBOL_TABLE[i],l=s&1;for(let u=0;u<We.BARS_IN_MODULE;u++){let f=0;for(;(s&1)===l;)f+=1,s>>=1;l=s&1,pn.RATIOS_TABLE[i]||(pn.RATIOS_TABLE[i]=new Array(We.BARS_IN_MODULE)),pn.RATIOS_TABLE[i][We.BARS_IN_MODULE-u-1]=Math.fround(f/We.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let s=pn.getDecodedCodewordValue(pn.sampleBitCounts(i));return s!==-1?s:pn.getClosestDecodedValue(i)}static sampleBitCounts(i){let s=Ze.sum(i),l=new Int32Array(We.BARS_IN_MODULE),u=0,f=0;for(let g=0;g<We.MODULES_IN_CODEWORD;g++){let y=s/(2*We.MODULES_IN_CODEWORD)+g*s/We.MODULES_IN_CODEWORD;f+i[u]<=y&&(f+=i[u],u++),l[u]++}return l}static getDecodedCodewordValue(i){let s=pn.getBitValue(i);return We.getCodeword(s)===-1?-1:s}static getBitValue(i){let s=0;for(let l=0;l<i.length;l++)for(let u=0;u<i[l];u++)s=s<<1|(l%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(i){let s=Ze.sum(i),l=new Array(We.BARS_IN_MODULE);if(s>1)for(let g=0;g<l.length;g++)l[g]=Math.fround(i[g]/s);let u=An.MAX_VALUE,f=-1;this.bSymbolTableReady||pn.initialize();for(let g=0;g<pn.RATIOS_TABLE.length;g++){let y=0,x=pn.RATIOS_TABLE[g];for(let T=0;T<We.BARS_IN_MODULE;T++){let b=Math.fround(x[T]-l[T]);if(y+=Math.fround(b*b),y>=u)break}y<u&&(u=y,f=We.SYMBOL_TABLE[g])}return f}}pn.bSymbolTableReady=!1,pn.RATIOS_TABLE=new Array(We.SYMBOL_TABLE.length).map(N=>new Array(We.BARS_IN_MODULE));class es{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class pa{static parseLong(i,s=void 0){return parseInt(i,s)}}class ts extends w{}ts.kind="NullPointerException";class ya{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,s,l){if(i==null)throw new ts;if(s<0||s>i.length||l<0||s+l>i.length||s+l<0)throw new ve;if(l===0)return;for(let u=0;u<l;u++)this.write(i[s+u])}flush(){}close(){}}class Pr extends w{}class _a extends ya{constructor(i=32){if(super(),this.count=0,i<0)throw new M("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let l=this.buf.length<<1;if(l-i<0&&(l=i),l<0){if(i<0)throw new Pr;l=Ce.MAX_VALUE}this.buf=Pe.copyOfUint8Array(this.buf,l)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,s,l){if(s<0||s>i.length||l<0||s+l-i.length>0)throw new ve;this.ensureCapacity(this.count+l),pe.arraycopy(i,s,this.buf,this.count,l),this.count+=l}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Pe.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Ft;(function(N){N[N.ALPHA=0]="ALPHA",N[N.LOWER=1]="LOWER",N[N.MIXED=2]="MIXED",N[N.PUNCT=3]="PUNCT",N[N.ALPHA_SHIFT=4]="ALPHA_SHIFT",N[N.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ft||(Ft={}));function gs(){if(typeof window<"u")return window.BigInt||null;if(typeof Sh<"u")return Sh.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ps;function Er(N){if(typeof Ps>"u"&&(Ps=gs()),Ps===null)throw new Error("BigInt is not supported!");return Ps(N)}function Ls(){let N=[];N[0]=Er(1);let i=Er(900);N[1]=i;for(let s=2;s<16;s++)N[s]=N[s-1]*i;return N}class he{static decode(i,s){let l=new F(""),u=B.ISO8859_1;l.enableDecoding(u);let f=1,g=i[f++],y=new es;for(;f<i[0];){switch(g){case he.TEXT_COMPACTION_MODE_LATCH:f=he.textCompaction(i,f,l);break;case he.BYTE_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:f=he.byteCompaction(g,i,u,f,l);break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(i[f++]);break;case he.NUMERIC_COMPACTION_MODE_LATCH:f=he.numericCompaction(i,f,l);break;case he.ECI_CHARSET:B.getCharacterSetECIByValue(i[f++]);break;case he.ECI_GENERAL_PURPOSE:f+=2;break;case he.ECI_USER_DEFINED:f++;break;case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=he.decodeMacroBlock(i,f,y);break;case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:throw new V;default:f--,f=he.textCompaction(i,f,l);break}if(f<i.length)g=i[f++];else throw V.getFormatInstance()}if(l.length()===0)throw V.getFormatInstance();let x=new Zt(null,l.toString(),null,s);return x.setOther(y),x}static decodeMacroBlock(i,s,l){if(s+he.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw V.getFormatInstance();let u=new Int32Array(he.NUMBER_OF_SEQUENCE_CODEWORDS);for(let y=0;y<he.NUMBER_OF_SEQUENCE_CODEWORDS;y++,s++)u[y]=i[s];l.setSegmentIndex(Ce.parseInt(he.decodeBase900toBase10(u,he.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new F;s=he.textCompaction(i,s,f),l.setFileId(f.toString());let g=-1;for(i[s]===he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=s+1);s<i[0];)switch(i[s]){case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,i[s]){case he.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let y=new F;s=he.textCompaction(i,s+1,y),l.setFileName(y.toString());break;case he.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new F;s=he.textCompaction(i,s+1,x),l.setSender(x.toString());break;case he.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let T=new F;s=he.textCompaction(i,s+1,T),l.setAddressee(T.toString());break;case he.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let b=new F;s=he.numericCompaction(i,s+1,b),l.setSegmentCount(Ce.parseInt(b.toString()));break;case he.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let O=new F;s=he.numericCompaction(i,s+1,O),l.setTimestamp(pa.parseLong(O.toString()));break;case he.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let P=new F;s=he.numericCompaction(i,s+1,P),l.setChecksum(Ce.parseInt(P.toString()));break;case he.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let H=new F;s=he.numericCompaction(i,s+1,H),l.setFileSize(pa.parseLong(H.toString()));break;default:throw V.getFormatInstance()}break;case he.MACRO_PDF417_TERMINATOR:s++,l.setLastSegment(!0);break;default:throw V.getFormatInstance()}if(g!==-1){let y=s-g;l.isLastSegment()&&y--,l.setOptionalData(Pe.copyOfRange(i,g,g+y))}return s}static textCompaction(i,s,l){let u=new Int32Array((i[0]-s)*2),f=new Int32Array((i[0]-s)*2),g=0,y=!1;for(;s<i[0]&&!y;){let x=i[s++];if(x<he.TEXT_COMPACTION_MODE_LATCH)u[g]=x/30,u[g+1]=x%30,g+=2;else switch(x){case he.TEXT_COMPACTION_MODE_LATCH:u[g++]=he.TEXT_COMPACTION_MODE_LATCH;break;case he.BYTE_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:case he.NUMERIC_COMPACTION_MODE_LATCH:case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:s--,y=!0;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[g]=he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=i[s++],f[g]=x,g++;break}}return he.decodeTextCompaction(u,f,g,l),s}static decodeTextCompaction(i,s,l,u){let f=Ft.ALPHA,g=Ft.ALPHA,y=0;for(;y<l;){let x=i[y],T="";switch(f){case Ft.ALPHA:if(x<26)T=String.fromCharCode(65+x);else switch(x){case 26:T=" ";break;case he.LL:f=Ft.LOWER;break;case he.ML:f=Ft.MIXED;break;case he.PS:g=f,f=Ft.PUNCT_SHIFT;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case he.TEXT_COMPACTION_MODE_LATCH:f=Ft.ALPHA;break}break;case Ft.LOWER:if(x<26)T=String.fromCharCode(97+x);else switch(x){case 26:T=" ";break;case he.AS:g=f,f=Ft.ALPHA_SHIFT;break;case he.ML:f=Ft.MIXED;break;case he.PS:g=f,f=Ft.PUNCT_SHIFT;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case he.TEXT_COMPACTION_MODE_LATCH:f=Ft.ALPHA;break}break;case Ft.MIXED:if(x<he.PL)T=he.MIXED_CHARS[x];else switch(x){case he.PL:f=Ft.PUNCT;break;case 26:T=" ";break;case he.LL:f=Ft.LOWER;break;case he.AL:f=Ft.ALPHA;break;case he.PS:g=f,f=Ft.PUNCT_SHIFT;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case he.TEXT_COMPACTION_MODE_LATCH:f=Ft.ALPHA;break}break;case Ft.PUNCT:if(x<he.PAL)T=he.PUNCT_CHARS[x];else switch(x){case he.PAL:f=Ft.ALPHA;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case he.TEXT_COMPACTION_MODE_LATCH:f=Ft.ALPHA;break}break;case Ft.ALPHA_SHIFT:if(f=g,x<26)T=String.fromCharCode(65+x);else switch(x){case 26:T=" ";break;case he.TEXT_COMPACTION_MODE_LATCH:f=Ft.ALPHA;break}break;case Ft.PUNCT_SHIFT:if(f=g,x<he.PAL)T=he.PUNCT_CHARS[x];else switch(x){case he.PAL:f=Ft.ALPHA;break;case he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[y]);break;case he.TEXT_COMPACTION_MODE_LATCH:f=Ft.ALPHA;break}break}T!==""&&u.append(T),y++}}static byteCompaction(i,s,l,u,f){let g=new _a,y=0,x=0,T=!1;switch(i){case he.BYTE_COMPACTION_MODE_LATCH:let b=new Int32Array(6),O=s[u++];for(;u<s[0]&&!T;)switch(b[y++]=O,x=900*x+O,O=s[u++],O){case he.TEXT_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH:case he.NUMERIC_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:u--,T=!0;break;default:if(y%5===0&&y>0){for(let P=0;P<6;++P)g.write(Number(Er(x)>>Er(8*(5-P))));x=0,y=0}break}u===s[0]&&O<he.TEXT_COMPACTION_MODE_LATCH&&(b[y++]=O);for(let P=0;P<y;P++)g.write(b[P]);break;case he.BYTE_COMPACTION_MODE_LATCH_6:for(;u<s[0]&&!T;){let P=s[u++];if(P<he.TEXT_COMPACTION_MODE_LATCH)y++,x=900*x+P;else switch(P){case he.TEXT_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH:case he.NUMERIC_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:u--,T=!0;break}if(y%5===0&&y>0){for(let H=0;H<6;++H)g.write(Number(Er(x)>>Er(8*(5-H))));x=0,y=0}}break}return f.append(G.decode(g.toByteArray(),l)),u}static numericCompaction(i,s,l){let u=0,f=!1,g=new Int32Array(he.MAX_NUMERIC_CODEWORDS);for(;s<i[0]&&!f;){let y=i[s++];if(s===i[0]&&(f=!0),y<he.TEXT_COMPACTION_MODE_LATCH)g[u]=y,u++;else switch(y){case he.TEXT_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH:case he.BYTE_COMPACTION_MODE_LATCH_6:case he.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case he.MACRO_PDF417_TERMINATOR:s--,f=!0;break}(u%he.MAX_NUMERIC_CODEWORDS===0||y===he.NUMERIC_COMPACTION_MODE_LATCH||f)&&u>0&&(l.append(he.decodeBase900toBase10(g,u)),u=0)}return s}static decodeBase900toBase10(i,s){let l=Er(0);for(let f=0;f<s;f++)l+=he.EXP900[s-f-1]*Er(i[f]);let u=l.toString();if(u.charAt(0)!=="1")throw new V;return u.substring(1)}}he.TEXT_COMPACTION_MODE_LATCH=900,he.BYTE_COMPACTION_MODE_LATCH=901,he.NUMERIC_COMPACTION_MODE_LATCH=902,he.BYTE_COMPACTION_MODE_LATCH_6=924,he.ECI_USER_DEFINED=925,he.ECI_GENERAL_PURPOSE=926,he.ECI_CHARSET=927,he.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,he.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,he.MACRO_PDF417_TERMINATOR=922,he.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,he.MAX_NUMERIC_CODEWORDS=15,he.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,he.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,he.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,he.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,he.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,he.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,he.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,he.PL=25,he.LL=27,he.AS=27,he.ML=28,he.AL=28,he.PS=29,he.PAL=29,he.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,he.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",he.EXP900=gs()?Ls():[],he.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ht{constructor(){}static decode(i,s,l,u,f,g,y){let x=new yr(i,s,l,u,f),T=null,b=null,O;for(let W=!0;;W=!1){if(s!=null&&(T=ht.getRowIndicatorColumn(i,x,s,!0,g,y)),u!=null&&(b=ht.getRowIndicatorColumn(i,x,u,!1,g,y)),O=ht.merge(T,b),O==null)throw Q.getNotFoundInstance();let Z=O.getBoundingBox();if(W&&Z!=null&&(Z.getMinY()<x.getMinY()||Z.getMaxY()>x.getMaxY()))x=Z;else break}O.setBoundingBox(x);let P=O.getBarcodeColumnCount()+1;O.setDetectionResultColumn(0,T),O.setDetectionResultColumn(P,b);let H=T!=null;for(let W=1;W<=P;W++){let Z=H?W:P-W;if(O.getDetectionResultColumn(Z)!==void 0)continue;let re;Z===0||Z===P?re=new $i(x,Z===0):re=new _r(x),O.setDetectionResultColumn(Z,re);let fe=-1,Re=fe;for(let be=x.getMinY();be<=x.getMaxY();be++){if(fe=ht.getStartColumn(O,Z,be,H),fe<0||fe>x.getMaxX()){if(Re===-1)continue;fe=Re}let Te=ht.detectCodeword(i,x.getMinX(),x.getMaxX(),H,fe,be,g,y);Te!=null&&(re.setCodeword(be,Te),Re=fe,g=Math.min(g,Te.getWidth()),y=Math.max(y,Te.getWidth()))}}return ht.createDecoderResult(O)}static merge(i,s){if(i==null&&s==null)return null;let l=ht.getBarcodeMetadata(i,s);if(l==null)return null;let u=yr.merge(ht.adjustBoundingBox(i),ht.adjustBoundingBox(s));return new Mn(l,u)}static adjustBoundingBox(i){if(i==null)return null;let s=i.getRowHeights();if(s==null)return null;let l=ht.getMax(s),u=0;for(let y of s)if(u+=l-y,y>0)break;let f=i.getCodewords();for(let y=0;u>0&&f[y]==null;y++)u--;let g=0;for(let y=s.length-1;y>=0&&(g+=l-s[y],!(s[y]>0));y--);for(let y=f.length-1;g>0&&f[y]==null;y--)g--;return i.getBoundingBox().addMissingRows(u,g,i.isLeft())}static getMax(i){let s=-1;for(let l of i)s=Math.max(s,l);return s}static getBarcodeMetadata(i,s){let l;if(i==null||(l=i.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let u;return s==null||(u=s.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(i,s,l,u,f,g){let y=new $i(s,u);for(let x=0;x<2;x++){let T=x===0?1:-1,b=Math.trunc(Math.trunc(l.getX()));for(let O=Math.trunc(Math.trunc(l.getY()));O<=s.getMaxY()&&O>=s.getMinY();O+=T){let P=ht.detectCodeword(i,0,i.getWidth(),u,b,O,f,g);P!=null&&(y.setCodeword(O,P),u?b=P.getStartX():b=P.getEndX())}}return y}static adjustCodewordCount(i,s){let l=s[0][1],u=l.getValue(),f=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-ht.getNumberOfECCodeWords(i.getBarcodeECLevel());if(u.length===0){if(f<1||f>We.MAX_CODEWORDS_IN_BARCODE)throw Q.getNotFoundInstance();l.setValue(f)}else u[0]!==f&&l.setValue(f)}static createDecoderResult(i){let s=ht.createBarcodeMatrix(i);ht.adjustCodewordCount(i,s);let l=new Array,u=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),f=[],g=new Array;for(let x=0;x<i.getBarcodeRowCount();x++)for(let T=0;T<i.getBarcodeColumnCount();T++){let b=s[x][T+1].getValue(),O=x*i.getBarcodeColumnCount()+T;b.length===0?l.push(O):b.length===1?u[O]=b[0]:(g.push(O),f.push(b))}let y=new Array(f.length);for(let x=0;x<y.length;x++)y[x]=f[x];return ht.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),u,We.toIntArray(l),We.toIntArray(g),y)}static createDecoderResultFromAmbiguousValues(i,s,l,u,f){let g=new Int32Array(u.length),y=100;for(;y-- >0;){for(let x=0;x<g.length;x++)s[u[x]]=f[x][g[x]];try{return ht.decodeCodewords(s,i,l)}catch(x){if(!(x instanceof te))throw x}if(g.length===0)throw te.getChecksumInstance();for(let x=0;x<g.length;x++)if(g[x]<f[x].length-1){g[x]++;break}else if(g[x]=0,x===g.length-1)throw te.getChecksumInstance()}throw te.getChecksumInstance()}static createBarcodeMatrix(i){let s=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let u=0;u<s.length;u++)for(let f=0;f<s[u].length;f++)s[u][f]=new Gi;let l=0;for(let u of i.getDetectionResultColumns()){if(u!=null){for(let f of u.getCodewords())if(f!=null){let g=f.getRowNumber();if(g>=0){if(g>=s.length)continue;s[g][l].setValue(f.getValue())}}}l++}return s}static isValidBarcodeColumn(i,s){return s>=0&&s<=i.getBarcodeColumnCount()+1}static getStartColumn(i,s,l,u){let f=u?1:-1,g=null;if(ht.isValidBarcodeColumn(i,s-f)&&(g=i.getDetectionResultColumn(s-f).getCodeword(l)),g!=null)return u?g.getEndX():g.getStartX();if(g=i.getDetectionResultColumn(s).getCodewordNearby(l),g!=null)return u?g.getStartX():g.getEndX();if(ht.isValidBarcodeColumn(i,s-f)&&(g=i.getDetectionResultColumn(s-f).getCodewordNearby(l)),g!=null)return u?g.getEndX():g.getStartX();let y=0;for(;ht.isValidBarcodeColumn(i,s-f);){s-=f;for(let x of i.getDetectionResultColumn(s).getCodewords())if(x!=null)return(u?x.getEndX():x.getStartX())+f*y*(x.getEndX()-x.getStartX());y++}return u?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,s,l,u,f,g,y,x){f=ht.adjustCodewordStartColumn(i,s,l,u,f,g);let T=ht.getModuleBitCount(i,s,l,u,f,g);if(T==null)return null;let b,O=Ze.sum(T);if(u)b=f+O;else{for(let W=0;W<T.length/2;W++){let Z=T[W];T[W]=T[T.length-1-W],T[T.length-1-W]=Z}b=f,f=b-O}if(!ht.checkCodewordSkew(O,y,x))return null;let P=pn.getDecodedValue(T),H=We.getCodeword(P);return H===-1?null:new qi(f,b,ht.getCodewordBucketNumber(P),H)}static getModuleBitCount(i,s,l,u,f,g){let y=f,x=new Int32Array(8),T=0,b=u?1:-1,O=u;for(;(u?y<l:y>=s)&&T<x.length;)i.get(y,g)===O?(x[T]++,y+=b):(T++,O=!O);return T===x.length||y===(u?l:s)&&T===x.length-1?x:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,s,l,u,f,g){let y=f,x=u?-1:1;for(let T=0;T<2;T++){for(;(u?y>=s:y<l)&&u===i.get(y,g);){if(Math.abs(f-y)>ht.CODEWORD_SKEW_SIZE)return f;y+=x}x=-x,u=!u}return y}static checkCodewordSkew(i,s,l){return s-ht.CODEWORD_SKEW_SIZE<=i&&i<=l+ht.CODEWORD_SKEW_SIZE}static decodeCodewords(i,s,l){if(i.length===0)throw V.getFormatInstance();let u=1<<s+1,f=ht.correctErrors(i,l,u);ht.verifyCodewordCount(i,u);let g=he.decode(i,""+s);return g.setErrorsCorrected(f),g.setErasures(l.length),g}static correctErrors(i,s,l){if(s!=null&&s.length>l/2+ht.MAX_ERRORS||l<0||l>ht.MAX_EC_CODEWORDS)throw te.getChecksumInstance();return ht.errorCorrection.decode(i,l,s)}static verifyCodewordCount(i,s){if(i.length<4)throw V.getFormatInstance();let l=i[0];if(l>i.length)throw V.getFormatInstance();if(l===0)if(s<i.length)i[0]=i.length-s;else throw V.getFormatInstance()}static getBitCountForCodeword(i){let s=new Int32Array(8),l=0,u=s.length-1;for(;!((i&1)!==l&&(l=i&1,u--,u<0));)s[u]++,i>>=1;return s}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return ht.getCodewordBucketNumber(ht.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let s=new $r;for(let l=0;l<i.length;l++){s.format("Row %2d: ",l);for(let u=0;u<i[l].length;u++){let f=i[l][u];f.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}s.format("%n")}return s.toString()}}ht.CODEWORD_SKEW_SIZE=2,ht.MAX_ERRORS=3,ht.MAX_EC_CODEWORDS=512,ht.errorCorrection=new pr;class vn{decode(i,s=null){let l=vn.decode(i,s,!1);if(l==null||l.length===0||l[0]==null)throw Q.getNotFoundInstance();return l[0]}decodeMultiple(i,s=null){try{return vn.decode(i,s,!0)}catch(l){throw l instanceof V||l instanceof te?Q.getNotFoundInstance():l}}static decode(i,s,l){const u=new Array,f=Je.detectMultiple(i,s,l);for(const g of f.getPoints()){const y=ht.decode(f.getBits(),g[4],g[5],g[6],g[7],vn.getMinCodewordWidth(g),vn.getMaxCodewordWidth(g)),x=new De(y.getText(),y.getRawBytes(),void 0,g,Oe.PDF_417);x.putMetadata(wt.ERROR_CORRECTION_LEVEL,y.getECLevel());const T=y.getOther();T!=null&&x.putMetadata(wt.PDF417_EXTRA_METADATA,T),u.push(x)}return u.map(g=>g)}static getMaxWidth(i,s){return i==null||s==null?0:Math.trunc(Math.abs(i.getX()-s.getX()))}static getMinWidth(i,s){return i==null||s==null?Ce.MAX_VALUE:Math.trunc(Math.abs(i.getX()-s.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(vn.getMaxWidth(i[0],i[4]),vn.getMaxWidth(i[6],i[2])*We.MODULES_IN_CODEWORD/We.MODULES_IN_STOP_PATTERN),Math.max(vn.getMaxWidth(i[1],i[5]),vn.getMaxWidth(i[7],i[3])*We.MODULES_IN_CODEWORD/We.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(vn.getMinWidth(i[0],i[4]),vn.getMinWidth(i[6],i[2])*We.MODULES_IN_CODEWORD/We.MODULES_IN_STOP_PATTERN),Math.min(vn.getMinWidth(i[1],i[5]),vn.getMinWidth(i[7],i[3])*We.MODULES_IN_CODEWORD/We.MODULES_IN_STOP_PATTERN)))}reset(){}}class ks extends w{}ks.kind="ReaderException";class wo{constructor(i,s){this.verbose=i===!0,s&&this.setHints(s)}decode(i,s){return s&&this.setHints(s),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const s=!o(i)&&i.get(ke.TRY_HARDER)===!0,l=o(i)?null:i.get(ke.POSSIBLE_FORMATS),u=new Array;if(!o(l)){const f=l.some(g=>g===Oe.UPC_A||g===Oe.UPC_E||g===Oe.EAN_13||g===Oe.EAN_8||g===Oe.CODABAR||g===Oe.CODE_39||g===Oe.CODE_93||g===Oe.CODE_128||g===Oe.ITF||g===Oe.RSS_14||g===Oe.RSS_EXPANDED);f&&!s&&u.push(new xi(i,this.verbose)),l.includes(Oe.QR_CODE)&&u.push(new Bi),l.includes(Oe.DATA_MATRIX)&&u.push(new Mi),l.includes(Oe.AZTEC)&&u.push(new Is),l.includes(Oe.PDF_417)&&u.push(new vn),f&&s&&u.push(new xi(i,this.verbose))}u.length===0&&(s||u.push(new xi(i,this.verbose)),u.push(new Bi),u.push(new Mi),u.push(new Is),u.push(new vn),s&&u.push(new xi(i,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new ks("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(i,this.hints)}catch(l){if(l instanceof ks)continue}throw new Q("No MultiFormat Readers were able to detect the code.")}}class Lr extends Ie{constructor(i=null,s=500){const l=new wo;l.setHints(i),super(l,s)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class tl extends Ie{constructor(i=500){super(new vn,i)}}class nl extends Ie{constructor(i=500){super(new Bi,i)}}var Ea;(function(N){N[N.ERROR_CORRECTION=0]="ERROR_CORRECTION",N[N.CHARACTER_SET=1]="CHARACTER_SET",N[N.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",N[N.MIN_SIZE=3]="MIN_SIZE",N[N.MAX_SIZE=4]="MAX_SIZE",N[N.MARGIN=5]="MARGIN",N[N.PDF417_COMPACT=6]="PDF417_COMPACT",N[N.PDF417_COMPACTION=7]="PDF417_COMPACTION",N[N.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",N[N.AZTEC_LAYERS=9]="AZTEC_LAYERS",N[N.QR_VERSION=10]="QR_VERSION"})(Ea||(Ea={}));var Sn=Ea;class kr{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Fn(i,Int32Array.from([1])))}buildGenerator(i){const s=this.cachedGenerators;if(i>=s.length){let l=s[s.length-1];const u=this.field;for(let f=s.length;f<=i;f++){const g=l.multiply(new Fn(u,Int32Array.from([1,u.exp(f-1+u.getGeneratorBase())])));s.push(g),l=g}}return s[i]}encode(i,s){if(s===0)throw new M("No error correction bytes");const l=i.length-s;if(l<=0)throw new M("No data bytes provided");const u=this.buildGenerator(s),f=new Int32Array(l);pe.arraycopy(i,0,f,0,l);let g=new Fn(this.field,f);g=g.multiplyByMonomial(s,1);const x=g.divide(u)[1].getCoefficients(),T=s-x.length;for(let b=0;b<T;b++)i[l+b]=0;pe.arraycopy(x,0,i,l+T,x.length)}}class vt{constructor(){}static applyMaskPenaltyRule1(i){return vt.applyMaskPenaltyRule1Internal(i,!0)+vt.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let s=0;const l=i.getArray(),u=i.getWidth(),f=i.getHeight();for(let g=0;g<f-1;g++){const y=l[g];for(let x=0;x<u-1;x++){const T=y[x];T===y[x+1]&&T===l[g+1][x]&&T===l[g+1][x+1]&&s++}}return vt.N2*s}static applyMaskPenaltyRule3(i){let s=0;const l=i.getArray(),u=i.getWidth(),f=i.getHeight();for(let g=0;g<f;g++)for(let y=0;y<u;y++){const x=l[g];y+6<u&&x[y]===1&&x[y+1]===0&&x[y+2]===1&&x[y+3]===1&&x[y+4]===1&&x[y+5]===0&&x[y+6]===1&&(vt.isWhiteHorizontal(x,y-4,y)||vt.isWhiteHorizontal(x,y+7,y+11))&&s++,g+6<f&&l[g][y]===1&&l[g+1][y]===0&&l[g+2][y]===1&&l[g+3][y]===1&&l[g+4][y]===1&&l[g+5][y]===0&&l[g+6][y]===1&&(vt.isWhiteVertical(l,y,g-4,g)||vt.isWhiteVertical(l,y,g+7,g+11))&&s++}return s*vt.N3}static isWhiteHorizontal(i,s,l){s=Math.max(s,0),l=Math.min(l,i.length);for(let u=s;u<l;u++)if(i[u]===1)return!1;return!0}static isWhiteVertical(i,s,l,u){l=Math.max(l,0),u=Math.min(u,i.length);for(let f=l;f<u;f++)if(i[f][s]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let s=0;const l=i.getArray(),u=i.getWidth(),f=i.getHeight();for(let x=0;x<f;x++){const T=l[x];for(let b=0;b<u;b++)T[b]===1&&s++}const g=i.getHeight()*i.getWidth();return Math.floor(Math.abs(s*2-g)*10/g)*vt.N4}static getDataMaskBit(i,s,l){let u,f;switch(i){case 0:u=l+s&1;break;case 1:u=l&1;break;case 2:u=s%3;break;case 3:u=(l+s)%3;break;case 4:u=Math.floor(l/2)+Math.floor(s/3)&1;break;case 5:f=l*s,u=(f&1)+f%3;break;case 6:f=l*s,u=(f&1)+f%3&1;break;case 7:f=l*s,u=f%3+(l+s&1)&1;break;default:throw new M("Invalid mask pattern: "+i)}return u===0}static applyMaskPenaltyRule1Internal(i,s){let l=0;const u=s?i.getHeight():i.getWidth(),f=s?i.getWidth():i.getHeight(),g=i.getArray();for(let y=0;y<u;y++){let x=0,T=-1;for(let b=0;b<f;b++){const O=s?g[y][b]:g[b][y];O===T?x++:(x>=5&&(l+=vt.N1+(x-5)),x=1,T=O)}x>=5&&(l+=vt.N1+(x-5))}return l}}vt.N1=3,vt.N2=3,vt.N3=40,vt.N4=10;class Bs{constructor(i,s){this.width=i,this.height=s;const l=new Array(s);for(let u=0;u!==s;u++)l[u]=new Uint8Array(i);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(i,s){return this.bytes[s][i]}getArray(){return this.bytes}setNumber(i,s,l){this.bytes[s][i]=l}setBoolean(i,s,l){this.bytes[s][i]=l?1:0}clear(i){for(const s of this.bytes)Pe.fill(s,i)}equals(i){if(!(i instanceof Bs))return!1;const s=i;if(this.width!==s.width||this.height!==s.height)return!1;for(let l=0,u=this.height;l<u;++l){const f=this.bytes[l],g=s.bytes[l];for(let y=0,x=this.width;y<x;++y)if(f[y]!==g[y])return!1}return!0}toString(){const i=new F;for(let s=0,l=this.height;s<l;++s){const u=this.bytes[s];for(let f=0,g=this.width;f<g;++f)switch(u[f]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class Br{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new F;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<Br.NUM_MASK_PATTERNS}}Br.NUM_MASK_PATTERNS=8;class It extends w{}It.kind="WriterException";class p{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,s,l,u,f){p.clearMatrix(f),p.embedBasicPatterns(l,f),p.embedTypeInfo(s,u,f),p.maybeEmbedVersionInfo(l,f),p.embedDataBits(i,u,f)}static embedBasicPatterns(i,s){p.embedPositionDetectionPatternsAndSeparators(s),p.embedDarkDotAtLeftBottomCorner(s),p.maybeEmbedPositionAdjustmentPatterns(i,s),p.embedTimingPatterns(s)}static embedTypeInfo(i,s,l){const u=new Be;p.makeTypeInfoBits(i,s,u);for(let f=0,g=u.getSize();f<g;++f){const y=u.get(u.getSize()-1-f),x=p.TYPE_INFO_COORDINATES[f],T=x[0],b=x[1];if(l.setBoolean(T,b,y),f<8){const O=l.getWidth()-f-1;l.setBoolean(O,8,y)}else{const P=l.getHeight()-7+(f-8);l.setBoolean(8,P,y)}}}static maybeEmbedVersionInfo(i,s){if(i.getVersionNumber()<7)return;const l=new Be;p.makeVersionInfoBits(i,l);let u=17;for(let f=0;f<6;++f)for(let g=0;g<3;++g){const y=l.get(u);u--,s.setBoolean(f,s.getHeight()-11+g,y),s.setBoolean(s.getHeight()-11+g,f,y)}}static embedDataBits(i,s,l){let u=0,f=-1,g=l.getWidth()-1,y=l.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);y>=0&&y<l.getHeight();){for(let x=0;x<2;++x){const T=g-x;if(!p.isEmpty(l.get(T,y)))continue;let b;u<i.getSize()?(b=i.get(u),++u):b=!1,s!==255&&vt.getDataMaskBit(s,T,y)&&(b=!b),l.setBoolean(T,y,b)}y+=f}f=-f,y+=f,g-=2}if(u!==i.getSize())throw new It("Not all bits consumed: "+u+"/"+i.getSize())}static findMSBSet(i){return 32-Ce.numberOfLeadingZeros(i)}static calculateBCHCode(i,s){if(s===0)throw new M("0 polynomial");const l=p.findMSBSet(s);for(i<<=l-1;p.findMSBSet(i)>=l;)i^=s<<p.findMSBSet(i)-l;return i}static makeTypeInfoBits(i,s,l){if(!Br.isValidMaskPattern(s))throw new It("Invalid mask pattern");const u=i.getBits()<<3|s;l.appendBits(u,5);const f=p.calculateBCHCode(u,p.TYPE_INFO_POLY);l.appendBits(f,10);const g=new Be;if(g.appendBits(p.TYPE_INFO_MASK_PATTERN,15),l.xor(g),l.getSize()!==15)throw new It("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(i,s){s.appendBits(i.getVersionNumber(),6);const l=p.calculateBCHCode(i.getVersionNumber(),p.VERSION_INFO_POLY);if(s.appendBits(l,12),s.getSize()!==18)throw new It("should not happen but we got: "+s.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let s=8;s<i.getWidth()-8;++s){const l=(s+1)%2;p.isEmpty(i.get(s,6))&&i.setNumber(s,6,l),p.isEmpty(i.get(6,s))&&i.setNumber(6,s,l)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new It;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,s,l){for(let u=0;u<8;++u){if(!p.isEmpty(l.get(i+u,s)))throw new It;l.setNumber(i+u,s,0)}}static embedVerticalSeparationPattern(i,s,l){for(let u=0;u<7;++u){if(!p.isEmpty(l.get(i,s+u)))throw new It;l.setNumber(i,s+u,0)}}static embedPositionAdjustmentPattern(i,s,l){for(let u=0;u<5;++u){const f=p.POSITION_ADJUSTMENT_PATTERN[u];for(let g=0;g<5;++g)l.setNumber(i+g,s+u,f[g])}}static embedPositionDetectionPattern(i,s,l){for(let u=0;u<7;++u){const f=p.POSITION_DETECTION_PATTERN[u];for(let g=0;g<7;++g)l.setNumber(i+g,s+u,f[g])}}static embedPositionDetectionPatternsAndSeparators(i){const s=p.POSITION_DETECTION_PATTERN[0].length;p.embedPositionDetectionPattern(0,0,i),p.embedPositionDetectionPattern(i.getWidth()-s,0,i),p.embedPositionDetectionPattern(0,i.getWidth()-s,i);const l=8;p.embedHorizontalSeparationPattern(0,l-1,i),p.embedHorizontalSeparationPattern(i.getWidth()-l,l-1,i),p.embedHorizontalSeparationPattern(0,i.getWidth()-l,i);const u=7;p.embedVerticalSeparationPattern(u,0,i),p.embedVerticalSeparationPattern(i.getHeight()-u-1,0,i),p.embedVerticalSeparationPattern(u,i.getHeight()-u,i)}static maybeEmbedPositionAdjustmentPatterns(i,s){if(i.getVersionNumber()<2)return;const l=i.getVersionNumber()-1,u=p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let f=0,g=u.length;f!==g;f++){const y=u[f];if(y>=0)for(let x=0;x!==g;x++){const T=u[x];T>=0&&p.isEmpty(s.get(T,y))&&p.embedPositionAdjustmentPattern(T-2,y-2,s)}}}}p.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),p.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),p.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),p.VERSION_INFO_POLY=7973,p.TYPE_INFO_POLY=1335,p.TYPE_INFO_MASK_PATTERN=21522;class S{constructor(i,s){this.dataBytes=i,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class R{constructor(){}static calculateMaskPenalty(i){return vt.applyMaskPenaltyRule1(i)+vt.applyMaskPenaltyRule2(i)+vt.applyMaskPenaltyRule3(i)+vt.applyMaskPenaltyRule4(i)}static encode(i,s,l=null){let u=R.DEFAULT_BYTE_MODE_ENCODING;const f=l!==null&&l.get(Sn.CHARACTER_SET)!==void 0;f&&(u=l.get(Sn.CHARACTER_SET).toString());const g=this.chooseMode(i,u),y=new Be;if(g===Ye.BYTE&&(f||R.DEFAULT_BYTE_MODE_ENCODING!==u)){const be=B.getCharacterSetECIByName(u);be!==void 0&&this.appendECI(be,y)}this.appendModeInfo(g,y);const x=new Be;this.appendBytes(i,g,x,u);let T;if(l!==null&&l.get(Sn.QR_VERSION)!==void 0){const be=Number.parseInt(l.get(Sn.QR_VERSION).toString(),10);T=Ge.getVersionForNumber(be);const Te=this.calculateBitsNeeded(g,y,x,T);if(!this.willFit(Te,T,s))throw new It("Data too big for requested version")}else T=this.recommendVersion(s,g,y,x);const b=new Be;b.appendBitArray(y);const O=g===Ye.BYTE?x.getSizeInBytes():i.length;this.appendLengthInfo(O,T,g,b),b.appendBitArray(x);const P=T.getECBlocksForLevel(s),H=T.getTotalCodewords()-P.getTotalECCodewords();this.terminateBits(H,b);const W=this.interleaveWithECBytes(b,T.getTotalCodewords(),H,P.getNumBlocks()),Z=new Br;Z.setECLevel(s),Z.setMode(g),Z.setVersion(T);const re=T.getDimensionForVersion(),fe=new Bs(re,re),Re=this.chooseMaskPattern(W,s,T,fe);return Z.setMaskPattern(Re),p.buildMatrix(W,s,T,Re,fe),Z.setMatrix(fe),Z}static recommendVersion(i,s,l,u){const f=this.calculateBitsNeeded(s,l,u,Ge.getVersionForNumber(1)),g=this.chooseVersion(f,i),y=this.calculateBitsNeeded(s,l,u,g);return this.chooseVersion(y,i)}static calculateBitsNeeded(i,s,l,u){return s.getSize()+i.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(i){return i<R.ALPHANUMERIC_TABLE.length?R.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,s=null){if(B.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(i))return Ye.KANJI;let l=!1,u=!1;for(let f=0,g=i.length;f<g;++f){const y=i.charAt(f);if(R.isDigit(y))l=!0;else if(this.getAlphanumericCode(y.charCodeAt(0))!==-1)u=!0;else return Ye.BYTE}return u?Ye.ALPHANUMERIC:l?Ye.NUMERIC:Ye.BYTE}static isOnlyDoubleByteKanji(i){let s;try{s=G.encode(i,B.SJIS)}catch{return!1}const l=s.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const f=s[u]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(i,s,l,u){let f=Number.MAX_SAFE_INTEGER,g=-1;for(let y=0;y<Br.NUM_MASK_PATTERNS;y++){p.buildMatrix(i,s,l,y,u);let x=this.calculateMaskPenalty(u);x<f&&(f=x,g=y)}return g}static chooseVersion(i,s){for(let l=1;l<=40;l++){const u=Ge.getVersionForNumber(l);if(R.willFit(i,u,s))return u}throw new It("Data too big")}static willFit(i,s,l){const u=s.getTotalCodewords(),g=s.getECBlocksForLevel(l).getTotalECCodewords(),y=u-g,x=(i+7)/8;return y>=x}static terminateBits(i,s){const l=i*8;if(s.getSize()>l)throw new It("data bits cannot fit in the QR Code"+s.getSize()+" > "+l);for(let g=0;g<4&&s.getSize()<l;++g)s.appendBit(!1);const u=s.getSize()&7;if(u>0)for(let g=u;g<8;g++)s.appendBit(!1);const f=i-s.getSizeInBytes();for(let g=0;g<f;++g)s.appendBits((g&1)===0?236:17,8);if(s.getSize()!==l)throw new It("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,s,l,u,f,g){if(u>=l)throw new It("Block ID too large");const y=i%l,x=l-y,T=Math.floor(i/l),b=T+1,O=Math.floor(s/l),P=O+1,H=T-O,W=b-P;if(H!==W)throw new It("EC bytes mismatch");if(l!==x+y)throw new It("RS blocks mismatch");if(i!==(O+H)*x+(P+W)*y)throw new It("Total bytes mismatch");u<x?(f[0]=O,g[0]=H):(f[0]=P,g[0]=W)}static interleaveWithECBytes(i,s,l,u){if(i.getSizeInBytes()!==l)throw new It("Number of bits and data bytes does not match");let f=0,g=0,y=0;const x=new Array;for(let b=0;b<u;++b){const O=new Int32Array(1),P=new Int32Array(1);R.getNumDataBytesAndNumECBytesForBlockID(s,l,u,b,O,P);const H=O[0],W=new Uint8Array(H);i.toBytes(8*f,W,0,H);const Z=R.generateECBytes(W,P[0]);x.push(new S(W,Z)),g=Math.max(g,H),y=Math.max(y,Z.length),f+=O[0]}if(l!==f)throw new It("Data bytes does not match offset");const T=new Be;for(let b=0;b<g;++b)for(const O of x){const P=O.getDataBytes();b<P.length&&T.appendBits(P[b],8)}for(let b=0;b<y;++b)for(const O of x){const P=O.getErrorCorrectionBytes();b<P.length&&T.appendBits(P[b],8)}if(s!==T.getSizeInBytes())throw new It("Interleaving error: "+s+" and "+T.getSizeInBytes()+" differ.");return T}static generateECBytes(i,s){const l=i.length,u=new Int32Array(l+s);for(let g=0;g<l;g++)u[g]=i[g]&255;new kr(Tt.QR_CODE_FIELD_256).encode(u,s);const f=new Uint8Array(s);for(let g=0;g<s;g++)f[g]=u[l+g];return f}static appendModeInfo(i,s){s.appendBits(i.getBits(),4)}static appendLengthInfo(i,s,l,u){const f=l.getCharacterCountBits(s);if(i>=1<<f)throw new It(i+" is bigger than "+((1<<f)-1));u.appendBits(i,f)}static appendBytes(i,s,l,u){switch(s){case Ye.NUMERIC:R.appendNumericBytes(i,l);break;case Ye.ALPHANUMERIC:R.appendAlphanumericBytes(i,l);break;case Ye.BYTE:R.append8BitBytes(i,l,u);break;case Ye.KANJI:R.appendKanjiBytes(i,l);break;default:throw new It("Invalid mode: "+s)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const s=R.getDigit(i);return s>=0&&s<=9}static appendNumericBytes(i,s){const l=i.length;let u=0;for(;u<l;){const f=R.getDigit(i.charAt(u));if(u+2<l){const g=R.getDigit(i.charAt(u+1)),y=R.getDigit(i.charAt(u+2));s.appendBits(f*100+g*10+y,10),u+=3}else if(u+1<l){const g=R.getDigit(i.charAt(u+1));s.appendBits(f*10+g,7),u+=2}else s.appendBits(f,4),u++}}static appendAlphanumericBytes(i,s){const l=i.length;let u=0;for(;u<l;){const f=R.getAlphanumericCode(i.charCodeAt(u));if(f===-1)throw new It;if(u+1<l){const g=R.getAlphanumericCode(i.charCodeAt(u+1));if(g===-1)throw new It;s.appendBits(f*45+g,11),u+=2}else s.appendBits(f,6),u++}}static append8BitBytes(i,s,l){let u;try{u=G.encode(i,l)}catch(f){throw new It(f)}for(let f=0,g=u.length;f!==g;f++){const y=u[f];s.appendBits(y,8)}}static appendKanjiBytes(i,s){let l;try{l=G.encode(i,B.SJIS)}catch(f){throw new It(f)}const u=l.length;for(let f=0;f<u;f+=2){const g=l[f]&255,y=l[f+1]&255,x=g<<8&4294967295|y;let T=-1;if(x>=33088&&x<=40956?T=x-33088:x>=57408&&x<=60351&&(T=x-49472),T===-1)throw new It("Invalid byte sequence");const b=(T>>8)*192+(T&255);s.appendBits(b,13)}}static appendECI(i,s){s.appendBits(Ye.ECI.getBits(),4),s.appendBits(i.getValue(),8)}}R.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),R.DEFAULT_BYTE_MODE_ENCODING=B.UTF8.getName();class k{write(i,s,l,u=null){if(i.length===0)throw new M("Found empty contents");if(s<0||l<0)throw new M("Requested dimensions are too small: "+s+"x"+l);let f=pt.L,g=k.QUIET_ZONE_SIZE;u!==null&&(u.get(Sn.ERROR_CORRECTION)!==void 0&&(f=pt.fromString(u.get(Sn.ERROR_CORRECTION).toString())),u.get(Sn.MARGIN)!==void 0&&(g=Number.parseInt(u.get(Sn.MARGIN).toString(),10)));const y=R.encode(i,f,u);return this.renderResult(y,s,l,g)}writeToDom(i,s,l,u,f=null){typeof i=="string"&&(i=document.querySelector(i));const g=this.write(s,l,u,f);i&&i.appendChild(g)}renderResult(i,s,l,u){const f=i.getMatrix();if(f===null)throw new Oi;const g=f.getWidth(),y=f.getHeight(),x=g+u*2,T=y+u*2,b=Math.max(s,x),O=Math.max(l,T),P=Math.min(Math.floor(b/x),Math.floor(O/T)),H=Math.floor((b-g*P)/2),W=Math.floor((O-y*P)/2),Z=this.createSVGElement(b,O);for(let re=0,fe=W;re<y;re++,fe+=P)for(let Re=0,be=H;Re<g;Re++,be+=P)if(f.get(Re,re)===1){const Te=this.createSvgRectElement(be,fe,P,P);Z.appendChild(Te)}return Z}createSVGElement(i,s){const l=document.createElementNS(k.SVG_NS,"svg");return l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",s.toString()),l}createSvgRectElement(i,s,l,u){const f=document.createElementNS(k.SVG_NS,"rect");return f.setAttributeNS(null,"x",i.toString()),f.setAttributeNS(null,"y",s.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",u.toString()),f.setAttributeNS(null,"fill","#000000"),f}}k.QUIET_ZONE_SIZE=4,k.SVG_NS="http://www.w3.org/2000/svg";class ie{encode(i,s,l,u,f){if(i.length===0)throw new M("Found empty contents");if(s!==Oe.QR_CODE)throw new M("Can only encode QR_CODE, but got "+s);if(l<0||u<0)throw new M(`Requested dimensions are too small: ${l}x${u}`);let g=pt.L,y=ie.QUIET_ZONE_SIZE;f!==null&&(f.get(Sn.ERROR_CORRECTION)!==void 0&&(g=pt.fromString(f.get(Sn.ERROR_CORRECTION).toString())),f.get(Sn.MARGIN)!==void 0&&(y=Number.parseInt(f.get(Sn.MARGIN).toString(),10)));const x=R.encode(i,g,f);return ie.renderResult(x,l,u,y)}static renderResult(i,s,l,u){const f=i.getMatrix();if(f===null)throw new Oi;const g=f.getWidth(),y=f.getHeight(),x=g+u*2,T=y+u*2,b=Math.max(s,x),O=Math.max(l,T),P=Math.min(Math.floor(b/x),Math.floor(O/T)),H=Math.floor((b-g*P)/2),W=Math.floor((O-y*P)/2),Z=new Ue(b,O);for(let re=0,fe=W;re<y;re++,fe+=P)for(let Re=0,be=H;Re<g;Re++,be+=P)f.get(Re,re)===1&&Z.setRegion(be,fe,P,P);return Z}}ie.QUIET_ZONE_SIZE=4;class de{encode(i,s,l,u,f){let g;if(s===Oe.QR_CODE)g=new ie;else throw new M("No encoder available for format "+s);return g.encode(i,s,l,u,f)}}class Ne extends Le{constructor(i,s,l,u,f,g,y,x){if(super(g,y),this.yuvData=i,this.dataWidth=s,this.dataHeight=l,this.left=u,this.top=f,u+g>s||f+y>l)throw new M("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(g,y)}getRow(i,s){if(i<0||i>=this.getHeight())throw new M("Requested row is outside the image: "+i);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(i+this.top)*this.dataWidth+this.left;return pe.arraycopy(this.yuvData,u,s,0,l),s}getMatrix(){const i=this.getWidth(),s=this.getHeight();if(i===this.dataWidth&&s===this.dataHeight)return this.yuvData;const l=i*s,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return pe.arraycopy(this.yuvData,f,u,0,l),u;for(let g=0;g<s;g++){const y=g*i;pe.arraycopy(this.yuvData,f,u,y,i),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(i,s,l,u){return new Ne(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+s,l,u,!1)}renderThumbnail(){const i=this.getWidth()/Ne.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/Ne.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(i*s),u=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let g=0;g<s;g++){const y=g*i;for(let x=0;x<i;x++){const T=u[f+x*Ne.THUMBNAIL_SCALE_FACTOR]&255;l[y+x]=4278190080|T*65793}f+=this.dataWidth*Ne.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Ne.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ne.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,s){const l=this.yuvData;for(let u=0,f=this.top*this.dataWidth+this.left;u<s;u++,f+=this.dataWidth){const g=f+i/2;for(let y=f,x=f+i-1;y<g;y++,x--){const T=l[y];l[y]=l[x],l[x]=T}}}invert(){return new ut(this)}}Ne.THUMBNAIL_SCALE_FACTOR=2;class at extends Le{constructor(i,s,l,u,f,g,y){if(super(s,l),this.dataWidth=u,this.dataHeight=f,this.left=g,this.top=y,i.BYTES_PER_ELEMENT===4){const x=s*l,T=new Uint8ClampedArray(x);for(let b=0;b<x;b++){const O=i[b],P=O>>16&255,H=O>>7&510,W=O&255;T[b]=(P+H+W)/4&255}this.luminances=T}else this.luminances=i;if(u===void 0&&(this.dataWidth=s),f===void 0&&(this.dataHeight=l),g===void 0&&(this.left=0),y===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+l>this.dataHeight)throw new M("Crop rectangle does not fit within image data.")}getRow(i,s){if(i<0||i>=this.getHeight())throw new M("Requested row is outside the image: "+i);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const u=(i+this.top)*this.dataWidth+this.left;return pe.arraycopy(this.luminances,u,s,0,l),s}getMatrix(){const i=this.getWidth(),s=this.getHeight();if(i===this.dataWidth&&s===this.dataHeight)return this.luminances;const l=i*s,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return pe.arraycopy(this.luminances,f,u,0,l),u;for(let g=0;g<s;g++){const y=g*i;pe.arraycopy(this.luminances,f,u,y,i),f+=this.dataWidth}return u}isCropSupported(){return!0}crop(i,s,l,u){return new at(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+i,this.top+s)}invert(){return new ut(this)}}class bn extends B{static forName(i){return this.getCharacterSetECIByName(i)}}class Vt{}Vt.ISO_8859_1=B.ISO8859_1;class hn{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class Xi{static singletonList(i){return[i]}static min(i,s){return i.sort(s)[0]}}class Vr{constructor(i){this.previous=i}getPrevious(){return this.previous}}class ci extends Vr{constructor(i,s,l){super(i),this.value=s,this.bitCount=l}appendTo(i,s){i.appendBits(this.value,this.bitCount)}add(i,s){return new ci(this,i,s)}addBinaryShift(i,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ci(this,i,s)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+Ce.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Yi extends ci{constructor(i,s,l){super(i,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=l}appendTo(i,s){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):l===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(s[this.binaryShiftStart+l],8)}addBinaryShift(i,s){return new Yi(this,i,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Vs(N,i,s){return new Yi(N,i,s)}function Ur(N,i,s){return new ci(N,i,s)}const xa=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ms=0,il=1,er=2,nc=3,xr=4,To=new ci(null,0,0),Us=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Uf(N){for(let i of N)Pe.fill(i,-1);return N[ms][xr]=0,N[il][xr]=0,N[il][ms]=28,N[nc][xr]=0,N[er][xr]=0,N[er][ms]=15,N}const Co=Uf(Pe.createInt32Array(6,6));class Ar{constructor(i,s,l,u){this.token=i,this.mode=s,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,s){let l=this.bitCount,u=this.token;if(i!==this.mode){let g=Us[this.mode][i];u=Ur(u,g&65535,g>>16),l+=g>>16}let f=i===er?4:5;return u=Ur(u,s,f),new Ar(u,i,0,l+f)}shiftAndAppend(i,s){let l=this.token,u=this.mode===er?4:5;return l=Ur(l,Co[this.mode][i],u),l=Ur(l,s,5),new Ar(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(i){let s=this.token,l=this.mode,u=this.bitCount;if(this.mode===xr||this.mode===er){let y=Us[l][ms];s=Ur(s,y&65535,y>>16),u+=y>>16,l=ms}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new Ar(s,l,this.binaryShiftByteCount+1,u+f);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(i+1)),g}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Vs(s,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new Ar(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let s=this.bitCount+(Us[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?s+=Ar.calculateBinaryShiftCost(i)-Ar.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(s+=10),s<=i.bitCount}toBitArray(i){let s=[];for(let u=this.endBinaryShift(i.length).token;u!==null;u=u.getPrevious())s.unshift(u);let l=new Be;for(const u of s)u.appendTo(l,i);return l}toString(){return q.format("%s bits=%d bytes=%d",xa[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}Ar.INITIAL_STATE=new Ar(To,ms,0,0);function wu(N){const i=q.getCharCode(" "),s=q.getCharCode("."),l=q.getCharCode(",");N[ms][i]=1;const u=q.getCharCode("Z"),f=q.getCharCode("A");for(let P=f;P<=u;P++)N[ms][P]=P-f+2;N[il][i]=1;const g=q.getCharCode("z"),y=q.getCharCode("a");for(let P=y;P<=g;P++)N[il][P]=P-y+2;N[er][i]=1;const x=q.getCharCode("9"),T=q.getCharCode("0");for(let P=T;P<=x;P++)N[er][P]=P-T+2;N[er][l]=12,N[er][s]=13;const b=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let P=0;P<b.length;P++)N[nc][q.getCharCode(b[P])]=P;const O=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let P=0;P<O.length;P++)q.getCharCode(O[P])>0&&(N[xr][q.getCharCode(O[P])]=P);return N}const vo=wu(Pe.createInt32Array(5,256));class Fs{constructor(i){this.text=i}encode(){const i=q.getCharCode(" "),s=q.getCharCode(`
`);let l=Xi.singletonList(Ar.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let g,y=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case q.getCharCode("\r"):g=y===s?2:0;break;case q.getCharCode("."):g=y===i?3:0;break;case q.getCharCode(","):g=y===i?4:0;break;case q.getCharCode(":"):g=y===i?5:0;break;default:g=0}g>0?(l=Fs.updateStateListForPair(l,f,g),f++):l=this.updateStateListForChar(l,f)}return Xi.min(l,(f,g)=>f.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,s){const l=[];for(let u of i)this.updateStateForChar(u,s,l);return Fs.simplifyStates(l)}updateStateForChar(i,s,l){let u=this.text[s]&255,f=vo[i.getMode()][u]>0,g=null;for(let y=0;y<=xr;y++){let x=vo[y][u];if(x>0){if(g==null&&(g=i.endBinaryShift(s)),!f||y===i.getMode()||y===er){const T=g.latchAndAppend(y,x);l.push(T)}if(!f&&Co[i.getMode()][y]>=0){const T=g.shiftAndAppend(y,x);l.push(T)}}}if(i.getBinaryShiftByteCount()>0||vo[i.getMode()][u]===0){let y=i.addBinaryShiftChar(s);l.push(y)}}static updateStateListForPair(i,s,l){const u=[];for(let f of i)this.updateStateForPair(f,s,l,u);return this.simplifyStates(u)}static updateStateForPair(i,s,l,u){let f=i.endBinaryShift(s);if(u.push(f.latchAndAppend(xr,l)),i.getMode()!==xr&&u.push(f.shiftAndAppend(xr,l)),l===3||l===4){let g=f.latchAndAppend(er,16-l).latchAndAppend(er,1);u.push(g)}if(i.getBinaryShiftByteCount()>0){let g=i.addBinaryShiftChar(s).addBinaryShiftChar(s+1);u.push(g)}}static simplifyStates(i){let s=[];for(const l of i){let u=!0;for(const f of s){if(f.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(f)&&(s=s.filter(g=>g!==f))}u&&s.push(l)}return s}}class Dt{constructor(){}static encodeBytes(i){return Dt.encode(i,Dt.DEFAULT_EC_PERCENT,Dt.DEFAULT_AZTEC_LAYERS)}static encode(i,s,l){let u=new Fs(i).encode(),f=Ce.truncDivision(u.getSize()*s,100)+11,g=u.getSize()+f,y,x,T,b,O;if(l!==Dt.DEFAULT_AZTEC_LAYERS){if(y=l<0,x=Math.abs(l),x>(y?Dt.MAX_NB_BITS_COMPACT:Dt.MAX_NB_BITS))throw new M(q.format("Illegal value %s for layers",l));T=Dt.totalBitsInLayer(x,y),b=Dt.WORD_SIZE[x];let Te=T-T%b;if(O=Dt.stuffBits(u,b),O.getSize()+f>Te)throw new M("Data to large for user specified layer");if(y&&O.getSize()>b*64)throw new M("Data to large for user specified layer")}else{b=0,O=null;for(let Te=0;;Te++){if(Te>Dt.MAX_NB_BITS)throw new M("Data too large for an Aztec code");if(y=Te<=3,x=y?Te+1:Te,T=Dt.totalBitsInLayer(x,y),g>T)continue;(O==null||b!==Dt.WORD_SIZE[x])&&(b=Dt.WORD_SIZE[x],O=Dt.stuffBits(u,b));let Et=T-T%b;if(!(y&&O.getSize()>b*64)&&O.getSize()+f<=Et)break}}let P=Dt.generateCheckWords(O,T,b),H=O.getSize()/b,W=Dt.generateModeMessage(y,x,H),Z=(y?11:14)+x*4,re=new Int32Array(Z),fe;if(y){fe=Z;for(let Te=0;Te<re.length;Te++)re[Te]=Te}else{fe=Z+1+2*Ce.truncDivision(Ce.truncDivision(Z,2)-1,15);let Te=Ce.truncDivision(Z,2),Et=Ce.truncDivision(fe,2);for(let ot=0;ot<Te;ot++){let kn=ot+Ce.truncDivision(ot,15);re[Te-ot-1]=Et-kn-1,re[Te+ot]=Et+kn+1}}let Re=new Ue(fe);for(let Te=0,Et=0;Te<x;Te++){let ot=(x-Te)*4+(y?9:12);for(let kn=0;kn<ot;kn++){let tr=kn*2;for(let Ti=0;Ti<2;Ti++)P.get(Et+tr+Ti)&&Re.set(re[Te*2+Ti],re[Te*2+kn]),P.get(Et+ot*2+tr+Ti)&&Re.set(re[Te*2+kn],re[Z-1-Te*2-Ti]),P.get(Et+ot*4+tr+Ti)&&Re.set(re[Z-1-Te*2-Ti],re[Z-1-Te*2-kn]),P.get(Et+ot*6+tr+Ti)&&Re.set(re[Z-1-Te*2-kn],re[Te*2+Ti])}Et+=ot*8}if(Dt.drawModeMessage(Re,y,fe,W),y)Dt.drawBullsEye(Re,Ce.truncDivision(fe,2),5);else{Dt.drawBullsEye(Re,Ce.truncDivision(fe,2),7);for(let Te=0,Et=0;Te<Ce.truncDivision(Z,2)-1;Te+=15,Et+=16)for(let ot=Ce.truncDivision(fe,2)&1;ot<fe;ot+=2)Re.set(Ce.truncDivision(fe,2)-Et,ot),Re.set(Ce.truncDivision(fe,2)+Et,ot),Re.set(ot,Ce.truncDivision(fe,2)-Et),Re.set(ot,Ce.truncDivision(fe,2)+Et)}let be=new hn;return be.setCompact(y),be.setSize(fe),be.setLayers(x),be.setCodeWords(H),be.setMatrix(Re),be}static drawBullsEye(i,s,l){for(let u=0;u<l;u+=2)for(let f=s-u;f<=s+u;f++)i.set(f,s-u),i.set(f,s+u),i.set(s-u,f),i.set(s+u,f);i.set(s-l,s-l),i.set(s-l+1,s-l),i.set(s-l,s-l+1),i.set(s+l,s-l),i.set(s+l,s-l+1),i.set(s+l,s+l-1)}static generateModeMessage(i,s,l){let u=new Be;return i?(u.appendBits(s-1,2),u.appendBits(l-1,6),u=Dt.generateCheckWords(u,28,4)):(u.appendBits(s-1,5),u.appendBits(l-1,11),u=Dt.generateCheckWords(u,40,4)),u}static drawModeMessage(i,s,l,u){let f=Ce.truncDivision(l,2);if(s)for(let g=0;g<7;g++){let y=f-3+g;u.get(g)&&i.set(y,f-5),u.get(g+7)&&i.set(f+5,y),u.get(20-g)&&i.set(y,f+5),u.get(27-g)&&i.set(f-5,y)}else for(let g=0;g<10;g++){let y=f-5+g+Ce.truncDivision(g,5);u.get(g)&&i.set(y,f-7),u.get(g+10)&&i.set(f+7,y),u.get(29-g)&&i.set(y,f+7),u.get(39-g)&&i.set(f-7,y)}}static generateCheckWords(i,s,l){let u=i.getSize()/l,f=new kr(Dt.getGF(l)),g=Ce.truncDivision(s,l),y=Dt.bitsToWords(i,l,g);f.encode(y,g-u);let x=s%l,T=new Be;T.appendBits(0,x);for(const b of Array.from(y))T.appendBits(b,l);return T}static bitsToWords(i,s,l){let u=new Int32Array(l),f,g;for(f=0,g=i.getSize()/s;f<g;f++){let y=0;for(let x=0;x<s;x++)y|=i.get(f*s+x)?1<<s-x-1:0;u[f]=y}return u}static getGF(i){switch(i){case 4:return Tt.AZTEC_PARAM;case 6:return Tt.AZTEC_DATA_6;case 8:return Tt.AZTEC_DATA_8;case 10:return Tt.AZTEC_DATA_10;case 12:return Tt.AZTEC_DATA_12;default:throw new M("Unsupported word size "+i)}}static stuffBits(i,s){let l=new Be,u=i.getSize(),f=(1<<s)-2;for(let g=0;g<u;g+=s){let y=0;for(let x=0;x<s;x++)(g+x>=u||i.get(g+x))&&(y|=1<<s-1-x);(y&f)===f?(l.appendBits(y&f,s),g--):(y&f)===0?(l.appendBits(y|1,s),g--):l.appendBits(y,s)}return l}static totalBitsInLayer(i,s){return((s?88:112)+16*i)*i}}Dt.DEFAULT_EC_PERCENT=33,Dt.DEFAULT_AZTEC_LAYERS=0,Dt.MAX_NB_BITS=32,Dt.MAX_NB_BITS_COMPACT=4,Dt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class So{encode(i,s,l,u){return this.encodeWithHints(i,s,l,u,null)}encodeWithHints(i,s,l,u,f){let g=Vt.ISO_8859_1,y=Dt.DEFAULT_EC_PERCENT,x=Dt.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(Sn.CHARACTER_SET)&&(g=bn.forName(f.get(Sn.CHARACTER_SET).toString())),f.has(Sn.ERROR_CORRECTION)&&(y=Ce.parseInt(f.get(Sn.ERROR_CORRECTION).toString())),f.has(Sn.AZTEC_LAYERS)&&(x=Ce.parseInt(f.get(Sn.AZTEC_LAYERS).toString()))),So.encodeLayers(i,s,l,u,g,y,x)}static encodeLayers(i,s,l,u,f,g,y){if(s!==Oe.AZTEC)throw new M("Can only encode AZTEC, but got "+s);let x=Dt.encode(q.getBytes(i,f),g,y);return So.renderResult(x,l,u)}static renderResult(i,s,l){let u=i.getMatrix();if(u==null)throw new Oi;let f=u.getWidth(),g=u.getHeight(),y=Math.max(s,f),x=Math.max(l,g),T=Math.min(y/f,x/g),b=(y-f*T)/2,O=(x-g*T)/2,P=new Ue(y,x);for(let H=0,W=O;H<g;H++,W+=T)for(let Z=0,re=b;Z<f;Z++,re+=T)u.get(Z,H)&&P.setRegion(re,W,T,T);return P}}n.AbstractExpandedDecoder=wn,n.ArgumentException=D,n.ArithmeticException=Qr,n.AztecCode=hn,n.AztecCodeReader=Is,n.AztecCodeWriter=So,n.AztecDecoder=Gt,n.AztecDetector=po,n.AztecDetectorResult=mo,n.AztecEncoder=Dt,n.AztecHighLevelEncoder=Fs,n.AztecPoint=ni,n.BarcodeFormat=Oe,n.Binarizer=_e,n.BinaryBitmap=z,n.BitArray=Be,n.BitMatrix=Ue,n.BitSource=Cn,n.BrowserAztecCodeReader=$o,n.BrowserBarcodeReader=Eo,n.BrowserCodeReader=Ie,n.BrowserDatamatrixCodeReader=Mr,n.BrowserMultiFormatReader=Lr,n.BrowserPDF417Reader=tl,n.BrowserQRCodeReader=nl,n.BrowserQRCodeSvgWriter=k,n.CharacterSetECI=B,n.ChecksumException=te,n.Code128Reader=Se,n.Code39Reader=Xt,n.DataMatrixDecodedBitStreamParser=wi,n.DataMatrixReader=Mi,n.DecodeHintType=ke,n.DecoderResult=Zt,n.DefaultGridSampler=fa,n.DetectorResult=ha,n.EAN13Reader=sn,n.EncodeHintType=Sn,n.Exception=w,n.FormatException=V,n.GenericGF=Tt,n.GenericGFPoly=Fn,n.GlobalHistogramBinarizer=K,n.GridSampler=Zr,n.GridSamplerInstance=gi,n.HTMLCanvasElementLuminanceSource=mt,n.HybridBinarizer=se,n.ITFReader=it,n.IllegalArgumentException=M,n.IllegalStateException=Oi,n.InvertedLuminanceSource=ut,n.LuminanceSource=Le,n.MathUtils=Ze,n.MultiFormatOneDReader=xi,n.MultiFormatReader=wo,n.MultiFormatWriter=de,n.NotFoundException=Q,n.OneDReader=qt,n.PDF417DecodedBitStreamParser=he,n.PDF417DecoderErrorCorrection=pr,n.PDF417Reader=vn,n.PDF417ResultMetadata=es,n.PerspectiveTransform=di,n.PlanarYUVLuminanceSource=Ne,n.QRCodeByteMatrix=Bs,n.QRCodeDataMask=jn,n.QRCodeDecodedBitStreamParser=Jt,n.QRCodeDecoderErrorCorrectionLevel=pt,n.QRCodeDecoderFormatInformation=On,n.QRCodeEncoder=R,n.QRCodeEncoderQRCode=Br,n.QRCodeMaskUtil=vt,n.QRCodeMatrixUtil=p,n.QRCodeMode=Ye,n.QRCodeReader=Bi,n.QRCodeVersion=Ge,n.QRCodeWriter=ie,n.RGBLuminanceSource=at,n.RSS14Reader=Ht,n.RSSExpandedReader=Ae,n.ReaderException=ks,n.ReedSolomonDecoder=hr,n.ReedSolomonEncoder=kr,n.ReedSolomonException=fi,n.Result=De,n.ResultMetadataType=wt,n.ResultPoint=Fe,n.StringUtils=q,n.UnsupportedOperationException=ee,n.VideoInputDevice=J,n.WhiteRectangleDetector=mn,n.WriterException=It,n.ZXingArrays=Pe,n.ZXingCharset=bn,n.ZXingInteger=Ce,n.ZXingStandardCharsets=Vt,n.ZXingStringBuilder=F,n.ZXingStringEncoding=G,n.ZXingSystem=pe,n.createAbstractExpandedDecoder=Di,Object.defineProperty(n,"__esModule",{value:!0})}))})(Xc,Xc.exports)),Xc.exports}var En=GI();const qI=gw(En),XI=dw({__proto__:null,default:qI},[En]);var c_=(function(){function a(e,n,o){if(this.formatMap=new Map([[He.QR_CODE,En.BarcodeFormat.QR_CODE],[He.AZTEC,En.BarcodeFormat.AZTEC],[He.CODABAR,En.BarcodeFormat.CODABAR],[He.CODE_39,En.BarcodeFormat.CODE_39],[He.CODE_93,En.BarcodeFormat.CODE_93],[He.CODE_128,En.BarcodeFormat.CODE_128],[He.DATA_MATRIX,En.BarcodeFormat.DATA_MATRIX],[He.MAXICODE,En.BarcodeFormat.MAXICODE],[He.ITF,En.BarcodeFormat.ITF],[He.EAN_13,En.BarcodeFormat.EAN_13],[He.EAN_8,En.BarcodeFormat.EAN_8],[He.PDF_417,En.BarcodeFormat.PDF_417],[He.RSS_14,En.BarcodeFormat.RSS_14],[He.RSS_EXPANDED,En.BarcodeFormat.RSS_EXPANDED],[He.UPC_A,En.BarcodeFormat.UPC_A],[He.UPC_E,En.BarcodeFormat.UPC_E],[He.UPC_EAN_EXTENSION,En.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!XI)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=o;var h=this.createZXingFormats(e),m=new Map;m.set(En.DecodeHintType.POSSIBLE_FORMATS,h),m.set(En.DecodeHintType.TRY_HARDER,!1),this.hints=m}return a.prototype.decodeAsync=function(e){var n=this;return new Promise(function(o,h){try{o(n.decode(e))}catch(m){h(m)}})},a.prototype.decode=function(e){var n=new En.MultiFormatReader(this.verbose,this.hints),o=new En.HTMLCanvasElementLuminanceSource(e),h=new En.BinaryBitmap(new En.HybridBinarizer(o)),m=n.decode(h);return{text:m.text,format:Xx.create(this.toHtml5QrcodeSupportedFormats(m.format)),debugData:this.createDebugData()}},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,h){e.set(n,o)}),e},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createZXingFormats=function(e){for(var n=[],o=0,h=e;o<h.length;o++){var m=h[o];this.formatMap.has(m)?n.push(this.formatMap.get(m)):this.logger.logError("".concat(m," is not supported by")+"ZXingHtml5QrcodeShim")}return n},a.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},a})(),YI=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(E){E(m)})}return new(n||(n=Promise))(function(m,E){function C(D){try{w(o.next(D))}catch(M){E(M)}}function v(D){try{w(o.throw(D))}catch(M){E(M)}}function w(D){D.done?m(D.value):h(D.value).then(C,v)}w((o=o.apply(a,e||[])).next())})},WI=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,E;return E={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function C(w){return function(D){return v([w,D])}}function v(w){if(o)throw new TypeError("Generator is already executing.");for(;E&&(E=0,w[0]&&(n=0)),n;)try{if(o=1,h&&(m=w[0]&2?h.return:w[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,w[1])).done)return m;switch(h=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,h=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){n.label=w[1];break}if(w[0]===6&&n.label<m[1]){n.label=m[1],m=w;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(w);break}m[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(a,n)}catch(D){w=[6,D],h=0}finally{o=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},u_=(function(){function a(e,n,o){if(this.formatMap=new Map([[He.QR_CODE,"qr_code"],[He.AZTEC,"aztec"],[He.CODABAR,"codabar"],[He.CODE_39,"code_39"],[He.CODE_93,"code_93"],[He.CODE_128,"code_128"],[He.DATA_MATRIX,"data_matrix"],[He.ITF,"itf"],[He.EAN_13,"ean_13"],[He.EAN_8,"ean_8"],[He.PDF_417,"pdf417"],[He.UPC_A,"upc_a"],[He.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!a.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=o;var h=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(h),!this.detector)throw"BarcodeDetector detector not supported"}return a.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},a.prototype.decodeAsync=function(e){return YI(this,void 0,void 0,function(){var n,o;return WI(this,function(h){switch(h.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=h.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(n),[2,{text:o.rawValue,format:Xx.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},a.prototype.selectLargestBarcode=function(e){for(var n=null,o=0,h=0,m=e;h<m.length;h++){var E=m[h],C=E.boundingBox.width*E.boundingBox.height;C>o&&(o=C,n=E)}if(!n)throw"No largest barcode found";return n},a.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],o=0,h=e;o<h.length;o++){var m=h[o];this.formatMap.has(m)?n.push(this.formatMap.get(m)):this.logger.warn("".concat(m," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},a.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},a.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,o,h){e.set(n,o)}),e},a.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},a})(),h_=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(E){E(m)})}return new(n||(n=Promise))(function(m,E){function C(D){try{w(o.next(D))}catch(M){E(M)}}function v(D){try{w(o.throw(D))}catch(M){E(M)}}function w(D){D.done?m(D.value):h(D.value).then(C,v)}w((o=o.apply(a,e||[])).next())})},f_=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,E;return E={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function C(w){return function(D){return v([w,D])}}function v(w){if(o)throw new TypeError("Generator is already executing.");for(;E&&(E=0,w[0]&&(n=0)),n;)try{if(o=1,h&&(m=w[0]&2?h.return:w[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,w[1])).done)return m;switch(h=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,h=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){n.label=w[1];break}if(w[0]===6&&n.label<m[1]){n.label=m[1],m=w;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(w);break}m[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(a,n)}catch(D){w=[6,D],h=0}finally{o=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},KI=(function(){function a(e,n,o,h){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,n&&u_.isSupported()?(this.primaryDecoder=new u_(e,o,h),this.secondaryDecoder=new c_(e,o,h)):this.primaryDecoder=new c_(e,o,h)}return a.prototype.decodeAsync=function(e){return h_(this,void 0,void 0,function(){var n;return f_(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},a.prototype.decodeRobustlyAsync=function(e){return h_(this,void 0,void 0,function(){var n,o;return f_(this,function(h){switch(h.label){case 0:n=performance.now(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,h.sent()];case 3:if(o=h.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},a.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},a.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},a.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,o=this.executionResults;n<o.length;n++){var h=o[n];e+=h}var m=e/this.executionResults.length;console.log("".concat(m," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},a})(),fg=(function(){var a=function(e,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(o[m]=h[m])},a(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),ff=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(E){E(m)})}return new(n||(n=Promise))(function(m,E){function C(D){try{w(o.next(D))}catch(M){E(M)}}function v(D){try{w(o.throw(D))}catch(M){E(M)}}function w(D){D.done?m(D.value):h(D.value).then(C,v)}w((o=o.apply(a,e||[])).next())})},df=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,E;return E={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function C(w){return function(D){return v([w,D])}}function v(w){if(o)throw new TypeError("Generator is already executing.");for(;E&&(E=0,w[0]&&(n=0)),n;)try{if(o=1,h&&(m=w[0]&2?h.return:w[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,w[1])).done)return m;switch(h=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,h=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){n.label=w[1];break}if(w[0]===6&&n.label<m[1]){n.label=m[1],m=w;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(w);break}m[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(a,n)}catch(D){w=[6,D],h=0}finally{o=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Wx=(function(){function a(e,n){this.name=e,this.track=n}return a.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},a.prototype.apply=function(e){var n={};n[this.name]=e;var o={advanced:[n]};return this.track.applyConstraints(o)},a.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},a})(),QI=(function(a){fg(e,a);function e(n,o){return a.call(this,n,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var o={};o[this.name]=n;var h={advanced:[o]};return this.track.applyConstraints(h)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),o=n[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(Wx),ZI=(function(a){fg(e,a);function e(n){return a.call(this,"zoom",n)||this}return e})(QI),JI=(function(a){fg(e,a);function e(n){return a.call(this,"torch",n)||this}return e})(Wx),$I=(function(){function a(e){this.track=e}return a.prototype.zoomFeature=function(){return new ZI(this.track)},a.prototype.torchFeature=function(){return new JI(this.track)},a})(),e4=(function(){function a(e,n,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return a.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},a.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var o=e.surface.clientWidth,h=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,h),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},a.create=function(e,n,o,h){return ff(this,void 0,void 0,function(){var m,E;return df(this,function(C){switch(C.label){case 0:return m=new a(e,n,h),o.aspectRatio?(E={aspectRatio:o.aspectRatio},[4,m.getFirstTrackOrFail().applyConstraints(E)]):[3,2];case 1:C.sent(),C.label=2;case 2:return m.setupSurface(),[2,m]}})})},a.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},a.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},a.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},a.prototype.resume=function(e){this.failIfClosed();var n=this,o=function(){setTimeout(e,200),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},a.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},a.prototype.getSurface=function(){return this.failIfClosed(),this.surface},a.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},a.prototype.applyVideoConstraints=function(e){return ff(this,void 0,void 0,function(){return df(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},a.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,o){var h=e.mediaStream.getVideoTracks(),m=h.length,E=0;e.mediaStream.getVideoTracks().forEach(function(C){e.mediaStream.removeTrack(C),C.stop(),++E,E>=m&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},a.prototype.getCapabilities=function(){return new $I(this.getFirstTrackOrFail())},a})(),t4=(function(){function a(e){this.mediaStream=e}return a.prototype.render=function(e,n,o){return ff(this,void 0,void 0,function(){return df(this,function(h){return[2,e4.create(e,this.mediaStream,n,o)]})})},a.create=function(e){return ff(this,void 0,void 0,function(){var n,o;return df(this,function(h){switch(h.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return o=h.sent(),[2,new a(o)]}})})},a})(),d_=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(E){E(m)})}return new(n||(n=Promise))(function(m,E){function C(D){try{w(o.next(D))}catch(M){E(M)}}function v(D){try{w(o.throw(D))}catch(M){E(M)}}function w(D){D.done?m(D.value):h(D.value).then(C,v)}w((o=o.apply(a,e||[])).next())})},g_=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,E;return E={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function C(w){return function(D){return v([w,D])}}function v(w){if(o)throw new TypeError("Generator is already executing.");for(;E&&(E=0,w[0]&&(n=0)),n;)try{if(o=1,h&&(m=w[0]&2?h.return:w[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,w[1])).done)return m;switch(h=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,h=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){n.label=w[1];break}if(w[0]===6&&n.label<m[1]){n.label=m[1],m=w;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(w);break}m[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(a,n)}catch(D){w=[6,D],h=0}finally{o=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},n4=(function(){function a(){}return a.failIfNotSupported=function(){return d_(this,void 0,void 0,function(){return g_(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new a]})})},a.prototype.create=function(e){return d_(this,void 0,void 0,function(){return g_(this,function(n){return[2,t4.create(e)]})})},a})(),i4=function(a,e,n,o){function h(m){return m instanceof n?m:new n(function(E){E(m)})}return new(n||(n=Promise))(function(m,E){function C(D){try{w(o.next(D))}catch(M){E(M)}}function v(D){try{w(o.throw(D))}catch(M){E(M)}}function w(D){D.done?m(D.value):h(D.value).then(C,v)}w((o=o.apply(a,e||[])).next())})},r4=function(a,e){var n={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,h,m,E;return E={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function C(w){return function(D){return v([w,D])}}function v(w){if(o)throw new TypeError("Generator is already executing.");for(;E&&(E=0,w[0]&&(n=0)),n;)try{if(o=1,h&&(m=w[0]&2?h.return:w[0]?h.throw||((m=h.return)&&m.call(h),0):h.next)&&!(m=m.call(h,w[1])).done)return m;switch(h=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,h=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(m=n.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){n.label=w[1];break}if(w[0]===6&&n.label<m[1]){n.label=m[1],m=w;break}if(m&&n.label<m[2]){n.label=m[2],n.ops.push(w);break}m[2]&&n.ops.pop(),n.trys.pop();continue}w=e.call(a,n)}catch(D){w=[6,D],h=0}finally{o=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},s4=(function(){function a(){}return a.retrieve=function(){if(navigator.mediaDevices)return a.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?a.getCamerasFromMediaStreamTrack():a.rejectWithError()},a.rejectWithError=function(){var e=Ll.unableToQuerySupportedDevices();return a.isHttpsOrLocalhost()||(e=Ll.insecureContextCameraQueryError()),Promise.reject(e)},a.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},a.getCamerasFromMediaDevices=function(){return i4(this,void 0,void 0,function(){var e,n,o,h,m,E,C;return r4(this,function(v){switch(v.label){case 0:return e=function(w){for(var D=w.getVideoTracks(),M=0,z=D;M<z.length;M++){var te=z[M];te.enabled=!1,te.stop(),w.removeTrack(te)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=v.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=v.sent(),h=[],m=0,E=o;m<E.length;m++)C=E[m],C.kind==="videoinput"&&h.push({id:C.deviceId,label:C.label});return e(n),[2,h]}})})},a.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var o=function(m){for(var E=[],C=0,v=m;C<v.length;C++){var w=v[C];w.kind==="video"&&E.push({id:w.id,label:w.label})}e(E)},h=MediaStreamTrack;h.getSources(o)})},a})(),Un;(function(a){a[a.UNKNOWN=0]="UNKNOWN",a[a.NOT_STARTED=1]="NOT_STARTED",a[a.SCANNING=2]="SCANNING",a[a.PAUSED=3]="PAUSED"})(Un||(Un={}));var a4=(function(){function a(){this.state=Un.NOT_STARTED,this.onGoingTransactionNewState=Un.UNKNOWN}return a.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},a.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},a.prototype.execute=function(){if(this.onGoingTransactionNewState===Un.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Un.UNKNOWN,this.directTransition(e)},a.prototype.cancel=function(){if(this.onGoingTransactionNewState===Un.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Un.UNKNOWN},a.prototype.getState=function(){return this.state},a.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Un.UNKNOWN)throw"Cannot transition to a new state, already under transition"},a.prototype.validateTransition=function(e){switch(this.state){case Un.UNKNOWN:throw"Transition from unknown is not allowed";case Un.NOT_STARTED:this.failIfNewStateIs(e,[Un.PAUSED]);break;case Un.SCANNING:break;case Un.PAUSED:break}},a.prototype.failIfNewStateIs=function(e,n){for(var o=0,h=n;o<h.length;o++){var m=h[o];if(e===m)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},a})(),o4=(function(){function a(e){this.stateManager=e}return a.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},a.prototype.directTransition=function(e){this.stateManager.directTransition(e)},a.prototype.getState=function(){return this.stateManager.getState()},a.prototype.canScanFile=function(){return this.stateManager.getState()===Un.NOT_STARTED},a.prototype.isScanning=function(){return this.stateManager.getState()!==Un.NOT_STARTED},a.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Un.SCANNING},a.prototype.isPaused=function(){return this.stateManager.getState()===Un.PAUSED},a})(),l4=(function(){function a(){}return a.create=function(){return new o4(new a4)},a})(),c4=(function(){var a=function(e,n){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&(o[m]=h[m])},a(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");a(e,n);function o(){this.constructor=e}e.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}})(),Ir=(function(a){c4(e,a);function e(){return a!==null&&a.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(FI),u4=(function(){function a(e,n){this.logger=n,this.fps=Ir.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Ir.DEFAULT_DISABLE_FLIP}return a.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Yx.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},a.prototype.isShadedBoxEnabled=function(){return!ia(this.qrbox)},a.create=function(e,n){return new a(e,n)},a})(),h4=(function(){function a(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof n=="boolean"?this.verbose=n===!0:n&&(o=n,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new jI(this.verbose),this.qrcode=new KI(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=l4.create()}return a.prototype.start=function(e,n,o,h){var m=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var E;h?E=h:E=this.verbose?this.logger.log:function(){};var C=u4.create(n,this.logger);this.clearElement();var v=!1;C.videoConstraints&&(C.isMediaStreamConstraintsValid()?v=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=v,D=document.getElementById(this.elementId);D.clientWidth?D.clientWidth:Ir.DEFAULT_WIDTH,D.style.position="relative",this.shouldScan=!0,this.element=D;var M=this,z=this.stateManagerProxy.startTransition(Un.SCANNING);return new Promise(function(te,_e){var pe=w?C.videoConstraints:M.createVideoConstraints(e);if(!pe){z.cancel(),_e("videoConstraints should be defined");return}var ve={};(!w||C.aspectRatio)&&(ve.aspectRatio=C.aspectRatio);var je={onRenderSurfaceReady:function(Pe,Ce){M.setupUi(Pe,Ce,C),M.isScanning=!0,M.foreverScan(C,o,E)}};n4.failIfNotSupported().then(function(Pe){Pe.create(pe).then(function(Ce){return Ce.render(m.element,ve,je).then(function(Be){M.renderedCamera=Be,z.execute(),te(null)}).catch(function(Be){z.cancel(),_e(Be)})}).catch(function(Ce){z.cancel(),_e(Ll.errorGettingUserMedia(Ce))})}).catch(function(Pe){z.cancel(),_e(Ll.cameraStreamingNotSupported())})})},a.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Un.PAUSED),this.showPausedState(),(ia(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},a.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Un.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},a.prototype.getState=function(){return this.stateManagerProxy.getState()},a.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Un.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var m=document.getElementById(Ir.SHADED_REGION_ELEMENT_ID);m&&e.element.removeChild(m)}},h=this;return this.renderedCamera.close().then(function(){return h.renderedCamera=null,h.element&&(h.element.removeChild(h.canvasElement),h.canvasElement=null),o(),h.qrRegion&&(h.qrRegion=null),h.context&&(h.context=null),n.execute(),h.hidePausedState(),h.isScanning=!1,Promise.resolve()})},a.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(o){return o.decodedText})},a.prototype.scanFileV2=function(e,n){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ia(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(h,m){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var E=new Image;E.onload=function(){var C=E.width,v=E.height,w=document.getElementById(o.elementId),D=w.clientWidth?w.clientWidth:Ir.DEFAULT_WIDTH,M=Math.max(w.clientHeight?w.clientHeight:v,Ir.FILE_SCAN_MIN_HEIGHT),z=o.computeCanvasDrawConfig(C,v,D,M);if(n){var te=o.createCanvasElement(D,M,"qr-canvas-visible");te.style.display="inline-block",w.appendChild(te);var _e=te.getContext("2d");if(!_e)throw"Unable to get 2d context from canvas";_e.canvas.width=D,_e.canvas.height=M,_e.drawImage(E,0,0,C,v,z.x,z.y,z.width,z.height)}var pe=Ir.FILE_SCAN_HIDDEN_CANVAS_PADDING,ve=Math.max(E.width,z.width),je=Math.max(E.height,z.height),Pe=ve+2*pe,Ce=je+2*pe,Be=o.createCanvasElement(Pe,Ce);w.appendChild(Be);var ct=Be.getContext("2d");if(!ct)throw"Unable to get 2d context from canvas";ct.canvas.width=Pe,ct.canvas.height=Ce,ct.drawImage(E,0,0,C,v,pe,pe,ve,je);try{o.qrcode.decodeRobustlyAsync(Be).then(function(ke){h(o_.createFromQrcodeResult(ke))}).catch(m)}catch(ke){m("QR code parse error, error = ".concat(ke))}},E.onerror=m,E.onabort=m,E.onstalled=m,E.onsuspend=m,E.src=URL.createObjectURL(e)})},a.prototype.clear=function(){this.clearElement()},a.getCameras=function(){return s4.retrieve()},a.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},a.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},a.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},a.prototype.applyVideoConstraints=function(e){if(e){if(!Yx.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},a.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},a.prototype.getSupportedFormats=function(e){var n=[He.QR_CODE,He.AZTEC,He.CODABAR,He.CODE_39,He.CODE_93,He.CODE_128,He.DATA_MATRIX,He.MAXICODE,He.ITF,He.EAN_13,He.EAN_8,He.PDF_417,He.RSS_14,He.RSS_EXPANDED,He.UPC_A,He.UPC_E,He.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],h=0,m=e.formatsToSupport;h<m.length;h++){var E=m[h];UI(E)?o.push(E):this.logger.warn("Invalid format: ".concat(E," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},a.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ia(e))return!0;if(!ia(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ia(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return ia(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},a.prototype.validateQrboxSize=function(e,n,o){var h=this,m=o.qrbox;this.validateQrboxConfig(m);var E=this.toQrdimensions(e,n,m),C=function(w){if(w<Ir.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ir.MIN_QR_BOX_SIZE,"px.")},v=function(w){return w>e&&(h.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=e),w};C(E.width),C(E.height),E.width=v(E.width)},a.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},a.prototype.toQrdimensions=function(e,n,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,n)}catch(h){throw new Error("qrbox config was passed as a function but it failed with unknown error"+h)}return o},a.prototype.setupUi=function(e,n,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,o);var h=ia(o.qrbox)?{width:e,height:n}:o.qrbox;this.validateQrboxConfig(h);var m=this.toQrdimensions(e,n,h);m.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var E=o.isShadedBoxEnabled()&&m.height<=n,C={x:0,y:0,width:e,height:n},v=E?this.getShadedRegionBounds(e,n,m):C,w=this.createCanvasElement(v.width,v.height),D={willReadFrequently:!0},M=w.getContext("2d",D);M.canvas.width=v.width,M.canvas.height=v.height,this.element.append(w),E&&this.possiblyInsertShadingElement(this.element,e,n,m),this.createScannerPausedUiElement(this.element),this.qrRegion=v,this.context=M,this.canvasElement=w},a.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Ll.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},a.prototype.scanContext=function(e,n){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(h){return e(h.text,o_.createFromQrcodeResult(h)),o.possiblyUpdateShaders(!0),!0}).catch(function(h){o.possiblyUpdateShaders(!1);var m=Ll.codeParseError(h);return n(m,zI.createFrom(m)),!1})},a.prototype.foreverScan=function(e,n,o){var h=this;if(this.shouldScan&&this.renderedCamera){var m=this.renderedCamera.getSurface(),E=m.videoWidth/m.clientWidth,C=m.videoHeight/m.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var v=this.qrRegion.width*E,w=this.qrRegion.height*C,D=this.qrRegion.x*E,M=this.qrRegion.y*C;this.context.drawImage(m,D,M,v,w,0,0,this.qrRegion.width,this.qrRegion.height);var z=function(){h.foreverScanTimeout=setTimeout(function(){h.foreverScan(e,n,o)},h.getTimeoutFps(e.fps))};this.scanContext(n,o).then(function(te){!te&&e.disableFlip!==!0?(h.context.translate(h.context.canvas.width,0),h.context.scale(-1,1),h.scanContext(n,o).finally(function(){z()})):z()}).catch(function(te){h.logger.logError("Error happend while scanning context",te),z()})}},a.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",o="deviceId",h={user:!0,environment:!0},m="exact",E=function(_e){if(_e in h)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(_e,"'")},C=Object.keys(e);if(C.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(C.length," keys");var v=Object.keys(e)[0];if(v!==n&&v!==o)throw"Only '".concat(n,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(v===n){var w=e.facingMode;if(typeof w=="string"){if(E(w))return{facingMode:w}}else if(typeof w=="object")if(m in w){if(E(w["".concat(m)]))return{facingMode:{exact:w["".concat(m)]}}}else throw"'facingMode' should be string or object with"+" ".concat(m," as key.");else{var D=typeof w;throw"Invalid type of 'facingMode' = ".concat(D)}}else{var M=e.deviceId;if(typeof M=="string")return{deviceId:M};if(typeof M=="object"){if(m in M)return{deviceId:{exact:M["".concat(m)]}};throw"'deviceId' should be string or object with"+" ".concat(m," as key.")}else{var z=typeof M;throw"Invalid type of 'deviceId' = ".concat(z)}}}var te=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(te)},a.prototype.computeCanvasDrawConfig=function(e,n,o,h){if(e<=o&&n<=h){var m=(o-e)/2,E=(h-n)/2;return{x:m,y:E,width:e,height:n}}else{var C=e,v=n;return e>o&&(n=o/e*n,e=o),n>h&&(e=h/n*e,n=h),this.logger.log("Image downsampled from "+"".concat(C,"X").concat(v)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,o,h)}},a.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},a.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Ir.BORDER_SHADER_MATCH_COLOR:Ir.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},a.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},a.prototype.createCanvasElement=function(e,n,o){var h=e,m=n,E=document.createElement("canvas");return E.style.width="".concat(h,"px"),E.style.height="".concat(m,"px"),E.style.display="none",E.id=ia(o)?"qr-canvas":o,E},a.prototype.getShadedRegionBounds=function(e,n,o){if(o.width>e||o.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(n-o.height)/2,width:o.width,height:o.height}},a.prototype.possiblyInsertShadingElement=function(e,n,o,h){if(!(n-h.width<1||o-h.height<1)){var m=document.createElement("div");m.style.position="absolute";var E=(n-h.width)/2,C=(o-h.height)/2;if(m.style.borderLeft="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderRight="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderTop="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderBottom="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),m.style.boxSizing="border-box",m.style.top="0px",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.id="".concat(Ir.SHADED_REGION_ELEMENT_ID),n-h.width<11||o-h.height<11)this.hasBorderShaders=!1;else{var v=5,w=40;this.insertShaderBorders(m,w,v,-v,null,0,!0),this.insertShaderBorders(m,w,v,-v,null,0,!1),this.insertShaderBorders(m,w,v,null,-v,0,!0),this.insertShaderBorders(m,w,v,null,-v,0,!1),this.insertShaderBorders(m,v,w+v,-v,null,-v,!0),this.insertShaderBorders(m,v,w+v,null,-v,-v,!0),this.insertShaderBorders(m,v,w+v,-v,null,-v,!1),this.insertShaderBorders(m,v,w+v,null,-v,-v,!1),this.hasBorderShaders=!0}e.append(m)}},a.prototype.insertShaderBorders=function(e,n,o,h,m,E,C){var v=document.createElement("div");v.style.position="absolute",v.style.backgroundColor=Ir.BORDER_SHADER_DEFAULT_COLOR,v.style.width="".concat(n,"px"),v.style.height="".concat(o,"px"),h!==null&&(v.style.top="".concat(h,"px")),m!==null&&(v.style.bottom="".concat(m,"px")),C?v.style.left="".concat(E,"px"):v.style.right="".concat(E,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(v),e.appendChild(v)},a.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},a.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},a.prototype.getTimeoutFps=function(e){return 1e3/e},a})(),m_;(function(a){a[a.STATUS_DEFAULT=0]="STATUS_DEFAULT",a[a.STATUS_SUCCESS=1]="STATUS_SUCCESS",a[a.STATUS_WARNING=2]="STATUS_WARNING",a[a.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(m_||(m_={}));const Kx=({onScan:a,onClose:e})=>{const n=tt.useRef(null),[o,h]=tt.useState("");return tt.useEffect(()=>{const m="barcode-scanner",E=async()=>{try{n.current=new h4(m),await n.current.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:150},aspectRatio:1.777},v=>{a(v),C()},()=>{})}catch(v){console.error("Scanner error:",v),h("Ne mogu pristupiti kameri. Provjerite dozvole.")}},C=async()=>{if(n.current)try{await n.current.stop(),n.current.clear()}catch(v){console.error("Error stopping scanner:",v)}};return E(),()=>{C()}},[a]),X.jsx("div",{className:"scanner-overlay",children:X.jsxs("div",{className:"scanner-container",children:[X.jsxs("div",{className:"scanner-header",children:[X.jsx("h3",{children:"Skeniraj barkod"}),X.jsx("button",{className:"close-btn",onClick:e,children:""})]}),o?X.jsx("div",{className:"scanner-error",children:o}):X.jsx("div",{id:"barcode-scanner",className:"scanner-view"}),X.jsx("p",{className:"scanner-hint",children:"Usmjeri kameru na barkod lijeka"})]})})},f4=()=>{const{medicines:a,units:e,addMedicine:n,addStock:o,getMedicineByBarcode:h}=Au(),[m,E]=tt.useState(!1),[C,v]=tt.useState(""),[w,D]=tt.useState(null),[M,z]=tt.useState(!1),[te,_e]=tt.useState(""),[pe,ve]=tt.useState(""),[je,Pe]=tt.useState(""),[Ce,Be]=tt.useState("tableta"),[ct,ke]=tt.useState("10"),[V,j]=tt.useState(""),[B,ee]=tt.useState(""),[G,q]=tt.useState(!1),[F,Ue]=tt.useState(""),[Q,K]=tt.useState(!1),se=ae=>{v(ae),E(!1);const Ie=h(ae);Ie?(D(Ie),_e(Ie.name),Be(Ie.unit),ke(Ie.minQuantity.toString()),z(!1)):(D(null),z(!0),_e(""))},Le=ae=>{D(ae),_e(ae.name),Be(ae.unit),ke(ae.minQuantity.toString()),Ue(ae.name),K(!1),z(!1)},ut=()=>{v(""),D(null),z(!0),_e(""),Ue("")},mt=F.length>=2?a.filter(ae=>ae.name.toLowerCase().includes(F.toLowerCase())):[],J=async ae=>{ae.preventDefault(),j(""),ee(""),q(!0);try{let Ie=w?.id;if(!Ie){if(!te.trim())throw new Error("Unesite naziv lijeka");Ie=await n({name:te.trim(),barcode:C||null,unit:Ce,minQuantity:parseInt(ct)||10})}const De=parseInt(pe);if(!De||De<=0)throw new Error("Unesite koliinu");if(!je)throw new Error("Unesite rok trajanja");await o(Ie,De,je),ee(`Dodato ${De} ${Ce} lijeka "${te}"`),ve(""),Pe(""),v(""),D(null),_e(""),Ue(""),z(!1)}catch(Ie){j(Ie instanceof Error?Ie.message:"Greka pri dodavanju")}finally{q(!1)}};return X.jsxs("div",{className:"stock-entry",children:[X.jsx("h2",{children:" Ulaz lijekova"}),V&&X.jsx("div",{className:"error-message",children:V}),B&&X.jsx("div",{className:"success-message",children:B}),X.jsxs("div",{className:"entry-actions",children:[X.jsx("button",{className:"scan-btn",onClick:()=>E(!0),children:" Skeniraj barkod"}),X.jsx("button",{className:"manual-btn",onClick:ut,children:" Runi unos"})]}),C&&X.jsxs("div",{className:"scanned-barcode",children:[X.jsx("strong",{children:"Barkod:"})," ",C]}),!M&&!w&&X.jsxs("div",{className:"medicine-search",children:[X.jsx("label",{children:"Pretrai postojee lijekove"}),X.jsx("input",{type:"text",placeholder:"Unesite naziv lijeka...",value:F,onChange:ae=>{Ue(ae.target.value),K(!0)},onFocus:()=>K(!0)}),Q&&mt.length>0&&X.jsx("ul",{className:"suggestions-list",children:mt.map(ae=>X.jsxs("li",{onClick:()=>Le(ae),children:[X.jsx("span",{className:"medicine-name",children:ae.name}),X.jsx("span",{className:"medicine-unit",children:ae.unit}),ae.barcode&&X.jsx("span",{className:"medicine-barcode",children:ae.barcode})]},ae.id))})]}),w&&X.jsxs("div",{className:"selected-medicine",children:[X.jsx("h3",{children:w.name}),X.jsxs("p",{children:["Jedinica: ",w.unit]}),w.barcode&&X.jsxs("p",{children:["Barkod: ",w.barcode]}),X.jsx("button",{className:"change-btn",onClick:()=>{D(null),Ue("")},children:"Promijeni"})]}),M&&X.jsxs("div",{className:"new-medicine-form",children:[X.jsx("h3",{children:"Novi lijek"}),X.jsxs("div",{className:"form-group",children:[X.jsx("label",{children:"Naziv lijeka *"}),X.jsx("input",{type:"text",value:te,onChange:ae=>_e(ae.target.value),placeholder:"npr. Paracetamol 500mg",required:!0})]}),X.jsxs("div",{className:"form-row",children:[X.jsxs("div",{className:"form-group",children:[X.jsx("label",{children:"Mjerna jedinica"}),X.jsx("select",{value:Ce,onChange:ae=>Be(ae.target.value),children:e.map(ae=>X.jsx("option",{value:ae.name,children:ae.name},ae.id))})]}),X.jsxs("div",{className:"form-group",children:[X.jsx("label",{children:"Min. koliina"}),X.jsx("input",{type:"number",value:ct,onChange:ae=>ke(ae.target.value),min:"0"})]})]})]}),(w||M)&&X.jsxs("form",{onSubmit:J,className:"stock-form",children:[X.jsx("h3",{children:"Dodaj na stanje"}),X.jsxs("div",{className:"form-row",children:[X.jsxs("div",{className:"form-group",children:[X.jsx("label",{children:"Koliina *"}),X.jsx("input",{type:"number",value:pe,onChange:ae=>ve(ae.target.value),min:"1",placeholder:"0",required:!0})]}),X.jsxs("div",{className:"form-group",children:[X.jsx("label",{children:"Rok trajanja *"}),X.jsx("input",{type:"date",value:je,onChange:ae=>Pe(ae.target.value),required:!0})]})]}),X.jsx("button",{type:"submit",className:"submit-btn",disabled:G,children:G?"Dodavanje...":" Dodaj na stanje"})]}),m&&X.jsx(Kx,{onScan:se,onClose:()=>E(!1)})]})},d4=()=>{const{medicines:a,stockBatches:e,getMedicineByBarcode:n,removeStock:o}=Au(),[h,m]=tt.useState(!1),[E,C]=tt.useState(null),[v,w]=tt.useState([]),[D,M]=tt.useState(null),[z,te]=tt.useState(""),[_e,pe]=tt.useState(""),[ve,je]=tt.useState(""),[Pe,Ce]=tt.useState(!1),[Be,ct]=tt.useState(""),[ke,V]=tt.useState(!1),j=Q=>{C(Q);const K=e.filter(se=>se.medicineId===Q.id&&se.quantity>0).sort((se,Le)=>se.expiryDate.localeCompare(Le.expiryDate));w(K),M(null),te(""),V(!1),ct(Q.name)},B=Q=>{m(!1),pe("");const K=n(Q);K?j(K):pe(`Lijek sa barkodom "${Q}" nije pronaen u bazi`)},ee=Be.length>=2?a.filter(Q=>Q.name.toLowerCase().includes(Be.toLowerCase())):[],G=async Q=>{if(Q.preventDefault(),pe(""),je(""),!D){pe("Izaberite seriju lijeka");return}const K=parseInt(z);if(!K||K<=0){pe("Unesite koliinu");return}if(K>D.quantity){pe(`Dostupno samo ${D.quantity} ${E?.unit||"kom"}`);return}Ce(!0);try{await o(D.id,K),je(`Skinuto ${K} ${E?.unit||"kom"} lijeka "${E?.name}"`),C(null),w([]),M(null),te(""),ct("")}catch(se){pe(se instanceof Error?se.message:"Greka pri skidanju sa stanja")}finally{Ce(!1)}},q=Q=>{const[K,se,Le]=Q.split("-");return`${Le}.${se}.${K}`},F=Q=>Q<new Date().toISOString().split("T")[0],Ue=Q=>{const K=new Date;return K.setDate(K.getDate()+30),Q<=K.toISOString().split("T")[0]&&!F(Q)};return X.jsxs("div",{className:"stock-exit",children:[X.jsx("h2",{children:" Izlaz lijekova"}),_e&&X.jsx("div",{className:"error-message",children:_e}),ve&&X.jsx("div",{className:"success-message",children:ve}),X.jsx("div",{className:"exit-actions",children:X.jsx("button",{className:"scan-btn",onClick:()=>m(!0),children:" Skeniraj barkod"})}),!E&&X.jsxs("div",{className:"medicine-search",children:[X.jsx("label",{children:"Pretrai lijekove"}),X.jsx("input",{type:"text",placeholder:"Unesite naziv lijeka...",value:Be,onChange:Q=>{ct(Q.target.value),V(!0)},onFocus:()=>V(!0)}),ke&&ee.length>0&&X.jsx("ul",{className:"suggestions-list",children:ee.map(Q=>{const K=e.filter(se=>se.medicineId===Q.id).reduce((se,Le)=>se+Le.quantity,0);return X.jsxs("li",{onClick:()=>j(Q),children:[X.jsx("span",{className:"medicine-name",children:Q.name}),X.jsxs("span",{className:"medicine-qty",children:["Na stanju: ",K," ",Q.unit]})]},Q.id)})})]}),E&&X.jsxs("div",{className:"selected-medicine",children:[X.jsx("h3",{children:E.name}),X.jsx("button",{className:"change-btn",onClick:()=>{C(null),w([]),M(null),ct("")},children:"Promijeni"})]}),E&&v.length===0&&X.jsx("div",{className:"no-stock",children:"Nema ovog lijeka na stanju"}),v.length>0&&X.jsxs("div",{className:"batch-selection",children:[X.jsx("h3",{children:"Izaberi seriju"}),X.jsx("p",{className:"hint",children:"Preporueno: uzmi lijek sa najbliim rokom isteka"}),X.jsx("div",{className:"batch-list",children:v.map((Q,K)=>X.jsxs("div",{className:`batch-item ${D?.id===Q.id?"selected":""} ${F(Q.expiryDate)?"expired":""} ${Ue(Q.expiryDate)?"expiring":""}`,onClick:()=>M(Q),children:[X.jsxs("div",{className:"batch-info",children:[X.jsxs("span",{className:"batch-qty",children:[Q.quantity," ",E?.unit]}),X.jsxs("span",{className:"batch-expiry",children:["Rok: ",q(Q.expiryDate),F(Q.expiryDate)&&X.jsx("span",{className:"badge expired",children:"ISTEKAO"}),Ue(Q.expiryDate)&&X.jsx("span",{className:"badge warning",children:"ISTIE USKORO"})]})]}),K===0&&X.jsx("span",{className:"recommended",children:"Preporueno (FIFO)"})]},Q.id))})]}),D&&X.jsxs("form",{onSubmit:G,className:"exit-form",children:[X.jsxs("div",{className:"form-group",children:[X.jsxs("label",{children:["Koliina za skidanje (dostupno: ",D.quantity,")"]}),X.jsx("input",{type:"number",value:z,onChange:Q=>te(Q.target.value),min:"1",max:D.quantity,placeholder:"0",required:!0})]}),X.jsx("button",{type:"submit",className:"submit-btn",disabled:Pe,children:Pe?"Skidanje...":" Skini sa stanja"})]}),h&&X.jsx(Kx,{onScan:B,onClose:()=>m(!1)})]})},g4=()=>{const{getStockSummary:a,deleteMedicine:e}=Au(),[n,o]=tt.useState(""),[h,m]=tt.useState(null),E=a(),C=n?E.filter(z=>z.medicineName.toLowerCase().includes(n.toLowerCase())||z.barcode&&z.barcode.includes(n)):E,v=z=>{const[te,_e,pe]=z.split("-");return`${pe}.${_e}.${te}`},w=z=>z<new Date().toISOString().split("T")[0],D=z=>{const te=new Date;return te.setDate(te.getDate()+30),z<=te.toISOString().split("T")[0]&&!w(z)},M=async(z,te)=>{if(window.confirm(`Da li ste sigurni da elite obrisati "${te}" iz baze?`))try{await e(z)}catch{alert("Greka pri brisanju")}};return X.jsxs("div",{className:"inventory",children:[X.jsx("h2",{children:" Magacin"}),X.jsx("div",{className:"inventory-search",children:X.jsx("input",{type:"text",placeholder:"Pretrai po nazivu ili barkodu...",value:n,onChange:z=>o(z.target.value)})}),X.jsxs("div",{className:"inventory-stats",children:[X.jsxs("div",{className:"stat",children:[X.jsx("span",{className:"stat-value",children:E.length}),X.jsx("span",{className:"stat-label",children:"Ukupno lijekova"})]}),X.jsxs("div",{className:"stat warning",children:[X.jsx("span",{className:"stat-value",children:E.filter(z=>z.isLowStock).length}),X.jsx("span",{className:"stat-label",children:"Niska zaliha"})]}),X.jsxs("div",{className:"stat danger",children:[X.jsx("span",{className:"stat-value",children:E.filter(z=>z.hasExpired).length}),X.jsx("span",{className:"stat-label",children:"Istekli"})]})]}),C.length===0?X.jsx("div",{className:"empty-state",children:n?"Nema rezultata pretrage":"Magacin je prazan"}):X.jsx("div",{className:"inventory-list",children:C.map(z=>X.jsxs("div",{className:`inventory-item ${z.isLowStock?"low-stock":""} ${z.hasExpired?"has-expired":""}`,children:[X.jsxs("div",{className:"item-header",onClick:()=>m(h===z.medicineId?null:z.medicineId),children:[X.jsxs("div",{className:"item-info",children:[X.jsx("h3",{children:z.medicineName}),X.jsxs("div",{className:"item-meta",children:[z.barcode&&X.jsx("span",{className:"barcode",children:z.barcode}),X.jsx("span",{className:"unit",children:z.unit})]})]}),X.jsxs("div",{className:"item-quantity",children:[X.jsx("span",{className:"qty",children:z.totalQuantity}),z.isLowStock&&X.jsx("span",{className:"badge warning",children:"NISKA ZALIHA"}),z.hasExpired&&X.jsx("span",{className:"badge danger",children:"ISTEKAO"}),z.hasExpiringSoon&&!z.hasExpired&&X.jsx("span",{className:"badge warning",children:"ISTIE"})]}),X.jsx("span",{className:"expand-icon",children:h===z.medicineId?"":""})]}),h===z.medicineId&&X.jsxs("div",{className:"item-details",children:[X.jsxs("div",{className:"detail-row",children:[X.jsx("span",{children:"Minimalna koliina:"}),X.jsxs("span",{children:[z.minQuantity," ",z.unit]})]}),z.batches.length>0&&X.jsxs("div",{className:"batches",children:[X.jsx("h4",{children:"Serije na stanju:"}),X.jsxs("table",{children:[X.jsx("thead",{children:X.jsxs("tr",{children:[X.jsx("th",{children:"Koliina"}),X.jsx("th",{children:"Rok trajanja"}),X.jsx("th",{children:"Datum ulaza"}),X.jsx("th",{children:"Status"})]})}),X.jsx("tbody",{children:z.batches.map(te=>X.jsxs("tr",{className:w(te.expiryDate)?"expired":D(te.expiryDate)?"expiring":"",children:[X.jsxs("td",{children:[te.quantity," ",z.unit]}),X.jsx("td",{children:v(te.expiryDate)}),X.jsx("td",{children:v(te.entryDate)}),X.jsxs("td",{children:[w(te.expiryDate)&&X.jsx("span",{className:"status expired",children:"Istekao"}),D(te.expiryDate)&&X.jsx("span",{className:"status warning",children:"Istie uskoro"}),!w(te.expiryDate)&&!D(te.expiryDate)&&X.jsx("span",{className:"status ok",children:"OK"})]})]},te.id))})]})]}),X.jsx("div",{className:"item-actions",children:X.jsx("button",{className:"delete-btn",onClick:()=>M(z.medicineId,z.medicineName),children:" Obrii lijek"})})]})]},z.medicineId))})]})},m4=()=>{const{getLowStockItems:a,getExpiringItems:e,getExpiredItems:n}=Au(),o=a(),h=e(30),m=n(),E=v=>{const[w,D,M]=v.split("-");return`${M}.${D}.${w}`},C=o.length+h.length+m.length;return X.jsxs("div",{className:"alerts",children:[X.jsx("h2",{children:" Upozorenja"}),C===0?X.jsxs("div",{className:"no-alerts",children:[X.jsx("span",{className:"icon",children:""}),X.jsx("p",{children:"Nema aktivnih upozorenja"})]}):X.jsxs("div",{className:"alerts-container",children:[m.length>0&&X.jsxs("div",{className:"alert-section danger",children:[X.jsxs("h3",{children:[" Istekli lijekovi (",m.length,")"]}),X.jsx("div",{className:"alert-list",children:m.map(v=>X.jsx("div",{className:"alert-item",children:X.jsxs("div",{className:"alert-info",children:[X.jsx("strong",{children:v.medicineName}),X.jsx("div",{className:"batches",children:v.batches.filter(w=>w.expiryDate<new Date().toISOString().split("T")[0]).map(w=>X.jsxs("span",{className:"batch",children:[w.quantity," ",v.unit," - istekao ",E(w.expiryDate)]},w.id))})]})},v.medicineId))})]}),h.length>0&&X.jsxs("div",{className:"alert-section warning",children:[X.jsxs("h3",{children:[" Istie uskoro (",h.length,")"]}),X.jsx("p",{className:"section-desc",children:"Lijekovi koji istiu u narednih 30 dana"}),X.jsx("div",{className:"alert-list",children:h.map(v=>X.jsx("div",{className:"alert-item",children:X.jsxs("div",{className:"alert-info",children:[X.jsx("strong",{children:v.medicineName}),X.jsx("div",{className:"batches",children:v.batches.filter(w=>{const D=new Date;D.setDate(D.getDate()+30);const M=new Date().toISOString().split("T")[0];return w.expiryDate<=D.toISOString().split("T")[0]&&w.expiryDate>=M}).map(w=>X.jsxs("span",{className:"batch",children:[w.quantity," ",v.unit," - istie ",E(w.expiryDate)]},w.id))})]})},v.medicineId))})]}),o.length>0&&X.jsxs("div",{className:"alert-section low-stock",children:[X.jsxs("h3",{children:[" Niska zaliha (",o.length,")"]}),X.jsx("p",{className:"section-desc",children:"Lijekovi ispod minimalne koliine"}),X.jsx("div",{className:"alert-list",children:o.map(v=>X.jsxs("div",{className:"alert-item",children:[X.jsxs("div",{className:"alert-info",children:[X.jsx("strong",{children:v.medicineName}),X.jsxs("span",{className:"stock-info",children:["Na stanju: ",v.totalQuantity," ",v.unit," (min: ",v.minQuantity,")"]})]}),X.jsx("div",{className:"alert-action",children:X.jsxs("span",{className:"needed",children:["Potrebno naruiti: ",v.minQuantity-v.totalQuantity," ",v.unit]})})]},v.medicineId))})]})]})]})},p4=()=>{const{units:a,addUnit:e,deleteUnit:n}=Au(),[o,h]=tt.useState(""),[m,E]=tt.useState(""),[C,v]=tt.useState(""),w=async M=>{if(M.preventDefault(),E(""),v(""),!o.trim()){E("Unesite naziv jedinice");return}try{await e(o.trim()),v(`Dodana jedinica "${o}"`),h("")}catch(z){E(z instanceof Error?z.message:"Greka pri dodavanju")}},D=async(M,z)=>{if(window.confirm(`Da li ste sigurni da elite obrisati jedinicu "${z}"?`))try{await n(M),v(`Obrisana jedinica "${z}"`)}catch{E("Greka pri brisanju")}};return X.jsxs("div",{className:"settings",children:[X.jsx("h2",{children:" Postavke"}),X.jsxs("div",{className:"settings-section",children:[X.jsx("h3",{children:"Mjerne jedinice"}),m&&X.jsx("div",{className:"error-message",children:m}),C&&X.jsx("div",{className:"success-message",children:C}),X.jsxs("form",{onSubmit:w,className:"add-unit-form",children:[X.jsx("input",{type:"text",value:o,onChange:M=>h(M.target.value),placeholder:"Nova mjerna jedinica..."}),X.jsx("button",{type:"submit",children:"+ Dodaj"})]}),X.jsx("div",{className:"units-list",children:a.map(M=>X.jsxs("div",{className:"unit-item",children:[X.jsx("span",{children:M.name}),X.jsx("button",{className:"delete-btn",onClick:()=>D(M.id,M.name),children:""})]},M.id))})]})]})},y4=()=>{const{currentUser:a,loading:e}=Vf(),[n,o]=tt.useState("entry");return e?X.jsxs("div",{className:"loading-screen",children:[X.jsx("div",{className:"spinner"}),X.jsx("p",{children:"Uitavanje..."})]}):a?X.jsx(kI,{children:X.jsxs("div",{className:"app",children:[X.jsx(VI,{activeView:n,onViewChange:o}),X.jsxs("main",{className:"main-content",children:[n==="entry"&&X.jsx(f4,{}),n==="exit"&&X.jsx(d4,{}),n==="inventory"&&X.jsx(g4,{}),n==="alerts"&&X.jsx(m4,{}),n==="settings"&&X.jsx(p4,{})]})]})}):X.jsx(BI,{})},_4=()=>X.jsx(PI,{children:X.jsx(y4,{})});Cw.createRoot(document.getElementById("root")).render(X.jsx(tt.StrictMode,{children:X.jsx(_4,{})}));
